!function(e){"use strict";var t,n,r;!function(e){const t=[],n="__jsObjectId",r="__dotNetObject",o="__byte[]",a="__dotNetStream",i="__jsStreamReferenceLength";let s,c,l;class u{constructor(e){this._jsObject=e,this._cachedHandlers=new Map}resolveInvocationHandler(e,t){var n;const r=null===(n=this._cachedHandlers.get(e))||void 0===n?void 0:n[t];if(r)return r;const[o,a]=I(this._jsObject,e),i=function(e,t,n,r){switch(n){case l.FunctionCall:const n=e[t];if(n instanceof Function)return n.bind(e);throw new Error(`The value '${r}' is not a function.`);case l.ConstructorCall:const o=e[t];if(o instanceof Function){const t=o.bind(e);return(...e)=>new t(...e)}throw new Error(`The value '${r}' is not a function.`);case l.GetValue:if(!function(e,t){if(!(t in e))return!1;for(;void 0!==e;){const n=Object.getOwnPropertyDescriptor(e,t);if(n)return!!n.hasOwnProperty("value")||n.hasOwnProperty("get")&&"function"==typeof n.get;e=Object.getPrototypeOf(e)}return!1}(e,t))throw new Error(`The property '${r}' is not defined or is not readable.`);return()=>e[t];case l.SetValue:if(!function(e,t){if(!(t in e))return Object.isExtensible(e);for(;void 0!==e;){const n=Object.getOwnPropertyDescriptor(e,t);if(n)return!(!n.hasOwnProperty("value")||!n.writable)||n.hasOwnProperty("set")&&"function"==typeof n.set;e=Object.getPrototypeOf(e)}return!1}(e,t))throw new Error(`The property '${r}' is not writable.`);return(...n)=>e[t]=n[0]}}(o,a,t,e);return this.addHandlerToCache(e,i,t),i}getWrappedObject(){return this._jsObject}addHandlerToCache(e,t,n){const r=this._cachedHandlers.get(e);r?r[n]=t:this._cachedHandlers.set(e,{[n]:t})}}!function(e){e[e.FunctionCall=1]="FunctionCall",e[e.ConstructorCall=2]="ConstructorCall",e[e.GetValue=3]="GetValue",e[e.SetValue=4]="SetValue"}(l=e.JSCallType||(e.JSCallType={}));const d=0,h={[d]:new u(window)};h[0]._cachedHandlers.set("import",{[l.FunctionCall]:e=>("string"==typeof e&&e.startsWith("./")&&(e=new URL(e.substring(2),document.baseURI).toString()),import(e))});let f,p=1;function m(e){t.push(e)}function v(e){if(null==e)return{[n]:-1};if(e&&("object"==typeof e||e instanceof Function)){h[p]=new u(e);const t={[n]:p};return p++,t}throw new Error(`Cannot create a JSObjectReference from the value '${e}'.`)}function b(e){let t=-1;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Blob)t=e.size;else{if(!(e.buffer instanceof ArrayBuffer))throw new Error("Supplied value is not a typed array or blob.");if(void 0===e.byteLength)throw new Error(`Cannot create a JSStreamReference from the value '${e}' as it doesn't have a byteLength.`);t=e.byteLength}const r={[i]:t};try{const t=v(e);r[n]=t[n]}catch(t){throw new Error(`Cannot create a JSStreamReference from the value '${e}'.`)}return r}function g(e,n){c=e;const r=n?JSON.parse(n,((e,n)=>t.reduce(((t,n)=>n(e,t)),n))):null;return c=void 0,r}function y(){if(void 0===s)throw new Error("No call dispatcher has been set.");if(null===s)throw new Error("There are multiple .NET runtimes present, so a default dispatcher could not be resolved. Use DotNetObject to invoke .NET instance methods.");return s}e.attachDispatcher=function(e){const t=new w(e);return void 0===s?s=t:s&&(s=null),t},e.attachReviver=m,e.invokeMethod=function(e,t,...n){return y().invokeDotNetStaticMethod(e,t,...n)},e.invokeMethodAsync=function(e,t,...n){return y().invokeDotNetStaticMethodAsync(e,t,...n)},e.createJSObjectReference=v,e.createJSStreamReference=b,e.disposeJSObjectReference=function(e){const t=e&&e[n];"number"==typeof t&&-1!==t&&C(t)},function(e){e[e.Default=0]="Default",e[e.JSObjectReference=1]="JSObjectReference",e[e.JSStreamReference=2]="JSStreamReference",e[e.JSVoidResult=3]="JSVoidResult"}(f=e.JSCallResultType||(e.JSCallResultType={}));class w{constructor(e){this._dotNetCallDispatcher=e,this._byteArraysToBeRevived=new Map,this._pendingDotNetToJSStreams=new Map,this._pendingAsyncCalls={},this._nextAsyncCallId=1}getDotNetCallDispatcher(){return this._dotNetCallDispatcher}invokeJSFromDotNet(e,t,n,r,o){const a=R(this.processJSCall(r,e,o,t),n);return null==a?null:k(this,a)}async beginInvokeJSFromDotNet(e,t,n,r,o,a){try{const i=this.processJSCall(o,t,a,n);if(e){const t=k(this,[e,!0,R(await i,r)]);this._dotNetCallDispatcher.endInvokeJSFromDotNet(e,!0,t)}}catch(t){if(e){const n=JSON.stringify([e,!1,E(t)]);this._dotNetCallDispatcher.endInvokeJSFromDotNet(e,!1,n)}}}processJSCall(e,t,n,r){var o;const a=null!==(o=g(this,r))&&void 0!==o?o:[];return S(t,e,n)(...a)}endInvokeDotNetFromJS(e,t,n){const r=t?g(this,n):new Error(n);this.completePendingCall(parseInt(e,10),t,r)}invokeDotNetStaticMethod(e,t,...n){return this.invokeDotNetMethod(e,t,null,n)}invokeDotNetStaticMethodAsync(e,t,...n){return this.invokeDotNetMethodAsync(e,t,null,n)}invokeDotNetMethod(e,t,n,r){if(this._dotNetCallDispatcher.invokeDotNetFromJS){const o=k(this,r),a=this._dotNetCallDispatcher.invokeDotNetFromJS(e,t,n,o);return a?g(this,a):null}throw new Error("The current dispatcher does not support synchronous calls from JS to .NET. Use invokeDotNetMethodAsync instead.")}invokeDotNetMethodAsync(e,t,n,r){if(e&&n)throw new Error(`For instance method calls, assemblyName should be null. Received '${e}'.`);const o=this._nextAsyncCallId++,a=new Promise(((e,t)=>{this._pendingAsyncCalls[o]={resolve:e,reject:t}}));try{const a=k(this,r);this._dotNetCallDispatcher.beginInvokeDotNetFromJS(o,e,t,n,a)}catch(e){this.completePendingCall(o,!1,e)}return a}receiveByteArray(e,t){this._byteArraysToBeRevived.set(e,t)}processByteArray(e){const t=this._byteArraysToBeRevived.get(e);return t?(this._byteArraysToBeRevived.delete(e),t):null}supplyDotNetStream(e,t){if(this._pendingDotNetToJSStreams.has(e)){const n=this._pendingDotNetToJSStreams.get(e);this._pendingDotNetToJSStreams.delete(e),n.resolve(t)}else{const n=new N;n.resolve(t),this._pendingDotNetToJSStreams.set(e,n)}}getDotNetStreamPromise(e){let t;if(this._pendingDotNetToJSStreams.has(e))t=this._pendingDotNetToJSStreams.get(e).streamPromise,this._pendingDotNetToJSStreams.delete(e);else{const n=new N;this._pendingDotNetToJSStreams.set(e,n),t=n.streamPromise}return t}completePendingCall(e,t,n){if(!this._pendingAsyncCalls.hasOwnProperty(e))throw new Error(`There is no pending async call with ID ${e}.`);const r=this._pendingAsyncCalls[e];delete this._pendingAsyncCalls[e],t?r.resolve(n):r.reject(n)}}function E(e){return e instanceof Error?`${e.message}\n${e.stack}`:e?e.toString():"null"}function S(e,t,n){const r=h[t];if(r)return r.resolveInvocationHandler(e,null!=n?n:l.FunctionCall);throw new Error(`JS object instance with ID ${t} does not exist (has it been disposed?).`)}function C(e){delete h[e]}function I(e,t){const n=t.split(".");let r=e;for(let e=0;e<n.length-1;e++){const o=n[e];if(!r||"object"!=typeof r||!(o in r))throw new Error(`Could not find '${t}' ('${o}' was undefined).`);r=r[o]}return[r,n[n.length-1]]}e.findJSFunction=S,e.disposeJSObjectReferenceById=C,e.findObjectMember=I;class D{constructor(e,t){this._id=e,this._callDispatcher=t}invokeMethod(e,...t){return this._callDispatcher.invokeDotNetMethod(null,e,this._id,t)}invokeMethodAsync(e,...t){return this._callDispatcher.invokeDotNetMethodAsync(null,e,this._id,t)}dispose(){this._callDispatcher.invokeDotNetMethodAsync(null,"__Dispose",this._id,null).catch((e=>console.error(e)))}serializeAsArg(){return{[r]:this._id}}}e.DotNetObject=D,m((function(e,t){if(t&&"object"==typeof t){if(t.hasOwnProperty(r))return new D(t[r],c);if(t.hasOwnProperty(n)){const e=t[n],r=h[e];if(r)return r.getWrappedObject();throw new Error(`JS object instance with Id '${e}' does not exist. It may have been disposed.`)}if(t.hasOwnProperty(o)){const e=t[o],n=c.processByteArray(e);if(void 0===n)throw new Error(`Byte array index '${e}' does not exist.`);return n}if(t.hasOwnProperty(a)){const e=t[a],n=c.getDotNetStreamPromise(e);return new A(n)}}return t}));class A{constructor(e){this._streamPromise=e}stream(){return this._streamPromise}async arrayBuffer(){return new Response(await this.stream()).arrayBuffer()}}class N{constructor(){this.streamPromise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}function R(e,t){switch(t){case f.Default:return e;case f.JSObjectReference:return v(e);case f.JSStreamReference:return b(e);case f.JSVoidResult:return null;default:throw new Error(`Invalid JS call result type '${t}'.`)}}let T=0;function k(e,t){T=0,c=e;const n=JSON.stringify(t,O);return c=void 0,n}function O(e,t){if(t instanceof D)return t.serializeAsArg();if(t instanceof Uint8Array){c.getDotNetCallDispatcher().sendByteArray(T,t);const e={[o]:T};return T++,e}return t}}(t||(t={})),function(e){e[e.prependFrame=1]="prependFrame",e[e.removeFrame=2]="removeFrame",e[e.setAttribute=3]="setAttribute",e[e.removeAttribute=4]="removeAttribute",e[e.updateText=5]="updateText",e[e.stepIn=6]="stepIn",e[e.stepOut=7]="stepOut",e[e.updateMarkup=8]="updateMarkup",e[e.permutationListEntry=9]="permutationListEntry",e[e.permutationListEnd=10]="permutationListEnd"}(n||(n={})),function(e){e[e.element=1]="element",e[e.text=2]="text",e[e.attribute=3]="attribute",e[e.component=4]="component",e[e.region=5]="region",e[e.elementReferenceCapture=6]="elementReferenceCapture",e[e.markup=8]="markup",e[e.namedEvent=10]="namedEvent"}(r||(r={}));class o{constructor(e,t){this.componentId=e,this.fieldValue=t}static fromEvent(e,t){const n=t.target;if(n instanceof Element){const t=function(e){return e instanceof HTMLInputElement?e.type&&"checkbox"===e.type.toLowerCase()?{value:e.checked}:{value:e.value}:e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement?{value:e.value}:null}(n);if(t)return new o(e,t.value)}return null}}const a=new Map,i=new Map,s=[];function c(e){return a.get(e)}function l(e){const t=a.get(e);return(null==t?void 0:t.browserEventName)||e}function u(e,t){e.forEach((e=>a.set(e,t)))}function d(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];t.push({identifier:r.identifier,clientX:r.clientX,clientY:r.clientY,screenX:r.screenX,screenY:r.screenY,pageX:r.pageX,pageY:r.pageY})}return t}function h(e){return{detail:e.detail,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,pageX:e.pageX,pageY:e.pageY,movementX:e.movementX,movementY:e.movementY,button:e.button,buttons:e.buttons,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,type:e.type}}u(["input","change"],{createEventArgs:function(e){const t=e.target;if(function(e){return-1!==f.indexOf(e.getAttribute("type"))}(t)){const e=function(e){const t=e.value,n=e.type;switch(n){case"date":case"month":case"week":return t;case"datetime-local":return 16===t.length?t+":00":t;case"time":return 5===t.length?t+":00":t}throw new Error(`Invalid element type '${n}'.`)}(t);return{value:e}}if(function(e){return e instanceof HTMLSelectElement&&"select-multiple"===e.type}(t)){const e=t;return{value:Array.from(e.options).filter((e=>e.selected)).map((e=>e.value))}}{const e=function(e){return!!e&&"INPUT"===e.tagName&&"checkbox"===e.getAttribute("type")}(t);return{value:e?!!t.checked:t.value}}}}),u(["copy","cut","paste"],{createEventArgs:e=>({type:e.type})}),u(["drag","dragend","dragenter","dragleave","dragover","dragstart","drop"],{createEventArgs:e=>{return{...h(t=e),dataTransfer:t.dataTransfer?{dropEffect:t.dataTransfer.dropEffect,effectAllowed:t.dataTransfer.effectAllowed,files:Array.from(t.dataTransfer.files).map((e=>e.name)),items:Array.from(t.dataTransfer.items).map((e=>({kind:e.kind,type:e.type}))),types:t.dataTransfer.types}:null};var t}}),u(["focus","blur","focusin","focusout"],{createEventArgs:e=>({type:e.type})}),u(["keydown","keyup","keypress"],{createEventArgs:e=>{return{key:(t=e).key,code:t.code,location:t.location,repeat:t.repeat,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,type:t.type,isComposing:t.isComposing};var t}}),u(["contextmenu","click","mouseover","mouseout","mousemove","mousedown","mouseup","mouseleave","mouseenter","dblclick"],{createEventArgs:e=>h(e)}),u(["error"],{createEventArgs:e=>{return{message:(t=e).message,filename:t.filename,lineno:t.lineno,colno:t.colno,type:t.type};var t}}),u(["loadstart","timeout","abort","load","loadend","progress"],{createEventArgs:e=>{return{lengthComputable:(t=e).lengthComputable,loaded:t.loaded,total:t.total,type:t.type};var t}}),u(["touchcancel","touchend","touchmove","touchenter","touchleave","touchstart"],{createEventArgs:e=>{return{detail:(t=e).detail,touches:d(t.touches),targetTouches:d(t.targetTouches),changedTouches:d(t.changedTouches),ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,type:t.type};var t}}),u(["gotpointercapture","lostpointercapture","pointercancel","pointerdown","pointerenter","pointerleave","pointermove","pointerout","pointerover","pointerup"],{createEventArgs:e=>{return{...h(t=e),pointerId:t.pointerId,width:t.width,height:t.height,pressure:t.pressure,tiltX:t.tiltX,tiltY:t.tiltY,pointerType:t.pointerType,isPrimary:t.isPrimary};var t}}),u(["wheel","mousewheel"],{createEventArgs:e=>{return{...h(t=e),deltaX:t.deltaX,deltaY:t.deltaY,deltaZ:t.deltaZ,deltaMode:t.deltaMode};var t}}),u(["cancel","close","toggle"],{createEventArgs:()=>({})});const f=["date","datetime-local","month","time","week"],p=new Map;let m,v,b=0;const g={async add(e,t,n){if(!n)throw new Error("initialParameters must be an object, even if empty.");const r="__bl-dynamic-root:"+(++b).toString();p.set(r,e);const o=await E().invokeMethodAsync("AddRootComponent",t,r),a=new w(o,v[t]);return await a.setParameters(n),a}};class y{invoke(e){return this._callback(e)}setCallback(e){this._selfJSObjectReference||(this._selfJSObjectReference=t.createJSObjectReference(this)),this._callback=e}getJSObjectReference(){return this._selfJSObjectReference}dispose(){this._selfJSObjectReference&&t.disposeJSObjectReference(this._selfJSObjectReference)}}class w{constructor(e,t){this._jsEventCallbackWrappers=new Map,this._componentId=e;for(const e of t)"eventcallback"===e.type&&this._jsEventCallbackWrappers.set(e.name.toLowerCase(),new y)}setParameters(e){const t={},n=Object.entries(e||{}),r=n.length;for(const[e,r]of n){const n=this._jsEventCallbackWrappers.get(e.toLowerCase());n&&r?(n.setCallback(r),t[e]=n.getJSObjectReference()):t[e]=r}return E().invokeMethodAsync("SetRootComponentParameters",this._componentId,r,t)}async dispose(){if(null!==this._componentId){await E().invokeMethodAsync("RemoveRootComponent",this._componentId),this._componentId=null;for(const e of this._jsEventCallbackWrappers.values())e.dispose()}}}function E(){if(!m)throw new Error("Dynamic root components have not been enabled in this application.");return m}const S=new Map,C=[],I=new Map;function D(e){return S.has(e)}function A(e,t,n){return R(e,t.eventHandlerId,(()=>N(e).invokeMethodAsync("DispatchEventAsync",t,n)))}function N(e){const t=S.get(e);if(!t)throw new Error(`No interop methods are registered for renderer ${e}`);return t}let R=(e,t,n)=>n();const T=F(["abort","blur","cancel","canplay","canplaythrough","change","close","cuechange","durationchange","emptied","ended","error","focus","load","loadeddata","loadedmetadata","loadend","loadstart","mouseenter","mouseleave","pointerenter","pointerleave","pause","play","playing","progress","ratechange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeupdate","toggle","unload","volumechange","waiting","DOMNodeInsertedIntoDocument","DOMNodeRemovedFromDocument"]),k={submit:!0},O=F(["click","dblclick","mousedown","mousemove","mouseup"]);class _{constructor(e){this.browserRendererId=e,this.afterClickCallbacks=[];const t=++_.nextEventDelegatorId;this.eventsCollectionKey=`_blazorEvents_${t}`,this.eventInfoStore=new L(this.onGlobalEvent.bind(this))}setListener(e,t,n,r){const o=this.getEventHandlerInfosForElement(e,!0),a=o.getHandler(t);if(a)this.eventInfoStore.update(a.eventHandlerId,n);else{const a={element:e,eventName:t,eventHandlerId:n,renderingComponentId:r};this.eventInfoStore.add(a),o.setHandler(t,a)}}getHandler(e){return this.eventInfoStore.get(e)}removeListener(e){const t=this.eventInfoStore.remove(e);if(t){const e=t.element,n=this.getEventHandlerInfosForElement(e,!1);n&&n.removeHandler(t.eventName)}}removeListenersForElement(e){const t=this.getEventHandlerInfosForElement(e,!1);if(t){for(const e of t.enumerateHandlers())this.eventInfoStore.remove(e.eventHandlerId);delete e[this.eventsCollectionKey]}}notifyAfterClick(e){this.afterClickCallbacks.push(e),this.eventInfoStore.addGlobalListener("click")}setStopPropagation(e,t,n){const r=this.getEventHandlerInfosForElement(e,!0),o=r.stopPropagation(t);r.stopPropagation(t,n),!o&&n?this.eventInfoStore.addGlobalListener(t):o&&!n&&this.eventInfoStore.decrementCountByEventName(t)}setPreventDefault(e,t,n){const r=this.getEventHandlerInfosForElement(e,!0),o=r.preventDefault(t);r.preventDefault(t,n),!o&&n?this.eventInfoStore.addActiveGlobalListener(t):o&&!n&&this.eventInfoStore.decrementCountByEventName(t)}onGlobalEvent(e){if(!(e.target instanceof Element))return;if(!D(this.browserRendererId))return;this.dispatchGlobalEventToAllElements(e.type,e);const t=(n=e.type,i.get(n));var n;t&&t.forEach((t=>this.dispatchGlobalEventToAllElements(t,e))),"click"===e.type&&this.afterClickCallbacks.forEach((t=>t(e)))}dispatchGlobalEventToAllElements(e,t){const n=t.composedPath();let r=n.shift(),a=null,i=!1;const s=Object.prototype.hasOwnProperty.call(T,e);let l=!1;for(;r;){const h=r,f=this.getEventHandlerInfosForElement(h,!1);if(f){const n=f.getHandler(e);if(n&&(u=h,d=t.type,!((u instanceof HTMLButtonElement||u instanceof HTMLInputElement||u instanceof HTMLTextAreaElement||u instanceof HTMLSelectElement)&&Object.prototype.hasOwnProperty.call(O,d)&&u.disabled))){if(!i){const n=c(e);a=(null==n?void 0:n.createEventArgs)?n.createEventArgs(t):{},i=!0}Object.prototype.hasOwnProperty.call(k,t.type)&&t.preventDefault(),A(this.browserRendererId,{eventHandlerId:n.eventHandlerId,eventName:e,eventFieldInfo:o.fromEvent(n.renderingComponentId,t)},a)}f.stopPropagation(e)&&(l=!0),f.preventDefault(e)&&t.preventDefault()}r=s||l?void 0:n.shift()}var u,d}getEventHandlerInfosForElement(e,t){return Object.prototype.hasOwnProperty.call(e,this.eventsCollectionKey)?e[this.eventsCollectionKey]:t?e[this.eventsCollectionKey]=new x:null}}_.nextEventDelegatorId=0;class L{constructor(e){this.globalListener=e,this.infosByEventHandlerId={},this.countByEventName={},s.push(this.handleEventNameAliasAdded.bind(this))}add(e){if(this.infosByEventHandlerId[e.eventHandlerId])throw new Error(`Event ${e.eventHandlerId} is already tracked`);this.infosByEventHandlerId[e.eventHandlerId]=e,this.addGlobalListener(e.eventName)}get(e){return this.infosByEventHandlerId[e]}addGlobalListener(e){if(e=l(e),Object.prototype.hasOwnProperty.call(this.countByEventName,e))this.countByEventName[e]++;else{this.countByEventName[e]=1;const t=Object.prototype.hasOwnProperty.call(T,e);document.addEventListener(e,this.globalListener,t)}}addActiveGlobalListener(e){e=l(e),Object.prototype.hasOwnProperty.call(this.countByEventName,e)?(this.countByEventName[e]++,document.removeEventListener(e,this.globalListener)):this.countByEventName[e]=1;const t=Object.prototype.hasOwnProperty.call(T,e);document.addEventListener(e,this.globalListener,{capture:t,passive:!1})}update(e,t){if(Object.prototype.hasOwnProperty.call(this.infosByEventHandlerId,t))throw new Error(`Event ${t} is already tracked`);const n=this.infosByEventHandlerId[e];delete this.infosByEventHandlerId[e],n.eventHandlerId=t,this.infosByEventHandlerId[t]=n}remove(e){const t=this.infosByEventHandlerId[e];if(t){delete this.infosByEventHandlerId[e];const n=l(t.eventName);this.decrementCountByEventName(n)}return t}decrementCountByEventName(e){0==--this.countByEventName[e]&&(delete this.countByEventName[e],document.removeEventListener(e,this.globalListener))}handleEventNameAliasAdded(e,t){if(Object.prototype.hasOwnProperty.call(this.countByEventName,e)){const n=this.countByEventName[e];delete this.countByEventName[e],document.removeEventListener(e,this.globalListener),this.addGlobalListener(t),this.countByEventName[t]+=n-1}}}class x{constructor(){this.handlers={},this.preventDefaultFlags=null,this.stopPropagationFlags=null}*enumerateHandlers(){for(const e in this.handlers)Object.prototype.hasOwnProperty.call(this.handlers,e)&&(yield this.handlers[e])}getHandler(e){return Object.prototype.hasOwnProperty.call(this.handlers,e)?this.handlers[e]:null}setHandler(e,t){this.handlers[e]=t}removeHandler(e){delete this.handlers[e]}preventDefault(e,t){return void 0!==t&&(this.preventDefaultFlags=this.preventDefaultFlags||{},this.preventDefaultFlags[e]=t),!!this.preventDefaultFlags&&this.preventDefaultFlags[e]}stopPropagation(e,t){return void 0!==t&&(this.stopPropagationFlags=this.stopPropagationFlags||{},this.stopPropagationFlags[e]=t),!!this.stopPropagationFlags&&this.stopPropagationFlags[e]}}function F(e){const t={};return e.forEach((e=>{t[e]=!0})),t}const P=Symbol(),H=Symbol();function B(e,t){if(P in e)return e;const n=[];if(e.childNodes.length>0){if(!t)throw new Error("New logical elements must start empty, or allowExistingContents must be true");e.childNodes.forEach((t=>{const r=B(t,!0);r[H]=e,n.push(r)}))}return e[P]=n,e}function M(e){const t=K(e);for(;t.length;)U(e,0)}function j(e,t){const n=document.createComment("!");return J(n,e,t),n}function J(e,t,n){const r=e;let o=e;if(e instanceof Comment){const t=K(r);if((null==t?void 0:t.length)>0){const t=Z(r),n=new Range;n.setStartBefore(e),n.setEndAfter(t),o=n.extractContents()}}const a=z(r);if(a){const e=K(a),t=Array.prototype.indexOf.call(e,r);e.splice(t,1),delete r[H]}const i=K(t);if(n<i.length){const e=i[n];e.parentNode.insertBefore(o,e),i.splice(n,0,r)}else q(o,t),i.push(r);r[H]=t,P in r||(r[P]=[])}function U(e,t){const n=K(e).splice(t,1)[0];if(n instanceof Comment){const e=K(n);if(e)for(;e.length>0;)U(n,0)}const r=n;r.parentNode.removeChild(r)}function z(e){return e[H]||null}function $(e,t){return K(e)[t]}function W(e){const t=G(e);return"http://www.w3.org/2000/svg"===t.namespaceURI&&"foreignObject"!==t.tagName}function K(e){return e[P]}function V(e){const t=K(z(e));return t[Array.prototype.indexOf.call(t,e)+1]||null}function*X(e){const t=K(e);for(const e of t)yield*X(e);yield e}function Y(e,t){const n=K(e);t.forEach((e=>{e.moveRangeStart=n[e.fromSiblingIndex],e.moveRangeEnd=Z(e.moveRangeStart)})),t.forEach((t=>{const r=document.createComment("marker");t.moveToBeforeMarker=r;const o=n[t.toSiblingIndex+1];o?o.parentNode.insertBefore(r,o):q(r,e)})),t.forEach((e=>{const t=e.moveToBeforeMarker,n=t.parentNode,r=e.moveRangeStart,o=e.moveRangeEnd;let a=r;for(;a;){const e=a.nextSibling;if(n.insertBefore(a,t),a===o)break;a=e}n.removeChild(t)})),t.forEach((e=>{n[e.toSiblingIndex]=e.moveRangeStart}))}function G(e){if(e instanceof Element||e instanceof DocumentFragment)return e;if(e instanceof Comment)return e.parentNode;throw new Error("Not a valid logical element")}function q(e,t){if(t instanceof Element||t instanceof DocumentFragment)t.appendChild(e);else{if(!(t instanceof Comment))throw new Error(`Cannot append node because the parent is not a valid logical element. Parent: ${t}`);{const n=V(t);n?n.parentNode.insertBefore(e,n):q(e,z(t))}}}function Z(e){if(e instanceof Element||e instanceof DocumentFragment)return e;const t=V(e);if(t)return t.previousSibling;{const t=z(e);return t instanceof Element||t instanceof DocumentFragment?t.lastChild:Z(t)}}function Q(e){return`_bl_${e}`}const ee="__internalId";t.attachReviver(((e,t)=>t&&"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,ee)&&"string"==typeof t[ee]?function(e){const t=`[${Q(e)}]`;return document.querySelector(t)}(t[ee]):t));const te="_blazorDeferredValue";function ne(e){return"select-multiple"===e.type}function re(e,t){e.value=t||""}function oe(e,t){e instanceof HTMLSelectElement?ne(e)?function(e,t){t||(t=[]);for(let n=0;n<e.options.length;n++)e.options[n].selected=-1!==t.indexOf(e.options[n].value)}(e,t):re(e,t):e.value=t}function ae(e){const t=function(e){for(;e;){if(e instanceof HTMLSelectElement)return e;e=e.parentElement}return null}(e);if(!function(e){return!!e&&te in e}(t))return!1;if(ne(t))e.selected=-1!==t._blazorDeferredValue.indexOf(e.value);else{if(t._blazorDeferredValue!==e.value)return!1;re(t,e.value),delete t._blazorDeferredValue}return!0}const ie=document.createElement("template"),se=document.createElementNS("http://www.w3.org/2000/svg","g"),ce=new Set,le=Symbol(),ue=Symbol();class de{constructor(e){this.rootComponentIds=new Set,this.childComponentLocations={},this.eventDelegator=new _(e),this.eventDelegator.notifyAfterClick((e=>{Se()&&function(e){if(0!==e.button||function(e){return e.ctrlKey||e.shiftKey||e.altKey||e.metaKey}(e))return;if(e.defaultPrevented)return;const t=function(e){const t=e.composedPath&&e.composedPath();if(t)for(let e=0;e<t.length;e++){const n=t[e];if(n instanceof HTMLAnchorElement||n instanceof SVGAElement)return n}return null}(e);if(t&&function(e){const t=e.getAttribute("target");return(!t||"_self"===t)&&e.hasAttribute("href")&&!e.hasAttribute("download")}(t)){const n=Ee(t.getAttribute("href"));ye(n)&&(e.preventDefault(),_e(n,!0,!1))}}(e)}))}getRootComponentCount(){return this.rootComponentIds.size}attachRootComponentToLogicalElement(e,t,n){if(function(e){return e[le]}(t))throw new Error(`Root component '${e}' could not be attached because its target element is already associated with a root component`);n&&(t=j(t,K(t).length)),he(t,!0),this.attachComponentToElement(e,t),this.rootComponentIds.add(e),ce.add(t)}updateComponent(e,t,n,r){var o;const a=this.childComponentLocations[t];if(!a)throw new Error(`No element is currently associated with component ${t}`);ce.delete(a)&&(this.detachEventHandlersFromElement(a),M(a),a instanceof Comment&&(a.textContent="!"));const i=null===(o=G(a))||void 0===o?void 0:o.getRootNode(),s=i&&i.activeElement;this.applyEdits(e,t,a,0,n,r),s instanceof HTMLElement&&i&&i.activeElement!==s&&s.focus()}disposeComponent(e){if(this.rootComponentIds.delete(e)){const t=this.childComponentLocations[e];he(t,!1),!0===t[ue]?ce.add(t):M(t)}delete this.childComponentLocations[e]}disposeEventHandler(e){this.eventDelegator.removeListener(e)}attachComponentToElement(e,t){this.childComponentLocations[e]=t}detachEventHandlersFromElement(e){for(const t of X(e))t instanceof Element&&this.eventDelegator.removeListenersForElement(t)}applyEdits(e,t,r,o,a,i){let s,c=0,l=o;const u=e.arrayBuilderSegmentReader,d=e.editReader,h=e.frameReader,f=u.values(a),p=u.offset(a),m=p+u.count(a);for(let a=p;a<m;a++){const u=e.diffReader.editsEntry(f,a),p=d.editType(u);switch(p){case n.prependFrame:{const n=d.newTreeIndex(u),o=e.referenceFramesEntry(i,n),a=d.siblingIndex(u);this.insertFrame(e,t,r,l+a,i,o,n);break}case n.removeFrame:U(r,l+d.siblingIndex(u));break;case n.setAttribute:{const n=d.newTreeIndex(u),o=e.referenceFramesEntry(i,n),a=$(r,l+d.siblingIndex(u));if(!(a instanceof Element))throw new Error("Cannot set attribute on non-element child");this.applyAttribute(e,t,a,o);break}case n.removeAttribute:{const e=$(r,l+d.siblingIndex(u));if(!(e instanceof Element))throw new Error("Cannot remove attribute from non-element child");{const t=d.removedAttributeName(u);this.setOrRemoveAttributeOrProperty(e,t,null)}break}case n.updateText:{const t=d.newTreeIndex(u),n=e.referenceFramesEntry(i,t),o=$(r,l+d.siblingIndex(u));if(!(o instanceof Text))throw new Error("Cannot set text content on non-text child");o.textContent=h.textContent(n);break}case n.updateMarkup:{const t=d.newTreeIndex(u),n=e.referenceFramesEntry(i,t),o=d.siblingIndex(u);U(r,l+o),this.insertMarkup(e,r,l+o,n);break}case n.stepIn:r=$(r,l+d.siblingIndex(u)),c++,l=0;break;case n.stepOut:r=z(r),c--,l=0===c?o:0;break;case n.permutationListEntry:s=s||[],s.push({fromSiblingIndex:l+d.siblingIndex(u),toSiblingIndex:l+d.moveToSiblingIndex(u)});break;case n.permutationListEnd:Y(r,s),s=void 0;break;default:throw new Error(`Unknown edit type: ${p}`)}}}insertFrame(e,t,n,o,a,i,s){const c=e.frameReader,l=c.frameType(i);switch(l){case r.element:return this.insertElement(e,t,n,o,a,i,s),1;case r.text:return this.insertText(e,n,o,i),1;case r.attribute:throw new Error("Attribute frames should only be present as leading children of element frames.");case r.component:return this.insertComponent(e,n,o,i),1;case r.region:return this.insertFrameRange(e,t,n,o,a,s+1,s+c.subtreeLength(i));case r.elementReferenceCapture:if(n instanceof Element)return u=n,d=c.elementReferenceCaptureId(i),u.setAttribute(Q(d),""),0;throw new Error("Reference capture frames can only be children of element frames.");case r.markup:return this.insertMarkup(e,n,o,i),1;case r.namedEvent:return 0;default:throw new Error(`Unknown frame type: ${l}`)}var u,d}insertElement(e,t,n,o,a,i,s){const c=e.frameReader,l=c.elementName(i),u="svg"===l||W(n)?document.createElementNS("http://www.w3.org/2000/svg",l):document.createElement(l),d=B(u);let h=!1;const f=s+c.subtreeLength(i);for(let i=s+1;i<f;i++){const s=e.referenceFramesEntry(a,i);if(c.frameType(s)!==r.attribute){J(u,n,o),h=!0,this.insertFrameRange(e,t,d,0,a,i,f);break}this.applyAttribute(e,t,u,s)}var p;h||J(u,n,o),(p=u)instanceof HTMLOptionElement?ae(p):te in p&&oe(p,p[te])}insertComponent(e,t,n,r){const o=j(t,n),a=e.frameReader.componentId(r);this.attachComponentToElement(a,o)}insertText(e,t,n,r){const o=e.frameReader.textContent(r);J(document.createTextNode(o),t,n)}insertMarkup(e,t,n,r){const o=j(t,n),a=(i=e.frameReader.markupContent(r),W(t)?(se.innerHTML=i||" ",se):(ie.innerHTML=i||" ",ie.content.querySelectorAll("script").forEach((e=>{const t=document.createElement("script");t.textContent=e.textContent,e.getAttributeNames().forEach((n=>{t.setAttribute(n,e.getAttribute(n))})),e.parentNode.replaceChild(t,e)})),ie.content));var i;let s=0;for(;a.firstChild;)J(a.firstChild,o,s++)}applyAttribute(e,t,n,r){const o=e.frameReader,a=o.attributeName(r),i=o.attributeEventHandlerId(r);if(i){const e=pe(a);return void this.eventDelegator.setListener(n,e,i,t)}const s=o.attributeValue(r);this.setOrRemoveAttributeOrProperty(n,a,s)}insertFrameRange(e,t,n,r,o,a,i){const s=r;for(let s=a;s<i;s++){const a=e.referenceFramesEntry(o,s);r+=this.insertFrame(e,t,n,r,o,a,s),s+=fe(e,a)}return r-s}setOrRemoveAttributeOrProperty(e,t,n){(function(e,t,n){switch(t){case"value":return function(e,t){switch(t&&"INPUT"===e.tagName&&(t=function(e,t){switch(t.getAttribute("type")){case"time":return 8!==e.length||!e.endsWith("00")&&t.hasAttribute("step")?e:e.substring(0,5);case"datetime-local":return 19!==e.length||!e.endsWith("00")&&t.hasAttribute("step")?e:e.substring(0,16);default:return e}}(t,e)),e.tagName){case"INPUT":case"SELECT":case"TEXTAREA":return t&&e instanceof HTMLSelectElement&&ne(e)&&(t=JSON.parse(t)),oe(e,t),e[te]=t,!0;case"OPTION":return t||""===t?e.setAttribute("value",t):e.removeAttribute("value"),ae(e),!0;default:return!1}}(e,n);case"checked":return function(e,t){return"INPUT"===e.tagName&&(e.checked=null!==t,!0)}(e,n);default:return!1}})(e,t,n)||(t.startsWith("__internal_")?this.applyInternalAttribute(e,t.substring(11),n):null!==n?e.setAttribute(t,n):e.removeAttribute(t))}applyInternalAttribute(e,t,n){if(t.startsWith("stopPropagation_")){const r=pe(t.substring(16));this.eventDelegator.setStopPropagation(e,r,null!==n)}else{if(!t.startsWith("preventDefault_"))throw new Error(`Unsupported internal attribute '${t}'`);{const r=pe(t.substring(15));this.eventDelegator.setPreventDefault(e,r,null!==n)}}}}function he(e,t){e[le]=t}function fe(e,t){const n=e.frameReader;switch(n.frameType(t)){case r.component:case r.element:case r.region:return n.subtreeLength(t)-1;default:return 0}}function pe(e){if(e.startsWith("on"))return e.substring(2);throw new Error(`Attribute should be an event name, but doesn't start with 'on'. Value: '${e}'`)}const me={};let ve,be,ge=!1;function ye(e){const t=(n=document.baseURI).substring(0,n.lastIndexOf("/"));var n;const r=e.charAt(t.length);return e.startsWith(t)&&(""===r||"/"===r||"?"===r||"#"===r)}function we(e){var t;null===(t=document.getElementById(e))||void 0===t||t.scrollIntoView()}function Ee(e){return be=be||document.createElement("a"),be.href=e,be.href}function Se(){return void 0!==ve}function Ce(){return ve}let Ie=!1,De=0,Ae=0;const Ne=new Map;let Re=async function(e){var t,n,r;Fe();const o=Me();if(null==o?void 0:o.hasLocationChangingEventListeners){const a=null!==(n=null===(t=e.state)||void 0===t?void 0:t._index)&&void 0!==n?n:0,i=null===(r=e.state)||void 0===r?void 0:r.userState,s=a-De,c=location.href;if(await xe(-s),!await Pe(c,i,!1,o))return;await xe(s)}await He(!0)},Te=null;const ke={listenForNavigationEvents:function(e,t,n){var r,o;Ne.set(e,{rendererId:e,hasLocationChangingEventListeners:!1,locationChanged:t,locationChanging:n}),Ie||(Ie=!0,window.addEventListener("popstate",Be),De=null!==(o=null===(r=history.state)||void 0===r?void 0:r._index)&&void 0!==o?o:0)},enableNavigationInterception:function(e){if(void 0!==ve&&ve!==e)throw new Error("Only one interactive runtime may enable navigation interception at a time.");ve=e},setHasLocationChangingListeners:function(e,t){const n=Ne.get(e);if(!n)throw new Error(`Renderer with ID '${e}' is not listening for navigation events`);n.hasLocationChangingEventListeners=t},endLocationChanging:function(e,t){Te&&e===Ae&&(Te(t),Te=null)},navigateTo:function(e,t){Oe(e,t,!0)},refresh:function(e){location.reload()},getBaseURI:()=>document.baseURI,getLocationHref:()=>location.href,scrollToElement:we};function Oe(e,t,n=!1){const r=Ee(e);!t.forceLoad&&ye(r)?_e(r,!1,t.replaceHistoryEntry,t.historyEntryState,n):function(e,t){if(location.href===e){const t=e+"?";history.replaceState(null,"",t),location.replace(e)}else t?location.replace(e):location.href=e}(e,t.replaceHistoryEntry)}async function _e(e,t,n,r=void 0,o=!1){if(Fe(),function(e,t){const n=new URL(e),r=new URL(t);return n.origin===r.origin&&n.pathname===r.pathname&&n.search===r.search&&""!==r.hash}(location.href,e))return Le(e,n,r),void function(e){const t=e.indexOf("#");t!==e.length-1&&we(e.substring(t+1))}(e);const a=Me();(o||!(null==a?void 0:a.hasLocationChangingEventListeners)||await Pe(e,r,t,a))&&(function(e,t){const n=new URL(e),r=new URL(t);return n.protocol===r.protocol&&n.host===r.host&&n.port===r.port&&n.pathname===r.pathname}(e,location.href)||(ge=!0),Le(e,n,r),await He(t))}function Le(e,t,n=void 0){t?history.replaceState({userState:n,_index:De},"",e):(De++,history.pushState({userState:n,_index:De},"",e))}function xe(e){return new Promise((t=>{const n=Re;Re=()=>{Re=n,t()},history.go(e)}))}function Fe(){Te&&(Te(!1),Te=null)}function Pe(e,t,n,r){return new Promise((o=>{Fe(),Ae++,Te=o,r.locationChanging(Ae,e,t,n)}))}async function He(e,t){const n=location.href;await Promise.all(Array.from(Ne,(async([t,r])=>{var o;D(t)&&await r.locationChanged(n,null===(o=history.state)||void 0===o?void 0:o.userState,e)})))}async function Be(e){var t,n;Re&&(Se(),1)&&await Re(e),De=null!==(n=null===(t=history.state)||void 0===t?void 0:t._index)&&void 0!==n?n:0}function Me(){const e=Ce();if(void 0!==e)return Ne.get(e)}const je={focus:function(e,t){if(e instanceof HTMLElement)e.focus({preventScroll:t});else{if(!(e instanceof SVGElement))throw new Error("Unable to focus an invalid element.");if(!e.hasAttribute("tabindex"))throw new Error("Unable to focus an SVG element that does not have a tabindex.");e.focus({preventScroll:t})}},focusBySelector:function(e){const t=document.querySelector(e);t&&(t.hasAttribute("tabindex")||(t.tabIndex=-1),t.focus({preventScroll:!0}))}},Je={init:function(e,t,n,r=50){const o=ze(t);(o||document.documentElement).style.overflowAnchor="none";const a=document.createRange();h(n.parentElement)&&(t.style.display="table-row",n.style.display="table-row");const i=new IntersectionObserver((function(r){r.forEach((r=>{var o;if(!r.isIntersecting)return;a.setStartAfter(t),a.setEndBefore(n);const i=a.getBoundingClientRect().height,s=null===(o=r.rootBounds)||void 0===o?void 0:o.height;r.target===t?e.invokeMethodAsync("OnSpacerBeforeVisible",r.intersectionRect.top-r.boundingClientRect.top,i,s):r.target===n&&n.offsetHeight>0&&e.invokeMethodAsync("OnSpacerAfterVisible",r.boundingClientRect.bottom-r.intersectionRect.bottom,i,s)}))}),{root:o,rootMargin:`${r}px`});i.observe(t),i.observe(n);const s=d(t),c=d(n),{observersByDotNetObjectId:l,id:u}=$e(e);function d(e){const t={attributes:!0},n=new MutationObserver(((n,r)=>{h(e.parentElement)&&(r.disconnect(),e.style.display="table-row",r.observe(e,t)),i.unobserve(e),i.observe(e)}));return n.observe(e,t),n}function h(e){return null!==e&&(e instanceof HTMLTableElement&&""===e.style.display||"table"===e.style.display||e instanceof HTMLTableSectionElement&&""===e.style.display||"table-row-group"===e.style.display)}l[u]={intersectionObserver:i,mutationObserverBefore:s,mutationObserverAfter:c}},dispose:function(e){const{observersByDotNetObjectId:t,id:n}=$e(e),r=t[n];r&&(r.intersectionObserver.disconnect(),r.mutationObserverBefore.disconnect(),r.mutationObserverAfter.disconnect(),e.dispose(),delete t[n])}},Ue=Symbol();function ze(e){return e&&e!==document.body&&e!==document.documentElement?"visible"!==getComputedStyle(e).overflowY?e:ze(e.parentElement):null}function $e(e){var t;const n=e._callDispatcher,r=e._id;return null!==(t=n[Ue])&&void 0!==t||(n[Ue]={}),{observersByDotNetObjectId:n[Ue],id:r}}const We={getAndRemoveExistingTitle:function(){var e;const t=document.head?document.head.getElementsByTagName("title"):[];if(0===t.length)return null;let n=null;for(let r=t.length-1;r>=0;r--){const o=t[r],a=o.previousSibling;a instanceof Comment&&null!==z(a)||(null===n&&(n=o.textContent),null===(e=o.parentNode)||void 0===e||e.removeChild(o))}return n}},Ke={init:function(e,t){t._blazorInputFileNextFileId=0,t.addEventListener("click",(function(){t.value=""})),t.addEventListener("change",(function(){t._blazorFilesById={};const n=Array.prototype.map.call(t.files,(function(e){const n={id:++t._blazorInputFileNextFileId,lastModified:new Date(e.lastModified).toISOString(),name:e.name,size:e.size,contentType:e.type,readPromise:void 0,arrayBuffer:void 0,blob:e};return t._blazorFilesById[n.id]=n,n}));e.invokeMethodAsync("NotifyChange",n)}))},toImageFile:async function(e,t,n,r,o){const a=Ve(e,t),i=await new Promise((function(e){const t=new Image;t.onload=function(){URL.revokeObjectURL(t.src),e(t)},t.onerror=function(){t.onerror=null,URL.revokeObjectURL(t.src)},t.src=URL.createObjectURL(a.blob)})),s=await new Promise((function(e){var t;const a=Math.min(1,r/i.width),s=Math.min(1,o/i.height),c=Math.min(a,s),l=document.createElement("canvas");l.width=Math.round(i.width*c),l.height=Math.round(i.height*c),null===(t=l.getContext("2d"))||void 0===t||t.drawImage(i,0,0,l.width,l.height),l.toBlob(e,n)})),c={id:++e._blazorInputFileNextFileId,lastModified:a.lastModified,name:a.name,size:(null==s?void 0:s.size)||0,contentType:n,blob:s||a.blob};return e._blazorFilesById[c.id]=c,c},readFileData:async function(e,t){return Ve(e,t).blob}};function Ve(e,t){const n=e._blazorFilesById[t];if(!n)throw new Error(`There is no file with ID ${t}. The file list may have changed. See https://aka.ms/aspnet/blazor-input-file-multiple-selections.`);return n}const Xe=new Set,Ye={enableNavigationPrompt:function(e){0===Xe.size&&window.addEventListener("beforeunload",Ge),Xe.add(e)},disableNavigationPrompt:function(e){Xe.delete(e),0===Xe.size&&window.removeEventListener("beforeunload",Ge)}};function Ge(e){e.preventDefault(),e.returnValue=!0}const qe=new Map,Ze={navigateTo:function(e,t,n=!1){Oe(e,t instanceof Object?t:{forceLoad:t,replaceHistoryEntry:n})},registerCustomEventType:function(e,t){if(!t)throw new Error("The options parameter is required.");if(a.has(e))throw new Error(`The event '${e}' is already registered.`);if(t.browserEventName){const n=i.get(t.browserEventName);n?n.push(e):i.set(t.browserEventName,[e]),s.forEach((n=>n(e,t.browserEventName)))}a.set(e,t)},rootComponents:g,runtime:{},_internal:{navigationManager:ke,domWrapper:je,Virtualize:Je,PageTitle:We,InputFile:Ke,NavigationLock:Ye,getJSDataStreamChunk:async function(e,t,n){return e instanceof Blob?await async function(e,t,n){const r=e.slice(t,t+n),o=await r.arrayBuffer();return new Uint8Array(o)}(e,t,n):function(e,t,n){return new Uint8Array(e.buffer,e.byteOffset+t,n)}(e,t,n)},attachWebRendererInterop:function(e,n,r,o){var a,i;if(S.has(e))throw new Error(`Interop methods are already registered for renderer ${e}`);S.set(e,n),r&&o&&Object.keys(r).length>0&&function(e,n,r){if(m)throw new Error("Dynamic root components have already been enabled.");m=e,v=n;for(const[e,o]of Object.entries(r)){const r=t.findJSFunction(e,0);for(const e of o)r(e,n[e])}}(N(e),r,o),null===(i=null===(a=I.get(e))||void 0===a?void 0:a[0])||void 0===i||i.call(a),function(e){for(const t of C)t(e)}(e)}}};window.Blazor=Ze;let Qe=!1;const et="function"==typeof TextDecoder?new TextDecoder("utf-8"):null,tt=et?et.decode.bind(et):function(e){let t=0;const n=e.length,r=[],o=[];for(;t<n;){const n=e[t++];if(0===n)break;if(128&n){if(192==(224&n)){const o=63&e[t++];r.push((31&n)<<6|o)}else if(224==(240&n)){const o=63&e[t++],a=63&e[t++];r.push((31&n)<<12|o<<6|a)}else if(240==(248&n)){let o=(7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++];o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o)}}else r.push(n);r.length>1024&&(o.push(String.fromCharCode.apply(null,r)),r.length=0)}return o.push(String.fromCharCode.apply(null,r)),o.join("")},nt=Math.pow(2,32),rt=Math.pow(2,21)-1;function ot(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24}function at(e,t){return e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24>>>0)}function it(e,t){const n=at(e,t+4);if(n>rt)throw new Error(`Cannot read uint64 with high order part ${n}, because the result would exceed Number.MAX_SAFE_INTEGER.`);return n*nt+at(e,t)}class st{constructor(e){this.batchData=e;const t=new dt(e);this.arrayRangeReader=new ht(e),this.arrayBuilderSegmentReader=new ft(e),this.diffReader=new ct(e),this.editReader=new lt(e,t),this.frameReader=new ut(e,t)}updatedComponents(){return ot(this.batchData,this.batchData.length-20)}referenceFrames(){return ot(this.batchData,this.batchData.length-16)}disposedComponentIds(){return ot(this.batchData,this.batchData.length-12)}disposedEventHandlerIds(){return ot(this.batchData,this.batchData.length-8)}updatedComponentsEntry(e,t){const n=e+4*t;return ot(this.batchData,n)}referenceFramesEntry(e,t){return e+20*t}disposedComponentIdsEntry(e,t){const n=e+4*t;return ot(this.batchData,n)}disposedEventHandlerIdsEntry(e,t){const n=e+8*t;return it(this.batchData,n)}}class ct{constructor(e){this.batchDataUint8=e}componentId(e){return ot(this.batchDataUint8,e)}edits(e){return e+4}editsEntry(e,t){return e+16*t}}class lt{constructor(e,t){this.batchDataUint8=e,this.stringReader=t}editType(e){return ot(this.batchDataUint8,e)}siblingIndex(e){return ot(this.batchDataUint8,e+4)}newTreeIndex(e){return ot(this.batchDataUint8,e+8)}moveToSiblingIndex(e){return ot(this.batchDataUint8,e+8)}removedAttributeName(e){const t=ot(this.batchDataUint8,e+12);return this.stringReader.readString(t)}}class ut{constructor(e,t){this.batchDataUint8=e,this.stringReader=t}frameType(e){return ot(this.batchDataUint8,e)}subtreeLength(e){return ot(this.batchDataUint8,e+4)}elementReferenceCaptureId(e){const t=ot(this.batchDataUint8,e+4);return this.stringReader.readString(t)}componentId(e){return ot(this.batchDataUint8,e+8)}elementName(e){const t=ot(this.batchDataUint8,e+8);return this.stringReader.readString(t)}textContent(e){const t=ot(this.batchDataUint8,e+4);return this.stringReader.readString(t)}markupContent(e){const t=ot(this.batchDataUint8,e+4);return this.stringReader.readString(t)}attributeName(e){const t=ot(this.batchDataUint8,e+4);return this.stringReader.readString(t)}attributeValue(e){const t=ot(this.batchDataUint8,e+8);return this.stringReader.readString(t)}attributeEventHandlerId(e){return it(this.batchDataUint8,e+12)}}class dt{constructor(e){this.batchDataUint8=e,this.stringTableStartIndex=ot(e,e.length-4)}readString(e){if(-1===e)return null;{const n=ot(this.batchDataUint8,this.stringTableStartIndex+4*e),r=function(e,t){let n=0,r=0;for(let o=0;o<4;o++){const a=e[t+o];if(n|=(127&a)<<r,a<128)break;r+=7}return n}(this.batchDataUint8,n),o=n+((t=r)<128?1:t<16384?2:t<2097152?3:4),a=new Uint8Array(this.batchDataUint8.buffer,this.batchDataUint8.byteOffset+o,r);return tt(a)}var t}}class ht{constructor(e){this.batchDataUint8=e}count(e){return ot(this.batchDataUint8,e)}values(e){return e+4}}class ft{constructor(e){this.batchDataUint8=e}offset(e){return 0}count(e){return ot(this.batchDataUint8,e)}values(e){return e+4}}const pt="__bwv:";let mt=!1;function vt(e,t){St("OnRenderCompleted",e,t)}function bt(e,t,n,r,o){St("BeginInvokeDotNet",e?e.toString():null,t,n,r||0,o)}function gt(e,t,n){St("EndInvokeJS",e,t,n)}function yt(e,t){const n=function(e){const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=String.fromCharCode(e[n]);return btoa(t.join(""))}(t);St("ReceiveByteArrayFromJS",e,n)}function wt(e,t,n){return St("OnLocationChanged",e,t,n),Promise.resolve()}function Et(e,t,n,r){return St("OnLocationChanging",e,t,n,r),Promise.resolve()}function St(e,...t){const n=function(e,t){return mt?null:`${pt}${JSON.stringify([e,...t])}`}(e,t);n&&window.external.sendMessage(n)}var Ct,It;function Dt(t,n){const r=At(n);e.dispatcher.receiveByteArray(t,r)}function At(e){const t=atob(e),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.charCodeAt(e);return r}!function(e){e[e.Default=0]="Default",e[e.Server=1]="Server",e[e.WebAssembly=2]="WebAssembly",e[e.WebView=3]="WebView"}(Ct||(Ct={})),function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Information=2]="Information",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.None=6]="None"}(It||(It={}));class Nt{constructor(e=!0,t,n,r=0){this.singleRuntime=e,this.logger=t,this.webRendererId=r,this.afterStartedCallbacks=[],n&&this.afterStartedCallbacks.push(...n)}async importInitializersAsync(e,t){await Promise.all(e.map((e=>async function(e,n){let r;var o;n.moduleExports||(o=n.name,r=new URL(o,document.baseURI).toString(),n.moduleExports=await import(r));const a=n.moduleExports;if(void 0!==a){if(e.singleRuntime){const{beforeStart:n,afterStarted:r,beforeWebAssemblyStart:o,afterWebAssemblyStarted:s,beforeServerStart:c,afterServerStarted:l}=a;let u=n;e.webRendererId===Ct.Server&&c&&(u=c),e.webRendererId===Ct.WebAssembly&&o&&(u=o);let d=r;return e.webRendererId===Ct.Server&&l&&(d=l),e.webRendererId===Ct.WebAssembly&&s&&(d=s),i(e,u,d,t)}return function(e,t,n){var o;const a=n[0],{beforeStart:s,afterStarted:c,beforeWebStart:l,afterWebStarted:u,beforeWebAssemblyStart:d,afterWebAssemblyStarted:h,beforeServerStart:f,afterServerStarted:p}=t,m=!(l||u||d||h||f||p||!s&&!c),v=m&&a.enableClassicInitializers;if(m&&!a.enableClassicInitializers)null===(o=e.logger)||void 0===o||o.log(It.Warning,`Initializer '${r}' will be ignored because multiple runtimes are available. Use 'before(Web|WebAssembly|Server)Start' and 'after(Web|WebAssembly|Server)Started' instead.`);else if(v)return i(e,s,c,n);if(function(e){e.webAssembly?e.webAssembly.initializers||(e.webAssembly.initializers={beforeStart:[],afterStarted:[]}):e.webAssembly={initializers:{beforeStart:[],afterStarted:[]}},e.circuit?e.circuit.initializers||(e.circuit.initializers={beforeStart:[],afterStarted:[]}):e.circuit={initializers:{beforeStart:[],afterStarted:[]}}}(a),d&&a.webAssembly.initializers.beforeStart.push(d),h&&a.webAssembly.initializers.afterStarted.push(h),f&&a.circuit.initializers.beforeStart.push(f),p&&a.circuit.initializers.afterStarted.push(p),u&&e.afterStartedCallbacks.push(u),l)return l(a)}(e,a,t)}function i(e,t,n,r){if(n&&e.afterStartedCallbacks.push(n),t)return t(...r)}}(this,e))))}async invokeAfterStartedCallbacks(e){const t=(n=this.webRendererId,null===(r=I.get(n))||void 0===r?void 0:r[1]);var n,r;t&&await t,await Promise.all(this.afterStartedCallbacks.map((t=>t(e))))}}let Rt=!1;async function Tt(){if(Rt)throw new Error("Blazor has already started.");Rt=!0,e.dispatcher=t.attachDispatcher({beginInvokeDotNetFromJS:bt,endInvokeJSFromDotNet:gt,sendByteArray:yt});const n=await async function(){const e=await fetch("_framework/blazor.modules.json",{method:"GET",credentials:"include",cache:"no-cache"}),t=(await e.json()).map((e=>({name:e}))),n=new Nt;return await n.importInitializersAsync(t,[]),n}();(function(){const t={AttachToDocument:(e,t)=>{!function(e,t,n){const r="::before";let o=!1;if(e.endsWith("::after"))e=e.slice(0,-7),o=!0;else if(e.endsWith(r))throw new Error(`The '${r}' selector is not supported.`);const a=function(e){const t=p.get(e);if(t)return p.delete(e),t}(e)||document.querySelector(e);if(!a)throw new Error(`Could not find any element matching selector '${e}'.`);!function(e,t,n,r){let o=me[e];o||(o=new de(e),me[e]=o),o.attachRootComponentToLogicalElement(n,t,r)}(n,B(a,!0),t,o)}(t,e,Ct.WebView)},RenderBatch:(e,t)=>{try{const n=At(t);(function(e,t){const n=me[e];if(!n)throw new Error(`There is no browser renderer with ID ${e}.`);const r=t.arrayRangeReader,o=t.updatedComponents(),a=r.values(o),i=r.count(o),s=t.referenceFrames(),c=r.values(s),l=t.diffReader;for(let e=0;e<i;e++){const r=t.updatedComponentsEntry(a,e),o=l.componentId(r),i=l.edits(r);n.updateComponent(t,o,i,c)}const u=t.disposedComponentIds(),d=r.values(u),h=r.count(u);for(let e=0;e<h;e++){const r=t.disposedComponentIdsEntry(d,e);n.disposeComponent(r)}const f=t.disposedEventHandlerIds(),p=r.values(f),m=r.count(f);for(let e=0;e<m;e++){const r=t.disposedEventHandlerIdsEntry(p,e);n.disposeEventHandler(r)}ge&&(ge=!1,window.scrollTo&&window.scrollTo(0,0))})(Ct.WebView,new st(n)),vt(e,null)}catch(t){vt(e,t.toString())}},NotifyUnhandledException:(e,t)=>{mt=!0,console.error(`${e}\n${t}`),function(){const e=document.querySelector("#blazor-error-ui");e&&(e.style.display="block"),Qe||(Qe=!0,document.querySelectorAll("#blazor-error-ui .reload").forEach((e=>{e.onclick=function(e){location.reload(),e.preventDefault()}})),document.querySelectorAll("#blazor-error-ui .dismiss").forEach((e=>{e.onclick=function(e){const t=document.querySelector("#blazor-error-ui");t&&(t.style.display="none"),e.preventDefault()}})))}()},BeginInvokeJS:e.dispatcher.beginInvokeJSFromDotNet.bind(e.dispatcher),EndInvokeDotNet:e.dispatcher.endInvokeDotNetFromJS.bind(e.dispatcher),SendByteArrayToJS:Dt,Navigate:ke.navigateTo,Refresh:ke.refresh,SetHasLocationChangingListeners:e=>{ke.setHasLocationChangingListeners(Ct.WebView,e)},EndLocationChanging:ke.endLocationChanging};window.external.receiveMessage((e=>{const n=function(e){if(mt||!e||!e.startsWith(pt))return null;const t=e.substring(6),[n,...r]=JSON.parse(t);return{messageType:n,args:r}}(e);if(n){if(!Object.prototype.hasOwnProperty.call(t,n.messageType))throw new Error(`Unsupported IPC message type '${n.messageType}'`);t[n.messageType].apply(null,n.args)}}))})(),Ze._internal.receiveWebViewDotNetDataStream=kt,ke.enableNavigationInterception(Ct.WebView),ke.listenForNavigationEvents(Ct.WebView,wt,Et),St("AttachPage",ke.getBaseURI(),ke.getLocationHref()),await n.invokeAfterStartedCallbacks(Ze)}function kt(t,n,r,o){!function(e,t,n,r,o){let a=qe.get(t);if(!a){const n=new ReadableStream({start(e){qe.set(t,e),a=e}});e.supplyDotNetStream(t,n)}o?(a.error(o),qe.delete(t)):0===r?(a.close(),qe.delete(t)):a.enqueue(n.length===r?n:n.subarray(0,r))}(e.dispatcher,t,n,r,o)}e.dispatcher=void 0,Ze.start=Tt,window.DotNet=t,document&&document.currentScript&&"false"!==document.currentScript.getAttribute("autostart")&&Tt()}({});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmxhem9yLndlYnZpZXcuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL0pTSW50ZXJvcC9NaWNyb3NvZnQuSlNJbnRlcm9wLkpTL3NyYy9kaXN0L3NyYy9NaWNyb3NvZnQuSlNJbnRlcm9wLmpzIiwiLi4vLi4vc3JjL1JlbmRlcmluZy9SZW5kZXJCYXRjaC9SZW5kZXJCYXRjaC50cyIsIi4uLy4uL3NyYy9SZW5kZXJpbmcvRXZlbnRzL0V2ZW50RmllbGRJbmZvLnRzIiwiLi4vLi4vc3JjL1JlbmRlcmluZy9FdmVudHMvRXZlbnRUeXBlcy50cyIsIi4uLy4uL3NyYy9SZW5kZXJpbmcvSlNSb290Q29tcG9uZW50cy50cyIsIi4uLy4uL3NyYy9SZW5kZXJpbmcvV2ViUmVuZGVyZXJJbnRlcm9wTWV0aG9kcy50cyIsIi4uLy4uL3NyYy9SZW5kZXJpbmcvRXZlbnRzL0V2ZW50RGVsZWdhdG9yLnRzIiwiLi4vLi4vc3JjL1JlbmRlcmluZy9Mb2dpY2FsRWxlbWVudHMudHMiLCIuLi8uLi9zcmMvUmVuZGVyaW5nL0VsZW1lbnRSZWZlcmVuY2VDYXB0dXJlLnRzIiwiLi4vLi4vc3JjL1JlbmRlcmluZy9Eb21TcGVjaWFsUHJvcGVydHlVdGlsLnRzIiwiLi4vLi4vc3JjL1JlbmRlcmluZy9Ccm93c2VyUmVuZGVyZXIudHMiLCIuLi8uLi9zcmMvU2VydmljZXMvTmF2aWdhdGlvbk1hbmFnZXIudHMiLCIuLi8uLi9zcmMvU2VydmljZXMvTmF2aWdhdGlvblV0aWxzLnRzIiwiLi4vLi4vc3JjL1JlbmRlcmluZy9SZW5kZXJlci50cyIsIi4uLy4uL3NyYy9Eb21XcmFwcGVyLnRzIiwiLi4vLi4vc3JjL1ZpcnR1YWxpemUudHMiLCIuLi8uLi9zcmMvUGFnZVRpdGxlLnRzIiwiLi4vLi4vc3JjL0lucHV0RmlsZS50cyIsIi4uLy4uL3NyYy9OYXZpZ2F0aW9uTG9jay50cyIsIi4uLy4uL3NyYy9TdHJlYW1pbmdJbnRlcm9wLnRzIiwiLi4vLi4vc3JjL0dsb2JhbEV4cG9ydHMudHMiLCIuLi8uLi9zcmMvQm9vdEVycm9ycy50cyIsIi4uLy4uL3NyYy9VdGY4RGVjb2Rlci50cyIsIi4uLy4uL3NyYy9CaW5hcnlEZWNvZGVyLnRzIiwiLi4vLi4vc3JjL1JlbmRlcmluZy9SZW5kZXJCYXRjaC9PdXRPZlByb2Nlc3NSZW5kZXJCYXRjaC50cyIsIi4uLy4uL3NyYy9QbGF0Zm9ybS9XZWJWaWV3L1dlYlZpZXdJcGNDb21tb24udHMiLCIuLi8uLi9zcmMvUGxhdGZvcm0vV2ViVmlldy9XZWJWaWV3SXBjU2VuZGVyLnRzIiwiLi4vLi4vc3JjL1JlbmRlcmluZy9XZWJSZW5kZXJlcklkLnRzIiwiLi4vLi4vc3JjL1BsYXRmb3JtL0xvZ2dpbmcvTG9nZ2VyLnRzIiwiLi4vLi4vc3JjL1BsYXRmb3JtL1dlYlZpZXcvV2ViVmlld0lwY1JlY2VpdmVyLnRzIiwiLi4vLi4vc3JjL0pTSW5pdGlhbGl6ZXJzL0pTSW5pdGlhbGl6ZXJzLnRzIiwiLi4vLi4vc3JjL0Jvb3QuV2ViVmlldy50cyIsIi4uLy4uL3NyYy9KU0luaXRpYWxpemVycy9KU0luaXRpYWxpemVycy5XZWJWaWV3LnRzIiwiLi4vLi4vc3JjL0Jvb3RDb21tb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gTGljZW5zZWQgdG8gdGhlIC5ORVQgRm91bmRhdGlvbiB1bmRlciBvbmUgb3IgbW9yZSBhZ3JlZW1lbnRzLlxuLy8gVGhlIC5ORVQgRm91bmRhdGlvbiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8vIFRoaXMgaXMgYSBzaW5nbGUtZmlsZSBzZWxmLWNvbnRhaW5lZCBtb2R1bGUgdG8gYXZvaWQgdGhlIG5lZWQgZm9yIGEgV2VicGFjayBidWlsZFxuZXhwb3J0IHZhciBEb3ROZXQ7XG4oZnVuY3Rpb24gKERvdE5ldCkge1xuICAgIGNvbnN0IGpzb25SZXZpdmVycyA9IFtdO1xuICAgIGNvbnN0IGpzT2JqZWN0SWRLZXkgPSBcIl9fanNPYmplY3RJZFwiO1xuICAgIGNvbnN0IGRvdE5ldE9iamVjdFJlZktleSA9IFwiX19kb3ROZXRPYmplY3RcIjtcbiAgICBjb25zdCBieXRlQXJyYXlSZWZLZXkgPSBcIl9fYnl0ZVtdXCI7XG4gICAgY29uc3QgZG90TmV0U3RyZWFtUmVmS2V5ID0gXCJfX2RvdE5ldFN0cmVhbVwiO1xuICAgIGNvbnN0IGpzU3RyZWFtUmVmZXJlbmNlTGVuZ3RoS2V5ID0gXCJfX2pzU3RyZWFtUmVmZXJlbmNlTGVuZ3RoXCI7XG4gICAgLy8gSWYgdW5kZWZpbmVkLCBubyBkaXNwYXRjaGVyIGhhcyBiZWVuIGF0dGFjaGVkIHlldC5cbiAgICAvLyBJZiBudWxsLCB0aGlzIG1lYW5zIG1vcmUgdGhhbiBvbmUgZGlzcGF0Y2hlciB3YXMgYXR0YWNoZWQsIHNvIG5vIGRlZmF1bHQgY2FuIGJlIGRldGVybWluZWQuXG4gICAgLy8gT3RoZXJ3aXNlLCB0aGVyZSB3YXMgb25seSBvbmUgZGlzcGF0Y2hlciByZWdpc3RlcmVkLiBXZSBrZWVwIHRyYWNrIG9mIHRoaXMgaW5zdGFuY2UgdG8ga2VlcCBsZWdhY3kgQVBJcyB3b3JraW5nLlxuICAgIGxldCBkZWZhdWx0Q2FsbERpc3BhdGNoZXI7XG4gICAgLy8gUHJvdmlkZXMgYWNjZXNzIHRvIHRoZSBcImN1cnJlbnRcIiBjYWxsIGRpc3BhdGNoZXIgd2l0aG91dCBoYXZpbmcgdG8gZmxvdyBpdCB0aHJvdWdoIG5lc3RlZCBmdW5jdGlvbiBjYWxscy5cbiAgICBsZXQgY3VycmVudENhbGxEaXNwYXRjaGVyO1xuICAgIGNsYXNzIEpTT2JqZWN0IHtcbiAgICAgICAgO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdHJ1Y3RvcihfanNPYmplY3QpIHtcbiAgICAgICAgICAgIHRoaXMuX2pzT2JqZWN0ID0gX2pzT2JqZWN0O1xuICAgICAgICAgICAgdGhpcy5fY2FjaGVkSGFuZGxlcnMgPSBuZXcgTWFwKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmVzb2x2ZUludm9jYXRpb25IYW5kbGVyKGlkZW50aWZpZXIsIGNhbGxUeXBlKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBjb25zdCBjYWNoZWRGdW5jdGlvbiA9IChfYSA9IHRoaXMuX2NhY2hlZEhhbmRsZXJzLmdldChpZGVudGlmaWVyKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hW2NhbGxUeXBlXTtcbiAgICAgICAgICAgIGlmIChjYWNoZWRGdW5jdGlvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWNoZWRGdW5jdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IFtwYXJlbnQsIG1lbWJlck5hbWVdID0gZmluZE9iamVjdE1lbWJlcih0aGlzLl9qc09iamVjdCwgaWRlbnRpZmllcik7XG4gICAgICAgICAgICBjb25zdCBmdW5jID0gd3JhcEpTQ2FsbEFzRnVuY3Rpb24ocGFyZW50LCBtZW1iZXJOYW1lLCBjYWxsVHlwZSwgaWRlbnRpZmllcik7XG4gICAgICAgICAgICB0aGlzLmFkZEhhbmRsZXJUb0NhY2hlKGlkZW50aWZpZXIsIGZ1bmMsIGNhbGxUeXBlKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jO1xuICAgICAgICB9XG4gICAgICAgIGdldFdyYXBwZWRPYmplY3QoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fanNPYmplY3Q7XG4gICAgICAgIH1cbiAgICAgICAgYWRkSGFuZGxlclRvQ2FjaGUoaWRlbnRpZmllciwgZnVuYywgY2FsbFR5cGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlZElkZW50aWZpZXIgPSB0aGlzLl9jYWNoZWRIYW5kbGVycy5nZXQoaWRlbnRpZmllcik7XG4gICAgICAgICAgICBpZiAoY2FjaGVkSWRlbnRpZmllcikge1xuICAgICAgICAgICAgICAgIGNhY2hlZElkZW50aWZpZXJbY2FsbFR5cGVdID0gZnVuYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlZEhhbmRsZXJzLnNldChpZGVudGlmaWVyLCB7IFtjYWxsVHlwZV06IGZ1bmMgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgKiBSZXByZXNlbnRzIHRoZSB0eXBlIG9mIG9wZXJhdGlvbiB0aGF0IHNob3VsZCBiZSBwZXJmb3JtZWQgaW4gSlMuXG4gICAgKi9cbiAgICBsZXQgSlNDYWxsVHlwZTtcbiAgICAoZnVuY3Rpb24gKEpTQ2FsbFR5cGUpIHtcbiAgICAgICAgSlNDYWxsVHlwZVtKU0NhbGxUeXBlW1wiRnVuY3Rpb25DYWxsXCJdID0gMV0gPSBcIkZ1bmN0aW9uQ2FsbFwiO1xuICAgICAgICBKU0NhbGxUeXBlW0pTQ2FsbFR5cGVbXCJDb25zdHJ1Y3RvckNhbGxcIl0gPSAyXSA9IFwiQ29uc3RydWN0b3JDYWxsXCI7XG4gICAgICAgIEpTQ2FsbFR5cGVbSlNDYWxsVHlwZVtcIkdldFZhbHVlXCJdID0gM10gPSBcIkdldFZhbHVlXCI7XG4gICAgICAgIEpTQ2FsbFR5cGVbSlNDYWxsVHlwZVtcIlNldFZhbHVlXCJdID0gNF0gPSBcIlNldFZhbHVlXCI7XG4gICAgfSkoSlNDYWxsVHlwZSA9IERvdE5ldC5KU0NhbGxUeXBlIHx8IChEb3ROZXQuSlNDYWxsVHlwZSA9IHt9KSk7XG4gICAgY29uc3Qgd2luZG93SlNPYmplY3RJZCA9IDA7XG4gICAgY29uc3QgY2FjaGVkSlNPYmplY3RzQnlJZCA9IHtcbiAgICAgICAgW3dpbmRvd0pTT2JqZWN0SWRdOiBuZXcgSlNPYmplY3Qod2luZG93KVxuICAgIH07XG4gICAgY29uc3Qgd2luZG93T2JqZWN0ID0gY2FjaGVkSlNPYmplY3RzQnlJZFt3aW5kb3dKU09iamVjdElkXTtcbiAgICB3aW5kb3dPYmplY3QuX2NhY2hlZEhhbmRsZXJzLnNldChcImltcG9ydFwiLCB7IFtKU0NhbGxUeXBlLkZ1bmN0aW9uQ2FsbF06ICh1cmwpID0+IHtcbiAgICAgICAgICAgIC8vIEluIG1vc3QgY2FzZXMgZGV2ZWxvcGVycyB3aWxsIHdhbnQgdG8gcmVzb2x2ZSBkeW5hbWljIGltcG9ydHMgcmVsYXRpdmUgdG8gdGhlIGJhc2UgSFJFRi5cbiAgICAgICAgICAgIC8vIEhvd2V2ZXIgc2luY2Ugd2UncmUgdGhlIG9uZSBjYWxsaW5nIHRoZSBpbXBvcnQga2V5d29yZCwgdGhleSB3b3VsZCBiZSByZXNvbHZlZCByZWxhdGl2ZSB0b1xuICAgICAgICAgICAgLy8gdGhpcyBmcmFtZXdvcmsgYnVuZGxlIFVSTC4gRml4IHRoaXMgYnkgcHJvdmlkaW5nIGFuIGFic29sdXRlIFVSTC5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXJsID09PSBcInN0cmluZ1wiICYmIHVybC5zdGFydHNXaXRoKFwiLi9cIikpIHtcbiAgICAgICAgICAgICAgICB1cmwgPSBuZXcgVVJMKHVybC5zdWJzdHJpbmcoMiksIGRvY3VtZW50LmJhc2VVUkkpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW1wb3J0KC8qIHdlYnBhY2tJZ25vcmU6IHRydWUgKi8gdXJsKTtcbiAgICAgICAgfSB9KTtcbiAgICBsZXQgbmV4dEpzT2JqZWN0SWQgPSAxOyAvLyBTdGFydCBhdCAxIGJlY2F1c2UgemVybyBpcyByZXNlcnZlZCBmb3IgXCJ3aW5kb3dcIlxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSAuTkVUIGNhbGwgZGlzcGF0Y2hlciB0byB1c2UgZm9yIGhhbmRsaW5nIGludm9jYXRpb25zIGJldHdlZW4gSmF2YVNjcmlwdCBhbmQgYSAuTkVUIHJ1bnRpbWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG90TmV0Q2FsbERpc3BhdGNoZXIgQW4gb2JqZWN0IHRoYXQgY2FuIGRpc3BhdGNoIGNhbGxzIGZyb20gSmF2YVNjcmlwdCB0byBhIC5ORVQgcnVudGltZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhdHRhY2hEaXNwYXRjaGVyKGRvdE5ldENhbGxEaXNwYXRjaGVyKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBDYWxsRGlzcGF0Y2hlcihkb3ROZXRDYWxsRGlzcGF0Y2hlcik7XG4gICAgICAgIGlmIChkZWZhdWx0Q2FsbERpc3BhdGNoZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gVGhpcyB3YXMgdGhlIGZpcnN0IGRpc3BhdGNoZXIgcmVnaXN0ZXJlZCwgc28gaXQgYmVjb21lcyB0aGUgZGVmYXVsdC4gVGhpcyBleGlzdHMgcHVyZWx5IGZvclxuICAgICAgICAgICAgLy8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gICAgICAgICAgICBkZWZhdWx0Q2FsbERpc3BhdGNoZXIgPSByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGVmYXVsdENhbGxEaXNwYXRjaGVyKSB7XG4gICAgICAgICAgICAvLyBUaGVyZSBpcyBhbHJlYWR5IGEgZGVmYXVsdCBkaXNwYXRjaGVyLiBOb3cgdGhhdCB0aGVyZSBhcmUgbXVsdGlwbGUgdG8gY2hvb3NlIGZyb20sIHRoZXJlIGNhblxuICAgICAgICAgICAgLy8gYmUgbm8gYWNjZXB0YWJsZSBkZWZhdWx0LCBzbyB3ZSBudWxsaWZ5IHRoZSBkZWZhdWx0IGRpc3BhdGNoZXIuXG4gICAgICAgICAgICBkZWZhdWx0Q2FsbERpc3BhdGNoZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIERvdE5ldC5hdHRhY2hEaXNwYXRjaGVyID0gYXR0YWNoRGlzcGF0Y2hlcjtcbiAgICAvKipcbiAgICAgKiBBZGRzIGEgSlNPTiByZXZpdmVyIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSB1c2VkIHdoZW4gcGFyc2luZyBhcmd1bWVudHMgcmVjZWl2ZWQgZnJvbSAuTkVULlxuICAgICAqIEBwYXJhbSByZXZpdmVyIFRoZSByZXZpdmVyIHRvIGFkZC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhdHRhY2hSZXZpdmVyKHJldml2ZXIpIHtcbiAgICAgICAganNvblJldml2ZXJzLnB1c2gocmV2aXZlcik7XG4gICAgfVxuICAgIERvdE5ldC5hdHRhY2hSZXZpdmVyID0gYXR0YWNoUmV2aXZlcjtcbiAgICAvKipcbiAgICAgKiBJbnZva2VzIHRoZSBzcGVjaWZpZWQgLk5FVCBwdWJsaWMgbWV0aG9kIHN5bmNocm9ub3VzbHkuIE5vdCBhbGwgaG9zdGluZyBzY2VuYXJpb3Mgc3VwcG9ydFxuICAgICAqIHN5bmNocm9ub3VzIGludm9jYXRpb24sIHNvIGlmIHBvc3NpYmxlIHVzZSBpbnZva2VNZXRob2RBc3luYyBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIERvdE5ldE9iamVjdCB0byBpbnZva2UgaW5zdGFuY2UgbWV0aG9kcyBpbnN0ZWFkLlxuICAgICAqIEBwYXJhbSBhc3NlbWJseU5hbWUgVGhlIHNob3J0IG5hbWUgKHdpdGhvdXQga2V5L3ZlcnNpb24gb3IgLmRsbCBleHRlbnNpb24pIG9mIHRoZSAuTkVUIGFzc2VtYmx5IGNvbnRhaW5pbmcgdGhlIG1ldGhvZC5cbiAgICAgKiBAcGFyYW0gbWV0aG9kSWRlbnRpZmllciBUaGUgaWRlbnRpZmllciBvZiB0aGUgbWV0aG9kIHRvIGludm9rZS4gVGhlIG1ldGhvZCBtdXN0IGhhdmUgYSBbSlNJbnZva2FibGVdIGF0dHJpYnV0ZSBzcGVjaWZ5aW5nIHRoaXMgaWRlbnRpZmllci5cbiAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWVudHMgdG8gcGFzcyB0byB0aGUgbWV0aG9kLCBlYWNoIG9mIHdoaWNoIG11c3QgYmUgSlNPTi1zZXJpYWxpemFibGUuXG4gICAgICogQHJldHVybnMgVGhlIHJlc3VsdCBvZiB0aGUgb3BlcmF0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGludm9rZU1ldGhvZChhc3NlbWJseU5hbWUsIG1ldGhvZElkZW50aWZpZXIsIC4uLmFyZ3MpIHtcbiAgICAgICAgY29uc3QgZGlzcGF0Y2hlciA9IGdldERlZmF1bHRDYWxsRGlzcGF0Y2hlcigpO1xuICAgICAgICByZXR1cm4gZGlzcGF0Y2hlci5pbnZva2VEb3ROZXRTdGF0aWNNZXRob2QoYXNzZW1ibHlOYW1lLCBtZXRob2RJZGVudGlmaWVyLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgRG90TmV0Lmludm9rZU1ldGhvZCA9IGludm9rZU1ldGhvZDtcbiAgICAvKipcbiAgICAgKiBJbnZva2VzIHRoZSBzcGVjaWZpZWQgLk5FVCBwdWJsaWMgbWV0aG9kIGFzeW5jaHJvbm91c2x5LlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIERvdE5ldE9iamVjdCB0byBpbnZva2UgaW5zdGFuY2UgbWV0aG9kcyBpbnN0ZWFkLlxuICAgICAqIEBwYXJhbSBhc3NlbWJseU5hbWUgVGhlIHNob3J0IG5hbWUgKHdpdGhvdXQga2V5L3ZlcnNpb24gb3IgLmRsbCBleHRlbnNpb24pIG9mIHRoZSAuTkVUIGFzc2VtYmx5IGNvbnRhaW5pbmcgdGhlIG1ldGhvZC5cbiAgICAgKiBAcGFyYW0gbWV0aG9kSWRlbnRpZmllciBUaGUgaWRlbnRpZmllciBvZiB0aGUgbWV0aG9kIHRvIGludm9rZS4gVGhlIG1ldGhvZCBtdXN0IGhhdmUgYSBbSlNJbnZva2FibGVdIGF0dHJpYnV0ZSBzcGVjaWZ5aW5nIHRoaXMgaWRlbnRpZmllci5cbiAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWVudHMgdG8gcGFzcyB0byB0aGUgbWV0aG9kLCBlYWNoIG9mIHdoaWNoIG11c3QgYmUgSlNPTi1zZXJpYWxpemFibGUuXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0IG9mIHRoZSBvcGVyYXRpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW52b2tlTWV0aG9kQXN5bmMoYXNzZW1ibHlOYW1lLCBtZXRob2RJZGVudGlmaWVyLCAuLi5hcmdzKSB7XG4gICAgICAgIGNvbnN0IGRpc3BhdGNoZXIgPSBnZXREZWZhdWx0Q2FsbERpc3BhdGNoZXIoKTtcbiAgICAgICAgcmV0dXJuIGRpc3BhdGNoZXIuaW52b2tlRG90TmV0U3RhdGljTWV0aG9kQXN5bmMoYXNzZW1ibHlOYW1lLCBtZXRob2RJZGVudGlmaWVyLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgRG90TmV0Lmludm9rZU1ldGhvZEFzeW5jID0gaW52b2tlTWV0aG9kQXN5bmM7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIEphdmFTY3JpcHQgb2JqZWN0IHJlZmVyZW5jZSB0aGF0IGNhbiBiZSBwYXNzZWQgdG8gLk5FVCB2aWEgaW50ZXJvcCBjYWxscy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBqc09iamVjdCBUaGUgSmF2YVNjcmlwdCBPYmplY3QgdXNlZCB0byBjcmVhdGUgdGhlIEphdmFTY3JpcHQgb2JqZWN0IHJlZmVyZW5jZS5cbiAgICAgKiBAcmV0dXJucyBUaGUgSmF2YVNjcmlwdCBvYmplY3QgcmVmZXJlbmNlICh0aGlzIHdpbGwgYmUgdGhlIHNhbWUgaW5zdGFuY2UgYXMgdGhlIGdpdmVuIG9iamVjdCkuXG4gICAgICogQHRocm93cyBFcnJvciBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgbm90IGFuIE9iamVjdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVKU09iamVjdFJlZmVyZW5jZShqc09iamVjdCkge1xuICAgICAgICBpZiAoanNPYmplY3QgPT09IG51bGwgfHwganNPYmplY3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBbanNPYmplY3RJZEtleV06IC0xXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChqc09iamVjdCAmJiAodHlwZW9mIGpzT2JqZWN0ID09PSBcIm9iamVjdFwiIHx8IGpzT2JqZWN0IGluc3RhbmNlb2YgRnVuY3Rpb24pKSB7XG4gICAgICAgICAgICBjYWNoZWRKU09iamVjdHNCeUlkW25leHRKc09iamVjdElkXSA9IG5ldyBKU09iamVjdChqc09iamVjdCk7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgW2pzT2JqZWN0SWRLZXldOiBuZXh0SnNPYmplY3RJZFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG5leHRKc09iamVjdElkKys7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGNyZWF0ZSBhIEpTT2JqZWN0UmVmZXJlbmNlIGZyb20gdGhlIHZhbHVlICcke2pzT2JqZWN0fScuYCk7XG4gICAgfVxuICAgIERvdE5ldC5jcmVhdGVKU09iamVjdFJlZmVyZW5jZSA9IGNyZWF0ZUpTT2JqZWN0UmVmZXJlbmNlO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBKYXZhU2NyaXB0IGRhdGEgcmVmZXJlbmNlIHRoYXQgY2FuIGJlIHBhc3NlZCB0byAuTkVUIHZpYSBpbnRlcm9wIGNhbGxzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHN0cmVhbVJlZmVyZW5jZSBUaGUgQXJyYXlCdWZmZXJWaWV3IG9yIEJsb2IgdXNlZCB0byBjcmVhdGUgdGhlIEphdmFTY3JpcHQgc3RyZWFtIHJlZmVyZW5jZS5cbiAgICAgKiBAcmV0dXJucyBUaGUgSmF2YVNjcmlwdCBkYXRhIHJlZmVyZW5jZSAodGhpcyB3aWxsIGJlIHRoZSBzYW1lIGluc3RhbmNlIGFzIHRoZSBnaXZlbiBvYmplY3QpLlxuICAgICAqIEB0aHJvd3MgRXJyb3IgaWYgdGhlIGdpdmVuIHZhbHVlIGlzIG5vdCBhbiBPYmplY3Qgb3IgZG9lc24ndCBoYXZlIGEgdmFsaWQgYnl0ZUxlbmd0aC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVKU1N0cmVhbVJlZmVyZW5jZShzdHJlYW1SZWZlcmVuY2UpIHtcbiAgICAgICAgbGV0IGxlbmd0aCA9IC0xO1xuICAgICAgICAvLyBJZiB3ZSdyZSBnaXZlbiBhIHJhdyBBcnJheSBCdWZmZXIsIHdlIGludGVycHJldCBpdCBhcyBhIGBVaW50OEFycmF5YCBhc1xuICAgICAgICAvLyBBcnJheUJ1ZmZlcnMnIGFyZW4ndCBkaXJlY3RseSByZWFkYWJsZS5cbiAgICAgICAgaWYgKHN0cmVhbVJlZmVyZW5jZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgICBzdHJlYW1SZWZlcmVuY2UgPSBuZXcgVWludDhBcnJheShzdHJlYW1SZWZlcmVuY2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdHJlYW1SZWZlcmVuY2UgaW5zdGFuY2VvZiBCbG9iKSB7XG4gICAgICAgICAgICBsZW5ndGggPSBzdHJlYW1SZWZlcmVuY2Uuc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzdHJlYW1SZWZlcmVuY2UuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICAgIGlmIChzdHJlYW1SZWZlcmVuY2UuYnl0ZUxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgY3JlYXRlIGEgSlNTdHJlYW1SZWZlcmVuY2UgZnJvbSB0aGUgdmFsdWUgJyR7c3RyZWFtUmVmZXJlbmNlfScgYXMgaXQgZG9lc24ndCBoYXZlIGEgYnl0ZUxlbmd0aC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxlbmd0aCA9IHN0cmVhbVJlZmVyZW5jZS5ieXRlTGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3VwcGxpZWQgdmFsdWUgaXMgbm90IGEgdHlwZWQgYXJyYXkgb3IgYmxvYi5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgICAgW2pzU3RyZWFtUmVmZXJlbmNlTGVuZ3RoS2V5XTogbGVuZ3RoXG4gICAgICAgIH07XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBqc09iamVjdFJlZmVyZW5jZSA9IGNyZWF0ZUpTT2JqZWN0UmVmZXJlbmNlKHN0cmVhbVJlZmVyZW5jZSk7XG4gICAgICAgICAgICByZXN1bHRbanNPYmplY3RJZEtleV0gPSBqc09iamVjdFJlZmVyZW5jZVtqc09iamVjdElkS2V5XTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGNyZWF0ZSBhIEpTU3RyZWFtUmVmZXJlbmNlIGZyb20gdGhlIHZhbHVlICcke3N0cmVhbVJlZmVyZW5jZX0nLmApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIERvdE5ldC5jcmVhdGVKU1N0cmVhbVJlZmVyZW5jZSA9IGNyZWF0ZUpTU3RyZWFtUmVmZXJlbmNlO1xuICAgIC8qKlxuICAgICAqIERpc3Bvc2VzIHRoZSBnaXZlbiBKYXZhU2NyaXB0IG9iamVjdCByZWZlcmVuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ganNPYmplY3RSZWZlcmVuY2UgVGhlIEphdmFTY3JpcHQgT2JqZWN0IHJlZmVyZW5jZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBkaXNwb3NlSlNPYmplY3RSZWZlcmVuY2UoanNPYmplY3RSZWZlcmVuY2UpIHtcbiAgICAgICAgY29uc3QgaWQgPSBqc09iamVjdFJlZmVyZW5jZSAmJiBqc09iamVjdFJlZmVyZW5jZVtqc09iamVjdElkS2V5XTtcbiAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gXCJudW1iZXJcIiAmJiBpZCAhPT0gLTEpIHtcbiAgICAgICAgICAgIGRpc3Bvc2VKU09iamVjdFJlZmVyZW5jZUJ5SWQoaWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIERvdE5ldC5kaXNwb3NlSlNPYmplY3RSZWZlcmVuY2UgPSBkaXNwb3NlSlNPYmplY3RSZWZlcmVuY2U7XG4gICAgZnVuY3Rpb24gcGFyc2VKc29uV2l0aFJldml2ZXJzKGNhbGxEaXNwYXRjaGVyLCBqc29uKSB7XG4gICAgICAgIGN1cnJlbnRDYWxsRGlzcGF0Y2hlciA9IGNhbGxEaXNwYXRjaGVyO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBqc29uID8gSlNPTi5wYXJzZShqc29uLCAoa2V5LCBpbml0aWFsVmFsdWUpID0+IHtcbiAgICAgICAgICAgIC8vIEludm9rZSBlYWNoIHJldml2ZXIgaW4gb3JkZXIsIHBhc3NpbmcgdGhlIG91dHB1dCBmcm9tIHRoZSBwcmV2aW91cyByZXZpdmVyLFxuICAgICAgICAgICAgLy8gc28gdGhhdCBlYWNoIG9uZSBnZXRzIGEgY2hhbmNlIHRvIHRyYW5zZm9ybSB0aGUgdmFsdWVcbiAgICAgICAgICAgIHJldHVybiBqc29uUmV2aXZlcnMucmVkdWNlKChsYXRlc3RWYWx1ZSwgcmV2aXZlcikgPT4gcmV2aXZlcihrZXksIGxhdGVzdFZhbHVlKSwgaW5pdGlhbFZhbHVlKTtcbiAgICAgICAgfSkgOiBudWxsO1xuICAgICAgICBjdXJyZW50Q2FsbERpc3BhdGNoZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldERlZmF1bHRDYWxsRGlzcGF0Y2hlcigpIHtcbiAgICAgICAgaWYgKGRlZmF1bHRDYWxsRGlzcGF0Y2hlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBjYWxsIGRpc3BhdGNoZXIgaGFzIGJlZW4gc2V0LlwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkZWZhdWx0Q2FsbERpc3BhdGNoZXIgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZXJlIGFyZSBtdWx0aXBsZSAuTkVUIHJ1bnRpbWVzIHByZXNlbnQsIHNvIGEgZGVmYXVsdCBkaXNwYXRjaGVyIGNvdWxkIG5vdCBiZSByZXNvbHZlZC4gVXNlIERvdE5ldE9iamVjdCB0byBpbnZva2UgLk5FVCBpbnN0YW5jZSBtZXRob2RzLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0Q2FsbERpc3BhdGNoZXI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVwcmVzZW50cyB0aGUgdHlwZSBvZiByZXN1bHQgZXhwZWN0ZWQgZnJvbSBhIEpTIGludGVyb3AgY2FsbC5cbiAgICAgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2hhZG93XG4gICAgbGV0IEpTQ2FsbFJlc3VsdFR5cGU7XG4gICAgKGZ1bmN0aW9uIChKU0NhbGxSZXN1bHRUeXBlKSB7XG4gICAgICAgIEpTQ2FsbFJlc3VsdFR5cGVbSlNDYWxsUmVzdWx0VHlwZVtcIkRlZmF1bHRcIl0gPSAwXSA9IFwiRGVmYXVsdFwiO1xuICAgICAgICBKU0NhbGxSZXN1bHRUeXBlW0pTQ2FsbFJlc3VsdFR5cGVbXCJKU09iamVjdFJlZmVyZW5jZVwiXSA9IDFdID0gXCJKU09iamVjdFJlZmVyZW5jZVwiO1xuICAgICAgICBKU0NhbGxSZXN1bHRUeXBlW0pTQ2FsbFJlc3VsdFR5cGVbXCJKU1N0cmVhbVJlZmVyZW5jZVwiXSA9IDJdID0gXCJKU1N0cmVhbVJlZmVyZW5jZVwiO1xuICAgICAgICBKU0NhbGxSZXN1bHRUeXBlW0pTQ2FsbFJlc3VsdFR5cGVbXCJKU1ZvaWRSZXN1bHRcIl0gPSAzXSA9IFwiSlNWb2lkUmVzdWx0XCI7XG4gICAgfSkoSlNDYWxsUmVzdWx0VHlwZSA9IERvdE5ldC5KU0NhbGxSZXN1bHRUeXBlIHx8IChEb3ROZXQuSlNDYWxsUmVzdWx0VHlwZSA9IHt9KSk7XG4gICAgY2xhc3MgQ2FsbERpc3BhdGNoZXIge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZW1wdHktZnVuY3Rpb25cbiAgICAgICAgY29uc3RydWN0b3IoX2RvdE5ldENhbGxEaXNwYXRjaGVyKSB7XG4gICAgICAgICAgICB0aGlzLl9kb3ROZXRDYWxsRGlzcGF0Y2hlciA9IF9kb3ROZXRDYWxsRGlzcGF0Y2hlcjtcbiAgICAgICAgICAgIHRoaXMuX2J5dGVBcnJheXNUb0JlUmV2aXZlZCA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdEb3ROZXRUb0pTU3RyZWFtcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdBc3luY0NhbGxzID0ge307XG4gICAgICAgICAgICB0aGlzLl9uZXh0QXN5bmNDYWxsSWQgPSAxOyAvLyBTdGFydCBhdCAxIGJlY2F1c2UgemVybyBzaWduYWxzIFwibm8gcmVzcG9uc2UgbmVlZGVkXCJcbiAgICAgICAgfVxuICAgICAgICBnZXREb3ROZXRDYWxsRGlzcGF0Y2hlcigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9kb3ROZXRDYWxsRGlzcGF0Y2hlcjtcbiAgICAgICAgfVxuICAgICAgICBpbnZva2VKU0Zyb21Eb3ROZXQoaWRlbnRpZmllciwgYXJnc0pzb24sIHJlc3VsdFR5cGUsIHRhcmdldEluc3RhbmNlSWQsIGNhbGxUeXBlKSB7XG4gICAgICAgICAgICBjb25zdCByZXR1cm5WYWx1ZSA9IHRoaXMucHJvY2Vzc0pTQ2FsbCh0YXJnZXRJbnN0YW5jZUlkLCBpZGVudGlmaWVyLCBjYWxsVHlwZSwgYXJnc0pzb24pO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gY3JlYXRlSlNDYWxsUmVzdWx0KHJldHVyblZhbHVlLCByZXN1bHRUeXBlKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQgPT09IG51bGwgfHwgcmVzdWx0ID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgICA6IHN0cmluZ2lmeUFyZ3ModGhpcywgcmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICBhc3luYyBiZWdpbkludm9rZUpTRnJvbURvdE5ldChhc3luY0hhbmRsZSwgaWRlbnRpZmllciwgYXJnc0pzb24sIHJlc3VsdFR5cGUsIHRhcmdldEluc3RhbmNlSWQsIGNhbGxUeXBlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlT3JQcm9taXNlID0gdGhpcy5wcm9jZXNzSlNDYWxsKHRhcmdldEluc3RhbmNlSWQsIGlkZW50aWZpZXIsIGNhbGxUeXBlLCBhcmdzSnNvbik7XG4gICAgICAgICAgICAgICAgLy8gV2Ugb25seSBhd2FpdCB0aGUgcmVzdWx0IGlmIHRoZSBjYWxsZXIgd2FudHMgdG8gYmUgbm90aWZpZWQgYWJvdXQgaXRcbiAgICAgICAgICAgICAgICBpZiAoYXN5bmNIYW5kbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdmFsdWVPclByb21pc2U7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlcmlhbGl6ZWRSZXN1bHQgPSBzdHJpbmdpZnlBcmdzKHRoaXMsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzeW5jSGFuZGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUpTQ2FsbFJlc3VsdChyZXN1bHQsIHJlc3VsdFR5cGUpXG4gICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBPbiBzdWNjZXNzLCBkaXNwYXRjaCByZXN1bHQgYmFjayB0byAuTkVUXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2RvdE5ldENhbGxEaXNwYXRjaGVyLmVuZEludm9rZUpTRnJvbURvdE5ldChhc3luY0hhbmRsZSwgdHJ1ZSwgc2VyaWFsaXplZFJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFzeW5jSGFuZGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlcmlhbGl6ZWRFcnJvciA9IEpTT04uc3RyaW5naWZ5KFtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzeW5jSGFuZGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXRFcnJvcihlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIE9uIGZhaWx1cmUsIGRpc3BhdGNoIGVycm9yIGJhY2sgdG8gLk5FVFxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kb3ROZXRDYWxsRGlzcGF0Y2hlci5lbmRJbnZva2VKU0Zyb21Eb3ROZXQoYXN5bmNIYW5kbGUsIGZhbHNlLCBzZXJpYWxpemVkRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwcm9jZXNzSlNDYWxsKHRhcmdldEluc3RhbmNlSWQsIGlkZW50aWZpZXIsIGNhbGxUeXBlLCBhcmdzSnNvbikge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgY29uc3QgYXJncyA9IChfYSA9IHBhcnNlSnNvbldpdGhSZXZpdmVycyh0aGlzLCBhcmdzSnNvbikpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFtdO1xuICAgICAgICAgICAgY29uc3QgZnVuYyA9IGZpbmRKU0Z1bmN0aW9uKGlkZW50aWZpZXIsIHRhcmdldEluc3RhbmNlSWQsIGNhbGxUeXBlKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jKC4uLmFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVuZEludm9rZURvdE5ldEZyb21KUyhhc3luY0NhbGxJZCwgc3VjY2VzcywgcmVzdWx0SnNvbk9yRXhjZXB0aW9uTWVzc2FnZSkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0T3JFcnJvciA9IHN1Y2Nlc3NcbiAgICAgICAgICAgICAgICA/IHBhcnNlSnNvbldpdGhSZXZpdmVycyh0aGlzLCByZXN1bHRKc29uT3JFeGNlcHRpb25NZXNzYWdlKVxuICAgICAgICAgICAgICAgIDogbmV3IEVycm9yKHJlc3VsdEpzb25PckV4Y2VwdGlvbk1lc3NhZ2UpO1xuICAgICAgICAgICAgdGhpcy5jb21wbGV0ZVBlbmRpbmdDYWxsKHBhcnNlSW50KGFzeW5jQ2FsbElkLCAxMCksIHN1Y2Nlc3MsIHJlc3VsdE9yRXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGludm9rZURvdE5ldFN0YXRpY01ldGhvZChhc3NlbWJseU5hbWUsIG1ldGhvZElkZW50aWZpZXIsIC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmludm9rZURvdE5ldE1ldGhvZChhc3NlbWJseU5hbWUsIG1ldGhvZElkZW50aWZpZXIsIG51bGwsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGludm9rZURvdE5ldFN0YXRpY01ldGhvZEFzeW5jKGFzc2VtYmx5TmFtZSwgbWV0aG9kSWRlbnRpZmllciwgLi4uYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW52b2tlRG90TmV0TWV0aG9kQXN5bmMoYXNzZW1ibHlOYW1lLCBtZXRob2RJZGVudGlmaWVyLCBudWxsLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBpbnZva2VEb3ROZXRNZXRob2QoYXNzZW1ibHlOYW1lLCBtZXRob2RJZGVudGlmaWVyLCBkb3ROZXRPYmplY3RJZCwgYXJncykge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2RvdE5ldENhbGxEaXNwYXRjaGVyLmludm9rZURvdE5ldEZyb21KUykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFyZ3NKc29uID0gc3RyaW5naWZ5QXJncyh0aGlzLCBhcmdzKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRKc29uID0gdGhpcy5fZG90TmV0Q2FsbERpc3BhdGNoZXIuaW52b2tlRG90TmV0RnJvbUpTKGFzc2VtYmx5TmFtZSwgbWV0aG9kSWRlbnRpZmllciwgZG90TmV0T2JqZWN0SWQsIGFyZ3NKc29uKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0SnNvbiA/IHBhcnNlSnNvbldpdGhSZXZpdmVycyh0aGlzLCByZXN1bHRKc29uKSA6IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgY3VycmVudCBkaXNwYXRjaGVyIGRvZXMgbm90IHN1cHBvcnQgc3luY2hyb25vdXMgY2FsbHMgZnJvbSBKUyB0byAuTkVULiBVc2UgaW52b2tlRG90TmV0TWV0aG9kQXN5bmMgaW5zdGVhZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgaW52b2tlRG90TmV0TWV0aG9kQXN5bmMoYXNzZW1ibHlOYW1lLCBtZXRob2RJZGVudGlmaWVyLCBkb3ROZXRPYmplY3RJZCwgYXJncykge1xuICAgICAgICAgICAgaWYgKGFzc2VtYmx5TmFtZSAmJiBkb3ROZXRPYmplY3RJZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRm9yIGluc3RhbmNlIG1ldGhvZCBjYWxscywgYXNzZW1ibHlOYW1lIHNob3VsZCBiZSBudWxsLiBSZWNlaXZlZCAnJHthc3NlbWJseU5hbWV9Jy5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGFzeW5jQ2FsbElkID0gdGhpcy5fbmV4dEFzeW5jQ2FsbElkKys7XG4gICAgICAgICAgICBjb25zdCByZXN1bHRQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdBc3luY0NhbGxzW2FzeW5jQ2FsbElkXSA9IHsgcmVzb2x2ZSwgcmVqZWN0IH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXJnc0pzb24gPSBzdHJpbmdpZnlBcmdzKHRoaXMsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2RvdE5ldENhbGxEaXNwYXRjaGVyLmJlZ2luSW52b2tlRG90TmV0RnJvbUpTKGFzeW5jQ2FsbElkLCBhc3NlbWJseU5hbWUsIG1ldGhvZElkZW50aWZpZXIsIGRvdE5ldE9iamVjdElkLCBhcmdzSnNvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICAvLyBTeW5jaHJvbm91cyBmYWlsdXJlXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wbGV0ZVBlbmRpbmdDYWxsKGFzeW5jQ2FsbElkLCBmYWxzZSwgZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFByb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmVjZWl2ZUJ5dGVBcnJheShpZCwgZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5fYnl0ZUFycmF5c1RvQmVSZXZpdmVkLnNldChpZCwgZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcHJvY2Vzc0J5dGVBcnJheShpZCkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fYnl0ZUFycmF5c1RvQmVSZXZpdmVkLmdldChpZCk7XG4gICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fYnl0ZUFycmF5c1RvQmVSZXZpdmVkLmRlbGV0ZShpZCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHN1cHBseURvdE5ldFN0cmVhbShzdHJlYW1JZCwgc3RyZWFtKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fcGVuZGluZ0RvdE5ldFRvSlNTdHJlYW1zLmhhcyhzdHJlYW1JZCkpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgcmVjZWl2ZXIgaXMgYWxyZWFkeSB3YWl0aW5nLCBzbyB3ZSBjYW4gcmVzb2x2ZSB0aGUgcHJvbWlzZSBub3cgYW5kIHN0b3AgdHJhY2tpbmcgdGhpc1xuICAgICAgICAgICAgICAgIGNvbnN0IHBlbmRpbmdTdHJlYW0gPSB0aGlzLl9wZW5kaW5nRG90TmV0VG9KU1N0cmVhbXMuZ2V0KHN0cmVhbUlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9wZW5kaW5nRG90TmV0VG9KU1N0cmVhbXMuZGVsZXRlKHN0cmVhbUlkKTtcbiAgICAgICAgICAgICAgICBwZW5kaW5nU3RyZWFtLnJlc29sdmUoc3RyZWFtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFRoZSByZWNlaXZlciBoYXNuJ3Qgc3RhcnRlZCB3YWl0aW5nIHlldCwgc28gdHJhY2sgYSBwcmUtY29tcGxldGVkIGVudHJ5IGl0IGNhbiBhdHRhY2ggdG8gbGF0ZXJcbiAgICAgICAgICAgICAgICBjb25zdCBwZW5kaW5nU3RyZWFtID0gbmV3IFBlbmRpbmdTdHJlYW0oKTtcbiAgICAgICAgICAgICAgICBwZW5kaW5nU3RyZWFtLnJlc29sdmUoc3RyZWFtKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9wZW5kaW5nRG90TmV0VG9KU1N0cmVhbXMuc2V0KHN0cmVhbUlkLCBwZW5kaW5nU3RyZWFtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBnZXREb3ROZXRTdHJlYW1Qcm9taXNlKHN0cmVhbUlkKSB7XG4gICAgICAgICAgICAvLyBXZSBtaWdodCBhbHJlYWR5IGhhdmUgc3RhcnRlZCByZWNlaXZpbmcgdGhlIHN0cmVhbSwgb3IgbWF5YmUgaXQgd2lsbCBjb21lIGxhdGVyLlxuICAgICAgICAgICAgLy8gV2UgaGF2ZSB0byBoYW5kbGUgYm90aCBwb3NzaWJsZSBvcmRlcmluZ3MsIGJ1dCB3ZSBjYW4gY291bnQgb24gaXQgY29taW5nIGV2ZW50dWFsbHkgYmVjYXVzZVxuICAgICAgICAgICAgLy8gaXQncyBub3Qgc29tZXRoaW5nIHRoZSBkZXZlbG9wZXIgZ2V0cyB0byBjb250cm9sLCBhbmQgaXQgd291bGQgYmUgYW4gZXJyb3IgaWYgaXQgZG9lc24ndC5cbiAgICAgICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgICAgICBpZiAodGhpcy5fcGVuZGluZ0RvdE5ldFRvSlNTdHJlYW1zLmhhcyhzdHJlYW1JZCkpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSd2ZSBhbHJlYWR5IHN0YXJ0ZWQgcmVjZWl2aW5nIHRoZSBzdHJlYW0sIHNvIG5vIGxvbmdlciBuZWVkIHRvIHRyYWNrIGl0IGFzIHBlbmRpbmdcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9wZW5kaW5nRG90TmV0VG9KU1N0cmVhbXMuZ2V0KHN0cmVhbUlkKS5zdHJlYW1Qcm9taXNlO1xuICAgICAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdEb3ROZXRUb0pTU3RyZWFtcy5kZWxldGUoc3RyZWFtSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgaGF2ZW4ndCBzdGFydGVkIHJlY2VpdmluZyBpdCB5ZXQsIHNvIGFkZCBhbiBlbnRyeSB0byB0cmFjayBpdCBhcyBwZW5kaW5nXG4gICAgICAgICAgICAgICAgY29uc3QgcGVuZGluZ1N0cmVhbSA9IG5ldyBQZW5kaW5nU3RyZWFtKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fcGVuZGluZ0RvdE5ldFRvSlNTdHJlYW1zLnNldChzdHJlYW1JZCwgcGVuZGluZ1N0cmVhbSk7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gcGVuZGluZ1N0cmVhbS5zdHJlYW1Qcm9taXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBjb21wbGV0ZVBlbmRpbmdDYWxsKGFzeW5jQ2FsbElkLCBzdWNjZXNzLCByZXN1bHRPckVycm9yKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX3BlbmRpbmdBc3luY0NhbGxzLmhhc093blByb3BlcnR5KGFzeW5jQ2FsbElkKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlcmUgaXMgbm8gcGVuZGluZyBhc3luYyBjYWxsIHdpdGggSUQgJHthc3luY0NhbGxJZH0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhc3luY0NhbGwgPSB0aGlzLl9wZW5kaW5nQXN5bmNDYWxsc1thc3luY0NhbGxJZF07XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fcGVuZGluZ0FzeW5jQ2FsbHNbYXN5bmNDYWxsSWRdO1xuICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBhc3luY0NhbGwucmVzb2x2ZShyZXN1bHRPckVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFzeW5jQ2FsbC5yZWplY3QocmVzdWx0T3JFcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZm9ybWF0RXJyb3IoZXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBgJHtlcnJvci5tZXNzYWdlfVxcbiR7ZXJyb3Iuc3RhY2t9YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXJyb3IgPyBlcnJvci50b1N0cmluZygpIDogXCJudWxsXCI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZpbmRKU0Z1bmN0aW9uKGlkZW50aWZpZXIsIHRhcmdldEluc3RhbmNlSWQsIGNhbGxUeXBlKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldEluc3RhbmNlID0gY2FjaGVkSlNPYmplY3RzQnlJZFt0YXJnZXRJbnN0YW5jZUlkXTtcbiAgICAgICAgaWYgKHRhcmdldEluc3RhbmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0SW5zdGFuY2UucmVzb2x2ZUludm9jYXRpb25IYW5kbGVyKGlkZW50aWZpZXIsIGNhbGxUeXBlICE9PSBudWxsICYmIGNhbGxUeXBlICE9PSB2b2lkIDAgPyBjYWxsVHlwZSA6IEpTQ2FsbFR5cGUuRnVuY3Rpb25DYWxsKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEpTIG9iamVjdCBpbnN0YW5jZSB3aXRoIElEICR7dGFyZ2V0SW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QgKGhhcyBpdCBiZWVuIGRpc3Bvc2VkPykuYCk7XG4gICAgfVxuICAgIERvdE5ldC5maW5kSlNGdW5jdGlvbiA9IGZpbmRKU0Z1bmN0aW9uO1xuICAgIGZ1bmN0aW9uIGRpc3Bvc2VKU09iamVjdFJlZmVyZW5jZUJ5SWQoaWQpIHtcbiAgICAgICAgZGVsZXRlIGNhY2hlZEpTT2JqZWN0c0J5SWRbaWRdO1xuICAgIH1cbiAgICBEb3ROZXQuZGlzcG9zZUpTT2JqZWN0UmVmZXJlbmNlQnlJZCA9IGRpc3Bvc2VKU09iamVjdFJlZmVyZW5jZUJ5SWQ7XG4gICAgLyoqIFRyYXZlcnNlcyB0aGUgb2JqZWN0IGhpZXJhcmNoeSB0byBmaW5kIGFuIG9iamVjdCBtZW1iZXIgc3BlY2lmaWVkIGJ5IHRoZSBpZGVudGlmaWVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9iaiBSb290IG9iamVjdCB0byBzZWFyY2ggaW4uXG4gICAgICogQHBhcmFtIGlkZW50aWZpZXIgQ29tcGxldGUgaWRlbnRpZmllciBvZiB0aGUgbWVtYmVyIHRvIGZpbmQsIGUuZy4gXCJkb2N1bWVudC5sb2NhdGlvbi5ocmVmXCIuXG4gICAgICogQHJldHVybnMgQSB0dXBsZSBjb250YWluaW5nIHRoZSBpbW1lZGlhdGUgcGFyZW50IG9mIHRoZSBtZW1iZXIgYW5kIHRoZSBtZW1iZXIgbmFtZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmaW5kT2JqZWN0TWVtYmVyKG9iaiwgaWRlbnRpZmllcikge1xuICAgICAgICBjb25zdCBrZXlzID0gaWRlbnRpZmllci5zcGxpdChcIi5cIik7XG4gICAgICAgIGxldCBjdXJyZW50ID0gb2JqO1xuICAgICAgICAvLyBGaXJzdCwgd2UgaXRlcmF0ZSBvdmVyIGFsbCBidXQgdGhlIGxhc3Qga2V5LiBXZSB0aHJvdyBlcnJvciBmb3IgbWlzc2luZyBpbnRlcm1lZGlhdGUga2V5cy5cbiAgICAgICAgLy8gRXJyb3IgaGFuZGxpbmcgaW4gY2FzZSBvZiB1bmRlZmluZWQgbGFzdCBrZXkgZGVwZW5kcyBvbiB0aGUgdHlwZSBvZiBvcGVyYXRpb24uXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IGtleXNbaV07XG4gICAgICAgICAgICBpZiAoY3VycmVudCAmJiB0eXBlb2YgY3VycmVudCA9PT0gJ29iamVjdCcgJiYga2V5IGluIGN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudFtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCAnJHtpZGVudGlmaWVyfScgKCcke2tleX0nIHdhcyB1bmRlZmluZWQpLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbY3VycmVudCwga2V5c1trZXlzLmxlbmd0aCAtIDFdXTtcbiAgICB9XG4gICAgRG90TmV0LmZpbmRPYmplY3RNZW1iZXIgPSBmaW5kT2JqZWN0TWVtYmVyO1xuICAgIC8qKiBUYWtlcyBhbiBvYmplY3QgbWVtYmVyIGFuZCBhIGNhbGwgdHlwZSBhbmQgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgcGVyZm9ybXMgdGhlIG9wZXJhdGlvbiBzcGVjaWZpZWQgYnkgdGhlIGNhbGwgdHlwZSBvbiB0aGUgbWVtYmVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhcmVudCBJbW1lZGlhdGUgcGFyZW50IG9mIHRoZSBhY2Nlc3NlZCBvYmplY3QgbWVtYmVyLlxuICAgICAqIEBwYXJhbSBtZW1iZXJOYW1lIE5hbWUgKGtleSkgb2YgdGhlIGFjY2Vzc2VkIG1lbWJlci5cbiAgICAgKiBAcGFyYW0gY2FsbFR5cGUgVGhlIHR5cGUgb2YgdGhlIG9wZXJhdGlvbiB0byBwZXJmb3JtIG9uIHRoZSBtZW1iZXIuXG4gICAgICogQHBhcmFtIGlkZW50aWZpZXIgVGhlIGZ1bGwgbWVtYmVyIGlkZW50aWZpZXIuIE9ubHkgdXNlZCBmb3IgZXJyb3IgbWVzc2FnZXMuXG4gICAgICogQHJldHVybnMgQSBmdW5jdGlvbiB0aGF0IHBlcmZvcm1zIHRoZSBvcGVyYXRpb24gb24gdGhlIG1lbWJlci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB3cmFwSlNDYWxsQXNGdW5jdGlvbihwYXJlbnQsIG1lbWJlck5hbWUsIGNhbGxUeXBlLCBpZGVudGlmaWVyKSB7XG4gICAgICAgIHN3aXRjaCAoY2FsbFR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgSlNDYWxsVHlwZS5GdW5jdGlvbkNhbGw6XG4gICAgICAgICAgICAgICAgY29uc3QgZnVuYyA9IHBhcmVudFttZW1iZXJOYW1lXTtcbiAgICAgICAgICAgICAgICBpZiAoZnVuYyBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jLmJpbmQocGFyZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIHZhbHVlICcke2lkZW50aWZpZXJ9JyBpcyBub3QgYSBmdW5jdGlvbi5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIEpTQ2FsbFR5cGUuQ29uc3RydWN0b3JDYWxsOlxuICAgICAgICAgICAgICAgIGNvbnN0IGN0b3IgPSBwYXJlbnRbbWVtYmVyTmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKGN0b3IgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBib3VuZCA9IGN0b3IuYmluZChwYXJlbnQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKC4uLmFyZ3MpID0+IG5ldyBib3VuZCguLi5hcmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIHZhbHVlICcke2lkZW50aWZpZXJ9JyBpcyBub3QgYSBmdW5jdGlvbi5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIEpTQ2FsbFR5cGUuR2V0VmFsdWU6XG4gICAgICAgICAgICAgICAgaWYgKCFpc1JlYWRhYmxlUHJvcGVydHkocGFyZW50LCBtZW1iZXJOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBwcm9wZXJ0eSAnJHtpZGVudGlmaWVyfScgaXMgbm90IGRlZmluZWQgb3IgaXMgbm90IHJlYWRhYmxlLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gKCkgPT4gcGFyZW50W21lbWJlck5hbWVdO1xuICAgICAgICAgICAgY2FzZSBKU0NhbGxUeXBlLlNldFZhbHVlOlxuICAgICAgICAgICAgICAgIGlmICghaXNXcml0YWJsZVByb3BlcnR5KHBhcmVudCwgbWVtYmVyTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgcHJvcGVydHkgJyR7aWRlbnRpZmllcn0nIGlzIG5vdCB3cml0YWJsZS5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICguLi5hcmdzKSA9PiBwYXJlbnRbbWVtYmVyTmFtZV0gPSBhcmdzWzBdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzUmVhZGFibGVQcm9wZXJ0eShvYmosIHByb3BOYW1lKSB7XG4gICAgICAgIC8vIFJldHVybiBmYWxzZSBmb3IgbWlzc2luZyBwcm9wZXJ0eS5cbiAgICAgICAgaWYgKCEocHJvcE5hbWUgaW4gb2JqKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHRoZSBwcm9wZXJ0eSBpcyBwcmVzZW50IHdlIGV4YW1pbmUgaXRzIGRlc2NyaXB0b3IsIHBvdGVudGlhbGx5IG5lZWRpbmcgdG8gd2FsayB1cCB0aGUgcHJvdG90eXBlIGNoYWluLlxuICAgICAgICB3aGlsZSAob2JqICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwgcHJvcE5hbWUpO1xuICAgICAgICAgICAgaWYgKGRlc2NyaXB0b3IpIHtcbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gdHJ1ZSBmb3IgZGF0YSBwcm9wZXJ0eVxuICAgICAgICAgICAgICAgIGlmIChkZXNjcmlwdG9yLmhhc093blByb3BlcnR5KCd2YWx1ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gdHJ1ZSBmb3IgYWNjZXNzb3IgcHJvcGVydHkgd2l0aCBkZWZpbmVkIGdldHRlci5cbiAgICAgICAgICAgICAgICByZXR1cm4gZGVzY3JpcHRvci5oYXNPd25Qcm9wZXJ0eSgnZ2V0JykgJiYgdHlwZW9mIGRlc2NyaXB0b3IuZ2V0ID09PSAnZnVuY3Rpb24nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb2JqID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc1dyaXRhYmxlUHJvcGVydHkob2JqLCBwcm9wTmFtZSkge1xuICAgICAgICAvLyBSZXR1cm4gdHJ1ZSBmb3IgbWlzc2luZyBwcm9wZXJ0eSBpZiB0aGUgcHJvcGVydHkgY2FuIGJlIGFkZGVkLlxuICAgICAgICBpZiAoIShwcm9wTmFtZSBpbiBvYmopKSB7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmlzRXh0ZW5zaWJsZShvYmopO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHRoZSBwcm9wZXJ0eSBpcyBwcmVzZW50IHdlIGV4YW1pbmUgaXRzIGRlc2NyaXB0b3IsIHBvdGVudGlhbGx5IG5lZWRpbmcgdG8gd2FsayB1cCB0aGUgcHJvdG90eXBlIGNoYWluLlxuICAgICAgICB3aGlsZSAob2JqICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwgcHJvcE5hbWUpO1xuICAgICAgICAgICAgaWYgKGRlc2NyaXB0b3IpIHtcbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gdHJ1ZSBmb3Igd3JpdGFibGUgZGF0YSBwcm9wZXJ0eS5cbiAgICAgICAgICAgICAgICBpZiAoZGVzY3JpcHRvci5oYXNPd25Qcm9wZXJ0eSgndmFsdWUnKSAmJiBkZXNjcmlwdG9yLndyaXRhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gdHJ1ZSBmb3IgYWNjZXNzb3IgcHJvcGVydHkgd2l0aCBkZWZpbmVkIHNldHRlci5cbiAgICAgICAgICAgICAgICByZXR1cm4gZGVzY3JpcHRvci5oYXNPd25Qcm9wZXJ0eSgnc2V0JykgJiYgdHlwZW9mIGRlc2NyaXB0b3Iuc2V0ID09PSAnZnVuY3Rpb24nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb2JqID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjbGFzcyBEb3ROZXRPYmplY3Qge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZW1wdHktZnVuY3Rpb25cbiAgICAgICAgY29uc3RydWN0b3IoX2lkLCBfY2FsbERpc3BhdGNoZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX2lkID0gX2lkO1xuICAgICAgICAgICAgdGhpcy5fY2FsbERpc3BhdGNoZXIgPSBfY2FsbERpc3BhdGNoZXI7XG4gICAgICAgIH1cbiAgICAgICAgaW52b2tlTWV0aG9kKG1ldGhvZElkZW50aWZpZXIsIC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYWxsRGlzcGF0Y2hlci5pbnZva2VEb3ROZXRNZXRob2QobnVsbCwgbWV0aG9kSWRlbnRpZmllciwgdGhpcy5faWQsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGludm9rZU1ldGhvZEFzeW5jKG1ldGhvZElkZW50aWZpZXIsIC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYWxsRGlzcGF0Y2hlci5pbnZva2VEb3ROZXRNZXRob2RBc3luYyhudWxsLCBtZXRob2RJZGVudGlmaWVyLCB0aGlzLl9pZCwgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgZGlzcG9zZSgpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLl9jYWxsRGlzcGF0Y2hlci5pbnZva2VEb3ROZXRNZXRob2RBc3luYyhudWxsLCBcIl9fRGlzcG9zZVwiLCB0aGlzLl9pZCwgbnVsbCk7XG4gICAgICAgICAgICBwcm9taXNlLmNhdGNoKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoZXJyb3IpKTtcbiAgICAgICAgfVxuICAgICAgICBzZXJpYWxpemVBc0FyZygpIHtcbiAgICAgICAgICAgIHJldHVybiB7IFtkb3ROZXRPYmplY3RSZWZLZXldOiB0aGlzLl9pZCB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIERvdE5ldC5Eb3ROZXRPYmplY3QgPSBEb3ROZXRPYmplY3Q7XG4gICAgYXR0YWNoUmV2aXZlcihmdW5jdGlvbiByZXZpdmVSZWZlcmVuY2Uoa2V5LCB2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUuaGFzT3duUHJvcGVydHkoZG90TmV0T2JqZWN0UmVmS2V5KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRG90TmV0T2JqZWN0KHZhbHVlW2RvdE5ldE9iamVjdFJlZktleV0sIGN1cnJlbnRDYWxsRGlzcGF0Y2hlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh2YWx1ZS5oYXNPd25Qcm9wZXJ0eShqc09iamVjdElkS2V5KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gdmFsdWVbanNPYmplY3RJZEtleV07XG4gICAgICAgICAgICAgICAgY29uc3QganNPYmplY3QgPSBjYWNoZWRKU09iamVjdHNCeUlkW2lkXTtcbiAgICAgICAgICAgICAgICBpZiAoanNPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGpzT2JqZWN0LmdldFdyYXBwZWRPYmplY3QoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBKUyBvYmplY3QgaW5zdGFuY2Ugd2l0aCBJZCAnJHtpZH0nIGRvZXMgbm90IGV4aXN0LiBJdCBtYXkgaGF2ZSBiZWVuIGRpc3Bvc2VkLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUuaGFzT3duUHJvcGVydHkoYnl0ZUFycmF5UmVmS2V5KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdmFsdWVbYnl0ZUFycmF5UmVmS2V5XTtcbiAgICAgICAgICAgICAgICBjb25zdCBieXRlQXJyYXkgPSBjdXJyZW50Q2FsbERpc3BhdGNoZXIucHJvY2Vzc0J5dGVBcnJheShpbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKGJ5dGVBcnJheSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQnl0ZSBhcnJheSBpbmRleCAnJHtpbmRleH0nIGRvZXMgbm90IGV4aXN0LmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYnl0ZUFycmF5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUuaGFzT3duUHJvcGVydHkoZG90TmV0U3RyZWFtUmVmS2V5KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVhbUlkID0gdmFsdWVbZG90TmV0U3RyZWFtUmVmS2V5XTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW1Qcm9taXNlID0gY3VycmVudENhbGxEaXNwYXRjaGVyLmdldERvdE5ldFN0cmVhbVByb21pc2Uoc3RyZWFtSWQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRG90TmV0U3RyZWFtKHN0cmVhbVByb21pc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFVucmVjb2duaXplZCAtIGxldCBhbm90aGVyIHJldml2ZXIgaGFuZGxlIGl0XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9KTtcbiAgICBjbGFzcyBEb3ROZXRTdHJlYW0ge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZW1wdHktZnVuY3Rpb25cbiAgICAgICAgY29uc3RydWN0b3IoX3N0cmVhbVByb21pc2UpIHtcbiAgICAgICAgICAgIHRoaXMuX3N0cmVhbVByb21pc2UgPSBfc3RyZWFtUHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogU3VwcGxpZXMgYSByZWFkYWJsZSBzdHJlYW0gb2YgZGF0YSBiZWluZyBzZW50IGZyb20gLk5FVC5cbiAgICAgICAgICovXG4gICAgICAgIHN0cmVhbSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdHJlYW1Qcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdXBwbGllcyBhIGFycmF5IGJ1ZmZlciBvZiBkYXRhIGJlaW5nIHNlbnQgZnJvbSAuTkVULlxuICAgICAgICAgKiBOb3RlIHRoZXJlIGlzIGEgSmF2YVNjcmlwdCBsaW1pdCBvbiB0aGUgc2l6ZSBvZiB0aGUgQXJyYXlCdWZmZXIgZXF1YWwgdG8gYXBwcm94aW1hdGVseSAyR0IuXG4gICAgICAgICAqL1xuICAgICAgICBhc3luYyBhcnJheUJ1ZmZlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoYXdhaXQgdGhpcy5zdHJlYW0oKSkuYXJyYXlCdWZmZXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjbGFzcyBQZW5kaW5nU3RyZWFtIHtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICB0aGlzLnN0cmVhbVByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlamVjdCA9IHJlamVjdDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZUpTQ2FsbFJlc3VsdChyZXR1cm5WYWx1ZSwgcmVzdWx0VHlwZSkge1xuICAgICAgICBzd2l0Y2ggKHJlc3VsdFR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgSlNDYWxsUmVzdWx0VHlwZS5EZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgICAgIGNhc2UgSlNDYWxsUmVzdWx0VHlwZS5KU09iamVjdFJlZmVyZW5jZTpcbiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlSlNPYmplY3RSZWZlcmVuY2UocmV0dXJuVmFsdWUpO1xuICAgICAgICAgICAgY2FzZSBKU0NhbGxSZXN1bHRUeXBlLkpTU3RyZWFtUmVmZXJlbmNlOlxuICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVKU1N0cmVhbVJlZmVyZW5jZShyZXR1cm5WYWx1ZSk7XG4gICAgICAgICAgICBjYXNlIEpTQ2FsbFJlc3VsdFR5cGUuSlNWb2lkUmVzdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgSlMgY2FsbCByZXN1bHQgdHlwZSAnJHtyZXN1bHRUeXBlfScuYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IG5leHRCeXRlQXJyYXlJbmRleCA9IDA7XG4gICAgZnVuY3Rpb24gc3RyaW5naWZ5QXJncyhjYWxsRGlzcGF0Y2hlciwgYXJncykge1xuICAgICAgICBuZXh0Qnl0ZUFycmF5SW5kZXggPSAwO1xuICAgICAgICBjdXJyZW50Q2FsbERpc3BhdGNoZXIgPSBjYWxsRGlzcGF0Y2hlcjtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gSlNPTi5zdHJpbmdpZnkoYXJncywgYXJnUmVwbGFjZXIpO1xuICAgICAgICBjdXJyZW50Q2FsbERpc3BhdGNoZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFyZ1JlcGxhY2VyKGtleSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRG90TmV0T2JqZWN0KSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUuc2VyaWFsaXplQXNBcmcoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgICAgIGNvbnN0IGRvdE5ldENhbGxEaXNwYXRjaGVyID0gY3VycmVudENhbGxEaXNwYXRjaGVyLmdldERvdE5ldENhbGxEaXNwYXRjaGVyKCk7XG4gICAgICAgICAgICBkb3ROZXRDYWxsRGlzcGF0Y2hlci5zZW5kQnl0ZUFycmF5KG5leHRCeXRlQXJyYXlJbmRleCwgdmFsdWUpO1xuICAgICAgICAgICAgY29uc3QganNvblZhbHVlID0geyBbYnl0ZUFycmF5UmVmS2V5XTogbmV4dEJ5dGVBcnJheUluZGV4IH07XG4gICAgICAgICAgICBuZXh0Qnl0ZUFycmF5SW5kZXgrKztcbiAgICAgICAgICAgIHJldHVybiBqc29uVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbn0pKERvdE5ldCB8fCAoRG90TmV0ID0ge30pKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1pY3Jvc29mdC5KU0ludGVyb3AuanMubWFwIiwiLy8gTGljZW5zZWQgdG8gdGhlIC5ORVQgRm91bmRhdGlvbiB1bmRlciBvbmUgb3IgbW9yZSBhZ3JlZW1lbnRzLlxuLy8gVGhlIC5ORVQgRm91bmRhdGlvbiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxuZXhwb3J0IGludGVyZmFjZSBSZW5kZXJCYXRjaCB7XG4gIHVwZGF0ZWRDb21wb25lbnRzKCk6IEFycmF5UmFuZ2U8UmVuZGVyVHJlZURpZmY+O1xuICByZWZlcmVuY2VGcmFtZXMoKTogQXJyYXlSYW5nZTxSZW5kZXJUcmVlRnJhbWU+O1xuICBkaXNwb3NlZENvbXBvbmVudElkcygpOiBBcnJheVJhbmdlPG51bWJlcj47XG4gIGRpc3Bvc2VkRXZlbnRIYW5kbGVySWRzKCk6IEFycmF5UmFuZ2U8bnVtYmVyPjtcblxuICB1cGRhdGVkQ29tcG9uZW50c0VudHJ5KHZhbHVlczogQXJyYXlWYWx1ZXM8UmVuZGVyVHJlZURpZmY+LCBpbmRleDogbnVtYmVyKTogUmVuZGVyVHJlZURpZmY7XG4gIHJlZmVyZW5jZUZyYW1lc0VudHJ5KHZhbHVlczogQXJyYXlWYWx1ZXM8UmVuZGVyVHJlZUZyYW1lPiwgaW5kZXg6IG51bWJlcik6IFJlbmRlclRyZWVGcmFtZTtcbiAgZGlzcG9zZWRDb21wb25lbnRJZHNFbnRyeSh2YWx1ZXM6IEFycmF5VmFsdWVzPG51bWJlcj4sIGluZGV4OiBudW1iZXIpOiBudW1iZXI7XG4gIGRpc3Bvc2VkRXZlbnRIYW5kbGVySWRzRW50cnkodmFsdWVzOiBBcnJheVZhbHVlczxudW1iZXI+LCBpbmRleDogbnVtYmVyKTogbnVtYmVyO1xuXG4gIGRpZmZSZWFkZXI6IFJlbmRlclRyZWVEaWZmUmVhZGVyO1xuICBlZGl0UmVhZGVyOiBSZW5kZXJUcmVlRWRpdFJlYWRlcjtcbiAgZnJhbWVSZWFkZXI6IFJlbmRlclRyZWVGcmFtZVJlYWRlcjtcbiAgYXJyYXlSYW5nZVJlYWRlcjogQXJyYXlSYW5nZVJlYWRlcjtcbiAgYXJyYXlCdWlsZGVyU2VnbWVudFJlYWRlcjogQXJyYXlCdWlsZGVyU2VnbWVudFJlYWRlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBcnJheVJhbmdlUmVhZGVyIHtcbiAgY291bnQ8VD4oYXJyYXlSYW5nZTogQXJyYXlSYW5nZTxUPik6IG51bWJlcjtcbiAgdmFsdWVzPFQ+KGFycmF5UmFuZ2U6IEFycmF5UmFuZ2U8VD4pOiBBcnJheVZhbHVlczxUPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBcnJheUJ1aWxkZXJTZWdtZW50UmVhZGVyIHtcbiAgb2Zmc2V0PFQ+KGFycmF5QnVpbGRlclNlZ21lbnQ6IEFycmF5QnVpbGRlclNlZ21lbnQ8VD4pOiBudW1iZXI7XG4gIGNvdW50PFQ+KGFycmF5QnVpbGRlclNlZ21lbnQ6IEFycmF5QnVpbGRlclNlZ21lbnQ8VD4pOiBudW1iZXI7XG4gIHZhbHVlczxUPihhcnJheUJ1aWxkZXJTZWdtZW50OiBBcnJheUJ1aWxkZXJTZWdtZW50PFQ+KTogQXJyYXlWYWx1ZXM8VD47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVuZGVyVHJlZURpZmZSZWFkZXIge1xuICBjb21wb25lbnRJZChkaWZmOiBSZW5kZXJUcmVlRGlmZik6IG51bWJlcjtcbiAgZWRpdHMoZGlmZjogUmVuZGVyVHJlZURpZmYpOiBBcnJheUJ1aWxkZXJTZWdtZW50PFJlbmRlclRyZWVFZGl0PjtcbiAgZWRpdHNFbnRyeSh2YWx1ZXM6IEFycmF5VmFsdWVzPFJlbmRlclRyZWVFZGl0PiwgaW5kZXg6IG51bWJlcik6IFJlbmRlclRyZWVFZGl0O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlbmRlclRyZWVFZGl0UmVhZGVyIHtcbiAgZWRpdFR5cGUoZWRpdDogUmVuZGVyVHJlZUVkaXQpOiBFZGl0VHlwZTtcbiAgc2libGluZ0luZGV4KGVkaXQ6IFJlbmRlclRyZWVFZGl0KTogbnVtYmVyO1xuICBuZXdUcmVlSW5kZXgoZWRpdDogUmVuZGVyVHJlZUVkaXQpOiBudW1iZXI7XG4gIG1vdmVUb1NpYmxpbmdJbmRleChlZGl0OiBSZW5kZXJUcmVlRWRpdCk6IG51bWJlcjtcbiAgcmVtb3ZlZEF0dHJpYnV0ZU5hbWUoZWRpdDogUmVuZGVyVHJlZUVkaXQpOiBzdHJpbmcgfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlbmRlclRyZWVGcmFtZVJlYWRlciB7XG4gIGZyYW1lVHlwZShmcmFtZTogUmVuZGVyVHJlZUZyYW1lKTogRnJhbWVUeXBlO1xuICBzdWJ0cmVlTGVuZ3RoKGZyYW1lOiBSZW5kZXJUcmVlRnJhbWUpOiBudW1iZXI7XG4gIGVsZW1lbnRSZWZlcmVuY2VDYXB0dXJlSWQoZnJhbWU6IFJlbmRlclRyZWVGcmFtZSk6IHN0cmluZyB8IG51bGw7XG4gIGNvbXBvbmVudElkKGZyYW1lOiBSZW5kZXJUcmVlRnJhbWUpOiBudW1iZXI7XG4gIGVsZW1lbnROYW1lKGZyYW1lOiBSZW5kZXJUcmVlRnJhbWUpOiBzdHJpbmcgfCBudWxsO1xuICB0ZXh0Q29udGVudChmcmFtZTogUmVuZGVyVHJlZUZyYW1lKTogc3RyaW5nIHwgbnVsbDtcbiAgbWFya3VwQ29udGVudChmcmFtZTogUmVuZGVyVHJlZUZyYW1lKTogc3RyaW5nO1xuICBhdHRyaWJ1dGVOYW1lKGZyYW1lOiBSZW5kZXJUcmVlRnJhbWUpOiBzdHJpbmcgfCBudWxsO1xuICBhdHRyaWJ1dGVWYWx1ZShmcmFtZTogUmVuZGVyVHJlZUZyYW1lKTogc3RyaW5nIHwgbnVsbDtcbiAgYXR0cmlidXRlRXZlbnRIYW5kbGVySWQoZnJhbWU6IFJlbmRlclRyZWVGcmFtZSk6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBcnJheVJhbmdlPFQ+IHsgQXJyYXlSYW5nZV9fRE9fTk9UX0lNUExFTUVOVDogdW5rbm93biB9XG5leHBvcnQgaW50ZXJmYWNlIEFycmF5QnVpbGRlclNlZ21lbnQ8VD4geyBBcnJheUJ1aWxkZXJTZWdtZW50X19ET19OT1RfSU1QTEVNRU5UOiB1bmtub3duIH1cbmV4cG9ydCBpbnRlcmZhY2UgQXJyYXlWYWx1ZXM8VD4geyBBcnJheVZhbHVlc19fRE9fTk9UX0lNUExFTUVOVDogdW5rbm93biB9XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVuZGVyVHJlZURpZmYgeyBSZW5kZXJUcmVlRGlmZl9fRE9fTk9UX0lNUExFTUVOVDogdW5rbm93biB9XG5leHBvcnQgaW50ZXJmYWNlIFJlbmRlclRyZWVGcmFtZSB7IFJlbmRlclRyZWVGcmFtZV9fRE9fTk9UX0lNUExFTUVOVDogdW5rbm93biB9XG5leHBvcnQgaW50ZXJmYWNlIFJlbmRlclRyZWVFZGl0IHsgUmVuZGVyVHJlZUVkaXRfX0RPX05PVF9JTVBMRU1FTlQ6IHVua25vd24gfVxuXG5leHBvcnQgZW51bSBFZGl0VHlwZSB7XG4gIC8vIFRoZSB2YWx1ZXMgbXVzdCBiZSBrZXB0IGluIHN5bmMgd2l0aCB0aGUgLk5FVCBlcXVpdmFsZW50IGluIFJlbmRlclRyZWVFZGl0VHlwZS5jc1xuICBwcmVwZW5kRnJhbWUgPSAxLFxuICByZW1vdmVGcmFtZSA9IDIsXG4gIHNldEF0dHJpYnV0ZSA9IDMsXG4gIHJlbW92ZUF0dHJpYnV0ZSA9IDQsXG4gIHVwZGF0ZVRleHQgPSA1LFxuICBzdGVwSW4gPSA2LFxuICBzdGVwT3V0ID0gNyxcbiAgdXBkYXRlTWFya3VwID0gOCxcbiAgcGVybXV0YXRpb25MaXN0RW50cnkgPSA5LFxuICBwZXJtdXRhdGlvbkxpc3RFbmQgPSAxMCxcbn1cblxuZXhwb3J0IGVudW0gRnJhbWVUeXBlIHtcbiAgLy8gVGhlIHZhbHVlcyBtdXN0IGJlIGtlcHQgaW4gc3luYyB3aXRoIHRoZSAuTkVUIGVxdWl2YWxlbnQgaW4gUmVuZGVyVHJlZUZyYW1lVHlwZS5jc1xuICBlbGVtZW50ID0gMSxcbiAgdGV4dCA9IDIsXG4gIGF0dHJpYnV0ZSA9IDMsXG4gIGNvbXBvbmVudCA9IDQsXG4gIHJlZ2lvbiA9IDUsXG4gIGVsZW1lbnRSZWZlcmVuY2VDYXB0dXJlID0gNixcbiAgbWFya3VwID0gOCxcbiAgbmFtZWRFdmVudCA9IDEwLFxufVxuIiwiLy8gTGljZW5zZWQgdG8gdGhlIC5ORVQgRm91bmRhdGlvbiB1bmRlciBvbmUgb3IgbW9yZSBhZ3JlZW1lbnRzLlxuLy8gVGhlIC5ORVQgRm91bmRhdGlvbiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxuZXhwb3J0IGNsYXNzIEV2ZW50RmllbGRJbmZvIHtcbiAgY29uc3RydWN0b3IocHVibGljIGNvbXBvbmVudElkOiBudW1iZXIsIHB1YmxpYyBmaWVsZFZhbHVlOiBzdHJpbmcgfCBib29sZWFuKSB7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGZyb21FdmVudChjb21wb25lbnRJZDogbnVtYmVyLCBldmVudDogRXZlbnQpOiBFdmVudEZpZWxkSW5mbyB8IG51bGwge1xuICAgIGNvbnN0IGVsZW0gPSBldmVudC50YXJnZXQ7XG4gICAgaWYgKGVsZW0gaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICBjb25zdCBmaWVsZERhdGEgPSBnZXRGb3JtRmllbGREYXRhKGVsZW0pO1xuICAgICAgaWYgKGZpZWxkRGF0YSkge1xuICAgICAgICByZXR1cm4gbmV3IEV2ZW50RmllbGRJbmZvKGNvbXBvbmVudElkLCBmaWVsZERhdGEudmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRoaXMgZXZlbnQgaXNuJ3QgaGFwcGVuaW5nIG9uIGEgZm9ybSBmaWVsZCB0aGF0IHdlIGNhbiByZXZlcnNlLW1hcCBiYWNrIHRvIHNvbWUgaW5jb21pbmcgYXR0cmlidXRlXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0Rm9ybUZpZWxkRGF0YShlbGVtOiBFbGVtZW50KSB7XG4gIC8vIFRoZSBsb2dpYyBpbiBoZXJlIHNob3VsZCBiZSB0aGUgaW52ZXJzZSBvZiB0aGUgbG9naWMgaW4gQnJvd3NlclJlbmRlcmVyJ3MgdHJ5QXBwbHlTcGVjaWFsUHJvcGVydHkuXG4gIC8vIFRoYXQgaXMsIHdlJ3JlIGRvaW5nIHRoZSByZXZlcnNlIG1hcHBpbmcsIHN0YXJ0aW5nIGZyb20gYW4gSFRNTCBwcm9wZXJ0eSBhbmQgcmVjb25zdHJ1Y3Rpbmcgd2hpY2hcbiAgLy8gXCJzcGVjaWFsXCIgYXR0cmlidXRlIHdvdWxkIGhhdmUgYmVlbiBtYXBwZWQgdG8gdGhhdCBwcm9wZXJ0eS5cbiAgaWYgKGVsZW0gaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgcmV0dXJuIChlbGVtLnR5cGUgJiYgZWxlbS50eXBlLnRvTG93ZXJDYXNlKCkgPT09ICdjaGVja2JveCcpXG4gICAgICA/IHsgdmFsdWU6IGVsZW0uY2hlY2tlZCB9XG4gICAgICA6IHsgdmFsdWU6IGVsZW0udmFsdWUgfTtcbiAgfVxuXG4gIGlmIChlbGVtIGluc3RhbmNlb2YgSFRNTFNlbGVjdEVsZW1lbnQgfHwgZWxlbSBpbnN0YW5jZW9mIEhUTUxUZXh0QXJlYUVsZW1lbnQpIHtcbiAgICByZXR1cm4geyB2YWx1ZTogZWxlbS52YWx1ZSB9O1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG4iLCIvLyBMaWNlbnNlZCB0byB0aGUgLk5FVCBGb3VuZGF0aW9uIHVuZGVyIG9uZSBvciBtb3JlIGFncmVlbWVudHMuXG4vLyBUaGUgLk5FVCBGb3VuZGF0aW9uIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG5leHBvcnQgaW50ZXJmYWNlIEV2ZW50VHlwZU9wdGlvbnMge1xuICBicm93c2VyRXZlbnROYW1lPzogc3RyaW5nO1xuICBjcmVhdGVFdmVudEFyZ3M/OiAoZXZlbnQ6IEV2ZW50KSA9PiB1bmtub3duO1xufVxuXG5jb25zdCBldmVudFR5cGVSZWdpc3RyeTogTWFwPHN0cmluZywgRXZlbnRUeXBlT3B0aW9ucz4gPSBuZXcgTWFwKCk7XG5jb25zdCBicm93c2VyRXZlbnROYW1lc1RvQWxpYXNlczogTWFwPHN0cmluZywgc3RyaW5nW10+ID0gbmV3IE1hcCgpO1xuY29uc3QgY3JlYXRlQmxhbmtFdmVudEFyZ3NPcHRpb25zOiBFdmVudFR5cGVPcHRpb25zID0geyBjcmVhdGVFdmVudEFyZ3M6ICgpID0+ICh7fSkgfTtcblxuZXhwb3J0IGNvbnN0IGV2ZW50TmFtZUFsaWFzUmVnaXN0ZXJlZENhbGxiYWNrczogKChhbGlhc0V2ZW50TmFtZTogc3RyaW5nLCBicm93c2VyRXZlbnROYW1lKSA9PiB2b2lkKVtdID0gW107XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckN1c3RvbUV2ZW50VHlwZShldmVudE5hbWU6IHN0cmluZywgb3B0aW9uczogRXZlbnRUeXBlT3B0aW9ucyk6IHZvaWQge1xuICBpZiAoIW9wdGlvbnMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBvcHRpb25zIHBhcmFtZXRlciBpcyByZXF1aXJlZC4nKTtcbiAgfVxuXG4gIC8vIFRoZXJlIGNhbid0IGJlIG1vcmUgdGhhbiBvbmUgcmVnaXN0cmF0aW9uIGZvciB0aGUgc2FtZSBldmVudCBuYW1lIGJlY2F1c2UgdGhlbiB3ZSB3b3VsZG4ndFxuICAvLyBrbm93IHdoaWNoIGV2ZW50YXJncyBkYXRhIHRvIHN1cHBseS5cbiAgaWYgKGV2ZW50VHlwZVJlZ2lzdHJ5LmhhcyhldmVudE5hbWUpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgZXZlbnQgJyR7ZXZlbnROYW1lfScgaXMgYWxyZWFkeSByZWdpc3RlcmVkLmApO1xuICB9XG5cbiAgLy8gSWYgYXBwbGljYWJsZSwgcmVnaXN0ZXIgdGhpcyBhcyBhbiBhbGlhcyBvZiB0aGUgZ2l2ZW4gYnJvd3NlckV2ZW50TmFtZVxuICBpZiAob3B0aW9ucy5icm93c2VyRXZlbnROYW1lKSB7XG4gICAgY29uc3QgYWxpYXNHcm91cCA9IGJyb3dzZXJFdmVudE5hbWVzVG9BbGlhc2VzLmdldChvcHRpb25zLmJyb3dzZXJFdmVudE5hbWUpO1xuICAgIGlmIChhbGlhc0dyb3VwKSB7XG4gICAgICBhbGlhc0dyb3VwLnB1c2goZXZlbnROYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYnJvd3NlckV2ZW50TmFtZXNUb0FsaWFzZXMuc2V0KG9wdGlvbnMuYnJvd3NlckV2ZW50TmFtZSwgW2V2ZW50TmFtZV0pO1xuICAgIH1cblxuICAgIC8vIEZvciBkZXZlbG9wZXIgY29udmVuaWVuY2UsIGl0J3MgYWxsb3dlZCB0byByZWdpc3RlciB0aGUgY3VzdG9tIGV2ZW50IHR5cGUgKmFmdGVyKlxuICAgIC8vIHNvbWUgbGlzdGVuZXJzIGZvciBpdCBhcmUgYWxyZWFkeSBwcmVzZW50LiBPbmNlIHRoZSBldmVudCBuYW1lIGFsaWFzIGdldHMgcmVnaXN0ZXJlZCxcbiAgICAvLyB3ZSBoYXZlIHRvIG5vdGlmeSBhbnkgZXhpc3RpbmcgZXZlbnQgZGVsZWdhdG9ycyBzbyB0aGV5IGNhbiB1cGRhdGUgdGhlaXIgZGVsZWdhdGVkXG4gICAgLy8gZXZlbnRzIGxpc3QuXG4gICAgZXZlbnROYW1lQWxpYXNSZWdpc3RlcmVkQ2FsbGJhY2tzLmZvckVhY2goY2FsbGJhY2sgPT4gY2FsbGJhY2soZXZlbnROYW1lLCBvcHRpb25zLmJyb3dzZXJFdmVudE5hbWUpKTtcbiAgfVxuXG4gIGV2ZW50VHlwZVJlZ2lzdHJ5LnNldChldmVudE5hbWUsIG9wdGlvbnMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXZlbnRUeXBlT3B0aW9ucyhldmVudE5hbWU6IHN0cmluZyk6IEV2ZW50VHlwZU9wdGlvbnMgfCB1bmRlZmluZWQge1xuICByZXR1cm4gZXZlbnRUeXBlUmVnaXN0cnkuZ2V0KGV2ZW50TmFtZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFdmVudE5hbWVBbGlhc2VzKGV2ZW50TmFtZTogc3RyaW5nKTogc3RyaW5nW10gfCB1bmRlZmluZWQge1xuICByZXR1cm4gYnJvd3NlckV2ZW50TmFtZXNUb0FsaWFzZXMuZ2V0KGV2ZW50TmFtZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRCcm93c2VyRXZlbnROYW1lKHBvc3NpYmxlQWxpYXNFdmVudE5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IGV2ZW50T3B0aW9ucyA9IGV2ZW50VHlwZVJlZ2lzdHJ5LmdldChwb3NzaWJsZUFsaWFzRXZlbnROYW1lKTtcbiAgcmV0dXJuIGV2ZW50T3B0aW9ucz8uYnJvd3NlckV2ZW50TmFtZSB8fCBwb3NzaWJsZUFsaWFzRXZlbnROYW1lO1xufVxuXG5mdW5jdGlvbiByZWdpc3RlckJ1aWx0SW5FdmVudFR5cGUoZXZlbnROYW1lczogc3RyaW5nW10sIG9wdGlvbnM6IEV2ZW50VHlwZU9wdGlvbnMpIHtcbiAgZXZlbnROYW1lcy5mb3JFYWNoKGV2ZW50TmFtZSA9PiBldmVudFR5cGVSZWdpc3RyeS5zZXQoZXZlbnROYW1lLCBvcHRpb25zKSk7XG59XG5cbnJlZ2lzdGVyQnVpbHRJbkV2ZW50VHlwZShbJ2lucHV0JywgJ2NoYW5nZSddLCB7XG4gIGNyZWF0ZUV2ZW50QXJnczogcGFyc2VDaGFuZ2VFdmVudCxcbn0pO1xuXG5yZWdpc3RlckJ1aWx0SW5FdmVudFR5cGUoW1xuICAnY29weScsXG4gICdjdXQnLFxuICAncGFzdGUnLFxuXSwge1xuICBjcmVhdGVFdmVudEFyZ3M6IGUgPT4gcGFyc2VDbGlwYm9hcmRFdmVudChlIGFzIENsaXBib2FyZEV2ZW50KSxcbn0pO1xuXG5yZWdpc3RlckJ1aWx0SW5FdmVudFR5cGUoW1xuICAnZHJhZycsXG4gICdkcmFnZW5kJyxcbiAgJ2RyYWdlbnRlcicsXG4gICdkcmFnbGVhdmUnLFxuICAnZHJhZ292ZXInLFxuICAnZHJhZ3N0YXJ0JyxcbiAgJ2Ryb3AnLFxuXSwge1xuICBjcmVhdGVFdmVudEFyZ3M6IGUgPT4gcGFyc2VEcmFnRXZlbnQoZSBhcyBEcmFnRXZlbnQpLFxufSk7XG5cbnJlZ2lzdGVyQnVpbHRJbkV2ZW50VHlwZShbXG4gICdmb2N1cycsXG4gICdibHVyJyxcbiAgJ2ZvY3VzaW4nLFxuICAnZm9jdXNvdXQnLFxuXSwge1xuICBjcmVhdGVFdmVudEFyZ3M6IGUgPT4gcGFyc2VGb2N1c0V2ZW50KGUgYXMgRm9jdXNFdmVudCksXG59KTtcblxucmVnaXN0ZXJCdWlsdEluRXZlbnRUeXBlKFtcbiAgJ2tleWRvd24nLFxuICAna2V5dXAnLFxuICAna2V5cHJlc3MnLFxuXSwge1xuICBjcmVhdGVFdmVudEFyZ3M6IGUgPT4gcGFyc2VLZXlib2FyZEV2ZW50KGUgYXMgS2V5Ym9hcmRFdmVudCksXG59KTtcblxucmVnaXN0ZXJCdWlsdEluRXZlbnRUeXBlKFtcbiAgJ2NvbnRleHRtZW51JyxcbiAgJ2NsaWNrJyxcbiAgJ21vdXNlb3ZlcicsXG4gICdtb3VzZW91dCcsXG4gICdtb3VzZW1vdmUnLFxuICAnbW91c2Vkb3duJyxcbiAgJ21vdXNldXAnLFxuICAnbW91c2VsZWF2ZScsXG4gICdtb3VzZWVudGVyJyxcbiAgJ2RibGNsaWNrJyxcbl0sIHtcbiAgY3JlYXRlRXZlbnRBcmdzOiBlID0+IHBhcnNlTW91c2VFdmVudChlIGFzIE1vdXNlRXZlbnQpLFxufSk7XG5cbnJlZ2lzdGVyQnVpbHRJbkV2ZW50VHlwZShbJ2Vycm9yJ10sIHtcbiAgY3JlYXRlRXZlbnRBcmdzOiBlID0+IHBhcnNlRXJyb3JFdmVudChlIGFzIEVycm9yRXZlbnQpLFxufSk7XG5cbnJlZ2lzdGVyQnVpbHRJbkV2ZW50VHlwZShbXG4gICdsb2Fkc3RhcnQnLFxuICAndGltZW91dCcsXG4gICdhYm9ydCcsXG4gICdsb2FkJyxcbiAgJ2xvYWRlbmQnLFxuICAncHJvZ3Jlc3MnLFxuXSwge1xuICBjcmVhdGVFdmVudEFyZ3M6IGUgPT4gcGFyc2VQcm9ncmVzc0V2ZW50KGUgYXMgUHJvZ3Jlc3NFdmVudCksXG59KTtcblxucmVnaXN0ZXJCdWlsdEluRXZlbnRUeXBlKFtcbiAgJ3RvdWNoY2FuY2VsJyxcbiAgJ3RvdWNoZW5kJyxcbiAgJ3RvdWNobW92ZScsXG4gICd0b3VjaGVudGVyJyxcbiAgJ3RvdWNobGVhdmUnLFxuICAndG91Y2hzdGFydCcsXG5dLCB7XG4gIGNyZWF0ZUV2ZW50QXJnczogZSA9PiBwYXJzZVRvdWNoRXZlbnQoZSBhcyBUb3VjaEV2ZW50KSxcbn0pO1xuXG5yZWdpc3RlckJ1aWx0SW5FdmVudFR5cGUoW1xuICAnZ290cG9pbnRlcmNhcHR1cmUnLFxuICAnbG9zdHBvaW50ZXJjYXB0dXJlJyxcbiAgJ3BvaW50ZXJjYW5jZWwnLFxuICAncG9pbnRlcmRvd24nLFxuICAncG9pbnRlcmVudGVyJyxcbiAgJ3BvaW50ZXJsZWF2ZScsXG4gICdwb2ludGVybW92ZScsXG4gICdwb2ludGVyb3V0JyxcbiAgJ3BvaW50ZXJvdmVyJyxcbiAgJ3BvaW50ZXJ1cCcsXG5dLCB7XG4gIGNyZWF0ZUV2ZW50QXJnczogZSA9PiBwYXJzZVBvaW50ZXJFdmVudChlIGFzIFBvaW50ZXJFdmVudCksXG59KTtcblxucmVnaXN0ZXJCdWlsdEluRXZlbnRUeXBlKFsnd2hlZWwnLCAnbW91c2V3aGVlbCddLCB7XG4gIGNyZWF0ZUV2ZW50QXJnczogZSA9PiBwYXJzZVdoZWVsRXZlbnQoZSBhcyBXaGVlbEV2ZW50KSxcbn0pO1xuXG5yZWdpc3RlckJ1aWx0SW5FdmVudFR5cGUoWydjYW5jZWwnLCAnY2xvc2UnLCAndG9nZ2xlJ10sIGNyZWF0ZUJsYW5rRXZlbnRBcmdzT3B0aW9ucyk7XG5cbmZ1bmN0aW9uIHBhcnNlQ2hhbmdlRXZlbnQoZXZlbnQ6IEV2ZW50KTogQ2hhbmdlRXZlbnRBcmdzIHtcbiAgY29uc3QgZWxlbWVudCA9IGV2ZW50LnRhcmdldCBhcyBFbGVtZW50O1xuICBpZiAoaXNUaW1lQmFzZWRJbnB1dChlbGVtZW50KSkge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRWYWx1ZSA9IG5vcm1hbGl6ZVRpbWVCYXNlZFZhbHVlKGVsZW1lbnQpO1xuICAgIHJldHVybiB7IHZhbHVlOiBub3JtYWxpemVkVmFsdWUgfTtcbiAgfSBlbHNlIGlmIChpc011bHRpcGxlU2VsZWN0SW5wdXQoZWxlbWVudCkpIHtcbiAgICBjb25zdCBzZWxlY3RFbGVtZW50ID0gZWxlbWVudCBhcyBIVE1MU2VsZWN0RWxlbWVudDtcbiAgICBjb25zdCBzZWxlY3RlZFZhbHVlcyA9IEFycmF5LmZyb20oc2VsZWN0RWxlbWVudC5vcHRpb25zKVxuICAgICAgLmZpbHRlcihvcHRpb24gPT4gb3B0aW9uLnNlbGVjdGVkKVxuICAgICAgLm1hcChvcHRpb24gPT4gb3B0aW9uLnZhbHVlKTtcbiAgICByZXR1cm4geyB2YWx1ZTogc2VsZWN0ZWRWYWx1ZXMgfTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCB0YXJnZXRJc0NoZWNrYm94ID0gaXNDaGVja2JveChlbGVtZW50KTtcbiAgICBjb25zdCBuZXdWYWx1ZSA9IHRhcmdldElzQ2hlY2tib3ggPyAhIWVsZW1lbnRbJ2NoZWNrZWQnXSA6IGVsZW1lbnRbJ3ZhbHVlJ107XG4gICAgcmV0dXJuIHsgdmFsdWU6IG5ld1ZhbHVlIH07XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFyc2VXaGVlbEV2ZW50KGV2ZW50OiBXaGVlbEV2ZW50KTogV2hlZWxFdmVudEFyZ3Mge1xuICByZXR1cm4ge1xuICAgIC4uLnBhcnNlTW91c2VFdmVudChldmVudCksXG4gICAgZGVsdGFYOiBldmVudC5kZWx0YVgsXG4gICAgZGVsdGFZOiBldmVudC5kZWx0YVksXG4gICAgZGVsdGFaOiBldmVudC5kZWx0YVosXG4gICAgZGVsdGFNb2RlOiBldmVudC5kZWx0YU1vZGUsXG4gIH07XG59XG5cbmZ1bmN0aW9uIHBhcnNlUG9pbnRlckV2ZW50KGV2ZW50OiBQb2ludGVyRXZlbnQpOiBQb2ludGVyRXZlbnRBcmdzIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5wYXJzZU1vdXNlRXZlbnQoZXZlbnQpLFxuICAgIHBvaW50ZXJJZDogZXZlbnQucG9pbnRlcklkLFxuICAgIHdpZHRoOiBldmVudC53aWR0aCxcbiAgICBoZWlnaHQ6IGV2ZW50LmhlaWdodCxcbiAgICBwcmVzc3VyZTogZXZlbnQucHJlc3N1cmUsXG4gICAgdGlsdFg6IGV2ZW50LnRpbHRYLFxuICAgIHRpbHRZOiBldmVudC50aWx0WSxcbiAgICBwb2ludGVyVHlwZTogZXZlbnQucG9pbnRlclR5cGUsXG4gICAgaXNQcmltYXJ5OiBldmVudC5pc1ByaW1hcnksXG4gIH07XG59XG5cbmZ1bmN0aW9uIHBhcnNlVG91Y2hFdmVudChldmVudDogVG91Y2hFdmVudCk6IFRvdWNoRXZlbnRBcmdzIHtcbiAgcmV0dXJuIHtcbiAgICBkZXRhaWw6IGV2ZW50LmRldGFpbCxcbiAgICB0b3VjaGVzOiBwYXJzZVRvdWNoKGV2ZW50LnRvdWNoZXMpLFxuICAgIHRhcmdldFRvdWNoZXM6IHBhcnNlVG91Y2goZXZlbnQudGFyZ2V0VG91Y2hlcyksXG4gICAgY2hhbmdlZFRvdWNoZXM6IHBhcnNlVG91Y2goZXZlbnQuY2hhbmdlZFRvdWNoZXMpLFxuICAgIGN0cmxLZXk6IGV2ZW50LmN0cmxLZXksXG4gICAgc2hpZnRLZXk6IGV2ZW50LnNoaWZ0S2V5LFxuICAgIGFsdEtleTogZXZlbnQuYWx0S2V5LFxuICAgIG1ldGFLZXk6IGV2ZW50Lm1ldGFLZXksXG4gICAgdHlwZTogZXZlbnQudHlwZSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gcGFyc2VGb2N1c0V2ZW50KGV2ZW50OiBGb2N1c0V2ZW50KTogRm9jdXNFdmVudEFyZ3Mge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IGV2ZW50LnR5cGUsXG4gIH07XG59XG5cbmZ1bmN0aW9uIHBhcnNlQ2xpcGJvYXJkRXZlbnQoZXZlbnQ6IENsaXBib2FyZEV2ZW50KTogQ2xpcGJvYXJkRXZlbnRBcmdzIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBldmVudC50eXBlLFxuICB9O1xufVxuXG5mdW5jdGlvbiBwYXJzZVByb2dyZXNzRXZlbnQoZXZlbnQ6IFByb2dyZXNzRXZlbnQ8RXZlbnRUYXJnZXQ+KTogUHJvZ3Jlc3NFdmVudEFyZ3Mge1xuICByZXR1cm4ge1xuICAgIGxlbmd0aENvbXB1dGFibGU6IGV2ZW50Lmxlbmd0aENvbXB1dGFibGUsXG4gICAgbG9hZGVkOiBldmVudC5sb2FkZWQsXG4gICAgdG90YWw6IGV2ZW50LnRvdGFsLFxuICAgIHR5cGU6IGV2ZW50LnR5cGUsXG4gIH07XG59XG5cbmZ1bmN0aW9uIHBhcnNlRXJyb3JFdmVudChldmVudDogRXJyb3JFdmVudCk6IEVycm9yRXZlbnRBcmdzIHtcbiAgcmV0dXJuIHtcbiAgICBtZXNzYWdlOiBldmVudC5tZXNzYWdlLFxuICAgIGZpbGVuYW1lOiBldmVudC5maWxlbmFtZSxcbiAgICBsaW5lbm86IGV2ZW50LmxpbmVubyxcbiAgICBjb2xubzogZXZlbnQuY29sbm8sXG4gICAgdHlwZTogZXZlbnQudHlwZSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gcGFyc2VLZXlib2FyZEV2ZW50KGV2ZW50OiBLZXlib2FyZEV2ZW50KTogS2V5Ym9hcmRFdmVudEFyZ3Mge1xuICByZXR1cm4ge1xuICAgIGtleTogZXZlbnQua2V5LFxuICAgIGNvZGU6IGV2ZW50LmNvZGUsXG4gICAgbG9jYXRpb246IGV2ZW50LmxvY2F0aW9uLFxuICAgIHJlcGVhdDogZXZlbnQucmVwZWF0LFxuICAgIGN0cmxLZXk6IGV2ZW50LmN0cmxLZXksXG4gICAgc2hpZnRLZXk6IGV2ZW50LnNoaWZ0S2V5LFxuICAgIGFsdEtleTogZXZlbnQuYWx0S2V5LFxuICAgIG1ldGFLZXk6IGV2ZW50Lm1ldGFLZXksXG4gICAgdHlwZTogZXZlbnQudHlwZSxcbiAgICBpc0NvbXBvc2luZzogZXZlbnQuaXNDb21wb3NpbmcsXG4gIH07XG59XG5cbmZ1bmN0aW9uIHBhcnNlRHJhZ0V2ZW50KGV2ZW50OiBEcmFnRXZlbnQpOiBEcmFnRXZlbnRBcmdzIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5wYXJzZU1vdXNlRXZlbnQoZXZlbnQpLFxuICAgIGRhdGFUcmFuc2ZlcjogZXZlbnQuZGF0YVRyYW5zZmVyID8ge1xuICAgICAgZHJvcEVmZmVjdDogZXZlbnQuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QsXG4gICAgICBlZmZlY3RBbGxvd2VkOiBldmVudC5kYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCxcbiAgICAgIGZpbGVzOiBBcnJheS5mcm9tKGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcykubWFwKGYgPT4gZi5uYW1lKSxcbiAgICAgIGl0ZW1zOiBBcnJheS5mcm9tKGV2ZW50LmRhdGFUcmFuc2Zlci5pdGVtcykubWFwKGkgPT4gKHsga2luZDogaS5raW5kLCB0eXBlOiBpLnR5cGUgfSkpLFxuICAgICAgdHlwZXM6IGV2ZW50LmRhdGFUcmFuc2Zlci50eXBlcyxcbiAgICB9IDogbnVsbCxcbiAgfTtcbn1cblxuZnVuY3Rpb24gcGFyc2VUb3VjaCh0b3VjaExpc3Q6IFRvdWNoTGlzdCk6IFRvdWNoUG9pbnRbXSB7XG4gIGNvbnN0IHRvdWNoZXM6IFRvdWNoUG9pbnRbXSA9IFtdO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdG91Y2hMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgdG91Y2ggPSB0b3VjaExpc3RbaV07XG4gICAgdG91Y2hlcy5wdXNoKHtcbiAgICAgIGlkZW50aWZpZXI6IHRvdWNoLmlkZW50aWZpZXIsXG4gICAgICBjbGllbnRYOiB0b3VjaC5jbGllbnRYLFxuICAgICAgY2xpZW50WTogdG91Y2guY2xpZW50WSxcbiAgICAgIHNjcmVlblg6IHRvdWNoLnNjcmVlblgsXG4gICAgICBzY3JlZW5ZOiB0b3VjaC5zY3JlZW5ZLFxuICAgICAgcGFnZVg6IHRvdWNoLnBhZ2VYLFxuICAgICAgcGFnZVk6IHRvdWNoLnBhZ2VZLFxuICAgIH0pO1xuICB9XG4gIHJldHVybiB0b3VjaGVzO1xufVxuXG5mdW5jdGlvbiBwYXJzZU1vdXNlRXZlbnQoZXZlbnQ6IE1vdXNlRXZlbnQpOiBNb3VzZUV2ZW50QXJncyB7XG4gIHJldHVybiB7XG4gICAgZGV0YWlsOiBldmVudC5kZXRhaWwsXG4gICAgc2NyZWVuWDogZXZlbnQuc2NyZWVuWCxcbiAgICBzY3JlZW5ZOiBldmVudC5zY3JlZW5ZLFxuICAgIGNsaWVudFg6IGV2ZW50LmNsaWVudFgsXG4gICAgY2xpZW50WTogZXZlbnQuY2xpZW50WSxcbiAgICBvZmZzZXRYOiBldmVudC5vZmZzZXRYLFxuICAgIG9mZnNldFk6IGV2ZW50Lm9mZnNldFksXG4gICAgcGFnZVg6IGV2ZW50LnBhZ2VYLFxuICAgIHBhZ2VZOiBldmVudC5wYWdlWSxcbiAgICBtb3ZlbWVudFg6IGV2ZW50Lm1vdmVtZW50WCxcbiAgICBtb3ZlbWVudFk6IGV2ZW50Lm1vdmVtZW50WSxcbiAgICBidXR0b246IGV2ZW50LmJ1dHRvbixcbiAgICBidXR0b25zOiBldmVudC5idXR0b25zLFxuICAgIGN0cmxLZXk6IGV2ZW50LmN0cmxLZXksXG4gICAgc2hpZnRLZXk6IGV2ZW50LnNoaWZ0S2V5LFxuICAgIGFsdEtleTogZXZlbnQuYWx0S2V5LFxuICAgIG1ldGFLZXk6IGV2ZW50Lm1ldGFLZXksXG4gICAgdHlwZTogZXZlbnQudHlwZSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gaXNDaGVja2JveChlbGVtZW50OiBFbGVtZW50IHwgbnVsbCk6IGJvb2xlYW4ge1xuICByZXR1cm4gISFlbGVtZW50ICYmIGVsZW1lbnQudGFnTmFtZSA9PT0gJ0lOUFVUJyAmJiBlbGVtZW50LmdldEF0dHJpYnV0ZSgndHlwZScpID09PSAnY2hlY2tib3gnO1xufVxuXG5jb25zdCB0aW1lQmFzZWRJbnB1dHMgPSBbXG4gICdkYXRlJyxcbiAgJ2RhdGV0aW1lLWxvY2FsJyxcbiAgJ21vbnRoJyxcbiAgJ3RpbWUnLFxuICAnd2VlaycsXG5dO1xuXG5mdW5jdGlvbiBpc1RpbWVCYXNlZElucHV0KGVsZW1lbnQ6IEVsZW1lbnQpOiBlbGVtZW50IGlzIEhUTUxJbnB1dEVsZW1lbnQge1xuICByZXR1cm4gdGltZUJhc2VkSW5wdXRzLmluZGV4T2YoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSEpICE9PSAtMTtcbn1cblxuZnVuY3Rpb24gaXNNdWx0aXBsZVNlbGVjdElucHV0KGVsZW1lbnQ6IEVsZW1lbnQpOiBlbGVtZW50IGlzIEhUTUxTZWxlY3RFbGVtZW50IHtcbiAgcmV0dXJuIGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MU2VsZWN0RWxlbWVudCAmJiBlbGVtZW50LnR5cGUgPT09ICdzZWxlY3QtbXVsdGlwbGUnO1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVUaW1lQmFzZWRWYWx1ZShlbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50KTogc3RyaW5nIHtcbiAgY29uc3QgdmFsdWUgPSBlbGVtZW50LnZhbHVlO1xuICBjb25zdCB0eXBlID0gZWxlbWVudC50eXBlO1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICdkYXRlJzpcbiAgICBjYXNlICdtb250aCc6XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgY2FzZSAnZGF0ZXRpbWUtbG9jYWwnOlxuICAgICAgcmV0dXJuIHZhbHVlLmxlbmd0aCA9PT0gMTYgPyB2YWx1ZSArICc6MDAnIDogdmFsdWU7IC8vIENvbnZlcnQgeXl5eS1NTS1kZFRISDptbSB0byB5eXl5LU1NLWRkVEhIOm1tOjAwXG4gICAgY2FzZSAndGltZSc6XG4gICAgICByZXR1cm4gdmFsdWUubGVuZ3RoID09PSA1ID8gdmFsdWUgKyAnOjAwJyA6IHZhbHVlOyAvLyBDb252ZXJ0IGhoOm1tIHRvIGhoOm1tOjAwXG4gICAgY2FzZSAnd2Vlayc6XG4gICAgICAvLyBGb3Igbm93IHdlIGFyZSBub3QgZ29pbmcgdG8gbm9ybWFsaXplIGlucHV0IHR5cGUgd2VlayBhcyBpdCBpcyBub3QgdHJpdmlhbFxuICAgICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGVsZW1lbnQgdHlwZSAnJHt0eXBlfScuYCk7XG59XG5cbi8vIFRoZSBmb2xsb3dpbmcgaW50ZXJmYWNlcyBtdXN0IGJlIGtlcHQgaW4gc3luYyB3aXRoIHRoZSBFdmVudEFyZ3MgQyMgY2xhc3Nlc1xuXG5pbnRlcmZhY2UgQ2hhbmdlRXZlbnRBcmdzIHtcbiAgdmFsdWU6IHN0cmluZyB8IGJvb2xlYW4gfCBzdHJpbmdbXTtcbn1cblxuaW50ZXJmYWNlIERyYWdFdmVudEFyZ3Mge1xuICBkZXRhaWw6IG51bWJlcjtcbiAgZGF0YVRyYW5zZmVyOiBEYXRhVHJhbnNmZXJFdmVudEFyZ3MgfCBudWxsO1xuICBzY3JlZW5YOiBudW1iZXI7XG4gIHNjcmVlblk6IG51bWJlcjtcbiAgY2xpZW50WDogbnVtYmVyO1xuICBjbGllbnRZOiBudW1iZXI7XG4gIGJ1dHRvbjogbnVtYmVyO1xuICBidXR0b25zOiBudW1iZXI7XG4gIGN0cmxLZXk6IGJvb2xlYW47XG4gIHNoaWZ0S2V5OiBib29sZWFuO1xuICBhbHRLZXk6IGJvb2xlYW47XG4gIG1ldGFLZXk6IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBEYXRhVHJhbnNmZXJFdmVudEFyZ3Mge1xuICBkcm9wRWZmZWN0OiBzdHJpbmc7XG4gIGVmZmVjdEFsbG93ZWQ6IHN0cmluZztcbiAgZmlsZXM6IHJlYWRvbmx5IHN0cmluZ1tdO1xuICBpdGVtczogcmVhZG9ubHkgRGF0YVRyYW5zZmVySXRlbVtdO1xuICB0eXBlczogcmVhZG9ubHkgc3RyaW5nW107XG59XG5cbmludGVyZmFjZSBEYXRhVHJhbnNmZXJJdGVtIHtcbiAga2luZDogc3RyaW5nO1xuICB0eXBlOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBFcnJvckV2ZW50QXJncyB7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgZmlsZW5hbWU6IHN0cmluZztcbiAgbGluZW5vOiBudW1iZXI7XG4gIGNvbG5vOiBudW1iZXI7XG4gIHR5cGU6IHN0cmluZztcblxuICAvLyBvbWl0dGluZyAnZXJyb3InIGhlcmUgc2luY2Ugd2UnZCBoYXZlIHRvIHNlcmlhbGl6ZSBpdCwgYW5kIGl0J3Mgbm90IGNsZWFyIHdlIHdpbGwgd2FudCB0b1xuICAvLyBkbyB0aGF0LiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRXJyb3JFdmVudFxufVxuXG5pbnRlcmZhY2UgS2V5Ym9hcmRFdmVudEFyZ3Mge1xuICBrZXk6IHN0cmluZztcbiAgY29kZTogc3RyaW5nO1xuICBsb2NhdGlvbjogbnVtYmVyO1xuICByZXBlYXQ6IGJvb2xlYW47XG4gIGN0cmxLZXk6IGJvb2xlYW47XG4gIHNoaWZ0S2V5OiBib29sZWFuO1xuICBhbHRLZXk6IGJvb2xlYW47XG4gIG1ldGFLZXk6IGJvb2xlYW47XG4gIHR5cGU6IHN0cmluZztcbiAgaXNDb21wb3Npbmc6IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBNb3VzZUV2ZW50QXJncyB7XG4gIGRldGFpbDogbnVtYmVyO1xuICBzY3JlZW5YOiBudW1iZXI7XG4gIHNjcmVlblk6IG51bWJlcjtcbiAgY2xpZW50WDogbnVtYmVyO1xuICBjbGllbnRZOiBudW1iZXI7XG4gIG9mZnNldFg6IG51bWJlcjtcbiAgb2Zmc2V0WTogbnVtYmVyO1xuICBwYWdlWDogbnVtYmVyO1xuICBwYWdlWTogbnVtYmVyO1xuICBtb3ZlbWVudFg6IG51bWJlcjtcbiAgbW92ZW1lbnRZOiBudW1iZXI7XG4gIGJ1dHRvbjogbnVtYmVyO1xuICBidXR0b25zOiBudW1iZXI7XG4gIGN0cmxLZXk6IGJvb2xlYW47XG4gIHNoaWZ0S2V5OiBib29sZWFuO1xuICBhbHRLZXk6IGJvb2xlYW47XG4gIG1ldGFLZXk6IGJvb2xlYW47XG4gIHR5cGU6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIFBvaW50ZXJFdmVudEFyZ3MgZXh0ZW5kcyBNb3VzZUV2ZW50QXJncyB7XG4gIHBvaW50ZXJJZDogbnVtYmVyO1xuICB3aWR0aDogbnVtYmVyO1xuICBoZWlnaHQ6IG51bWJlcjtcbiAgcHJlc3N1cmU6IG51bWJlcjtcbiAgdGlsdFg6IG51bWJlcjtcbiAgdGlsdFk6IG51bWJlcjtcbiAgcG9pbnRlclR5cGU6IHN0cmluZztcbiAgaXNQcmltYXJ5OiBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgUHJvZ3Jlc3NFdmVudEFyZ3Mge1xuICBsZW5ndGhDb21wdXRhYmxlOiBib29sZWFuO1xuICBsb2FkZWQ6IG51bWJlcjtcbiAgdG90YWw6IG51bWJlcjtcbiAgdHlwZTogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgVG91Y2hFdmVudEFyZ3Mge1xuICBkZXRhaWw6IG51bWJlcjtcbiAgdG91Y2hlczogVG91Y2hQb2ludFtdO1xuICB0YXJnZXRUb3VjaGVzOiBUb3VjaFBvaW50W107XG4gIGNoYW5nZWRUb3VjaGVzOiBUb3VjaFBvaW50W107XG4gIGN0cmxLZXk6IGJvb2xlYW47XG4gIHNoaWZ0S2V5OiBib29sZWFuO1xuICBhbHRLZXk6IGJvb2xlYW47XG4gIG1ldGFLZXk6IGJvb2xlYW47XG4gIHR5cGU6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIFRvdWNoUG9pbnQge1xuICBpZGVudGlmaWVyOiBudW1iZXI7XG4gIHNjcmVlblg6IG51bWJlcjtcbiAgc2NyZWVuWTogbnVtYmVyO1xuICBjbGllbnRYOiBudW1iZXI7XG4gIGNsaWVudFk6IG51bWJlcjtcbiAgcGFnZVg6IG51bWJlcjtcbiAgcGFnZVk6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIFdoZWVsRXZlbnRBcmdzIGV4dGVuZHMgTW91c2VFdmVudEFyZ3Mge1xuICBkZWx0YVg6IG51bWJlcjtcbiAgZGVsdGFZOiBudW1iZXI7XG4gIGRlbHRhWjogbnVtYmVyO1xuICBkZWx0YU1vZGU6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIEZvY3VzRXZlbnRBcmdzIHtcbiAgdHlwZTogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgQ2xpcGJvYXJkRXZlbnRBcmdzIHtcbiAgdHlwZTogc3RyaW5nO1xufVxuIiwiLy8gTGljZW5zZWQgdG8gdGhlIC5ORVQgRm91bmRhdGlvbiB1bmRlciBvbmUgb3IgbW9yZSBhZ3JlZW1lbnRzLlxuLy8gVGhlIC5ORVQgRm91bmRhdGlvbiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxuaW1wb3J0IHsgRG90TmV0IH0gZnJvbSAnQG1pY3Jvc29mdC9kb3RuZXQtanMtaW50ZXJvcCc7XG5cbmNvbnN0IHBlbmRpbmdSb290Q29tcG9uZW50Q29udGFpbmVyTmFtZVByZWZpeCA9ICdfX2JsLWR5bmFtaWMtcm9vdDonO1xuY29uc3QgcGVuZGluZ1Jvb3RDb21wb25lbnRDb250YWluZXJzID0gbmV3IE1hcDxzdHJpbmcsIEVsZW1lbnQ+KCk7XG5sZXQgbmV4dFBlbmRpbmdEeW5hbWljUm9vdENvbXBvbmVudElkZW50aWZpZXIgPSAwO1xuXG50eXBlIENvbXBvbmVudFBhcmFtZXRlcnMgPSBvYmplY3QgfCBudWxsIHwgdW5kZWZpbmVkO1xuXG5sZXQgbWFuYWdlcjogRG90TmV0LkRvdE5ldE9iamVjdCB8IHVuZGVmaW5lZDtcbmxldCBqc0NvbXBvbmVudFBhcmFtZXRlcnNCeUlkZW50aWZpZXI6IEpTQ29tcG9uZW50UGFyYW1ldGVyc0J5SWRlbnRpZmllcjtcblxuLy8gVGhlc2UgYXJlIHRoZSBwdWJsaWMgQVBJcyBhdCBCbGF6b3Iucm9vdENvbXBvbmVudHMuKlxuZXhwb3J0IGNvbnN0IFJvb3RDb21wb25lbnRzRnVuY3Rpb25zID0ge1xuICBhc3luYyBhZGQodG9FbGVtZW50OiBFbGVtZW50LCBjb21wb25lbnRJZGVudGlmaWVyOiBzdHJpbmcsIGluaXRpYWxQYXJhbWV0ZXJzOiBDb21wb25lbnRQYXJhbWV0ZXJzKTogUHJvbWlzZTxEeW5hbWljUm9vdENvbXBvbmVudD4ge1xuICAgIGlmICghaW5pdGlhbFBhcmFtZXRlcnMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaW5pdGlhbFBhcmFtZXRlcnMgbXVzdCBiZSBhbiBvYmplY3QsIGV2ZW4gaWYgZW1wdHkuJyk7XG4gICAgfVxuXG4gICAgLy8gVHJhY2sgdGhlIGNvbnRhaW5lciBzbyB3ZSBjYW4gdXNlIGl0IHdoZW4gdGhlIGNvbXBvbmVudCBnZXRzIGF0dGFjaGVkIHRvIHRoZSBkb2N1bWVudCB2aWEgYSBzZWxlY3RvclxuICAgIGNvbnN0IGNvbnRhaW5lcklkZW50aWZpZXIgPSBwZW5kaW5nUm9vdENvbXBvbmVudENvbnRhaW5lck5hbWVQcmVmaXggKyAoKytuZXh0UGVuZGluZ0R5bmFtaWNSb290Q29tcG9uZW50SWRlbnRpZmllcikudG9TdHJpbmcoKTtcbiAgICBwZW5kaW5nUm9vdENvbXBvbmVudENvbnRhaW5lcnMuc2V0KGNvbnRhaW5lcklkZW50aWZpZXIsIHRvRWxlbWVudCk7XG5cbiAgICAvLyBJbnN0cnVjdCAuTkVUIHRvIGFkZCBhbmQgcmVuZGVyIHRoZSBuZXcgcm9vdCBjb21wb25lbnRcbiAgICBjb25zdCBjb21wb25lbnRJZCA9IGF3YWl0IGdldFJlcXVpcmVkTWFuYWdlcigpLmludm9rZU1ldGhvZEFzeW5jPG51bWJlcj4oJ0FkZFJvb3RDb21wb25lbnQnLCBjb21wb25lbnRJZGVudGlmaWVyLCBjb250YWluZXJJZGVudGlmaWVyKTtcbiAgICBjb25zdCBjb21wb25lbnQgPSBuZXcgRHluYW1pY1Jvb3RDb21wb25lbnQoY29tcG9uZW50SWQsIGpzQ29tcG9uZW50UGFyYW1ldGVyc0J5SWRlbnRpZmllcltjb21wb25lbnRJZGVudGlmaWVyXSk7XG4gICAgYXdhaXQgY29tcG9uZW50LnNldFBhcmFtZXRlcnMoaW5pdGlhbFBhcmFtZXRlcnMpO1xuICAgIHJldHVybiBjb21wb25lbnQ7XG4gIH0sXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QW5kUmVtb3ZlUGVuZGluZ1Jvb3RDb21wb25lbnRDb250YWluZXIoY29udGFpbmVySWRlbnRpZmllcjogc3RyaW5nKTogRWxlbWVudCB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IGNvbnRhaW5lciA9IHBlbmRpbmdSb290Q29tcG9uZW50Q29udGFpbmVycy5nZXQoY29udGFpbmVySWRlbnRpZmllcik7XG4gIGlmIChjb250YWluZXIpIHtcbiAgICBwZW5kaW5nUm9vdENvbXBvbmVudENvbnRhaW5lcnMuZGVsZXRlKGNvbnRhaW5lcklkZW50aWZpZXIpO1xuICAgIHJldHVybiBjb250YWluZXI7XG4gIH1cbn1cblxuY2xhc3MgRXZlbnRDYWxsYmFja1dyYXBwZXIge1xuICBwcml2YXRlIF9jYWxsYmFjazogYW55O1xuXG4gIHByaXZhdGUgX3NlbGZKU09iamVjdFJlZmVyZW5jZTogdW5rbm93bjtcblxuICBpbnZva2UoYXJnOiB1bmtub3duKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NhbGxiYWNrKGFyZyk7XG4gIH1cblxuICBzZXRDYWxsYmFjayhjYWxsYmFjazogdW5rbm93bik6IHZvaWQge1xuICAgIGlmICghdGhpcy5fc2VsZkpTT2JqZWN0UmVmZXJlbmNlKSB7XG4gICAgICB0aGlzLl9zZWxmSlNPYmplY3RSZWZlcmVuY2UgPSBEb3ROZXQuY3JlYXRlSlNPYmplY3RSZWZlcmVuY2UodGhpcyk7XG4gICAgfVxuXG4gICAgdGhpcy5fY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgfVxuXG4gIGdldEpTT2JqZWN0UmVmZXJlbmNlKCkge1xuICAgIHJldHVybiB0aGlzLl9zZWxmSlNPYmplY3RSZWZlcmVuY2U7XG4gIH1cblxuICBkaXNwb3NlKCkge1xuICAgIGlmICh0aGlzLl9zZWxmSlNPYmplY3RSZWZlcmVuY2UpIHtcbiAgICAgIERvdE5ldC5kaXNwb3NlSlNPYmplY3RSZWZlcmVuY2UodGhpcy5fc2VsZkpTT2JqZWN0UmVmZXJlbmNlKTtcbiAgICB9XG4gIH1cbn1cblxuY2xhc3MgRHluYW1pY1Jvb3RDb21wb25lbnQge1xuICBwcml2YXRlIF9jb21wb25lbnRJZDogbnVtYmVyIHwgbnVsbDtcblxuICBwcml2YXRlIHJlYWRvbmx5IF9qc0V2ZW50Q2FsbGJhY2tXcmFwcGVycyA9IG5ldyBNYXA8c3RyaW5nLCBFdmVudENhbGxiYWNrV3JhcHBlcj4oKTtcblxuICBjb25zdHJ1Y3Rvcihjb21wb25lbnRJZDogbnVtYmVyLCBwYXJhbWV0ZXJzOiBKU0NvbXBvbmVudFBhcmFtZXRlcltdKSB7XG4gICAgdGhpcy5fY29tcG9uZW50SWQgPSBjb21wb25lbnRJZDtcblxuICAgIGZvciAoY29uc3QgcGFyYW1ldGVyIG9mIHBhcmFtZXRlcnMpIHtcbiAgICAgIGlmIChwYXJhbWV0ZXIudHlwZSA9PT0gJ2V2ZW50Y2FsbGJhY2snKSB7XG4gICAgICAgIHRoaXMuX2pzRXZlbnRDYWxsYmFja1dyYXBwZXJzLnNldChwYXJhbWV0ZXIubmFtZS50b0xvd2VyQ2FzZSgpLCBuZXcgRXZlbnRDYWxsYmFja1dyYXBwZXIoKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2V0UGFyYW1ldGVycyhwYXJhbWV0ZXJzOiBDb21wb25lbnRQYXJhbWV0ZXJzKSB7XG4gICAgY29uc3QgbWFwcGVkUGFyYW1ldGVycyA9IHt9O1xuICAgIGNvbnN0IGVudHJpZXMgPSBPYmplY3QuZW50cmllcyhwYXJhbWV0ZXJzIHx8IHt9KTtcbiAgICBjb25zdCBwYXJhbWV0ZXJDb3VudCA9IGVudHJpZXMubGVuZ3RoO1xuXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgZW50cmllcykge1xuICAgICAgY29uc3QgY2FsbGJhY2tXcmFwcGVyID0gdGhpcy5fanNFdmVudENhbGxiYWNrV3JhcHBlcnMuZ2V0KGtleS50b0xvd2VyQ2FzZSgpKTtcblxuICAgICAgaWYgKCFjYWxsYmFja1dyYXBwZXIgfHwgIXZhbHVlKSB7XG4gICAgICAgIG1hcHBlZFBhcmFtZXRlcnNba2V5XSA9IHZhbHVlO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY2FsbGJhY2tXcmFwcGVyLnNldENhbGxiYWNrKHZhbHVlKTtcbiAgICAgIG1hcHBlZFBhcmFtZXRlcnNba2V5XSA9IGNhbGxiYWNrV3JhcHBlci5nZXRKU09iamVjdFJlZmVyZW5jZSgpO1xuICAgIH1cblxuICAgIHJldHVybiBnZXRSZXF1aXJlZE1hbmFnZXIoKS5pbnZva2VNZXRob2RBc3luYygnU2V0Um9vdENvbXBvbmVudFBhcmFtZXRlcnMnLCB0aGlzLl9jb21wb25lbnRJZCwgcGFyYW1ldGVyQ291bnQsIG1hcHBlZFBhcmFtZXRlcnMpO1xuICB9XG5cbiAgYXN5bmMgZGlzcG9zZSgpIHtcbiAgICBpZiAodGhpcy5fY29tcG9uZW50SWQgIT09IG51bGwpIHtcbiAgICAgIGF3YWl0IGdldFJlcXVpcmVkTWFuYWdlcigpLmludm9rZU1ldGhvZEFzeW5jKCdSZW1vdmVSb290Q29tcG9uZW50JywgdGhpcy5fY29tcG9uZW50SWQpO1xuICAgICAgdGhpcy5fY29tcG9uZW50SWQgPSBudWxsOyAvLyBFbnN1cmUgaXQgY2FuJ3QgYmUgdXNlZCBhZ2FpblxuXG4gICAgICBmb3IgKGNvbnN0IGpzRXZlbnRDYWxsYmFja1dyYXBwZXIgb2YgdGhpcy5fanNFdmVudENhbGxiYWNrV3JhcHBlcnMudmFsdWVzKCkpIHtcbiAgICAgICAganNFdmVudENhbGxiYWNrV3JhcHBlci5kaXNwb3NlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8vIENhbGxlZCBieSB0aGUgZnJhbWV3b3JrXG5leHBvcnQgZnVuY3Rpb24gZW5hYmxlSlNSb290Q29tcG9uZW50cyhcbiAgbWFuYWdlckluc3RhbmNlOiBEb3ROZXQuRG90TmV0T2JqZWN0LFxuICBqc0NvbXBvbmVudFBhcmFtZXRlcnM6IEpTQ29tcG9uZW50UGFyYW1ldGVyc0J5SWRlbnRpZmllcixcbiAganNDb21wb25lbnRJbml0aWFsaXplcnM6IEpTQ29tcG9uZW50SWRlbnRpZmllcnNCeUluaXRpYWxpemVyXG4pOiB2b2lkIHtcbiAgaWYgKG1hbmFnZXIpIHtcbiAgICAvLyBUaGlzIHdpbGwgb25seSBoYXBwZW4gaW4gdmVyeSBub25zdGFuZGFyZCBjYXNlcyB3aGVyZSBzb21lb25lIGhhcyBtdWx0aXBsZSBob3N0cy5cbiAgICAvLyBJdCdzIHVwIHRvIHRoZSBkZXZlbG9wZXIgdG8gZW5zdXJlIHRoYXQgb25seSBvbmUgb2YgdGhlbSBlbmFibGVzIGR5bmFtaWMgcm9vdCBjb21wb25lbnRzLlxuICAgIHRocm93IG5ldyBFcnJvcignRHluYW1pYyByb290IGNvbXBvbmVudHMgaGF2ZSBhbHJlYWR5IGJlZW4gZW5hYmxlZC4nKTtcbiAgfVxuXG4gIG1hbmFnZXIgPSBtYW5hZ2VySW5zdGFuY2U7XG4gIGpzQ29tcG9uZW50UGFyYW1ldGVyc0J5SWRlbnRpZmllciA9IGpzQ29tcG9uZW50UGFyYW1ldGVycztcblxuICAvLyBDYWxsIHRoZSByZWdpc3RlcmVkIGluaXRpYWxpemVycy4gVGhpcyBpcyBhbiBhcmJpdHJhcnkgc3Vic2V0IG9mIHRoZSBKUyBjb21wb25lbnQgdHlwZXMgdGhhdCBhcmUgcmVnaXN0ZXJlZFxuICAvLyBvbiB0aGUgLk5FVCBzaWRlIC0ganVzdCB0aG9zZSBvZiB0aGVtIHRoYXQgcmVxdWlyZSBzb21lIEpTLXNpZGUgaW5pdGlhbGl6YXRpb24gKGUuZy4sIHRvIHJlZ2lzdGVyIHRoZW1cbiAgLy8gYXMgY3VzdG9tIGVsZW1lbnRzKS5cbiAgZm9yIChjb25zdCBbaW5pdGlhbGl6ZXJJZGVudGlmaWVyLCBjb21wb25lbnRJZGVudGlmaWVyc10gb2YgT2JqZWN0LmVudHJpZXMoanNDb21wb25lbnRJbml0aWFsaXplcnMpKSB7XG4gICAgY29uc3QgaW5pdGlhbGl6ZXJGdW5jID0gRG90TmV0LmZpbmRKU0Z1bmN0aW9uKGluaXRpYWxpemVySWRlbnRpZmllciwgMCkgYXMgSlNDb21wb25lbnRJbml0aWFsaXplckNhbGxiYWNrO1xuICAgIGZvciAoY29uc3QgY29tcG9uZW50SWRlbnRpZmllciBvZiBjb21wb25lbnRJZGVudGlmaWVycykge1xuICAgICAgY29uc3QgcGFyYW1ldGVycyA9IGpzQ29tcG9uZW50UGFyYW1ldGVyc1tjb21wb25lbnRJZGVudGlmaWVyXTtcbiAgICAgIGluaXRpYWxpemVyRnVuYyhjb21wb25lbnRJZGVudGlmaWVyLCBwYXJhbWV0ZXJzKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0UmVxdWlyZWRNYW5hZ2VyKCk6IERvdE5ldC5Eb3ROZXRPYmplY3Qge1xuICBpZiAoIW1hbmFnZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0R5bmFtaWMgcm9vdCBjb21wb25lbnRzIGhhdmUgbm90IGJlZW4gZW5hYmxlZCBpbiB0aGlzIGFwcGxpY2F0aW9uLicpO1xuICB9XG5cbiAgcmV0dXJuIG1hbmFnZXI7XG59XG5cbi8vIEtlZXAgaW4gc3luYyB3aXRoIGVxdWl2YWxlbnQgaW4gSlNDb21wb25lbnRDb25maWd1cmF0aW9uU3RvcmUuY3Ncbi8vIFRoZXNlIGFyZSBhbiBpbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBkZXRhaWwgbm90IGV4cG9zZWQgaW4gdGhlIHJlZ2lzdHJhdGlvbiBBUElzLlxuZXhwb3J0IHR5cGUgSlNDb21wb25lbnRQYXJhbWV0ZXJzQnlJZGVudGlmaWVyID0geyBbaWRlbnRpZmllcjogc3RyaW5nXTogSlNDb21wb25lbnRQYXJhbWV0ZXJbXSB9O1xuZXhwb3J0IHR5cGUgSlNDb21wb25lbnRJZGVudGlmaWVyc0J5SW5pdGlhbGl6ZXIgPSB7IFtpbml0aWFsaXplcjogc3RyaW5nXTogc3RyaW5nW10gfTtcblxuLy8gVGhlIGZvbGxvd2luZyBpcyBwdWJsaWMgQVBJXG5leHBvcnQgaW50ZXJmYWNlIEpTQ29tcG9uZW50SW5pdGlhbGl6ZXJDYWxsYmFjayB7XG4gIChpZGVudGlmaWVyOiBzdHJpbmcsIHBhcmFtZXRlcnM6IEpTQ29tcG9uZW50UGFyYW1ldGVyW10pOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEpTQ29tcG9uZW50UGFyYW1ldGVyIHtcbiAgbmFtZTogc3RyaW5nO1xuICB0eXBlOiBKU0NvbXBvbmVudFBhcmFtZXRlclR5cGU7XG59XG5cbi8vIEpTT04tcHJpbWl0aXZlIHR5cGVzLCBwbHVzIGZvciB0aG9zZSB3aG9zZSAuTkVUIGVxdWl2YWxlbnQgaXNuJ3QgbnVsbGFibGUsIGEgJz8nIHRvIGluZGljYXRlIG51bGxhYmlsaXR5XG4vLyBUaGlzIGFsbG93cyBjdXN0b20gZWxlbWVudCBhdXRob3JzIHRvIGNvZXJjZSBhdHRyaWJ1dGUgc3RyaW5ncyBpbnRvIHRoZSBhcHByb3ByaWF0ZSB0eXBlXG5leHBvcnQgdHlwZSBKU0NvbXBvbmVudFBhcmFtZXRlclR5cGUgPSAnc3RyaW5nJyB8ICdib29sZWFuJyB8ICdib29sZWFuPycgfCAnbnVtYmVyJyB8ICdudW1iZXI/JyB8ICdvYmplY3QnIHwgJ2V2ZW50Y2FsbGJhY2snO1xuIiwiLy8gTGljZW5zZWQgdG8gdGhlIC5ORVQgRm91bmRhdGlvbiB1bmRlciBvbmUgb3IgbW9yZSBhZ3JlZW1lbnRzLlxuLy8gVGhlIC5ORVQgRm91bmRhdGlvbiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxuaW1wb3J0IHsgRG90TmV0IH0gZnJvbSAnQG1pY3Jvc29mdC9kb3RuZXQtanMtaW50ZXJvcCc7XG5pbXBvcnQgeyBFdmVudERlc2NyaXB0b3IgfSBmcm9tICcuL0V2ZW50cy9FdmVudERlbGVnYXRvcic7XG5pbXBvcnQgeyBlbmFibGVKU1Jvb3RDb21wb25lbnRzLCBKU0NvbXBvbmVudFBhcmFtZXRlcnNCeUlkZW50aWZpZXIsIEpTQ29tcG9uZW50SWRlbnRpZmllcnNCeUluaXRpYWxpemVyIH0gZnJvbSAnLi9KU1Jvb3RDb21wb25lbnRzJztcblxuY29uc3QgaW50ZXJvcE1ldGhvZHNCeVJlbmRlcmVyID0gbmV3IE1hcDxudW1iZXIsIERvdE5ldC5Eb3ROZXRPYmplY3Q+KCk7XG5jb25zdCByZW5kZXJlckF0dGFjaGVkTGlzdGVuZXJzOiAoKGJyb3dzZXJSZW5kZXJlcklkOiBudW1iZXIpID0+IHZvaWQpW10gPSBbXTtcbmNvbnN0IHJlbmRlcmVyQnlJZFJlc29sdmVyTWFwOiBNYXA8bnVtYmVyLCBbKCkgPT4gdm9pZCB8IHVuZGVmaW5lZCwgUHJvbWlzZTx2b2lkPiB8IHVuZGVmaW5lZF0+ID0gbmV3IE1hcCgpO1xuXG5leHBvcnQgZnVuY3Rpb24gYXR0YWNoUmVuZGVyZXJJZFJlc29sdmVyKHJlbmRlcmVySWQ6IG51bWJlciwgcmVzb2x2ZXI6ICgpID0+IHZvaWQgfCB1bmRlZmluZWQsIHByb21pc2U6IFByb21pc2U8dm9pZD4gfCB1bmRlZmluZWQpIHtcbiAgcmVuZGVyZXJCeUlkUmVzb2x2ZXJNYXAuc2V0KHJlbmRlcmVySWQsIFtyZXNvbHZlciwgcHJvbWlzZV0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVuZGVyZXJBdHRhY2hlZFByb21pc2UocmVuZGVyZXJJZDogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB8IHVuZGVmaW5lZCB7XG4gIHJldHVybiByZW5kZXJlckJ5SWRSZXNvbHZlck1hcC5nZXQocmVuZGVyZXJJZCk/LlsxXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGF0dGFjaFdlYlJlbmRlcmVySW50ZXJvcChcbiAgcmVuZGVyZXJJZDogbnVtYmVyLFxuICBpbnRlcm9wTWV0aG9kczogRG90TmV0LkRvdE5ldE9iamVjdCxcbiAganNDb21wb25lbnRQYXJhbWV0ZXJzPzogSlNDb21wb25lbnRQYXJhbWV0ZXJzQnlJZGVudGlmaWVyLFxuICBqc0NvbXBvbmVudEluaXRpYWxpemVycz86IEpTQ29tcG9uZW50SWRlbnRpZmllcnNCeUluaXRpYWxpemVyLFxuKTogdm9pZCB7XG4gIGlmIChpbnRlcm9wTWV0aG9kc0J5UmVuZGVyZXIuaGFzKHJlbmRlcmVySWQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnRlcm9wIG1ldGhvZHMgYXJlIGFscmVhZHkgcmVnaXN0ZXJlZCBmb3IgcmVuZGVyZXIgJHtyZW5kZXJlcklkfWApO1xuICB9XG5cbiAgaW50ZXJvcE1ldGhvZHNCeVJlbmRlcmVyLnNldChyZW5kZXJlcklkLCBpbnRlcm9wTWV0aG9kcyk7XG5cbiAgaWYgKGpzQ29tcG9uZW50UGFyYW1ldGVycyAmJiBqc0NvbXBvbmVudEluaXRpYWxpemVycyAmJiBPYmplY3Qua2V5cyhqc0NvbXBvbmVudFBhcmFtZXRlcnMpLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBtYW5hZ2VyID0gZ2V0SW50ZXJvcE1ldGhvZHMocmVuZGVyZXJJZCk7XG4gICAgZW5hYmxlSlNSb290Q29tcG9uZW50cyhtYW5hZ2VyLCBqc0NvbXBvbmVudFBhcmFtZXRlcnMsIGpzQ29tcG9uZW50SW5pdGlhbGl6ZXJzKTtcbiAgfVxuXG4gIHJlbmRlcmVyQnlJZFJlc29sdmVyTWFwLmdldChyZW5kZXJlcklkKT8uWzBdPy4oKTtcblxuICBpbnZva2VSZW5kZXJlckF0dGFjaGVkTGlzdGVuZXJzKHJlbmRlcmVySWQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGV0YWNoV2ViUmVuZGVyZXJJbnRlcm9wKHJlbmRlcmVySWQ6IG51bWJlcik6IERvdE5ldC5Eb3ROZXRPYmplY3Qge1xuICBjb25zdCBpbnRlcm9wTWV0aG9kcyA9IGludGVyb3BNZXRob2RzQnlSZW5kZXJlci5nZXQocmVuZGVyZXJJZCk7XG4gIGlmICghaW50ZXJvcE1ldGhvZHMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludGVyb3AgbWV0aG9kcyBhcmUgbm90IHJlZ2lzdGVyZWQgZm9yIHJlbmRlcmVyICR7cmVuZGVyZXJJZH1gKTtcbiAgfVxuXG4gIGludGVyb3BNZXRob2RzQnlSZW5kZXJlci5kZWxldGUocmVuZGVyZXJJZCk7XG4gIHJldHVybiBpbnRlcm9wTWV0aG9kcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUmVuZGVyZXJBdHRhY2hlZChicm93c2VyUmVuZGVyZXJJZDogbnVtYmVyKTogYm9vbGVhbiB7XG4gIHJldHVybiBpbnRlcm9wTWV0aG9kc0J5UmVuZGVyZXIuaGFzKGJyb3dzZXJSZW5kZXJlcklkKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyUmVuZGVyZXJBdHRhY2hlZExpc3RlbmVyKGxpc3RlbmVyOiAoYnJvd3NlclJlbmRlcmVySWQ6IG51bWJlcikgPT4gdm9pZCkge1xuICByZW5kZXJlckF0dGFjaGVkTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xufVxuXG5mdW5jdGlvbiBpbnZva2VSZW5kZXJlckF0dGFjaGVkTGlzdGVuZXJzKGJyb3dzZXJSZW5kZXJlcklkOiBudW1iZXIpIHtcbiAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiByZW5kZXJlckF0dGFjaGVkTGlzdGVuZXJzKSB7XG4gICAgbGlzdGVuZXIoYnJvd3NlclJlbmRlcmVySWQpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwYXRjaEV2ZW50KGJyb3dzZXJSZW5kZXJlcklkOiBudW1iZXIsIGV2ZW50RGVzY3JpcHRvcjogRXZlbnREZXNjcmlwdG9yLCBldmVudEFyZ3M6IGFueSk6IHZvaWQge1xuICByZXR1cm4gZGlzcGF0Y2hFdmVudE1pZGRsZXdhcmUoYnJvd3NlclJlbmRlcmVySWQsIGV2ZW50RGVzY3JpcHRvci5ldmVudEhhbmRsZXJJZCwgKCkgPT4ge1xuICAgIGNvbnN0IGludGVyb3BNZXRob2RzID0gZ2V0SW50ZXJvcE1ldGhvZHMoYnJvd3NlclJlbmRlcmVySWQpO1xuICAgIHJldHVybiBpbnRlcm9wTWV0aG9kcy5pbnZva2VNZXRob2RBc3luYygnRGlzcGF0Y2hFdmVudEFzeW5jJywgZXZlbnREZXNjcmlwdG9yLCBldmVudEFyZ3MpO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVJvb3RDb21wb25lbnRzKGJyb3dzZXJSZW5kZXJlcklkOiBudW1iZXIsIG9wZXJhdGlvbnNKc29uOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgaW50ZXJvcE1ldGhvZHMgPSBnZXRJbnRlcm9wTWV0aG9kcyhicm93c2VyUmVuZGVyZXJJZCk7XG4gIHJldHVybiBpbnRlcm9wTWV0aG9kcy5pbnZva2VNZXRob2RBc3luYygnVXBkYXRlUm9vdENvbXBvbmVudHMnLCBvcGVyYXRpb25zSnNvbik7XG59XG5cbmZ1bmN0aW9uIGdldEludGVyb3BNZXRob2RzKHJlbmRlcmVySWQ6IG51bWJlcik6IERvdE5ldC5Eb3ROZXRPYmplY3Qge1xuICBjb25zdCBpbnRlcm9wTWV0aG9kcyA9IGludGVyb3BNZXRob2RzQnlSZW5kZXJlci5nZXQocmVuZGVyZXJJZCk7XG4gIGlmICghaW50ZXJvcE1ldGhvZHMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIGludGVyb3AgbWV0aG9kcyBhcmUgcmVnaXN0ZXJlZCBmb3IgcmVuZGVyZXIgJHtyZW5kZXJlcklkfWApO1xuICB9XG5cbiAgcmV0dXJuIGludGVyb3BNZXRob2RzO1xufVxuXG4vLyBPbiBzb21lIGhvc3RpbmcgcGxhdGZvcm1zLCB3ZSBtYXkgbmVlZCB0byBkZWZlciB0aGUgZXZlbnQgZGlzcGF0Y2gsIHNvIHRoZXkgY2FuIHJlZ2lzdGVyIHRoaXMgbWlkZGxld2FyZSB0byBkbyBzb1xudHlwZSBEaXNwYXRjaEV2ZW50TWlkZGx3YXJlID0gKGJyb3dzZXJSZW5kZXJlcklkOiBudW1iZXIsIGV2ZW50SGFuZGxlcklkOiBudW1iZXIsIGNvbnRpbnVhdGlvbjogKCkgPT4gdm9pZCkgPT4gdm9pZDtcblxubGV0IGRpc3BhdGNoRXZlbnRNaWRkbGV3YXJlOiBEaXNwYXRjaEV2ZW50TWlkZGx3YXJlID0gKGJyb3dzZXJSZW5kZXJlcklkLCBldmVudEhhbmRsZXJJZCwgY29udGludWF0aW9uKSA9PiBjb250aW51YXRpb24oKTtcbmV4cG9ydCBmdW5jdGlvbiBhZGREaXNwYXRjaEV2ZW50TWlkZGxld2FyZShtaWRkbGV3YXJlOiBEaXNwYXRjaEV2ZW50TWlkZGx3YXJlKTogdm9pZCB7XG4gIGNvbnN0IG5leHQgPSBkaXNwYXRjaEV2ZW50TWlkZGxld2FyZTtcbiAgZGlzcGF0Y2hFdmVudE1pZGRsZXdhcmUgPSAoYnJvd3NlclJlbmRlcmVySWQsIGV2ZW50SGFuZGxlcklkLCBjb250aW51YXRpb24pID0+IHtcbiAgICBtaWRkbGV3YXJlKGJyb3dzZXJSZW5kZXJlcklkLCBldmVudEhhbmRsZXJJZCwgKCkgPT4gbmV4dChicm93c2VyUmVuZGVyZXJJZCwgZXZlbnRIYW5kbGVySWQsIGNvbnRpbnVhdGlvbikpO1xuICB9O1xufVxuIiwiLy8gTGljZW5zZWQgdG8gdGhlIC5ORVQgRm91bmRhdGlvbiB1bmRlciBvbmUgb3IgbW9yZSBhZ3JlZW1lbnRzLlxuLy8gVGhlIC5ORVQgRm91bmRhdGlvbiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxuaW1wb3J0IHsgRXZlbnRGaWVsZEluZm8gfSBmcm9tICcuL0V2ZW50RmllbGRJbmZvJztcbmltcG9ydCB7IGV2ZW50TmFtZUFsaWFzUmVnaXN0ZXJlZENhbGxiYWNrcywgZ2V0QnJvd3NlckV2ZW50TmFtZSwgZ2V0RXZlbnROYW1lQWxpYXNlcywgZ2V0RXZlbnRUeXBlT3B0aW9ucyB9IGZyb20gJy4vRXZlbnRUeXBlcyc7XG5pbXBvcnQgeyBpc1JlbmRlcmVyQXR0YWNoZWQsIGRpc3BhdGNoRXZlbnQgfSBmcm9tICcuLi9XZWJSZW5kZXJlckludGVyb3BNZXRob2RzJztcblxuY29uc3Qgbm9uQnViYmxpbmdFdmVudHMgPSB0b0xvb2t1cChbXG4gICdhYm9ydCcsXG4gICdibHVyJyxcbiAgJ2NhbmNlbCcsXG4gICdjYW5wbGF5JyxcbiAgJ2NhbnBsYXl0aHJvdWdoJyxcbiAgJ2NoYW5nZScsXG4gICdjbG9zZScsXG4gICdjdWVjaGFuZ2UnLFxuICAnZHVyYXRpb25jaGFuZ2UnLFxuICAnZW1wdGllZCcsXG4gICdlbmRlZCcsXG4gICdlcnJvcicsXG4gICdmb2N1cycsXG4gICdsb2FkJyxcbiAgJ2xvYWRlZGRhdGEnLFxuICAnbG9hZGVkbWV0YWRhdGEnLFxuICAnbG9hZGVuZCcsXG4gICdsb2Fkc3RhcnQnLFxuICAnbW91c2VlbnRlcicsXG4gICdtb3VzZWxlYXZlJyxcbiAgJ3BvaW50ZXJlbnRlcicsXG4gICdwb2ludGVybGVhdmUnLFxuICAncGF1c2UnLFxuICAncGxheScsXG4gICdwbGF5aW5nJyxcbiAgJ3Byb2dyZXNzJyxcbiAgJ3JhdGVjaGFuZ2UnLFxuICAncmVzZXQnLFxuICAnc2Nyb2xsJyxcbiAgJ3NlZWtlZCcsXG4gICdzZWVraW5nJyxcbiAgJ3N0YWxsZWQnLFxuICAnc3VibWl0JyxcbiAgJ3N1c3BlbmQnLFxuICAndGltZXVwZGF0ZScsXG4gICd0b2dnbGUnLFxuICAndW5sb2FkJyxcbiAgJ3ZvbHVtZWNoYW5nZScsXG4gICd3YWl0aW5nJyxcbiAgJ0RPTU5vZGVJbnNlcnRlZEludG9Eb2N1bWVudCcsXG4gICdET01Ob2RlUmVtb3ZlZEZyb21Eb2N1bWVudCcsXG5dKTtcblxuY29uc3QgYWx3YXlzUHJldmVudERlZmF1bHRFdmVudHM6IHsgW2V2ZW50VHlwZTogc3RyaW5nXTogYm9vbGVhbiB9ID0geyBzdWJtaXQ6IHRydWUgfTtcblxuY29uc3QgZGlzYWJsZWFibGVFdmVudE5hbWVzID0gdG9Mb29rdXAoW1xuICAnY2xpY2snLFxuICAnZGJsY2xpY2snLFxuICAnbW91c2Vkb3duJyxcbiAgJ21vdXNlbW92ZScsXG4gICdtb3VzZXVwJyxcbl0pO1xuXG4vLyBSZXNwb25zaWJsZSBmb3IgYWRkaW5nL3JlbW92aW5nIHRoZSBldmVudEluZm8gb24gYW4gZXhwYW5kbyBwcm9wZXJ0eSBvbiBET00gZWxlbWVudHMsIGFuZFxuLy8gY2FsbGluZyBhbiBFdmVudEluZm9TdG9yZSB0aGF0IGRlYWxzIHdpdGggcmVnaXN0ZXJpbmcvdW5yZWdpc3RlcmluZyB0aGUgdW5kZXJseWluZyBkZWxlZ2F0ZWRcbi8vIGV2ZW50IGxpc3RlbmVycyBhcyByZXF1aXJlZCAoYW5kIGFsc28gbWFwcyBhY3R1YWwgZXZlbnRzIGJhY2sgdG8gdGhlIGdpdmVuIGNhbGxiYWNrKS5cbmV4cG9ydCBjbGFzcyBFdmVudERlbGVnYXRvciB7XG4gIHByaXZhdGUgc3RhdGljIG5leHRFdmVudERlbGVnYXRvcklkID0gMDtcblxuICBwcml2YXRlIHJlYWRvbmx5IGV2ZW50c0NvbGxlY3Rpb25LZXk6IHN0cmluZztcblxuICBwcml2YXRlIHJlYWRvbmx5IGFmdGVyQ2xpY2tDYWxsYmFja3M6ICgoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHZvaWQpW10gPSBbXTtcblxuICBwcml2YXRlIGV2ZW50SW5mb1N0b3JlOiBFdmVudEluZm9TdG9yZTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGJyb3dzZXJSZW5kZXJlcklkOiBudW1iZXIpIHtcbiAgICBjb25zdCBldmVudERlbGVnYXRvcklkID0gKytFdmVudERlbGVnYXRvci5uZXh0RXZlbnREZWxlZ2F0b3JJZDtcbiAgICB0aGlzLmV2ZW50c0NvbGxlY3Rpb25LZXkgPSBgX2JsYXpvckV2ZW50c18ke2V2ZW50RGVsZWdhdG9ySWR9YDtcbiAgICB0aGlzLmV2ZW50SW5mb1N0b3JlID0gbmV3IEV2ZW50SW5mb1N0b3JlKHRoaXMub25HbG9iYWxFdmVudC5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRMaXN0ZW5lcihlbGVtZW50OiBFbGVtZW50LCBldmVudE5hbWU6IHN0cmluZywgZXZlbnRIYW5kbGVySWQ6IG51bWJlciwgcmVuZGVyaW5nQ29tcG9uZW50SWQ6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IGluZm9Gb3JFbGVtZW50ID0gdGhpcy5nZXRFdmVudEhhbmRsZXJJbmZvc0ZvckVsZW1lbnQoZWxlbWVudCwgdHJ1ZSkhO1xuICAgIGNvbnN0IGV4aXN0aW5nSGFuZGxlciA9IGluZm9Gb3JFbGVtZW50LmdldEhhbmRsZXIoZXZlbnROYW1lKTtcblxuICAgIGlmIChleGlzdGluZ0hhbmRsZXIpIHtcbiAgICAgIC8vIFdlIGNhbiBjaGVhcGx5IHVwZGF0ZSB0aGUgaW5mbyBvbiB0aGUgZXhpc3Rpbmcgb2JqZWN0IGFuZCBkb24ndCBuZWVkIGFueSBvdGhlciBob3VzZWtlZXBpbmdcbiAgICAgIC8vIE5vdGUgdGhhdCB0aGlzIGFsc28gdGFrZXMgY2FyZSBvZiB1cGRhdGluZyB0aGUgZXZlbnRIYW5kbGVySWQgb24gdGhlIGV4aXN0aW5nIGhhbmRsZXIgb2JqZWN0XG4gICAgICB0aGlzLmV2ZW50SW5mb1N0b3JlLnVwZGF0ZShleGlzdGluZ0hhbmRsZXIuZXZlbnRIYW5kbGVySWQsIGV2ZW50SGFuZGxlcklkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gR28gdGhyb3VnaCB0aGUgd2hvbGUgZmxvdyB3aGljaCBtaWdodCBpbnZvbHZlIHJlZ2lzdGVyaW5nIGEgbmV3IGdsb2JhbCBoYW5kbGVyXG4gICAgICBjb25zdCBuZXdJbmZvID0geyBlbGVtZW50LCBldmVudE5hbWUsIGV2ZW50SGFuZGxlcklkLCByZW5kZXJpbmdDb21wb25lbnRJZCB9O1xuICAgICAgdGhpcy5ldmVudEluZm9TdG9yZS5hZGQobmV3SW5mbyk7XG4gICAgICBpbmZvRm9yRWxlbWVudC5zZXRIYW5kbGVyKGV2ZW50TmFtZSwgbmV3SW5mbyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldEhhbmRsZXIoZXZlbnRIYW5kbGVySWQ6IG51bWJlcik6IEV2ZW50SGFuZGxlckluZm8ge1xuICAgIHJldHVybiB0aGlzLmV2ZW50SW5mb1N0b3JlLmdldChldmVudEhhbmRsZXJJZCk7XG4gIH1cblxuICBwdWJsaWMgcmVtb3ZlTGlzdGVuZXIoZXZlbnRIYW5kbGVySWQ6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIFRoaXMgbWV0aG9kIGdldHMgY2FsbGVkIHdoZW5ldmVyIHRoZSAuTkVULXNpZGUgY29kZSByZXBvcnRzIHRoYXQgYSBjZXJ0YWluIGV2ZW50IGhhbmRsZXJcbiAgICAvLyBoYXMgYmVlbiBkaXNwb3NlZC4gSG93ZXZlciB3ZSB3aWxsIGFscmVhZHkgaGF2ZSBkaXNwb3NlZCB0aGUgaW5mbyBhYm91dCB0aGF0IGhhbmRsZXIgaWZcbiAgICAvLyB0aGUgZXZlbnRIYW5kbGVySWQgZm9yIHRoZSAoZWxlbWVudCxldmVudE5hbWUpIHBhaXIgd2FzIHJlcGxhY2VkIGR1cmluZyBkaWZmIGFwcGxpY2F0aW9uLlxuICAgIGNvbnN0IGluZm8gPSB0aGlzLmV2ZW50SW5mb1N0b3JlLnJlbW92ZShldmVudEhhbmRsZXJJZCk7XG4gICAgaWYgKGluZm8pIHtcbiAgICAgIC8vIExvb2tzIGxpa2UgdGhpcyBldmVudCBoYW5kbGVyIHdhc24ndCBhbHJlYWR5IGRpc3Bvc2VkXG4gICAgICAvLyBSZW1vdmUgdGhlIGFzc29jaWF0ZWQgZGF0YSBmcm9tIHRoZSBET00gZWxlbWVudFxuICAgICAgY29uc3QgZWxlbWVudCA9IGluZm8uZWxlbWVudDtcbiAgICAgIGNvbnN0IGVsZW1lbnRFdmVudEluZm9zID0gdGhpcy5nZXRFdmVudEhhbmRsZXJJbmZvc0ZvckVsZW1lbnQoZWxlbWVudCwgZmFsc2UpO1xuICAgICAgaWYgKGVsZW1lbnRFdmVudEluZm9zKSB7XG4gICAgICAgIGVsZW1lbnRFdmVudEluZm9zLnJlbW92ZUhhbmRsZXIoaW5mby5ldmVudE5hbWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZW1vdmVMaXN0ZW5lcnNGb3JFbGVtZW50KGVsZW1lbnQ6IEVsZW1lbnQpOiB2b2lkIHtcbiAgICAvLyBUaGlzIG1ldGhvZCBnZXRzIGNhbGxlZCB3aGVuZXZlciB0aGUgLk5FVC1zaWRlIGNvZGUgcmVwb3J0cyB0aGF0IGEgY2VydGFpbiBlbGVtZW50XG4gICAgLy8gaGFzIGJlZW4gZGlzcG9zZWQuIFdlIHJlbW92ZSBhbGwgZXZlbnQgaGFuZGxlcnMgZm9yIHRoYXQgZWxlbWVudC5cbiAgICBjb25zdCBpbmZvc0ZvckVsZW1lbnQgPSB0aGlzLmdldEV2ZW50SGFuZGxlckluZm9zRm9yRWxlbWVudChlbGVtZW50LCBmYWxzZSk7XG4gICAgaWYgKGluZm9zRm9yRWxlbWVudCkge1xuICAgICAgZm9yIChjb25zdCBoYW5kbGVySW5mbyBvZiBpbmZvc0ZvckVsZW1lbnQuZW51bWVyYXRlSGFuZGxlcnMoKSkge1xuICAgICAgICB0aGlzLmV2ZW50SW5mb1N0b3JlLnJlbW92ZShoYW5kbGVySW5mby5ldmVudEhhbmRsZXJJZCk7XG4gICAgICB9XG5cbiAgICAgIGRlbGV0ZSBlbGVtZW50W3RoaXMuZXZlbnRzQ29sbGVjdGlvbktleV07XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG5vdGlmeUFmdGVyQ2xpY2soY2FsbGJhY2s6IChldmVudDogTW91c2VFdmVudCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIC8vIFRoaXMgaXMgZXh0cmVtZWx5IHNwZWNpYWwtY2FzZS4gSXQncyBuZWVkZWQgc28gdGhhdCBuYXZpZ2F0aW9uIGxpbmsgY2xpY2sgaW50ZXJjZXB0aW9uXG4gICAgLy8gY2FuIGJlIHN1cmUgdG8gcnVuICphZnRlciogb3VyIHN5bnRoZXRpYyBidWJibGluZyBwcm9jZXNzLiBJZiBhIG5lZWQgYXJpc2VzLCB3ZSBjYW5cbiAgICAvLyBnZW5lcmFsaXNlIHRoaXMsIGJ1dCByaWdodCBub3cgaXQncyBhIHB1cmVseSBpbnRlcm5hbCBkZXRhaWwuXG4gICAgdGhpcy5hZnRlckNsaWNrQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgIHRoaXMuZXZlbnRJbmZvU3RvcmUuYWRkR2xvYmFsTGlzdGVuZXIoJ2NsaWNrJyk7IC8vIEVuc3VyZSB3ZSBhbHdheXMgbGlzdGVuIGZvciB0aGlzXG4gIH1cblxuICBwdWJsaWMgc2V0U3RvcFByb3BhZ2F0aW9uKGVsZW1lbnQ6IEVsZW1lbnQsIGV2ZW50TmFtZTogc3RyaW5nLCB2YWx1ZTogYm9vbGVhbik6IHZvaWQge1xuICAgIGNvbnN0IGluZm9Gb3JFbGVtZW50ID0gdGhpcy5nZXRFdmVudEhhbmRsZXJJbmZvc0ZvckVsZW1lbnQoZWxlbWVudCwgdHJ1ZSkhO1xuICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IGluZm9Gb3JFbGVtZW50LnN0b3BQcm9wYWdhdGlvbihldmVudE5hbWUpO1xuICAgIGluZm9Gb3JFbGVtZW50LnN0b3BQcm9wYWdhdGlvbihldmVudE5hbWUsIHZhbHVlKTtcblxuICAgIGlmICghY3VycmVudFZhbHVlICYmIHZhbHVlKSB7XG4gICAgICB0aGlzLmV2ZW50SW5mb1N0b3JlLmFkZEdsb2JhbExpc3RlbmVyKGV2ZW50TmFtZSk7XG4gICAgfSBlbHNlIGlmIChjdXJyZW50VmFsdWUgJiYgIXZhbHVlKSB7XG4gICAgICB0aGlzLmV2ZW50SW5mb1N0b3JlLmRlY3JlbWVudENvdW50QnlFdmVudE5hbWUoZXZlbnROYW1lKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc2V0UHJldmVudERlZmF1bHQoZWxlbWVudDogRWxlbWVudCwgZXZlbnROYW1lOiBzdHJpbmcsIHZhbHVlOiBib29sZWFuKTogdm9pZCB7XG4gICAgY29uc3QgaW5mb0ZvckVsZW1lbnQgPSB0aGlzLmdldEV2ZW50SGFuZGxlckluZm9zRm9yRWxlbWVudChlbGVtZW50LCB0cnVlKSE7XG4gICAgY29uc3QgY3VycmVudFZhbHVlID0gaW5mb0ZvckVsZW1lbnQucHJldmVudERlZmF1bHQoZXZlbnROYW1lKTtcbiAgICBpbmZvRm9yRWxlbWVudC5wcmV2ZW50RGVmYXVsdChldmVudE5hbWUsIHZhbHVlKTtcblxuICAgIGlmICghY3VycmVudFZhbHVlICYmIHZhbHVlKSB7XG4gICAgICAvLyBUbyBlbnN1cmUgdGhhdCBwcmV2ZW50RGVmYXVsdCB3b3JrcyBmb3Igd2hlZWwgYW5kIHRvdWNoIGV2ZW50cywsXG4gICAgICAvLyB3ZSBuZWVkIHRvIHJlZ2lzdGVyIGEgbGlzdGVuZXIgd2l0aCB0aGUgcGFzc2l2ZSBtb2RlIGV4cGxpY2l0bHkgZGlzYWJsZWQuXG4gICAgICAvLyBOb3RlIHRoYXQgdGhpcyBkb2VzIG5vdCBjaGFuZ2UgYmVoYXZpb3IgZm9yIG90aGVyIGV2ZW50cyBhcyB0aG9zZVxuICAgICAgLy8gdXNlIGFjdGl2ZSBtb2RlIGJ5IGRlZmF1bHQuXG4gICAgICB0aGlzLmV2ZW50SW5mb1N0b3JlLmFkZEFjdGl2ZUdsb2JhbExpc3RlbmVyKGV2ZW50TmFtZSk7XG4gICAgfSBlbHNlIGlmIChjdXJyZW50VmFsdWUgJiYgIXZhbHVlKSB7XG4gICAgICB0aGlzLmV2ZW50SW5mb1N0b3JlLmRlY3JlbWVudENvdW50QnlFdmVudE5hbWUoZXZlbnROYW1lKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIG9uR2xvYmFsRXZlbnQoZXZ0OiBFdmVudCkge1xuICAgIGlmICghKGV2dC50YXJnZXQgaW5zdGFuY2VvZiBFbGVtZW50KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghaXNSZW5kZXJlckF0dGFjaGVkKHRoaXMuYnJvd3NlclJlbmRlcmVySWQpKSB7XG4gICAgICAvLyB3aGVuIGNvbm5lY3Rpb24gY2xvc2VkLCBpdCB3aWxsIGRldGFjaFdlYlJlbmRlcmVySW50ZXJvcCwgc28gd2UgbmVlZCB0byBjaGVjayBpZiB0aGUgcmVuZGVyZXIgaXMgc3RpbGwgYXR0YWNoZWRcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBBbHdheXMgZGlzcGF0Y2ggdG8gYW55IGxpc3RlbmVycyBmb3IgdGhlIG9yaWdpbmFsIHVuZGVybHlpbmcgYnJvd3NlciBldmVudCBuYW1lXG4gICAgdGhpcy5kaXNwYXRjaEdsb2JhbEV2ZW50VG9BbGxFbGVtZW50cyhldnQudHlwZSwgZXZ0KTtcblxuICAgIC8vIElmIHRoaXMgZXZlbnQgbmFtZSBoYXMgYWxpYXNlcywgZGlzcGF0Y2ggZm9yIHRob3NlIGxpc3RlbmVycyB0b29cbiAgICBjb25zdCBldmVudE5hbWVBbGlhc2VzID0gZ2V0RXZlbnROYW1lQWxpYXNlcyhldnQudHlwZSk7XG4gICAgZXZlbnROYW1lQWxpYXNlcyAmJiBldmVudE5hbWVBbGlhc2VzLmZvckVhY2goYWxpYXMgPT5cbiAgICAgIHRoaXMuZGlzcGF0Y2hHbG9iYWxFdmVudFRvQWxsRWxlbWVudHMoYWxpYXMsIGV2dCkpO1xuXG4gICAgLy8gU3BlY2lhbCBjYXNlIGZvciBuYXZpZ2F0aW9uIGludGVyY2VwdGlvblxuICAgIGlmIChldnQudHlwZSA9PT0gJ2NsaWNrJykge1xuICAgICAgdGhpcy5hZnRlckNsaWNrQ2FsbGJhY2tzLmZvckVhY2goY2FsbGJhY2sgPT4gY2FsbGJhY2soZXZ0IGFzIE1vdXNlRXZlbnQpKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGRpc3BhdGNoR2xvYmFsRXZlbnRUb0FsbEVsZW1lbnRzKGV2ZW50TmFtZTogc3RyaW5nLCBicm93c2VyRXZlbnQ6IEV2ZW50KSB7XG4gICAgLy8gTm90ZSB0aGF0ICdldmVudE5hbWUnIGNhbiBiZSBhbiBhbGlhcy4gRm9yIGV4YW1wbGUsIGV2ZW50TmFtZSBtYXkgYmUgJ2NsaWNrLnNwZWNpYWwnXG4gICAgLy8gd2hpbGUgYnJvd3NlckV2ZW50LnR5cGUgbWF5IGJlICdjbGljaycuXG5cbiAgICAvLyBVc2UgdGhlIGV2ZW50J3MgJ3BhdGgnIHJhdGhlciB0aGFuIHRoZSBjaGFpbiBvZiBwYXJlbnQgbm9kZXMsIHNpbmNlIHRoZSBwYXRoIGdpdmVzXG4gICAgLy8gdmlzaWJpbGl0eSBpbnRvIHNoYWRvdyByb290cy5cbiAgICBjb25zdCBwYXRoID0gYnJvd3NlckV2ZW50LmNvbXBvc2VkUGF0aCgpO1xuXG4gICAgLy8gU2NhbiB1cCB0aGUgZWxlbWVudCBoaWVyYXJjaHksIGxvb2tpbmcgZm9yIGFueSBtYXRjaGluZyByZWdpc3RlcmVkIGV2ZW50IGhhbmRsZXJzXG4gICAgbGV0IGNhbmRpZGF0ZUV2ZW50VGFyZ2V0ID0gcGF0aC5zaGlmdCgpO1xuICAgIGxldCBldmVudEFyZ3M6IHVua25vd24gPSBudWxsOyAvLyBQb3B1bGF0ZSBsYXppbHlcbiAgICBsZXQgZXZlbnRBcmdzSXNQb3B1bGF0ZWQgPSBmYWxzZTtcbiAgICBjb25zdCBldmVudElzTm9uQnViYmxpbmcgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobm9uQnViYmxpbmdFdmVudHMsIGV2ZW50TmFtZSk7XG4gICAgbGV0IHN0b3BQcm9wYWdhdGlvbldhc1JlcXVlc3RlZCA9IGZhbHNlO1xuICAgIHdoaWxlIChjYW5kaWRhdGVFdmVudFRhcmdldCkge1xuICAgICAgY29uc3QgY2FuZGlkYXRlRWxlbWVudCA9IGNhbmRpZGF0ZUV2ZW50VGFyZ2V0IGFzIEVsZW1lbnQ7XG4gICAgICBjb25zdCBoYW5kbGVySW5mb3MgPSB0aGlzLmdldEV2ZW50SGFuZGxlckluZm9zRm9yRWxlbWVudChjYW5kaWRhdGVFbGVtZW50LCBmYWxzZSk7XG4gICAgICBpZiAoaGFuZGxlckluZm9zKSB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXJJbmZvID0gaGFuZGxlckluZm9zLmdldEhhbmRsZXIoZXZlbnROYW1lKTtcbiAgICAgICAgaWYgKGhhbmRsZXJJbmZvICYmICFldmVudElzRGlzYWJsZWRPbkVsZW1lbnQoY2FuZGlkYXRlRWxlbWVudCwgYnJvd3NlckV2ZW50LnR5cGUpKSB7XG4gICAgICAgICAgLy8gV2UgYXJlIGdvaW5nIHRvIHJhaXNlIGFuIGV2ZW50IGZvciB0aGlzIGVsZW1lbnQsIHNvIHByZXBhcmUgaW5mbyBuZWVkZWQgYnkgdGhlIC5ORVQgY29kZVxuICAgICAgICAgIGlmICghZXZlbnRBcmdzSXNQb3B1bGF0ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50T3B0aW9uc0lmUmVnaXN0ZXJlZCA9IGdldEV2ZW50VHlwZU9wdGlvbnMoZXZlbnROYW1lKTtcbiAgICAgICAgICAgIC8vIEZvciBiYWNrLWNvbXBhdCwgaWYgdGhlcmUncyBubyByZWdpc3RlcmVkIGNyZWF0ZUV2ZW50QXJncywgd2Ugc3VwcGx5IGVtcHR5IGV2ZW50IGFyZ3MgKG5vdCBudWxsKS5cbiAgICAgICAgICAgIC8vIEJ1dCBpZiB0aGVyZSBpcyBhIHJlZ2lzdGVyZWQgY3JlYXRlRXZlbnRBcmdzLCBpdCBjYW4gc3VwcGx5IGFueXRoaW5nIChpbmNsdWRpbmcgbnVsbCkuXG4gICAgICAgICAgICBldmVudEFyZ3MgPSBldmVudE9wdGlvbnNJZlJlZ2lzdGVyZWQ/LmNyZWF0ZUV2ZW50QXJnc1xuICAgICAgICAgICAgICA/IGV2ZW50T3B0aW9uc0lmUmVnaXN0ZXJlZC5jcmVhdGVFdmVudEFyZ3MoYnJvd3NlckV2ZW50KVxuICAgICAgICAgICAgICA6IHt9O1xuICAgICAgICAgICAgZXZlbnRBcmdzSXNQb3B1bGF0ZWQgPSB0cnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEZvciBjZXJ0YWluIGJ1aWx0LWluIGV2ZW50cywgaGF2aW5nIGFueSAuTkVUIGhhbmRsZXIgaW1wbGljaXRseSBtZWFucyB3ZSB3aWxsIHByZXZlbnRcbiAgICAgICAgICAvLyB0aGUgYnJvd3NlcidzIGRlZmF1bHQgYmVoYXZpb3IuIFRoaXMgaGFzIHRvIGJlIGJhc2VkIG9uIHRoZSBvcmlnaW5hbCBicm93c2VyIGV2ZW50IHR5cGUgbmFtZSxcbiAgICAgICAgICAvLyBub3QgYW55IGFsaWFzIChlLmcuLCBpZiB5b3UgY3JlYXRlIGEgY3VzdG9tICdzdWJtaXQnIHZhcmlhbnQsIGl0IHNob3VsZCBzdGlsbCBwcmV2ZW50RGVmYXVsdCkuXG4gICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhbHdheXNQcmV2ZW50RGVmYXVsdEV2ZW50cywgYnJvd3NlckV2ZW50LnR5cGUpKSB7XG4gICAgICAgICAgICBicm93c2VyRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkaXNwYXRjaEV2ZW50KHRoaXMuYnJvd3NlclJlbmRlcmVySWQsIHtcbiAgICAgICAgICAgIGV2ZW50SGFuZGxlcklkOiBoYW5kbGVySW5mby5ldmVudEhhbmRsZXJJZCxcbiAgICAgICAgICAgIGV2ZW50TmFtZTogZXZlbnROYW1lLFxuICAgICAgICAgICAgZXZlbnRGaWVsZEluZm86IEV2ZW50RmllbGRJbmZvLmZyb21FdmVudChoYW5kbGVySW5mby5yZW5kZXJpbmdDb21wb25lbnRJZCwgYnJvd3NlckV2ZW50KSxcbiAgICAgICAgICB9LCBldmVudEFyZ3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhbmRsZXJJbmZvcy5zdG9wUHJvcGFnYXRpb24oZXZlbnROYW1lKSkge1xuICAgICAgICAgIHN0b3BQcm9wYWdhdGlvbldhc1JlcXVlc3RlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGFuZGxlckluZm9zLnByZXZlbnREZWZhdWx0KGV2ZW50TmFtZSkpIHtcbiAgICAgICAgICBicm93c2VyRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjYW5kaWRhdGVFdmVudFRhcmdldCA9IChldmVudElzTm9uQnViYmxpbmcgfHwgc3RvcFByb3BhZ2F0aW9uV2FzUmVxdWVzdGVkKSA/IHVuZGVmaW5lZCA6IHBhdGguc2hpZnQoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldEV2ZW50SGFuZGxlckluZm9zRm9yRWxlbWVudChlbGVtZW50OiBFbGVtZW50LCBjcmVhdGVJZk5lZWRlZDogYm9vbGVhbik6IEV2ZW50SGFuZGxlckluZm9zRm9yRWxlbWVudCB8IG51bGwge1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZWxlbWVudCwgdGhpcy5ldmVudHNDb2xsZWN0aW9uS2V5KSkge1xuICAgICAgcmV0dXJuIGVsZW1lbnRbdGhpcy5ldmVudHNDb2xsZWN0aW9uS2V5XTtcbiAgICB9IGVsc2UgaWYgKGNyZWF0ZUlmTmVlZGVkKSB7XG4gICAgICByZXR1cm4gKGVsZW1lbnRbdGhpcy5ldmVudHNDb2xsZWN0aW9uS2V5XSA9IG5ldyBFdmVudEhhbmRsZXJJbmZvc0ZvckVsZW1lbnQoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxufVxuXG4vLyBSZXNwb25zaWJsZSBmb3IgYWRkaW5nIGFuZCByZW1vdmluZyB0aGUgZ2xvYmFsIGxpc3RlbmVyIHdoZW4gdGhlIG51bWJlciBvZiBsaXN0ZW5lcnNcbi8vIGZvciBhIGdpdmVuIGV2ZW50IG5hbWUgY2hhbmdlcyBiZXR3ZWVuIHplcm8gYW5kIG5vbnplcm9cbmNsYXNzIEV2ZW50SW5mb1N0b3JlIHtcbiAgcHJpdmF0ZSBpbmZvc0J5RXZlbnRIYW5kbGVySWQ6IHsgW2V2ZW50SGFuZGxlcklkOiBudW1iZXJdOiBFdmVudEhhbmRsZXJJbmZvIH0gPSB7fTtcblxuICBwcml2YXRlIGNvdW50QnlFdmVudE5hbWU6IHsgW2V2ZW50TmFtZTogc3RyaW5nXTogbnVtYmVyIH0gPSB7fTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGdsb2JhbExpc3RlbmVyOiBFdmVudExpc3RlbmVyKSB7XG4gICAgZXZlbnROYW1lQWxpYXNSZWdpc3RlcmVkQ2FsbGJhY2tzLnB1c2godGhpcy5oYW5kbGVFdmVudE5hbWVBbGlhc0FkZGVkLmJpbmQodGhpcykpO1xuICB9XG5cbiAgcHVibGljIGFkZChpbmZvOiBFdmVudEhhbmRsZXJJbmZvKSB7XG4gICAgaWYgKHRoaXMuaW5mb3NCeUV2ZW50SGFuZGxlcklkW2luZm8uZXZlbnRIYW5kbGVySWRdKSB7XG4gICAgICAvLyBTaG91bGQgbmV2ZXIgaGFwcGVuLCBidXQgd2Ugd2FudCB0byBrbm93IGlmIGl0IGRvZXNcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXZlbnQgJHtpbmZvLmV2ZW50SGFuZGxlcklkfSBpcyBhbHJlYWR5IHRyYWNrZWRgKTtcbiAgICB9XG5cbiAgICB0aGlzLmluZm9zQnlFdmVudEhhbmRsZXJJZFtpbmZvLmV2ZW50SGFuZGxlcklkXSA9IGluZm87XG5cbiAgICB0aGlzLmFkZEdsb2JhbExpc3RlbmVyKGluZm8uZXZlbnROYW1lKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQoZXZlbnRIYW5kbGVySWQ6IG51bWJlcikge1xuICAgIHJldHVybiB0aGlzLmluZm9zQnlFdmVudEhhbmRsZXJJZFtldmVudEhhbmRsZXJJZF07XG4gIH1cblxuICBwdWJsaWMgYWRkR2xvYmFsTGlzdGVuZXIoZXZlbnROYW1lOiBzdHJpbmcpIHtcbiAgICAvLyBJZiB0aGlzIGV2ZW50IG5hbWUgaXMgYW4gYWxpYXMsIHVwZGF0ZSB0aGUgZ2xvYmFsIGxpc3RlbmVyIGZvciB0aGUgY29ycmVzcG9uZGluZyBicm93c2VyIGV2ZW50XG4gICAgZXZlbnROYW1lID0gZ2V0QnJvd3NlckV2ZW50TmFtZShldmVudE5hbWUpO1xuXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLmNvdW50QnlFdmVudE5hbWUsIGV2ZW50TmFtZSkpIHtcbiAgICAgIHRoaXMuY291bnRCeUV2ZW50TmFtZVtldmVudE5hbWVdKys7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY291bnRCeUV2ZW50TmFtZVtldmVudE5hbWVdID0gMTtcblxuICAgICAgLy8gVG8gbWFrZSBkZWxlZ2F0aW9uIHdvcmsgd2l0aCBub24tYnViYmxpbmcgZXZlbnRzLCByZWdpc3RlciBhICdjYXB0dXJlJyBsaXN0ZW5lci5cbiAgICAgIC8vIFdlIHByZXNlcnZlIHRoZSBub24tYnViYmxpbmcgYmVoYXZpb3IgYnkgb25seSBkaXNwYXRjaGluZyBzdWNoIGV2ZW50cyB0byB0aGUgdGFyZ2V0ZWQgZWxlbWVudC5cbiAgICAgIGNvbnN0IHVzZUNhcHR1cmUgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobm9uQnViYmxpbmdFdmVudHMsIGV2ZW50TmFtZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgdGhpcy5nbG9iYWxMaXN0ZW5lciwgdXNlQ2FwdHVyZSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFkZEFjdGl2ZUdsb2JhbExpc3RlbmVyKGV2ZW50TmFtZTogc3RyaW5nKSB7XG4gICAgLy8gSWYgdGhpcyBldmVudCBuYW1lIGlzIGFuIGFsaWFzLCB1cGRhdGUgdGhlIGdsb2JhbCBsaXN0ZW5lciBmb3IgdGhlIGNvcnJlc3BvbmRpbmcgYnJvd3NlciBldmVudFxuICAgIGV2ZW50TmFtZSA9IGdldEJyb3dzZXJFdmVudE5hbWUoZXZlbnROYW1lKTtcblxuICAgIC8vIElmIHRoZSBsaXN0ZW5lciBmb3IgdGhpcyBldmVudCBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQsIHdlIHJlY3JlYXRlIGl0IHRvIGVuc3VyZVxuICAgIC8vIHRoYXQgaXQgaXMgdXNpbmcgdGhlIGFjdGl2ZSBtb2RlLlxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5jb3VudEJ5RXZlbnROYW1lLCBldmVudE5hbWUpKSB7XG4gICAgICB0aGlzLmNvdW50QnlFdmVudE5hbWVbZXZlbnROYW1lXSsrO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHRoaXMuZ2xvYmFsTGlzdGVuZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvdW50QnlFdmVudE5hbWVbZXZlbnROYW1lXSA9IDE7XG4gICAgfVxuXG4gICAgLy8gVG8gbWFrZSBkZWxlZ2F0aW9uIHdvcmsgd2l0aCBub24tYnViYmxpbmcgZXZlbnRzLCByZWdpc3RlciBhICdjYXB0dXJlJyBsaXN0ZW5lci5cbiAgICAvLyBXZSBwcmVzZXJ2ZSB0aGUgbm9uLWJ1YmJsaW5nIGJlaGF2aW9yIGJ5IG9ubHkgZGlzcGF0Y2hpbmcgc3VjaCBldmVudHMgdG8gdGhlIHRhcmdldGVkIGVsZW1lbnQuXG4gICAgY29uc3QgdXNlQ2FwdHVyZSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChub25CdWJibGluZ0V2ZW50cywgZXZlbnROYW1lKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgdGhpcy5nbG9iYWxMaXN0ZW5lciwgeyBjYXB0dXJlOiB1c2VDYXB0dXJlLCBwYXNzaXZlOiBmYWxzZSB9KTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGUob2xkRXZlbnRIYW5kbGVySWQ6IG51bWJlciwgbmV3RXZlbnRIYW5kbGVySWQ6IG51bWJlcikge1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5pbmZvc0J5RXZlbnRIYW5kbGVySWQsIG5ld0V2ZW50SGFuZGxlcklkKSkge1xuICAgICAgLy8gU2hvdWxkIG5ldmVyIGhhcHBlbiwgYnV0IHdlIHdhbnQgdG8ga25vdyBpZiBpdCBkb2VzXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEV2ZW50ICR7bmV3RXZlbnRIYW5kbGVySWR9IGlzIGFscmVhZHkgdHJhY2tlZGApO1xuICAgIH1cblxuICAgIC8vIFNpbmNlIHdlJ3JlIGp1c3QgdXBkYXRpbmcgdGhlIGV2ZW50IGhhbmRsZXIgSUQsIHRoZXJlJ3Mgbm8gbmVlZCB0byB1cGRhdGUgdGhlIGdsb2JhbCBjb3VudHNcbiAgICBjb25zdCBpbmZvID0gdGhpcy5pbmZvc0J5RXZlbnRIYW5kbGVySWRbb2xkRXZlbnRIYW5kbGVySWRdO1xuICAgIGRlbGV0ZSB0aGlzLmluZm9zQnlFdmVudEhhbmRsZXJJZFtvbGRFdmVudEhhbmRsZXJJZF07XG4gICAgaW5mby5ldmVudEhhbmRsZXJJZCA9IG5ld0V2ZW50SGFuZGxlcklkO1xuICAgIHRoaXMuaW5mb3NCeUV2ZW50SGFuZGxlcklkW25ld0V2ZW50SGFuZGxlcklkXSA9IGluZm87XG4gIH1cblxuICBwdWJsaWMgcmVtb3ZlKGV2ZW50SGFuZGxlcklkOiBudW1iZXIpOiBFdmVudEhhbmRsZXJJbmZvIHtcbiAgICBjb25zdCBpbmZvID0gdGhpcy5pbmZvc0J5RXZlbnRIYW5kbGVySWRbZXZlbnRIYW5kbGVySWRdO1xuICAgIGlmIChpbmZvKSB7XG4gICAgICBkZWxldGUgdGhpcy5pbmZvc0J5RXZlbnRIYW5kbGVySWRbZXZlbnRIYW5kbGVySWRdO1xuXG4gICAgICAvLyBJZiB0aGlzIGV2ZW50IG5hbWUgaXMgYW4gYWxpYXMsIHVwZGF0ZSB0aGUgZ2xvYmFsIGxpc3RlbmVyIGZvciB0aGUgY29ycmVzcG9uZGluZyBicm93c2VyIGV2ZW50XG4gICAgICBjb25zdCBldmVudE5hbWUgPSBnZXRCcm93c2VyRXZlbnROYW1lKGluZm8uZXZlbnROYW1lKTtcbiAgICAgIHRoaXMuZGVjcmVtZW50Q291bnRCeUV2ZW50TmFtZShldmVudE5hbWUpO1xuICAgIH1cblxuICAgIHJldHVybiBpbmZvO1xuICB9XG5cbiAgcHVibGljIGRlY3JlbWVudENvdW50QnlFdmVudE5hbWUoZXZlbnROYW1lOiBzdHJpbmcpIHtcbiAgICBpZiAoLS10aGlzLmNvdW50QnlFdmVudE5hbWVbZXZlbnROYW1lXSA9PT0gMCkge1xuICAgICAgZGVsZXRlIHRoaXMuY291bnRCeUV2ZW50TmFtZVtldmVudE5hbWVdO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHRoaXMuZ2xvYmFsTGlzdGVuZXIpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlRXZlbnROYW1lQWxpYXNBZGRlZChhbGlhc0V2ZW50TmFtZSwgYnJvd3NlckV2ZW50TmFtZSkge1xuICAgIC8vIElmIGFuIGV2ZW50IG5hbWUgYWxpYXMgZ2V0cyByZWdpc3RlcmVkIGxhdGVyLCB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgZ2xvYmFsIGxpc3RlbmVyXG4gICAgLy8gcmVnaXN0cmF0aW9ucyB0byBtYXRjaC4gVGhpcyBtYWtlcyBpdCBlcXVpdmFsZW50IHRvIHRoZSBhbGlhcyBoYXZpbmcgYmVlbiByZWdpc3RlcmVkXG4gICAgLy8gYmVmb3JlIHRoZSBlbGVtZW50cyB3aXRoIGV2ZW50IGhhbmRsZXJzIGdvdCByZW5kZXJlZC5cbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuY291bnRCeUV2ZW50TmFtZSwgYWxpYXNFdmVudE5hbWUpKSB7XG4gICAgICAvLyBEZWxldGUgb2xkXG4gICAgICBjb25zdCBjb3VudEJ5QWxpYXNFdmVudE5hbWUgPSB0aGlzLmNvdW50QnlFdmVudE5hbWVbYWxpYXNFdmVudE5hbWVdO1xuICAgICAgZGVsZXRlIHRoaXMuY291bnRCeUV2ZW50TmFtZVthbGlhc0V2ZW50TmFtZV07XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGFsaWFzRXZlbnROYW1lLCB0aGlzLmdsb2JhbExpc3RlbmVyKTtcblxuICAgICAgLy8gRW5zdXJlIGNvcnJlc3BvbmRpbmcgY291bnQgaXMgYWRkZWQgdG8gbmV3XG4gICAgICB0aGlzLmFkZEdsb2JhbExpc3RlbmVyKGJyb3dzZXJFdmVudE5hbWUpO1xuICAgICAgdGhpcy5jb3VudEJ5RXZlbnROYW1lW2Jyb3dzZXJFdmVudE5hbWVdICs9IGNvdW50QnlBbGlhc0V2ZW50TmFtZSAtIDE7XG4gICAgfVxuICB9XG59XG5cbmNsYXNzIEV2ZW50SGFuZGxlckluZm9zRm9yRWxlbWVudCB7XG4gIC8vIEFsdGhvdWdoIHdlICpjb3VsZCogdHJhY2sgbXVsdGlwbGUgZXZlbnQgaGFuZGxlcnMgcGVyIChlbGVtZW50LCBldmVudE5hbWUpIHBhaXJcbiAgLy8gKHNpbmNlIHRoZXkgaGF2ZSBkaXN0aW5jdCBldmVudEhhbmRsZXJJZCB2YWx1ZXMpLCB0aGVyZSdzIG5vIHBvaW50IGRvaW5nIHNvIGJlY2F1c2VcbiAgLy8gb3VyIHByb2dyYW1taW5nIG1vZGVsIGlzIHRoYXQgeW91IGRlY2xhcmUgZXZlbnQgaGFuZGxlcnMgYXMgYXR0cmlidXRlcy4gQW4gZWxlbWVudFxuICAvLyBjYW4gb25seSBoYXZlIG9uZSBhdHRyaWJ1dGUgd2l0aCBhIGdpdmVuIG5hbWUsIGhlbmNlIG9ubHkgb25lIGV2ZW50IGhhbmRsZXIgd2l0aFxuICAvLyB0aGF0IG5hbWUgYXQgYW55IG9uZSB0aW1lLlxuICAvLyBTbyB0byBrZWVwIHRoaW5ncyBzaW1wbGUsIG9ubHkgdHJhY2sgb25lIEV2ZW50SGFuZGxlckluZm8gcGVyIChlbGVtZW50LCBldmVudE5hbWUpXG4gIHByaXZhdGUgaGFuZGxlcnM6IHsgW2V2ZW50TmFtZTogc3RyaW5nXTogRXZlbnRIYW5kbGVySW5mbyB9ID0ge307XG5cbiAgcHJpdmF0ZSBwcmV2ZW50RGVmYXVsdEZsYWdzOiB7IFtldmVudE5hbWU6IHN0cmluZ106IGJvb2xlYW4gfSB8IG51bGwgPSBudWxsO1xuXG4gIHByaXZhdGUgc3RvcFByb3BhZ2F0aW9uRmxhZ3M6IHsgW2V2ZW50TmFtZTogc3RyaW5nXTogYm9vbGVhbiB9IHwgbnVsbCA9IG51bGw7XG5cbiAgcHVibGljICplbnVtZXJhdGVIYW5kbGVycygpIDogSXRlcmFibGVJdGVyYXRvcjxFdmVudEhhbmRsZXJJbmZvPiB7XG4gICAgZm9yIChjb25zdCBldmVudE5hbWUgaW4gdGhpcy5oYW5kbGVycykge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLmhhbmRsZXJzLCBldmVudE5hbWUpKSB7XG4gICAgICAgIHlpZWxkIHRoaXMuaGFuZGxlcnNbZXZlbnROYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0SGFuZGxlcihldmVudE5hbWU6IHN0cmluZyk6IEV2ZW50SGFuZGxlckluZm8gfCBudWxsIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuaGFuZGxlcnMsIGV2ZW50TmFtZSkgPyB0aGlzLmhhbmRsZXJzW2V2ZW50TmFtZV0gOiBudWxsO1xuICB9XG5cbiAgcHVibGljIHNldEhhbmRsZXIoZXZlbnROYW1lOiBzdHJpbmcsIGhhbmRsZXI6IEV2ZW50SGFuZGxlckluZm8pIHtcbiAgICB0aGlzLmhhbmRsZXJzW2V2ZW50TmFtZV0gPSBoYW5kbGVyO1xuICB9XG5cbiAgcHVibGljIHJlbW92ZUhhbmRsZXIoZXZlbnROYW1lOiBzdHJpbmcpIHtcbiAgICBkZWxldGUgdGhpcy5oYW5kbGVyc1tldmVudE5hbWVdO1xuICB9XG5cbiAgcHVibGljIHByZXZlbnREZWZhdWx0KGV2ZW50TmFtZTogc3RyaW5nLCBzZXRWYWx1ZT86IGJvb2xlYW4pOiBib29sZWFuIHtcbiAgICBpZiAoc2V0VmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5wcmV2ZW50RGVmYXVsdEZsYWdzID0gdGhpcy5wcmV2ZW50RGVmYXVsdEZsYWdzIHx8IHt9O1xuICAgICAgdGhpcy5wcmV2ZW50RGVmYXVsdEZsYWdzW2V2ZW50TmFtZV0gPSBzZXRWYWx1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wcmV2ZW50RGVmYXVsdEZsYWdzID8gdGhpcy5wcmV2ZW50RGVmYXVsdEZsYWdzW2V2ZW50TmFtZV0gOiBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBzdG9wUHJvcGFnYXRpb24oZXZlbnROYW1lOiBzdHJpbmcsIHNldFZhbHVlPzogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgIGlmIChzZXRWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnN0b3BQcm9wYWdhdGlvbkZsYWdzID0gdGhpcy5zdG9wUHJvcGFnYXRpb25GbGFncyB8fCB7fTtcbiAgICAgIHRoaXMuc3RvcFByb3BhZ2F0aW9uRmxhZ3NbZXZlbnROYW1lXSA9IHNldFZhbHVlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnN0b3BQcm9wYWdhdGlvbkZsYWdzID8gdGhpcy5zdG9wUHJvcGFnYXRpb25GbGFnc1tldmVudE5hbWVdIDogZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBFdmVudERlc2NyaXB0b3Ige1xuICBldmVudEhhbmRsZXJJZDogbnVtYmVyO1xuICBldmVudE5hbWU6IHN0cmluZztcbiAgZXZlbnRGaWVsZEluZm86IEV2ZW50RmllbGRJbmZvIHwgbnVsbDtcbn1cblxuaW50ZXJmYWNlIEV2ZW50SGFuZGxlckluZm8ge1xuICBlbGVtZW50OiBFbGVtZW50O1xuICBldmVudE5hbWU6IHN0cmluZztcbiAgZXZlbnRIYW5kbGVySWQ6IG51bWJlcjtcblxuICAvLyBUaGUgY29tcG9uZW50IHdob3NlIHRyZWUgaW5jbHVkZXMgdGhlIGV2ZW50IGhhbmRsZXIgYXR0cmlidXRlIGZyYW1lLCAqbm90KiBuZWNlc3NhcmlseSB0aGVcbiAgLy8gc2FtZSBjb21wb25lbnQgdGhhdCB3aWxsIGJlIHJlLXJlbmRlcmVkIGFmdGVyIHRoZSBldmVudCBpcyBoYW5kbGVkIChzaW5jZSB3ZSByZS1yZW5kZXIgdGhlXG4gIC8vIGNvbXBvbmVudCB0aGF0IHN1cHBsaWVkIHRoZSBkZWxlZ2F0ZSwgbm90IHRoZSBvbmUgdGhhdCByZW5kZXJlZCB0aGUgZXZlbnQgaGFuZGxlciBmcmFtZSlcbiAgcmVuZGVyaW5nQ29tcG9uZW50SWQ6IG51bWJlcjtcbn1cblxuZnVuY3Rpb24gdG9Mb29rdXAoaXRlbXM6IHN0cmluZ1tdKTogeyBba2V5OiBzdHJpbmddOiBib29sZWFuIH0ge1xuICBjb25zdCByZXN1bHQgPSB7fTtcbiAgaXRlbXMuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgcmVzdWx0W3ZhbHVlXSA9IHRydWU7XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBldmVudElzRGlzYWJsZWRPbkVsZW1lbnQoZWxlbWVudDogRWxlbWVudCwgcmF3QnJvd3NlckV2ZW50TmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIC8vIFdlIHdhbnQgdG8gcmVwbGljYXRlIHRoZSBub3JtYWwgRE9NIGV2ZW50IGJlaGF2aW9yIHRoYXQsIGZvciAnaW50ZXJhY3RpdmUnIGVsZW1lbnRzXG4gIC8vIHdpdGggYSAnZGlzYWJsZWQnIGF0dHJpYnV0ZSwgY2VydGFpbiBtb3VzZSBldmVudHMgYXJlIHN1cHByZXNzZWRcbiAgcmV0dXJuIChlbGVtZW50IGluc3RhbmNlb2YgSFRNTEJ1dHRvbkVsZW1lbnQgfHwgZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgfHwgZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxUZXh0QXJlYUVsZW1lbnQgfHwgZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxTZWxlY3RFbGVtZW50KVxuICAgICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkaXNhYmxlYWJsZUV2ZW50TmFtZXMsIHJhd0Jyb3dzZXJFdmVudE5hbWUpXG4gICAgJiYgZWxlbWVudC5kaXNhYmxlZDtcbn1cbiIsIi8vIExpY2Vuc2VkIHRvIHRoZSAuTkVUIEZvdW5kYXRpb24gdW5kZXIgb25lIG9yIG1vcmUgYWdyZWVtZW50cy5cbi8vIFRoZSAuTkVUIEZvdW5kYXRpb24gbGljZW5zZXMgdGhpcyBmaWxlIHRvIHlvdSB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cbmltcG9ydCB7IENvbXBvbmVudERlc2NyaXB0b3IgfSBmcm9tICcuLi9TZXJ2aWNlcy9Db21wb25lbnREZXNjcmlwdG9yRGlzY292ZXJ5JztcblxuLypcbiAgQSBMb2dpY2FsRWxlbWVudCBwbGF5cyB0aGUgc2FtZSByb2xlIGFzIGFuIEVsZW1lbnQgaW5zdGFuY2UgZnJvbSB0aGUgcG9pbnQgb2YgdmlldyBvZiB0aGVcbiAgQVBJIGNvbnN1bWVyLiBJbnNlcnRpbmcgYW5kIHJlbW92aW5nIGxvZ2ljYWwgZWxlbWVudHMgdXBkYXRlcyB0aGUgYnJvd3NlciBET00ganVzdCB0aGUgc2FtZS5cblxuICBUaGUgZGlmZmVyZW5jZSBpcyB0aGF0LCB1bmxpa2UgcmVndWxhciBET00gbXV0YXRpb24gQVBJcywgdGhlIExvZ2ljYWxFbGVtZW50IEFQSXMgZG9uJ3QgdXNlXG4gIHRoZSB1bmRlcmx5aW5nIERPTSBzdHJ1Y3R1cmUgYXMgdGhlIGRhdGEgc3RvcmFnZSBmb3IgdGhlIGVsZW1lbnQgaGllcmFyY2h5LiBJbnN0ZWFkLCB0aGVcbiAgTG9naWNhbEVsZW1lbnQgQVBJcyB0YWtlIGNhcmUgb2YgdHJhY2tpbmcgaGllcmFyY2hpY2FsIHJlbGF0aW9uc2hpcHMgc2VwYXJhdGVseS4gVGhlIHBvaW50XG4gIG9mIHRoaXMgaXMgdG8gcGVybWl0IGEgbG9naWNhbCB0cmVlIHN0cnVjdHVyZSBpbiB3aGljaCBwYXJlbnQvY2hpbGQgcmVsYXRpb25zaGlwcyBkb24ndFxuICBoYXZlIHRvIGJlIG1hdGVyaWFsaXplZCBpbiB0ZXJtcyBvZiBET00gZWxlbWVudCBwYXJlbnQvY2hpbGQgcmVsYXRpb25zaGlwcy4gQW5kIHRoZSByZWFzb25cbiAgd2h5IHdlIHdhbnQgdGhhdCBpcyBzbyB0aGF0IGhpZXJhcmNoaWVzIG9mIFJhem9yIGNvbXBvbmVudHMgY2FuIGJlIHRyYWNrZWQgZXZlbiB3aGVuIHRob3NlXG4gIGNvbXBvbmVudHMnIHJlbmRlciBvdXRwdXQgbmVlZCBub3QgYmUgYSBzaW5nbGUgbGl0ZXJhbCBET00gZWxlbWVudC5cblxuICBDb25zdW1lcnMgb2YgdGhlIEFQSSBkb24ndCBuZWVkIHRvIGtub3cgYWJvdXQgdGhlIGltcGxlbWVudGF0aW9uLCBidXQgaG93IGl0J3MgZG9uZSBpczpcbiAgLSBFYWNoIExvZ2ljYWxFbGVtZW50IGlzIG1hdGVyaWFsaXplZCBpbiB0aGUgRE9NIGFzIGVpdGhlcjpcbiAgICAtIEEgTm9kZSBpbnN0YW5jZSwgZm9yIGFjdHVhbCBOb2RlIGluc3RhbmNlcyBpbnNlcnRlZCB1c2luZyAnaW5zZXJ0TG9naWNhbENoaWxkJyBvclxuICAgICAgZm9yIEVsZW1lbnQgaW5zdGFuY2VzIHByb21vdGVkIHRvIExvZ2ljYWxFbGVtZW50IHZpYSAndG9Mb2dpY2FsRWxlbWVudCdcbiAgICAtIEEgQ29tbWVudCBpbnN0YW5jZSwgZm9yICdsb2dpY2FsIGNvbnRhaW5lcicgaW5zdGFuY2VzIGluc2VydGVkIHVzaW5nICdjcmVhdGVBbmRJbnNlcnRMb2dpY2FsQ29udGFpbmVyJ1xuICAtIFRoZW4sIG9uIHRoYXQgaW5zdGFuY2UgKGkuZS4sIHRoZSBOb2RlIG9yIENvbW1lbnQpLCB3ZSBzdG9yZSBhbiBhcnJheSBvZiAnbG9naWNhbCBjaGlsZHJlbidcbiAgICBpbnN0YW5jZXMsIGUuZy4sXG4gICAgICBbZmlyc3RDaGlsZCwgc2Vjb25kQ2hpbGQsIHRoaXJkQ2hpbGQsIC4uLl1cbiAgICAuLi4gcGx1cyB3ZSBzdG9yZSBhIHJlZmVyZW5jZSB0byB0aGUgJ2xvZ2ljYWwgcGFyZW50JyAoaWYgYW55KVxuICAtIFRoZSAnbG9naWNhbCBjaGlsZHJlbicgYXJyYXkgbWVhbnMgd2UgY2FuIGxvb2sgdXAgaW4gTygxKTpcbiAgICAtIFRoZSBudW1iZXIgb2YgbG9naWNhbCBjaGlsZHJlbiAobm90IGN1cnJlbnRseSBpbXBsZW1lbnRlZCBiZWNhdXNlIG5vdCByZXF1aXJlZCwgYnV0IHRyaXZpYWwpXG4gICAgLSBUaGUgbG9naWNhbCBjaGlsZCBhdCBhbnkgZ2l2ZW4gaW5kZXhcbiAgLSBXaGVuZXZlciBhIGxvZ2ljYWwgY2hpbGQgaXMgYWRkZWQgb3IgcmVtb3ZlZCwgd2UgdXBkYXRlIHRoZSBwYXJlbnQncyBhcnJheSBvZiBsb2dpY2FsIGNoaWxkcmVuXG4qL1xuXG5jb25zdCBsb2dpY2FsQ2hpbGRyZW5Qcm9wbmFtZSA9IFN5bWJvbCgpO1xuY29uc3QgbG9naWNhbFBhcmVudFByb3BuYW1lID0gU3ltYm9sKCk7XG5jb25zdCBsb2dpY2FsUm9vdERlc2NyaXB0b3JQcm9wbmFtZSA9IFN5bWJvbCgpO1xuXG5leHBvcnQgZnVuY3Rpb24gdG9Mb2dpY2FsUm9vdENvbW1lbnRFbGVtZW50KGRlc2NyaXB0b3I6IENvbXBvbmVudERlc2NyaXB0b3IpOiBMb2dpY2FsRWxlbWVudCB7XG4gIC8vIE5vdyB0aGF0IHdlIHN1cHBvcnQgc3RhcnQvZW5kIGNvbW1lbnRzIGFzIGNvbXBvbmVudCBkZWxpbWl0ZXJzIHdlIGFyZSBnb2luZyB0byBiZSBzZXR0aW5nIHVwXG4gIC8vIGFkZGluZyB0aGUgY29tcG9uZW50cyByZW5kZXJlZCBvdXRwdXQgYXMgc2libGluZ3Mgb2YgdGhlIHN0YXJ0L2VuZCB0YWdzIChiZXR3ZWVuKS5cbiAgLy8gRm9yIHRoYXQgdG8gd29yaywgd2UgbmVlZCB0byBhcHByb3ByaWF0ZWx5IGNvbmZpZ3VyZSB0aGUgcGFyZW50IGVsZW1lbnQgdG8gYmUgYSBsb2dpY2FsIGVsZW1lbnRcbiAgLy8gd2l0aCBhbGwgdGhlaXIgY2hpbGRyZW4gYmVpbmcgdGhlIGNoaWxkIGVsZW1lbnRzLlxuICAvLyBGb3IgZXhhbXBsZSwgaW1hZ2luZSB5b3UgaGF2ZVxuICAvLyA8YXBwPlxuICAvLyA8ZGl2PjxwPlN0YXRpYyBjb250ZW50PC9wPjwvZGl2PlxuICAvLyA8IS0tIHN0YXJ0IGNvbXBvbmVudFxuICAvLyA8IS0tIGVuZCBjb21wb25lbnRcbiAgLy8gPGZvb3Rlcj5Tb21lIG90aGVyIGNvbnRlbnQ8L2Zvb3Rlcj5cbiAgLy8gPGFwcD5cbiAgLy8gV2Ugd2FudCB0aGUgcGFyZW50IGVsZW1lbnQgdG8gYmUgc29tZXRoaW5nIGxpa2VcbiAgLy8gKmFwcFxuICAvLyB8LSAqZGl2XG4gIC8vIHwtICpjb21wb25lbnRcbiAgLy8gfC0gKmZvb3RlclxuICBjb25zdCB7IHN0YXJ0LCBlbmQgfSA9IGRlc2NyaXB0b3I7XG4gIGNvbnN0IGV4aXN0aW5nRGVzY3JpcHRvciA9IHN0YXJ0W2xvZ2ljYWxSb290RGVzY3JpcHRvclByb3BuYW1lXTtcbiAgaWYgKGV4aXN0aW5nRGVzY3JpcHRvcikge1xuICAgIGlmIChleGlzdGluZ0Rlc2NyaXB0b3IgIT09IGRlc2NyaXB0b3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHN0YXJ0IGNvbXBvbmVudCBjb21tZW50IHdhcyBhbHJlYWR5IGFzc29jaWF0ZWQgd2l0aCBhbm90aGVyIGNvbXBvbmVudCBkZXNjcmlwdG9yLicpO1xuICAgIH1cbiAgICByZXR1cm4gc3RhcnQgYXMgdW5rbm93biBhcyBMb2dpY2FsRWxlbWVudDtcbiAgfVxuXG4gIGNvbnN0IHBhcmVudCA9IHN0YXJ0LnBhcmVudE5vZGU7XG4gIGlmICghcGFyZW50KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDb21tZW50IG5vdCBjb25uZWN0ZWQgdG8gdGhlIERPTSAke3N0YXJ0LnRleHRDb250ZW50fWApO1xuICB9XG5cbiAgY29uc3QgcGFyZW50TG9naWNhbEVsZW1lbnQgPSB0b0xvZ2ljYWxFbGVtZW50KHBhcmVudCwgLyogYWxsb3cgZXhpc3RpbmcgY29udGVudHMgKi8gdHJ1ZSk7XG4gIGNvbnN0IGNoaWxkcmVuID0gZ2V0TG9naWNhbENoaWxkcmVuQXJyYXkocGFyZW50TG9naWNhbEVsZW1lbnQpO1xuXG4gIHN0YXJ0W2xvZ2ljYWxQYXJlbnRQcm9wbmFtZV0gPSBwYXJlbnRMb2dpY2FsRWxlbWVudDtcbiAgc3RhcnRbbG9naWNhbFJvb3REZXNjcmlwdG9yUHJvcG5hbWVdID0gZGVzY3JpcHRvcjtcbiAgY29uc3Qgc3RhcnRMb2dpY2FsRWxlbWVudCA9IHRvTG9naWNhbEVsZW1lbnQoc3RhcnQpO1xuXG4gIGlmIChlbmQpIHtcbiAgICAvLyBXZSBuZWVkIHRvIG1ha2UgZWFjaCBlbGVtZW50IGJldHdlZW4gdGhlIHN0YXJ0IGFuZCBlbmQgY29tbWVudHMgYSBsb2dpY2FsIGNoaWxkXG4gICAgLy8gb2YgdGhlIHN0YXJ0IG5vZGUuXG4gICAgY29uc3Qgcm9vdENvbW1lbnRDaGlsZHJlbiA9IGdldExvZ2ljYWxDaGlsZHJlbkFycmF5KHN0YXJ0TG9naWNhbEVsZW1lbnQpO1xuICAgIGNvbnN0IHN0YXJ0TmV4dENoaWxkSW5kZXggPSBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGNoaWxkcmVuLCBzdGFydExvZ2ljYWxFbGVtZW50KSArIDE7XG4gICAgbGV0IGxhc3RNb3ZlZENoaWxkOiBMb2dpY2FsRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXG4gICAgd2hpbGUgKGxhc3RNb3ZlZENoaWxkICE9PSBlbmQgYXMgdW5rbm93biBhcyBMb2dpY2FsRWxlbWVudCkge1xuICAgICAgY29uc3QgY2hpbGRUb01vdmUgPSBjaGlsZHJlbi5zcGxpY2Uoc3RhcnROZXh0Q2hpbGRJbmRleCwgMSlbMF07XG4gICAgICBpZiAoIWNoaWxkVG9Nb3ZlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGZpbmQgdGhlIGVuZCBjb21wb25lbnQgY29tbWVudCBpbiB0aGUgcGFyZW50IGxvZ2ljYWwgbm9kZSBsaXN0Jyk7XG4gICAgICB9XG4gICAgICBjaGlsZFRvTW92ZVtsb2dpY2FsUGFyZW50UHJvcG5hbWVdID0gc3RhcnQ7XG4gICAgICByb290Q29tbWVudENoaWxkcmVuLnB1c2goY2hpbGRUb01vdmUpO1xuICAgICAgbGFzdE1vdmVkQ2hpbGQgPSBjaGlsZFRvTW92ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc3RhcnRMb2dpY2FsRWxlbWVudDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvTG9naWNhbEVsZW1lbnQoZWxlbWVudDogTm9kZSwgYWxsb3dFeGlzdGluZ0NvbnRlbnRzPzogYm9vbGVhbik6IExvZ2ljYWxFbGVtZW50IHtcbiAgaWYgKGxvZ2ljYWxDaGlsZHJlblByb3BuYW1lIGluIGVsZW1lbnQpIHsgLy8gSWYgaXQncyBhbHJlYWR5IGEgbG9naWNhbCBlbGVtZW50LCBsZWF2ZSBpdCBhbG9uZVxuICAgIHJldHVybiBlbGVtZW50IGFzIHVua25vd24gYXMgTG9naWNhbEVsZW1lbnQ7XG4gIH1cblxuICBjb25zdCBjaGlsZHJlbkFycmF5OiBMb2dpY2FsRWxlbWVudFtdID0gW107XG5cbiAgaWYgKGVsZW1lbnQuY2hpbGROb2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgLy8gTm9ybWFsbHkgaXQncyBnb29kIHRvIGFzc2VydCB0aGF0IHRoZSBlbGVtZW50IGhhcyBzdGFydGVkIGVtcHR5LCBiZWNhdXNlIHRoYXQncyB0aGUgdXN1YWxcbiAgICAvLyBzaXR1YXRpb24gYW5kIHdlIHByb2JhYmx5IGhhdmUgYSBidWcgaWYgaXQncyBub3QuIEJ1dCBmb3IgdGhlIGVsZW1lbnRzIHRoYXQgY29udGFpbiBwcmVyZW5kZXJlZFxuICAgIC8vIHJvb3QgY29tcG9uZW50cywgd2Ugd2FudCB0byBsZXQgdGhlbSBrZWVwIHRoZWlyIGNvbnRlbnQgdW50aWwgd2UgcmVwbGFjZSBpdC5cbiAgICBpZiAoIWFsbG93RXhpc3RpbmdDb250ZW50cykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdOZXcgbG9naWNhbCBlbGVtZW50cyBtdXN0IHN0YXJ0IGVtcHR5LCBvciBhbGxvd0V4aXN0aW5nQ29udGVudHMgbXVzdCBiZSB0cnVlJyk7XG4gICAgfVxuXG4gICAgZWxlbWVudC5jaGlsZE5vZGVzLmZvckVhY2goY2hpbGQgPT4ge1xuICAgICAgY29uc3QgY2hpbGRMb2dpY2FsRWxlbWVudCA9IHRvTG9naWNhbEVsZW1lbnQoY2hpbGQsIC8qIGFsbG93RXhpc3RpbmdDb250ZW50cyAqLyB0cnVlKTtcbiAgICAgIGNoaWxkTG9naWNhbEVsZW1lbnRbbG9naWNhbFBhcmVudFByb3BuYW1lXSA9IGVsZW1lbnQ7XG4gICAgICBjaGlsZHJlbkFycmF5LnB1c2goY2hpbGRMb2dpY2FsRWxlbWVudCk7XG4gICAgfSk7XG4gIH1cblxuICBlbGVtZW50W2xvZ2ljYWxDaGlsZHJlblByb3BuYW1lXSA9IGNoaWxkcmVuQXJyYXk7XG4gIHJldHVybiBlbGVtZW50IGFzIHVua25vd24gYXMgTG9naWNhbEVsZW1lbnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbXB0eUxvZ2ljYWxFbGVtZW50KGVsZW1lbnQ6IExvZ2ljYWxFbGVtZW50KTogdm9pZCB7XG4gIGNvbnN0IGNoaWxkcmVuQXJyYXkgPSBnZXRMb2dpY2FsQ2hpbGRyZW5BcnJheShlbGVtZW50KTtcbiAgd2hpbGUgKGNoaWxkcmVuQXJyYXkubGVuZ3RoKSB7XG4gICAgcmVtb3ZlTG9naWNhbENoaWxkKGVsZW1lbnQsIDApO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBbmRJbnNlcnRMb2dpY2FsQ29udGFpbmVyKHBhcmVudDogTG9naWNhbEVsZW1lbnQsIGNoaWxkSW5kZXg6IG51bWJlcik6IExvZ2ljYWxFbGVtZW50IHtcbiAgY29uc3QgY29udGFpbmVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJyEnKTtcbiAgaW5zZXJ0TG9naWNhbENoaWxkKGNvbnRhaW5lckVsZW1lbnQsIHBhcmVudCwgY2hpbGRJbmRleCk7XG4gIHJldHVybiBjb250YWluZXJFbGVtZW50IGFzIHVua25vd24gYXMgTG9naWNhbEVsZW1lbnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbnNlcnRMb2dpY2FsQ2hpbGRCZWZvcmUoY2hpbGQ6IE5vZGUsIHBhcmVudDogTG9naWNhbEVsZW1lbnQsIGJlZm9yZTogTG9naWNhbEVsZW1lbnQgfCBudWxsKTogdm9pZCB7XG4gIGNvbnN0IGNoaWxkcmVuQXJyYXkgPSBnZXRMb2dpY2FsQ2hpbGRyZW5BcnJheShwYXJlbnQpO1xuICBsZXQgY2hpbGRJbmRleDogbnVtYmVyO1xuICBpZiAoYmVmb3JlKSB7XG4gICAgY2hpbGRJbmRleCA9IEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoY2hpbGRyZW5BcnJheSwgYmVmb3JlKTtcbiAgICBpZiAoY2hpbGRJbmRleCA8IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGZpbmQgbG9naWNhbCBlbGVtZW50IGluIHRoZSBwYXJlbnQgbG9naWNhbCBub2RlIGxpc3QnKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY2hpbGRJbmRleCA9IGNoaWxkcmVuQXJyYXkubGVuZ3RoO1xuICB9XG4gIGluc2VydExvZ2ljYWxDaGlsZChjaGlsZCwgcGFyZW50LCBjaGlsZEluZGV4KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluc2VydExvZ2ljYWxDaGlsZChjaGlsZDogTm9kZSwgcGFyZW50OiBMb2dpY2FsRWxlbWVudCwgY2hpbGRJbmRleDogbnVtYmVyKTogdm9pZCB7XG4gIGNvbnN0IGNoaWxkQXNMb2dpY2FsRWxlbWVudCA9IGNoaWxkIGFzIHVua25vd24gYXMgTG9naWNhbEVsZW1lbnQ7XG5cbiAgLy8gSWYgdGhlIGNoaWxkIGlzIGEgY29tcG9uZW50IGNvbW1lbnQgd2l0aCBsb2dpY2FsIGNoaWxkcmVuLCBpdHMgY2hpbGRyZW5cbiAgLy8gbmVlZCB0byBiZSBpbnNlcnRlZCBpbnRvIHRoZSBwYXJlbnQgbm9kZVxuICBsZXQgbm9kZVRvSW5zZXJ0ID0gY2hpbGQ7XG4gIGlmIChjaGlsZCBpbnN0YW5jZW9mIENvbW1lbnQpIHtcbiAgICBjb25zdCBleGlzdGluZ0dyYW5jaGlsZHJlbiA9IGdldExvZ2ljYWxDaGlsZHJlbkFycmF5KGNoaWxkQXNMb2dpY2FsRWxlbWVudCk7XG4gICAgaWYgKGV4aXN0aW5nR3JhbmNoaWxkcmVuPy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBsYXN0Tm9kZVRvSW5zZXJ0ID0gZmluZExhc3REb21Ob2RlSW5SYW5nZShjaGlsZEFzTG9naWNhbEVsZW1lbnQpO1xuICAgICAgY29uc3QgcmFuZ2UgPSBuZXcgUmFuZ2UoKTtcbiAgICAgIHJhbmdlLnNldFN0YXJ0QmVmb3JlKGNoaWxkKTtcbiAgICAgIHJhbmdlLnNldEVuZEFmdGVyKGxhc3ROb2RlVG9JbnNlcnQpO1xuICAgICAgbm9kZVRvSW5zZXJ0ID0gcmFuZ2UuZXh0cmFjdENvbnRlbnRzKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gSWYgdGhlIG5vZGUgd2UncmUgaW5zZXJ0aW5nIGFscmVhZHkgaGFzIGEgbG9naWNhbCBwYXJlbnQsXG4gIC8vIHJlbW92ZSBpdCBmcm9tIGl0cyBzaWJsaW5nIGFycmF5XG4gIGNvbnN0IGV4aXN0aW5nTG9naWNhbFBhcmVudCA9IGdldExvZ2ljYWxQYXJlbnQoY2hpbGRBc0xvZ2ljYWxFbGVtZW50KTtcbiAgaWYgKGV4aXN0aW5nTG9naWNhbFBhcmVudCkge1xuICAgIGNvbnN0IGV4aXN0aW5nU2libGluZ0FycmF5ID0gZ2V0TG9naWNhbENoaWxkcmVuQXJyYXkoZXhpc3RpbmdMb2dpY2FsUGFyZW50KTtcbiAgICBjb25zdCBleGlzdGluZ0NoaWxkSW5kZXggPSBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGV4aXN0aW5nU2libGluZ0FycmF5LCBjaGlsZEFzTG9naWNhbEVsZW1lbnQpO1xuICAgIGV4aXN0aW5nU2libGluZ0FycmF5LnNwbGljZShleGlzdGluZ0NoaWxkSW5kZXgsIDEpO1xuICAgIGRlbGV0ZSBjaGlsZEFzTG9naWNhbEVsZW1lbnRbbG9naWNhbFBhcmVudFByb3BuYW1lXTtcbiAgfVxuXG4gIGNvbnN0IG5ld1NpYmxpbmdzID0gZ2V0TG9naWNhbENoaWxkcmVuQXJyYXkocGFyZW50KTtcbiAgaWYgKGNoaWxkSW5kZXggPCBuZXdTaWJsaW5ncy5sZW5ndGgpIHtcbiAgICAvLyBJbnNlcnRcbiAgICBjb25zdCBuZXh0U2libGluZyA9IG5ld1NpYmxpbmdzW2NoaWxkSW5kZXhdIGFzIGFueSBhcyBOb2RlO1xuICAgIG5leHRTaWJsaW5nLnBhcmVudE5vZGUhLmluc2VydEJlZm9yZShub2RlVG9JbnNlcnQsIG5leHRTaWJsaW5nKTtcbiAgICBuZXdTaWJsaW5ncy5zcGxpY2UoY2hpbGRJbmRleCwgMCwgY2hpbGRBc0xvZ2ljYWxFbGVtZW50KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBBcHBlbmRcbiAgICBhcHBlbmREb21Ob2RlKG5vZGVUb0luc2VydCwgcGFyZW50KTtcbiAgICBuZXdTaWJsaW5ncy5wdXNoKGNoaWxkQXNMb2dpY2FsRWxlbWVudCk7XG4gIH1cblxuICBjaGlsZEFzTG9naWNhbEVsZW1lbnRbbG9naWNhbFBhcmVudFByb3BuYW1lXSA9IHBhcmVudDtcbiAgaWYgKCEobG9naWNhbENoaWxkcmVuUHJvcG5hbWUgaW4gY2hpbGRBc0xvZ2ljYWxFbGVtZW50KSkge1xuICAgIGNoaWxkQXNMb2dpY2FsRWxlbWVudFtsb2dpY2FsQ2hpbGRyZW5Qcm9wbmFtZV0gPSBbXTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlTG9naWNhbENoaWxkKHBhcmVudDogTG9naWNhbEVsZW1lbnQsIGNoaWxkSW5kZXg6IG51bWJlcik6IHZvaWQge1xuICBjb25zdCBjaGlsZHJlbkFycmF5ID0gZ2V0TG9naWNhbENoaWxkcmVuQXJyYXkocGFyZW50KTtcbiAgY29uc3QgY2hpbGRUb1JlbW92ZSA9IGNoaWxkcmVuQXJyYXkuc3BsaWNlKGNoaWxkSW5kZXgsIDEpWzBdO1xuXG4gIC8vIElmIGl0J3MgYSBsb2dpY2FsIGNvbnRhaW5lciwgYWxzbyByZW1vdmUgaXRzIGRlc2NlbmRhbnRzXG4gIGlmIChjaGlsZFRvUmVtb3ZlIGluc3RhbmNlb2YgQ29tbWVudCkge1xuICAgIGNvbnN0IGdyYW5kY2hpbGRyZW5BcnJheSA9IGdldExvZ2ljYWxDaGlsZHJlbkFycmF5KGNoaWxkVG9SZW1vdmUpO1xuICAgIGlmIChncmFuZGNoaWxkcmVuQXJyYXkpIHtcbiAgICAgIHdoaWxlIChncmFuZGNoaWxkcmVuQXJyYXkubGVuZ3RoID4gMCkge1xuICAgICAgICByZW1vdmVMb2dpY2FsQ2hpbGQoY2hpbGRUb1JlbW92ZSwgMCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gRmluYWxseSwgcmVtb3ZlIHRoZSBub2RlIGl0c2VsZlxuICBjb25zdCBkb21Ob2RlVG9SZW1vdmUgPSBjaGlsZFRvUmVtb3ZlIGFzIGFueSBhcyBOb2RlO1xuICBkb21Ob2RlVG9SZW1vdmUucGFyZW50Tm9kZSEucmVtb3ZlQ2hpbGQoZG9tTm9kZVRvUmVtb3ZlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldExvZ2ljYWxQYXJlbnQoZWxlbWVudDogTG9naWNhbEVsZW1lbnQpOiBMb2dpY2FsRWxlbWVudCB8IG51bGwge1xuICByZXR1cm4gKGVsZW1lbnRbbG9naWNhbFBhcmVudFByb3BuYW1lXSBhcyBMb2dpY2FsRWxlbWVudCkgfHwgbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldExvZ2ljYWxDaGlsZChwYXJlbnQ6IExvZ2ljYWxFbGVtZW50LCBjaGlsZEluZGV4OiBudW1iZXIpOiBMb2dpY2FsRWxlbWVudCB7XG4gIHJldHVybiBnZXRMb2dpY2FsQ2hpbGRyZW5BcnJheShwYXJlbnQpW2NoaWxkSW5kZXhdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9naWNhbFJvb3REZXNjcmlwdG9yKGVsZW1lbnQ6IExvZ2ljYWxFbGVtZW50KTogQ29tcG9uZW50RGVzY3JpcHRvciB7XG4gIHJldHVybiBlbGVtZW50W2xvZ2ljYWxSb290RGVzY3JpcHRvclByb3BuYW1lXSB8fCBudWxsO1xufVxuXG4vLyBTVkcgZWxlbWVudHMgc3VwcG9ydCBgZm9yZWlnbk9iamVjdGAgY2hpbGRyZW4gdGhhdCBjYW4gaG9sZCBhcmJpdHJhcnkgSFRNTC5cbi8vIEZvciB0aGVzZSBzY2VuYXJpb3MsIHRoZSBwYXJlbnQgU1ZHIGFuZCBgZm9yZWlnbk9iamVjdGAgZWxlbWVudHMgc2hvdWxkXG4vLyBiZSByZW5kZXJlZCB1bmRlciB0aGUgU1ZHIG5hbWVzcGFjZSwgd2hpbGUgdGhlIEhUTUwgY29udGVudCBzaG91bGQgYmUgcmVuZGVyZWRcbi8vIHVuZGVyIHRoZSBYSFRNTCBuYW1lc3BhY2UuIElmIHRoZSBjb3JyZWN0IG5hbWVzcGFjZXMgYXJlIG5vdCBwcm92aWRlZCwgbW9zdFxuLy8gYnJvd3NlcnMgd2lsbCBmYWlsIHRvIHJlbmRlciB0aGUgZm9yZWlnbiBvYmplY3QgY29udGVudC4gSGVyZSwgd2UgZW5zdXJlIHRoYXQgaWZcbi8vIHdlIGVuY291bnRlciBhIGBmb3JlaWduT2JqZWN0YCBpbiB0aGUgU1ZHLCB0aGVuIGFsbCBpdHMgY2hpbGRyZW4gd2lsbCBiZSBwbGFjZWRcbi8vIHVuZGVyIHRoZSBYSFRNTCBuYW1lc3BhY2UuXG5leHBvcnQgZnVuY3Rpb24gaXNTdmdFbGVtZW50KGVsZW1lbnQ6IExvZ2ljYWxFbGVtZW50KTogYm9vbGVhbiB7XG4gIC8vIE5vdGU6IFRoaXMgY2hlY2sgaXMgaW50ZW50aW9uYWxseSBjYXNlLXNlbnNpdGl2ZSBzaW5jZSB3ZSBleHBlY3QgdGhpcyBlbGVtZW50XG4gIC8vIHRvIGFwcGVhciBhcyBhIGNoaWxkIG9mIGFuIFNWRyBlbGVtZW50IGFuZCBTVkdzIGFyZSBjYXNlLXNlbnNpdGl2ZS5cbiAgY29uc3QgY2xvc2VzdEVsZW1lbnQgPSBnZXRDbG9zZXN0RG9tRWxlbWVudChlbGVtZW50KSBhcyBhbnk7XG4gIHJldHVybiBjbG9zZXN0RWxlbWVudC5uYW1lc3BhY2VVUkkgPT09ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgJiYgY2xvc2VzdEVsZW1lbnRbJ3RhZ05hbWUnXSAhPT0gJ2ZvcmVpZ25PYmplY3QnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9naWNhbENoaWxkcmVuQXJyYXkoZWxlbWVudDogTG9naWNhbEVsZW1lbnQpOiBMb2dpY2FsRWxlbWVudFtdIHtcbiAgcmV0dXJuIGVsZW1lbnRbbG9naWNhbENoaWxkcmVuUHJvcG5hbWVdIGFzIExvZ2ljYWxFbGVtZW50W107XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRMb2dpY2FsTmV4dFNpYmxpbmcoZWxlbWVudDogTG9naWNhbEVsZW1lbnQpOiBMb2dpY2FsRWxlbWVudCB8IG51bGwge1xuICBjb25zdCBzaWJsaW5ncyA9IGdldExvZ2ljYWxDaGlsZHJlbkFycmF5KGdldExvZ2ljYWxQYXJlbnQoZWxlbWVudCkhKTtcbiAgY29uc3Qgc2libGluZ0luZGV4ID0gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChzaWJsaW5ncywgZWxlbWVudCk7XG4gIHJldHVybiBzaWJsaW5nc1tzaWJsaW5nSW5kZXggKyAxXSB8fCBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNMb2dpY2FsRWxlbWVudChlbGVtZW50OiBOb2RlKTogYm9vbGVhbiB7XG4gIHJldHVybiBsb2dpY2FsQ2hpbGRyZW5Qcm9wbmFtZSBpbiBlbGVtZW50O1xufVxuXG4vLyBUaGlzIGZ1bmN0aW9uIHJldHVybnMgYWxsIHRoZSBkZXNjZW5kYW50cyBvZiB0aGUgbG9naWNhbCBlbGVtZW50IGJlZm9yZSB5aWVsZGluZyB0aGUgZWxlbWVudFxuLy8gaXRzZWxmLlxuZXhwb3J0IGZ1bmN0aW9uICpkZXB0aEZpcnN0Tm9kZVRyZWVUcmF2ZXJzYWwoZWxlbWVudDogTG9naWNhbEVsZW1lbnQpOiBJdGVyYWJsZTxMb2dpY2FsRWxlbWVudD4ge1xuICBjb25zdCBjaGlsZHJlbiA9IGdldExvZ2ljYWxDaGlsZHJlbkFycmF5KGVsZW1lbnQpO1xuICBmb3IgKGNvbnN0IGNoaWxkIG9mIGNoaWxkcmVuKSB7XG4gICAgeWllbGQqIGRlcHRoRmlyc3ROb2RlVHJlZVRyYXZlcnNhbChjaGlsZCk7XG4gIH1cbiAgeWllbGQgZWxlbWVudDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBlcm11dGVMb2dpY2FsQ2hpbGRyZW4ocGFyZW50OiBMb2dpY2FsRWxlbWVudCwgcGVybXV0YXRpb25MaXN0OiBQZXJtdXRhdGlvbkxpc3RFbnRyeVtdKTogdm9pZCB7XG4gIC8vIFRoZSBwZXJtdXRhdGlvbkxpc3QgbXVzdCByZXByZXNlbnQgYSB2YWxpZCBwZXJtdXRhdGlvbiwgaS5lLiwgdGhlIGxpc3Qgb2YgJ2Zyb20nIGluZGljZXNcbiAgLy8gaXMgZGlzdGluY3QsIGFuZCB0aGUgbGlzdCBvZiAndG8nIGluZGljZXMgaXMgYSBwZXJtdXRhdGlvbiBvZiBpdC4gVGhlIGFsZ29yaXRobSBoZXJlXG4gIC8vIHJlbGllcyBvbiB0aGF0IGFzc3VtcHRpb24uXG5cbiAgLy8gRWFjaCBvZiB0aGUgcGhhc2VzIGhlcmUgaGFzIHRvIGhhcHBlbiBzZXBhcmF0ZWx5LCBiZWNhdXNlIGVhY2ggb25lIGlzIGRlc2lnbmVkIG5vdCB0b1xuICAvLyBpbnRlcmZlcmUgd2l0aCB0aGUgaW5kaWNlcyBvciBET00gZW50cmllcyB1c2VkIGJ5IHN1YnNlcXVlbnQgcGhhc2VzLlxuXG4gIC8vIFBoYXNlIDE6IHRyYWNrIHdoaWNoIG5vZGVzIHdlIHdpbGwgbW92ZVxuICBjb25zdCBzaWJsaW5ncyA9IGdldExvZ2ljYWxDaGlsZHJlbkFycmF5KHBhcmVudCk7XG4gIHBlcm11dGF0aW9uTGlzdC5mb3JFYWNoKChsaXN0RW50cnk6IFBlcm11dGF0aW9uTGlzdEVudHJ5V2l0aFRyYWNraW5nRGF0YSkgPT4ge1xuICAgIGxpc3RFbnRyeS5tb3ZlUmFuZ2VTdGFydCA9IHNpYmxpbmdzW2xpc3RFbnRyeS5mcm9tU2libGluZ0luZGV4XTtcbiAgICBsaXN0RW50cnkubW92ZVJhbmdlRW5kID0gZmluZExhc3REb21Ob2RlSW5SYW5nZShsaXN0RW50cnkubW92ZVJhbmdlU3RhcnQpO1xuICB9KTtcblxuICAvLyBQaGFzZSAyOiBpbnNlcnQgbWFya2Vyc1xuICBwZXJtdXRhdGlvbkxpc3QuZm9yRWFjaCgobGlzdEVudHJ5OiBQZXJtdXRhdGlvbkxpc3RFbnRyeVdpdGhUcmFja2luZ0RhdGEpID0+IHtcbiAgICBjb25zdCBtYXJrZXIgPSBkb2N1bWVudC5jcmVhdGVDb21tZW50KCdtYXJrZXInKTtcbiAgICBsaXN0RW50cnkubW92ZVRvQmVmb3JlTWFya2VyID0gbWFya2VyO1xuICAgIGNvbnN0IGluc2VydEJlZm9yZU5vZGUgPSBzaWJsaW5nc1tsaXN0RW50cnkudG9TaWJsaW5nSW5kZXggKyAxXSBhcyBhbnkgYXMgTm9kZTtcbiAgICBpZiAoaW5zZXJ0QmVmb3JlTm9kZSkge1xuICAgICAgaW5zZXJ0QmVmb3JlTm9kZS5wYXJlbnROb2RlIS5pbnNlcnRCZWZvcmUobWFya2VyLCBpbnNlcnRCZWZvcmVOb2RlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXBwZW5kRG9tTm9kZShtYXJrZXIsIHBhcmVudCk7XG4gICAgfVxuICB9KTtcblxuICAvLyBQaGFzZSAzOiBtb3ZlIGRlc2NlbmRhbnRzICYgcmVtb3ZlIG1hcmtlcnNcbiAgcGVybXV0YXRpb25MaXN0LmZvckVhY2goKGxpc3RFbnRyeTogUGVybXV0YXRpb25MaXN0RW50cnlXaXRoVHJhY2tpbmdEYXRhKSA9PiB7XG4gICAgY29uc3QgaW5zZXJ0QmVmb3JlID0gbGlzdEVudHJ5Lm1vdmVUb0JlZm9yZU1hcmtlciE7XG4gICAgY29uc3QgcGFyZW50RG9tTm9kZSA9IGluc2VydEJlZm9yZS5wYXJlbnROb2RlITtcbiAgICBjb25zdCBlbGVtZW50VG9Nb3ZlID0gbGlzdEVudHJ5Lm1vdmVSYW5nZVN0YXJ0ITtcbiAgICBjb25zdCBtb3ZlRW5kTm9kZSA9IGxpc3RFbnRyeS5tb3ZlUmFuZ2VFbmQhO1xuICAgIGxldCBuZXh0VG9Nb3ZlID0gZWxlbWVudFRvTW92ZSBhcyB1bmtub3duIGFzIE5vZGUgfCBudWxsO1xuICAgIHdoaWxlIChuZXh0VG9Nb3ZlKSB7XG4gICAgICBjb25zdCBuZXh0TmV4dCA9IG5leHRUb01vdmUubmV4dFNpYmxpbmc7XG4gICAgICBwYXJlbnREb21Ob2RlLmluc2VydEJlZm9yZShuZXh0VG9Nb3ZlLCBpbnNlcnRCZWZvcmUpO1xuXG4gICAgICBpZiAobmV4dFRvTW92ZSA9PT0gbW92ZUVuZE5vZGUpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXh0VG9Nb3ZlID0gbmV4dE5leHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcGFyZW50RG9tTm9kZS5yZW1vdmVDaGlsZChpbnNlcnRCZWZvcmUpO1xuICB9KTtcblxuICAvLyBQaGFzZSA0OiB1cGRhdGUgc2libGluZ3MgaW5kZXhcbiAgcGVybXV0YXRpb25MaXN0LmZvckVhY2goKGxpc3RFbnRyeTogUGVybXV0YXRpb25MaXN0RW50cnlXaXRoVHJhY2tpbmdEYXRhKSA9PiB7XG4gICAgc2libGluZ3NbbGlzdEVudHJ5LnRvU2libGluZ0luZGV4XSA9IGxpc3RFbnRyeS5tb3ZlUmFuZ2VTdGFydCE7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2xvc2VzdERvbUVsZW1lbnQobG9naWNhbEVsZW1lbnQ6IExvZ2ljYWxFbGVtZW50KTogRWxlbWVudCB8IChMb2dpY2FsRWxlbWVudCAmIERvY3VtZW50RnJhZ21lbnQpIHtcbiAgaWYgKGxvZ2ljYWxFbGVtZW50IGluc3RhbmNlb2YgRWxlbWVudCB8fCBsb2dpY2FsRWxlbWVudCBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpIHtcbiAgICByZXR1cm4gbG9naWNhbEVsZW1lbnQ7XG4gIH0gZWxzZSBpZiAobG9naWNhbEVsZW1lbnQgaW5zdGFuY2VvZiBDb21tZW50KSB7XG4gICAgcmV0dXJuIGxvZ2ljYWxFbGVtZW50LnBhcmVudE5vZGUhIGFzIEVsZW1lbnQ7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgYSB2YWxpZCBsb2dpY2FsIGVsZW1lbnQnKTtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBlcm11dGF0aW9uTGlzdEVudHJ5IHtcbiAgZnJvbVNpYmxpbmdJbmRleDogbnVtYmVyLFxuICB0b1NpYmxpbmdJbmRleDogbnVtYmVyLFxufVxuXG5pbnRlcmZhY2UgUGVybXV0YXRpb25MaXN0RW50cnlXaXRoVHJhY2tpbmdEYXRhIGV4dGVuZHMgUGVybXV0YXRpb25MaXN0RW50cnkge1xuICAvLyBUaGVzZSBleHRyYSBwcm9wZXJ0aWVzIGFyZSB1c2VkIGludGVybmFsbHkgd2hlbiBwcm9jZXNzaW5nIHRoZSBwZXJtdXRhdGlvbiBsaXN0XG4gIG1vdmVSYW5nZVN0YXJ0PzogTG9naWNhbEVsZW1lbnQsXG4gIG1vdmVSYW5nZUVuZD86IE5vZGUsXG4gIG1vdmVUb0JlZm9yZU1hcmtlcj86IE5vZGUsXG59XG5cbmZ1bmN0aW9uIGFwcGVuZERvbU5vZGUoY2hpbGQ6IE5vZGUsIHBhcmVudDogTG9naWNhbEVsZW1lbnQpIHtcbiAgLy8gVGhpcyBmdW5jdGlvbiBvbmx5IHB1dHMgJ2NoaWxkJyBpbnRvIHRoZSBET00gaW4gdGhlIHJpZ2h0IHBsYWNlIHJlbGF0aXZlIHRvICdwYXJlbnQnXG4gIC8vIEl0IGRvZXMgbm90IHVwZGF0ZSB0aGUgbG9naWNhbCBjaGlsZHJlbiBhcnJheSBvZiBhbnl0aGluZ1xuICBpZiAocGFyZW50IGluc3RhbmNlb2YgRWxlbWVudCB8fCBwYXJlbnQgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KSB7XG4gICAgcGFyZW50LmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgfSBlbHNlIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBDb21tZW50KSB7XG4gICAgY29uc3QgcGFyZW50TG9naWNhbE5leHRTaWJsaW5nID0gZ2V0TG9naWNhbE5leHRTaWJsaW5nKHBhcmVudCkgYXMgYW55IGFzIE5vZGU7XG4gICAgaWYgKHBhcmVudExvZ2ljYWxOZXh0U2libGluZykge1xuICAgICAgLy8gU2luY2UgdGhlIHBhcmVudCBoYXMgYSBsb2dpY2FsIG5leHQtc2libGluZywgaXRzIGFwcGVuZGVkIGNoaWxkIGdvZXMgcmlnaHQgYmVmb3JlIHRoYXRcbiAgICAgIHBhcmVudExvZ2ljYWxOZXh0U2libGluZy5wYXJlbnROb2RlIS5pbnNlcnRCZWZvcmUoY2hpbGQsIHBhcmVudExvZ2ljYWxOZXh0U2libGluZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNpbmNlIHRoZSBwYXJlbnQgaGFzIG5vIGxvZ2ljYWwgbmV4dC1zaWJsaW5nLCBrZWVwIHJlY3Vyc2luZyB1cHdhcmRzIHVudGlsIHdlIGZpbmRcbiAgICAgIC8vIGEgbG9naWNhbCBhbmNlc3RvciB0aGF0IGRvZXMgaGF2ZSBhIG5leHQtc2libGluZyBvciBpcyBhIHBoeXNpY2FsIGVsZW1lbnQuXG4gICAgICBhcHBlbmREb21Ob2RlKGNoaWxkLCBnZXRMb2dpY2FsUGFyZW50KHBhcmVudCkhKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gU2hvdWxkIG5ldmVyIGhhcHBlblxuICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGFwcGVuZCBub2RlIGJlY2F1c2UgdGhlIHBhcmVudCBpcyBub3QgYSB2YWxpZCBsb2dpY2FsIGVsZW1lbnQuIFBhcmVudDogJHtwYXJlbnR9YCk7XG4gIH1cbn1cblxuLy8gUmV0dXJucyB0aGUgZmluYWwgbm9kZSAoaW4gZGVwdGgtZmlyc3QgZXZhbHVhdGlvbiBvcmRlcikgdGhhdCBpcyBhIGRlc2NlbmRhbnQgb2YgdGhlIGxvZ2ljYWwgZWxlbWVudC5cbi8vIEFzIHN1Y2gsIHRoZSBlbnRpcmUgc3VidHJlZSBpcyBiZXR3ZWVuICdlbGVtZW50JyBhbmQgJ2ZpbmRMYXN0RG9tTm9kZUluUmFuZ2UoZWxlbWVudCknIGluY2x1c2l2ZS5cbmZ1bmN0aW9uIGZpbmRMYXN0RG9tTm9kZUluUmFuZ2UoZWxlbWVudDogTG9naWNhbEVsZW1lbnQpOiBOb2RlIHtcbiAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBFbGVtZW50IHx8IGVsZW1lbnQgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cblxuICBjb25zdCBuZXh0U2libGluZyA9IGdldExvZ2ljYWxOZXh0U2libGluZyhlbGVtZW50KTtcbiAgaWYgKG5leHRTaWJsaW5nKSB7XG4gICAgLy8gU2ltcGxlIGNhc2U6IG5vdCB0aGUgbGFzdCBsb2dpY2FsIHNpYmxpbmcsIHNvIHRha2UgdGhlIG5vZGUgYmVmb3JlIHRoZSBuZXh0IHNpYmxpbmdcbiAgICByZXR1cm4gKG5leHRTaWJsaW5nIGFzIGFueSBhcyBOb2RlKS5wcmV2aW91c1NpYmxpbmchO1xuICB9IGVsc2Uge1xuICAgIC8vIEhhcmRlciBjYXNlOiB0aGVyZSdzIG5vIGxvZ2ljYWwgbmV4dC1zaWJsaW5nLCBzbyByZWN1cnNlIHVwd2FyZHMgdW50aWwgd2UgZmluZFxuICAgIC8vIGEgbG9naWNhbCBhbmNlc3RvciB0aGF0IGRvZXMgaGF2ZSBvbmUsIG9yIGEgcGh5c2ljYWwgZWxlbWVudFxuICAgIGNvbnN0IGxvZ2ljYWxQYXJlbnQgPSBnZXRMb2dpY2FsUGFyZW50KGVsZW1lbnQpITtcbiAgICByZXR1cm4gbG9naWNhbFBhcmVudCBpbnN0YW5jZW9mIEVsZW1lbnQgfHwgbG9naWNhbFBhcmVudCBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnRcbiAgICAgID8gbG9naWNhbFBhcmVudC5sYXN0Q2hpbGQhXG4gICAgICA6IGZpbmRMYXN0RG9tTm9kZUluUmFuZ2UobG9naWNhbFBhcmVudCk7XG4gIH1cbn1cblxuLy8gTm9taW5hbCB0eXBlIHRvIHJlcHJlc2VudCBhIGxvZ2ljYWwgZWxlbWVudCB3aXRob3V0IG5lZWRpbmcgdG8gYWxsb2NhdGUgYW55IG9iamVjdCBmb3IgaW5zdGFuY2VzXG5leHBvcnQgaW50ZXJmYWNlIExvZ2ljYWxFbGVtZW50IHsgTG9naWNhbEVsZW1lbnRfX0RPX05PVF9JTVBMRU1FTlQ6IGFueSB9XG4iLCIvLyBMaWNlbnNlZCB0byB0aGUgLk5FVCBGb3VuZGF0aW9uIHVuZGVyIG9uZSBvciBtb3JlIGFncmVlbWVudHMuXG4vLyBUaGUgLk5FVCBGb3VuZGF0aW9uIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG5pbXBvcnQgeyBEb3ROZXQgfSBmcm9tICdAbWljcm9zb2Z0L2RvdG5ldC1qcy1pbnRlcm9wJztcblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5Q2FwdHVyZUlkVG9FbGVtZW50KGVsZW1lbnQ6IEVsZW1lbnQsIHJlZmVyZW5jZUNhcHR1cmVJZDogc3RyaW5nKTogdm9pZCB7XG4gIGVsZW1lbnQuc2V0QXR0cmlidXRlKGdldENhcHR1cmVJZEF0dHJpYnV0ZU5hbWUocmVmZXJlbmNlQ2FwdHVyZUlkKSwgJycpO1xufVxuXG5mdW5jdGlvbiBnZXRFbGVtZW50QnlDYXB0dXJlSWQocmVmZXJlbmNlQ2FwdHVyZUlkOiBzdHJpbmcpIHtcbiAgY29uc3Qgc2VsZWN0b3IgPSBgWyR7Z2V0Q2FwdHVyZUlkQXR0cmlidXRlTmFtZShyZWZlcmVuY2VDYXB0dXJlSWQpfV1gO1xuICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG59XG5cbmZ1bmN0aW9uIGdldENhcHR1cmVJZEF0dHJpYnV0ZU5hbWUocmVmZXJlbmNlQ2FwdHVyZUlkOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGBfYmxfJHtyZWZlcmVuY2VDYXB0dXJlSWR9YDtcbn1cblxuLy8gU3VwcG9ydCByZWNlaXZpbmcgRWxlbWVudFJlZiBpbnN0YW5jZXMgYXMgYXJncyBpbiBpbnRlcm9wIGNhbGxzXG5jb25zdCBlbGVtZW50UmVmS2V5ID0gJ19faW50ZXJuYWxJZCc7IC8vIEtlZXAgaW4gc3luYyB3aXRoIEVsZW1lbnRSZWYuY3NcbkRvdE5ldC5hdHRhY2hSZXZpdmVyKChrZXksIHZhbHVlKSA9PiB7XG4gIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgZWxlbWVudFJlZktleSkgJiYgdHlwZW9mIHZhbHVlW2VsZW1lbnRSZWZLZXldID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBnZXRFbGVtZW50QnlDYXB0dXJlSWQodmFsdWVbZWxlbWVudFJlZktleV0pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxufSk7XG4iLCIvLyBMaWNlbnNlZCB0byB0aGUgLk5FVCBGb3VuZGF0aW9uIHVuZGVyIG9uZSBvciBtb3JlIGFncmVlbWVudHMuXG4vLyBUaGUgLk5FVCBGb3VuZGF0aW9uIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG4vLyBVcGRhdGluZyB0aGUgYXR0cmlidXRlcy9wcm9wZXJ0aWVzIG9uIERPTSBlbGVtZW50cyBpbnZvbHZlcyBhIHdob2xlIHJhbmdlIG9mIHNwZWNpYWwgY2FzZXMsIGJlY2F1c2Vcbi8vIGRlcGVuZGluZyBvbiB0aGUgZWxlbWVudCB0eXBlLCB0aGVyZSBhcmUgc3BlY2lhbCBydWxlcyBmb3IgbmVlZGluZyB0byB1cGRhdGUgb3RoZXIgcHJvcGVydGllcyBvclxuLy8gdG8gb25seSBwZXJmb3JtIHRoZSBjaGFuZ2VzIGluIGEgc3BlY2lmaWMgb3JkZXIuXG4vL1xuLy8gVGhpcyBtb2R1bGUgcHJvdmlkZXMgaGVscGVycyBmb3IgZG9pbmcgdGhhdCwgYW5kIGlzIHNoYXJlZCBieSB0aGUgaW50ZXJhY3RpdmUgcmVuZGVyZXIgKEJyb3dzZXJSZW5kZXJlcilcbi8vIGFuZCB0aGUgU1NSIERPTSBtZXJnaW5nIGxvZ2ljLlxuXG5jb25zdCBkZWZlcnJlZFZhbHVlUHJvcG5hbWUgPSAnX2JsYXpvckRlZmVycmVkVmFsdWUnO1xuXG5leHBvcnQgZnVuY3Rpb24gdHJ5QXBwbHlTcGVjaWFsUHJvcGVydHkoZWxlbWVudDogRWxlbWVudCwgbmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIHwgbnVsbCkge1xuICBzd2l0Y2ggKG5hbWUpIHtcbiAgICBjYXNlICd2YWx1ZSc6XG4gICAgICByZXR1cm4gdHJ5QXBwbHlWYWx1ZVByb3BlcnR5KGVsZW1lbnQsIHZhbHVlKTtcbiAgICBjYXNlICdjaGVja2VkJzpcbiAgICAgIHJldHVybiB0cnlBcHBseUNoZWNrZWRQcm9wZXJ0eShlbGVtZW50LCB2YWx1ZSk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlBbnlEZWZlcnJlZFZhbHVlKGVsZW1lbnQ6IEVsZW1lbnQpIHtcbiAgLy8gV2UgaGFuZGxlIHNldHRpbmcgJ3ZhbHVlJyBvbiBhIDxzZWxlY3Q+IGluIHRocmVlIGRpZmZlcmVudCB3YXlzOlxuICAvLyBbMV0gV2hlbiBpbnNlcnRpbmcgYSBjb3JyZXNwb25kaW5nIDxvcHRpb24+LCBpbiBjYXNlIHlvdSdyZSBkeW5hbWljYWxseSBhZGRpbmcgb3B0aW9ucy5cbiAgLy8gICAgIFRoaXMgaXMgdGhlIGNhc2UgYmVsb3cuXG4gIC8vIFsyXSBBZnRlciB3ZSBmaW5pc2ggaW5zZXJ0aW5nIHRoZSA8c2VsZWN0PiwgaW4gY2FzZSB0aGUgZGVzY2VuZGFudCBvcHRpb25zIGFyZSBiZWluZ1xuICAvLyAgICAgYWRkZWQgYXMgYW4gb3BhcXVlIG1hcmt1cCBibG9jayByYXRoZXIgdGhhbiBpbmRpdmlkdWFsbHkuIFRoaXMgaXMgdGhlIG90aGVyIGNhc2UgYmVsb3cuXG4gIC8vIFszXSBJbiBjYXNlIHRoZSB0aGUgdmFsdWUgb2YgdGhlIHNlbGVjdCBhbmQgdGhlIG9wdGlvbiB2YWx1ZSBpcyBjaGFuZ2VkIGluIHRoZSBzYW1lIGJhdGNoLlxuICAvLyAgICAgV2UganVzdCByZWNlaXZlIGFuIGF0dHJpYnV0ZSBmcmFtZSBhbmQgaGF2ZSB0byBzZXQgdGhlIHNlbGVjdCB2YWx1ZSBhZnRlcndhcmRzLlxuXG4gIC8vIFdlIGFsc28gZGVmZXIgc2V0dGluZyB0aGUgJ3ZhbHVlJyBwcm9wZXJ0eSBmb3IgPGlucHV0PiBiZWNhdXNlIGNlcnRhaW4gdHlwZXMgb2YgaW5wdXRzIGhhdmVcbiAgLy8gZGVmYXVsdCBhdHRyaWJ1dGUgdmFsdWVzIHRoYXQgbWF5IGluY29ycmVjdGx5IGNvbnN0YWluIHRoZSBzcGVjaWZpZWQgJ3ZhbHVlJy5cbiAgLy8gRm9yIGV4YW1wbGUsIHJhbmdlIGlucHV0cyBoYXZlIGRlZmF1bHQgJ21pbicgYW5kICdtYXgnIGF0dHJpYnV0ZXMgdGhhdCBtYXkgaW5jb3JyZWN0bHlcbiAgLy8gY2xhbXAgdGhlICd2YWx1ZScgcHJvcGVydHkgaWYgaXQgaXMgYXBwbGllZCBiZWZvcmUgY3VzdG9tICdtaW4nIGFuZCAnbWF4JyBhdHRyaWJ1dGVzLlxuXG4gIGlmIChlbGVtZW50IGluc3RhbmNlb2YgSFRNTE9wdGlvbkVsZW1lbnQpIHtcbiAgICAvLyBTaXR1YXRpb24gMVxuICAgIHRyeVNldFNlbGVjdFZhbHVlRnJvbU9wdGlvbkVsZW1lbnQoZWxlbWVudCk7XG4gIH0gZWxzZSBpZiAoZGVmZXJyZWRWYWx1ZVByb3BuYW1lIGluIGVsZW1lbnQpIHtcbiAgICAvLyBTaXR1YXRpb24gMlxuICAgIGNvbnN0IGRlZmVycmVkVmFsdWUgPSBlbGVtZW50W2RlZmVycmVkVmFsdWVQcm9wbmFtZV07XG4gICAgc2V0RGVmZXJyZWRFbGVtZW50VmFsdWUoZWxlbWVudCwgZGVmZXJyZWRWYWx1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdHJ5QXBwbHlDaGVja2VkUHJvcGVydHkoZWxlbWVudDogRWxlbWVudCwgdmFsdWU6IHN0cmluZyB8IG51bGwpIHtcbiAgLy8gQ2VydGFpbiBlbGVtZW50cyBoYXZlIGJ1aWx0LWluIGJlaGF2aW91ciBmb3IgdGhlaXIgJ2NoZWNrZWQnIHByb3BlcnR5XG4gIGlmIChlbGVtZW50LnRhZ05hbWUgPT09ICdJTlBVVCcpIHtcbiAgICAoZWxlbWVudCBhcyBhbnkpLmNoZWNrZWQgPSB2YWx1ZSAhPT0gbnVsbDtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gdHJ5QXBwbHlWYWx1ZVByb3BlcnR5KGVsZW1lbnQ6IEVsZW1lbnQsIHZhbHVlOiBzdHJpbmcgfCBudWxsKTogYm9vbGVhbiB7XG4gIC8vIENlcnRhaW4gZWxlbWVudHMgaGF2ZSBidWlsdC1pbiBiZWhhdmlvdXIgZm9yIHRoZWlyICd2YWx1ZScgcHJvcGVydHlcbiAgaWYgKHZhbHVlICYmIGVsZW1lbnQudGFnTmFtZSA9PT0gJ0lOUFVUJykge1xuICAgIHZhbHVlID0gbm9ybWFsaXplSW5wdXRWYWx1ZSh2YWx1ZSwgZWxlbWVudCk7XG4gIH1cblxuICBzd2l0Y2ggKGVsZW1lbnQudGFnTmFtZSkge1xuICAgIGNhc2UgJ0lOUFVUJzpcbiAgICBjYXNlICdTRUxFQ1QnOlxuICAgIGNhc2UgJ1RFWFRBUkVBJzoge1xuICAgICAgLy8gPHNlbGVjdD4gaXMgc3BlY2lhbCwgaW4gdGhhdCBhbnl0aGluZyB3ZSB3cml0ZSB0byAudmFsdWUgd2lsbCBiZSBsb3N0IGlmIHRoZXJlXG4gICAgICAvLyBpc24ndCB5ZXQgYSBtYXRjaGluZyA8b3B0aW9uPi4gVG8gbWFpbnRhaW4gdGhlIGV4cGVjdGVkIGJlaGF2aW9yIG5vIG1hdHRlciB0aGVcbiAgICAgIC8vIGVsZW1lbnQgaW5zZXJ0aW9uL3VwZGF0ZSBvcmRlciwgcHJlc2VydmUgdGhlIGRlc2lyZWQgdmFsdWUgc2VwYXJhdGVseSBzb1xuICAgICAgLy8gd2UgY2FuIHJlY292ZXIgaXQgd2hlbiBpbnNlcnRpbmcgYW55IG1hdGNoaW5nIDxvcHRpb24+IG9yIGFmdGVyIGluc2VydGluZyBhblxuICAgICAgLy8gZW50aXJlIG1hcmt1cCBibG9jayBvZiBkZXNjZW5kYW50cy5cblxuICAgICAgLy8gV2UgYWxzbyBkZWZlciBzZXR0aW5nIHRoZSAndmFsdWUnIHByb3BlcnR5IGZvciA8aW5wdXQ+IGJlY2F1c2UgY2VydGFpbiB0eXBlcyBvZiBpbnB1dHMgaGF2ZVxuICAgICAgLy8gZGVmYXVsdCBhdHRyaWJ1dGUgdmFsdWVzIHRoYXQgbWF5IGluY29ycmVjdGx5IGNvbnN0YWluIHRoZSBzcGVjaWZpZWQgJ3ZhbHVlJy5cbiAgICAgIC8vIEZvciBleGFtcGxlLCByYW5nZSBpbnB1dHMgaGF2ZSBkZWZhdWx0ICdtaW4nIGFuZCAnbWF4JyBhdHRyaWJ1dGVzIHRoYXQgbWF5IGluY29ycmVjdGx5XG4gICAgICAvLyBjbGFtcCB0aGUgJ3ZhbHVlJyBwcm9wZXJ0eSBpZiBpdCBpcyBhcHBsaWVkIGJlZm9yZSBjdXN0b20gJ21pbicgYW5kICdtYXgnIGF0dHJpYnV0ZXMuXG5cbiAgICAgIGlmICh2YWx1ZSAmJiBlbGVtZW50IGluc3RhbmNlb2YgSFRNTFNlbGVjdEVsZW1lbnQgJiYgaXNNdWx0aXBsZVNlbGVjdEVsZW1lbnQoZWxlbWVudCkpIHtcbiAgICAgICAgdmFsdWUgPSBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgc2V0RGVmZXJyZWRFbGVtZW50VmFsdWUoZWxlbWVudCwgdmFsdWUpO1xuICAgICAgZWxlbWVudFtkZWZlcnJlZFZhbHVlUHJvcG5hbWVdID0gdmFsdWU7XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjYXNlICdPUFRJT04nOiB7XG4gICAgICBpZiAodmFsdWUgfHwgdmFsdWUgPT09ICcnKSB7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCd2YWx1ZScsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCd2YWx1ZScpO1xuICAgICAgfVxuXG4gICAgICAvLyBTZWUgYWJvdmUgZm9yIHdoeSB3ZSBoYXZlIHRoaXMgc3BlY2lhbCBoYW5kbGluZyBmb3IgPHNlbGVjdD4vPG9wdGlvbj5cbiAgICAgIC8vIFNpdHVhdGlvbiAzXG4gICAgICB0cnlTZXRTZWxlY3RWYWx1ZUZyb21PcHRpb25FbGVtZW50KDxIVE1MT3B0aW9uRWxlbWVudD5lbGVtZW50KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUlucHV0VmFsdWUodmFsdWU6IHN0cmluZywgZWxlbWVudDogRWxlbWVudCk6IHN0cmluZyB7XG4gIC8vIFRpbWUgaW5wdXRzIChlLmcuICd0aW1lJyBhbmQgJ2RhdGV0aW1lLWxvY2FsJykgbWlzYmVoYXZlIG9uIGNocm9taXVtLWJhc2VkXG4gIC8vIGJyb3dzZXJzIHdoZW4gYSB0aW1lIGlzIHNldCB0aGF0IGluY2x1ZGVzIGEgc2Vjb25kcyB2YWx1ZSBvZiAnMDAnLCBtb3N0IG5vdGFibHlcbiAgLy8gd2hlbiBlbnRlcmVkIGZyb20ga2V5Ym9hcmQgaW5wdXQuIFRoaXMgYmVoYXZpb3IgaXMgbm90IGxpbWl0ZWQgdG8gc3BlY2lmaWNcbiAgLy8gJ3N0ZXAnIGF0dHJpYnV0ZSB2YWx1ZXMsIHNvIHdlIGFsd2F5cyByZW1vdmUgdGhlIHRyYWlsaW5nIHNlY29uZHMgdmFsdWUgaWYgdGhlXG4gIC8vIHRpbWUgZW5kcyBpbiAnMDAnLlxuICAvLyBTaW1pbGFybHksIGlmIGEgdGltZS1yZWxhdGVkIGVsZW1lbnQgZG9lc24ndCBoYXZlIGFueSAnc3RlcCcgYXR0cmlidXRlLCBicm93c2Vyc1xuICAvLyB0cmVhdCB0aGlzIGFzIFwicm91bmQgdG8gd2hvbGUgbnVtYmVyIG9mIG1pbnV0ZXNcIiBtYWtpbmcgaXQgaW52YWxpZCB0byBwYXNzIGFueVxuICAvLyAnc2Vjb25kcycgdmFsdWUsIHNvIGluIHRoYXQgY2FzZSB3ZSBzdHJpcCBvZmYgdGhlICdzZWNvbmRzJyBwYXJ0IG9mIHRoZSB2YWx1ZS5cblxuICBzd2l0Y2ggKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0eXBlJykpIHtcbiAgICBjYXNlICd0aW1lJzpcbiAgICAgIHJldHVybiB2YWx1ZS5sZW5ndGggPT09IDggJiYgKHZhbHVlLmVuZHNXaXRoKCcwMCcpIHx8ICFlbGVtZW50Lmhhc0F0dHJpYnV0ZSgnc3RlcCcpKVxuICAgICAgICA/IHZhbHVlLnN1YnN0cmluZygwLCA1KVxuICAgICAgICA6IHZhbHVlO1xuICAgIGNhc2UgJ2RhdGV0aW1lLWxvY2FsJzpcbiAgICAgIHJldHVybiB2YWx1ZS5sZW5ndGggPT09IDE5ICYmICh2YWx1ZS5lbmRzV2l0aCgnMDAnKSB8fCAhZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ3N0ZXAnKSlcbiAgICAgICAgPyB2YWx1ZS5zdWJzdHJpbmcoMCwgMTYpXG4gICAgICAgIDogdmFsdWU7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc011bHRpcGxlU2VsZWN0RWxlbWVudChlbGVtZW50OiBIVE1MU2VsZWN0RWxlbWVudCkge1xuICByZXR1cm4gZWxlbWVudC50eXBlID09PSAnc2VsZWN0LW11bHRpcGxlJztcbn1cblxudHlwZSBCbGF6b3JIdG1sU2VsZWN0RWxlbWVudCA9IEhUTUxTZWxlY3RFbGVtZW50ICYgeyBfYmxhem9yRGVmZXJyZWRWYWx1ZT86IHN0cmluZyB9O1xuXG5mdW5jdGlvbiBzZXRTaW5nbGVTZWxlY3RFbGVtZW50VmFsdWUoZWxlbWVudDogSFRNTFNlbGVjdEVsZW1lbnQsIHZhbHVlOiBzdHJpbmcgfCBudWxsKSB7XG4gIC8vIFRoZXJlJ3Mgbm8gc2Vuc2libGUgd2F5IHRvIHJlcHJlc2VudCBhIHNlbGVjdCBvcHRpb24gd2l0aCB2YWx1ZSAnbnVsbCcsIGJlY2F1c2VcbiAgLy8gKDEpIEhUTUwgYXR0cmlidXRlcyBjYW4ndCBoYXZlIG51bGwgdmFsdWVzIC0gdGhlIGNsb3Nlc3QgZXF1aXZhbGVudCBpcyBhYnNlbmNlIG9mIHRoZSBhdHRyaWJ1dGVcbiAgLy8gKDIpIFdoZW4gcGlja2luZyBhbiA8b3B0aW9uPiB3aXRoIG5vICd2YWx1ZScgYXR0cmlidXRlLCB0aGUgYnJvd3NlciB0cmVhdHMgdGhlIHZhbHVlIGFzIGJlaW5nIHRoZVxuICAvLyAgICAgKnRleHQgY29udGVudCogb24gdGhhdCA8b3B0aW9uPiBlbGVtZW50LiBUcnlpbmcgdG8gc3VwcHJlc3MgdGhhdCBkZWZhdWx0IGJlaGF2aW9yIHdvdWxkIGludm9sdmVcbiAgLy8gICAgIGEgbG9uZyBjaGFpbiBvZiBzcGVjaWFsLWNhc2UgaGFja3MsIGFzIHdlbGwgYXMgYmVpbmcgYnJlYWtpbmcgdnMgMy54LlxuICAvLyBTbywgdGhlIG1vc3QgcGxhdXNpYmxlICdudWxsJyBlcXVpdmFsZW50IGlzIGFuIGVtcHR5IHN0cmluZy4gSXQncyB1bmZvcnR1bmF0ZSB0aGF0IHBlb3BsZSBjYW4ndFxuICAvLyB3cml0ZSA8b3B0aW9uIHZhbHVlPUBzb21lTnVsbFZhcmlhYmxlPiwgYW5kIHRoYXQgd2UgY2FuIG5ldmVyIGRpc3Rpbmd1aXNoIGJldHdlZW4gbnVsbCBhbmQgZW1wdHlcbiAgLy8gc3RyaW5nIGluIGEgYm91bmQgPHNlbGVjdD4sIGJ1dCB0aGF0J3MgYSBsaW1pdCBpbiB0aGUgcmVwcmVzZW50YXRpb25hbCBwb3dlciBvZiBIVE1MLlxuICBlbGVtZW50LnZhbHVlID0gdmFsdWUgfHwgJyc7XG59XG5cbmZ1bmN0aW9uIHNldE11bHRpcGxlU2VsZWN0RWxlbWVudFZhbHVlKGVsZW1lbnQ6IEhUTUxTZWxlY3RFbGVtZW50LCB2YWx1ZTogc3RyaW5nW10gfCBudWxsKSB7XG4gIHZhbHVlIHx8PSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtZW50Lm9wdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICBlbGVtZW50Lm9wdGlvbnNbaV0uc2VsZWN0ZWQgPSB2YWx1ZS5pbmRleE9mKGVsZW1lbnQub3B0aW9uc1tpXS52YWx1ZSkgIT09IC0xO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNldERlZmVycmVkRWxlbWVudFZhbHVlKGVsZW1lbnQ6IEVsZW1lbnQsIHZhbHVlOiBhbnkpIHtcbiAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MU2VsZWN0RWxlbWVudCkge1xuICAgIGlmIChpc011bHRpcGxlU2VsZWN0RWxlbWVudChlbGVtZW50KSkge1xuICAgICAgc2V0TXVsdGlwbGVTZWxlY3RFbGVtZW50VmFsdWUoZWxlbWVudCwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRTaW5nbGVTZWxlY3RFbGVtZW50VmFsdWUoZWxlbWVudCwgdmFsdWUpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAoZWxlbWVudCBhcyBhbnkpLnZhbHVlID0gdmFsdWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gdHJ5U2V0U2VsZWN0VmFsdWVGcm9tT3B0aW9uRWxlbWVudChvcHRpb25FbGVtZW50OiBIVE1MT3B0aW9uRWxlbWVudCkge1xuICBjb25zdCBzZWxlY3RFbGVtID0gZmluZENsb3Nlc3RBbmNlc3RvclNlbGVjdEVsZW1lbnQob3B0aW9uRWxlbWVudCk7XG5cbiAgaWYgKCFpc0JsYXpvclNlbGVjdEVsZW1lbnQoc2VsZWN0RWxlbSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoaXNNdWx0aXBsZVNlbGVjdEVsZW1lbnQoc2VsZWN0RWxlbSkpIHtcbiAgICBvcHRpb25FbGVtZW50LnNlbGVjdGVkID0gc2VsZWN0RWxlbS5fYmxhem9yRGVmZXJyZWRWYWx1ZSEuaW5kZXhPZihvcHRpb25FbGVtZW50LnZhbHVlKSAhPT0gLTE7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHNlbGVjdEVsZW0uX2JsYXpvckRlZmVycmVkVmFsdWUgIT09IG9wdGlvbkVsZW1lbnQudmFsdWUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBzZXRTaW5nbGVTZWxlY3RFbGVtZW50VmFsdWUoc2VsZWN0RWxlbSwgb3B0aW9uRWxlbWVudC52YWx1ZSk7XG4gICAgZGVsZXRlIHNlbGVjdEVsZW0uX2JsYXpvckRlZmVycmVkVmFsdWU7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcblxuICBmdW5jdGlvbiBpc0JsYXpvclNlbGVjdEVsZW1lbnQoc2VsZWN0RWxlbTogSFRNTFNlbGVjdEVsZW1lbnQgfCBudWxsKSA6IHNlbGVjdEVsZW0gaXMgQmxhem9ySHRtbFNlbGVjdEVsZW1lbnQge1xuICAgIHJldHVybiAhIXNlbGVjdEVsZW0gJiYgKGRlZmVycmVkVmFsdWVQcm9wbmFtZSBpbiBzZWxlY3RFbGVtKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmaW5kQ2xvc2VzdEFuY2VzdG9yU2VsZWN0RWxlbWVudChlbGVtZW50OiBFbGVtZW50IHwgbnVsbCkge1xuICB3aGlsZSAoZWxlbWVudCkge1xuICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgSFRNTFNlbGVjdEVsZW1lbnQpIHtcbiAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuIiwiLy8gTGljZW5zZWQgdG8gdGhlIC5ORVQgRm91bmRhdGlvbiB1bmRlciBvbmUgb3IgbW9yZSBhZ3JlZW1lbnRzLlxuLy8gVGhlIC5ORVQgRm91bmRhdGlvbiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxuaW1wb3J0IHsgUmVuZGVyQmF0Y2gsIEFycmF5QnVpbGRlclNlZ21lbnQsIFJlbmRlclRyZWVFZGl0LCBSZW5kZXJUcmVlRnJhbWUsIEVkaXRUeXBlLCBGcmFtZVR5cGUsIEFycmF5VmFsdWVzIH0gZnJvbSAnLi9SZW5kZXJCYXRjaC9SZW5kZXJCYXRjaCc7XG5pbXBvcnQgeyBFdmVudERlbGVnYXRvciB9IGZyb20gJy4vRXZlbnRzL0V2ZW50RGVsZWdhdG9yJztcbmltcG9ydCB7IExvZ2ljYWxFbGVtZW50LCBQZXJtdXRhdGlvbkxpc3RFbnRyeSwgdG9Mb2dpY2FsRWxlbWVudCwgaW5zZXJ0TG9naWNhbENoaWxkLCByZW1vdmVMb2dpY2FsQ2hpbGQsIGdldExvZ2ljYWxQYXJlbnQsIGdldExvZ2ljYWxDaGlsZCwgY3JlYXRlQW5kSW5zZXJ0TG9naWNhbENvbnRhaW5lciwgaXNTdmdFbGVtZW50LCBwZXJtdXRlTG9naWNhbENoaWxkcmVuLCBnZXRDbG9zZXN0RG9tRWxlbWVudCwgZW1wdHlMb2dpY2FsRWxlbWVudCwgZ2V0TG9naWNhbENoaWxkcmVuQXJyYXksIGRlcHRoRmlyc3ROb2RlVHJlZVRyYXZlcnNhbCB9IGZyb20gJy4vTG9naWNhbEVsZW1lbnRzJztcbmltcG9ydCB7IGFwcGx5Q2FwdHVyZUlkVG9FbGVtZW50IH0gZnJvbSAnLi9FbGVtZW50UmVmZXJlbmNlQ2FwdHVyZSc7XG5pbXBvcnQgeyBhdHRhY2hUb0V2ZW50RGVsZWdhdG9yIGFzIGF0dGFjaE5hdmlnYXRpb25NYW5hZ2VyVG9FdmVudERlbGVnYXRvciB9IGZyb20gJy4uL1NlcnZpY2VzL05hdmlnYXRpb25NYW5hZ2VyJztcbmltcG9ydCB7IGFwcGx5QW55RGVmZXJyZWRWYWx1ZSwgdHJ5QXBwbHlTcGVjaWFsUHJvcGVydHkgfSBmcm9tICcuL0RvbVNwZWNpYWxQcm9wZXJ0eVV0aWwnO1xuY29uc3Qgc2hhcmVkVGVtcGxhdGVFbGVtRm9yUGFyc2luZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG5jb25zdCBzaGFyZWRTdmdFbGVtRm9yUGFyc2luZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnZycpO1xuY29uc3QgZWxlbWVudHNUb0NsZWFyT25Sb290Q29tcG9uZW50UmVuZGVyID0gbmV3IFNldDxMb2dpY2FsRWxlbWVudD4oKTtcbmNvbnN0IGludGVybmFsQXR0cmlidXRlTmFtZVByZWZpeCA9ICdfX2ludGVybmFsXyc7XG5jb25zdCBldmVudFByZXZlbnREZWZhdWx0QXR0cmlidXRlTmFtZVByZWZpeCA9ICdwcmV2ZW50RGVmYXVsdF8nO1xuY29uc3QgZXZlbnRTdG9wUHJvcGFnYXRpb25BdHRyaWJ1dGVOYW1lUHJlZml4ID0gJ3N0b3BQcm9wYWdhdGlvbl8nO1xuY29uc3QgaW50ZXJhY3RpdmVSb290Q29tcG9uZW50UHJvcG5hbWUgPSBTeW1ib2woKTtcbmNvbnN0IHByZXNlcnZlQ29udGVudE9uRGlzcG9zYWxQcm9wbmFtZSA9IFN5bWJvbCgpO1xuXG5leHBvcnQgY2xhc3MgQnJvd3NlclJlbmRlcmVyIHtcbiAgcHVibGljIGV2ZW50RGVsZWdhdG9yOiBFdmVudERlbGVnYXRvcjtcblxuICBwcml2YXRlIHJvb3RDb21wb25lbnRJZHMgPSBuZXcgU2V0PG51bWJlcj4oKTtcblxuICBwcml2YXRlIGNoaWxkQ29tcG9uZW50TG9jYXRpb25zOiB7IFtjb21wb25lbnRJZDogbnVtYmVyXTogTG9naWNhbEVsZW1lbnQgfSA9IHt9O1xuXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvcihicm93c2VyUmVuZGVyZXJJZDogbnVtYmVyKSB7XG4gICAgdGhpcy5ldmVudERlbGVnYXRvciA9IG5ldyBFdmVudERlbGVnYXRvcihicm93c2VyUmVuZGVyZXJJZCk7XG5cbiAgICAvLyBXZSBkb24ndCB5ZXQga25vdyB3aGV0aGVyIG9yIG5vdCBuYXZpZ2F0aW9uIGludGVyY2VwdGlvbiB3aWxsIGJlIGVuYWJsZWQsIGJ1dCBpbiBjYXNlIGl0IHdpbGwgYmUsXG4gICAgLy8gd2Ugd2lyZSB1cCB0aGUgbmF2aWdhdGlvbiBtYW5hZ2VyIHRvIHRoZSBldmVudCBkZWxlZ2F0b3Igc28gaXQgaGFzIHRoZSBvcHRpb24gdG8gcGFydGljaXBhdGVcbiAgICAvLyBpbiB0aGUgc3ludGhldGljIGV2ZW50IGJ1YmJsaW5nIHByb2Nlc3MgbGF0ZXJcbiAgICBhdHRhY2hOYXZpZ2F0aW9uTWFuYWdlclRvRXZlbnREZWxlZ2F0b3IodGhpcy5ldmVudERlbGVnYXRvcik7XG4gIH1cblxuICBwdWJsaWMgZ2V0Um9vdENvbXBvbmVudENvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMucm9vdENvbXBvbmVudElkcy5zaXplO1xuICB9XG5cbiAgcHVibGljIGF0dGFjaFJvb3RDb21wb25lbnRUb0xvZ2ljYWxFbGVtZW50KGNvbXBvbmVudElkOiBudW1iZXIsIGVsZW1lbnQ6IExvZ2ljYWxFbGVtZW50LCBhcHBlbmRDb250ZW50OiBib29sZWFuKTogdm9pZCB7XG4gICAgaWYgKGlzSW50ZXJhY3RpdmVSb290Q29tcG9uZW50RWxlbWVudChlbGVtZW50KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBSb290IGNvbXBvbmVudCAnJHtjb21wb25lbnRJZH0nIGNvdWxkIG5vdCBiZSBhdHRhY2hlZCBiZWNhdXNlIGl0cyB0YXJnZXQgZWxlbWVudCBpcyBhbHJlYWR5IGFzc29jaWF0ZWQgd2l0aCBhIHJvb3QgY29tcG9uZW50YCk7XG4gICAgfVxuXG4gICAgLy8gSWYgd2Ugd2FudCB0byBhcHBlbmQgY29udGVudCB0byB0aGUgZW5kIG9mIHRoZSBlbGVtZW50LCB3ZSBjcmVhdGUgYSBuZXcgbG9naWNhbCBjaGlsZCBjb250YWluZXJcbiAgICAvLyBhdCB0aGUgZW5kIG9mIHRoZSBlbGVtZW50IGFuZCB0cmVhdCB0aGF0IGFzIHRoZSBuZXcgcGFyZW50LlxuICAgIGlmIChhcHBlbmRDb250ZW50KSB7XG4gICAgICBjb25zdCBpbmRleEFmdGVyTGFzdENoaWxkID0gZ2V0TG9naWNhbENoaWxkcmVuQXJyYXkoZWxlbWVudCkubGVuZ3RoO1xuICAgICAgZWxlbWVudCA9IGNyZWF0ZUFuZEluc2VydExvZ2ljYWxDb250YWluZXIoZWxlbWVudCwgaW5kZXhBZnRlckxhc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgbWFya0FzSW50ZXJhY3RpdmVSb290Q29tcG9uZW50RWxlbWVudChlbGVtZW50LCB0cnVlKTtcbiAgICB0aGlzLmF0dGFjaENvbXBvbmVudFRvRWxlbWVudChjb21wb25lbnRJZCwgZWxlbWVudCk7XG4gICAgdGhpcy5yb290Q29tcG9uZW50SWRzLmFkZChjb21wb25lbnRJZCk7XG5cbiAgICBlbGVtZW50c1RvQ2xlYXJPblJvb3RDb21wb25lbnRSZW5kZXIuYWRkKGVsZW1lbnQpO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZUNvbXBvbmVudChiYXRjaDogUmVuZGVyQmF0Y2gsIGNvbXBvbmVudElkOiBudW1iZXIsIGVkaXRzOiBBcnJheUJ1aWxkZXJTZWdtZW50PFJlbmRlclRyZWVFZGl0PiwgcmVmZXJlbmNlRnJhbWVzOiBBcnJheVZhbHVlczxSZW5kZXJUcmVlRnJhbWU+KTogdm9pZCB7XG4gICAgY29uc3QgZWxlbWVudCA9IHRoaXMuY2hpbGRDb21wb25lbnRMb2NhdGlvbnNbY29tcG9uZW50SWRdO1xuICAgIGlmICghZWxlbWVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBlbGVtZW50IGlzIGN1cnJlbnRseSBhc3NvY2lhdGVkIHdpdGggY29tcG9uZW50ICR7Y29tcG9uZW50SWR9YCk7XG4gICAgfVxuXG4gICAgLy8gT24gdGhlIGZpcnN0IHJlbmRlciBmb3IgZWFjaCByb290IGNvbXBvbmVudCwgY2xlYXIgYW55IGV4aXN0aW5nIGNvbnRlbnQgKGUuZy4sIHByZXJlbmRlcmVkKVxuICAgIGlmIChlbGVtZW50c1RvQ2xlYXJPblJvb3RDb21wb25lbnRSZW5kZXIuZGVsZXRlKGVsZW1lbnQpKSB7XG4gICAgICB0aGlzLmRldGFjaEV2ZW50SGFuZGxlcnNGcm9tRWxlbWVudChlbGVtZW50KTtcbiAgICAgIGVtcHR5TG9naWNhbEVsZW1lbnQoZWxlbWVudCk7XG5cbiAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgQ29tbWVudCkge1xuICAgICAgICAvLyBXZSBzYW5pdGl6ZSBzdGFydCBjb21tZW50cyBieSByZW1vdmluZyBhbGwgdGhlIGluZm9ybWF0aW9uIGZyb20gaXQgbm93IHRoYXQgd2UgZG9uJ3QgbmVlZCBpdCBhbnltb3JlXG4gICAgICAgIC8vIGFzIGl0IGFkZHMgbm9pc2UgdG8gdGhlIERPTS5cbiAgICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9ICchJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBvd25lckRvY3VtZW50ID0gZ2V0Q2xvc2VzdERvbUVsZW1lbnQoZWxlbWVudCk/LmdldFJvb3ROb2RlKCkgYXMgRG9jdW1lbnQ7XG4gICAgY29uc3QgYWN0aXZlRWxlbWVudEJlZm9yZSA9IG93bmVyRG9jdW1lbnQgJiYgb3duZXJEb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuXG4gICAgdGhpcy5hcHBseUVkaXRzKGJhdGNoLCBjb21wb25lbnRJZCwgZWxlbWVudCwgMCwgZWRpdHMsIHJlZmVyZW5jZUZyYW1lcyk7XG5cbiAgICAvLyBUcnkgdG8gcmVzdG9yZSBmb2N1cyBpbiBjYXNlIGl0IHdhcyBsb3N0IGR1ZSB0byBhbiBlbGVtZW50IG1vdmVcbiAgICBpZiAoKGFjdGl2ZUVsZW1lbnRCZWZvcmUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkgJiYgb3duZXJEb2N1bWVudCAmJiBvd25lckRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IGFjdGl2ZUVsZW1lbnRCZWZvcmUpIHtcbiAgICAgIGFjdGl2ZUVsZW1lbnRCZWZvcmUuZm9jdXMoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZUNvbXBvbmVudChjb21wb25lbnRJZDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucm9vdENvbXBvbmVudElkcy5kZWxldGUoY29tcG9uZW50SWQpKSB7XG4gICAgICAvLyBXaGVuIGRpc3Bvc2luZyBhIHJvb3QgY29tcG9uZW50LCB0aGUgY29udGFpbmVyIGVsZW1lbnQgd29uJ3QgYmUgcmVtb3ZlZCBmcm9tIHRoZSBET00gKGJlY2F1c2UgdGhlcmUnc1xuICAgICAgLy8gbm8gcGFyZW50IHRvIHJlbW92ZSB0aGF0IGNoaWxkKSwgc28gd2UgZW1wdHkgaXQgdG8gcmVzdG9yZSBpdCB0byB0aGUgc3RhdGUgaXQgd2FzIGluIGJlZm9yZSB0aGUgcm9vdFxuICAgICAgLy8gY29tcG9uZW50IHdhcyBhZGRlZC5cbiAgICAgIGNvbnN0IGxvZ2ljYWxFbGVtZW50ID0gdGhpcy5jaGlsZENvbXBvbmVudExvY2F0aW9uc1tjb21wb25lbnRJZF07XG4gICAgICBtYXJrQXNJbnRlcmFjdGl2ZVJvb3RDb21wb25lbnRFbGVtZW50KGxvZ2ljYWxFbGVtZW50LCBmYWxzZSk7XG5cbiAgICAgIGlmIChzaG91bGRQcmVzZXJ2ZUNvbnRlbnRPbkludGVyYWN0aXZlQ29tcG9uZW50RGlzcG9zYWwobG9naWNhbEVsZW1lbnQpKSB7XG4gICAgICAgIGVsZW1lbnRzVG9DbGVhck9uUm9vdENvbXBvbmVudFJlbmRlci5hZGQobG9naWNhbEVsZW1lbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZW1wdHlMb2dpY2FsRWxlbWVudChsb2dpY2FsRWxlbWVudCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZGVsZXRlIHRoaXMuY2hpbGRDb21wb25lbnRMb2NhdGlvbnNbY29tcG9uZW50SWRdO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2VFdmVudEhhbmRsZXIoZXZlbnRIYW5kbGVySWQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuZXZlbnREZWxlZ2F0b3IucmVtb3ZlTGlzdGVuZXIoZXZlbnRIYW5kbGVySWQpO1xuICB9XG5cbiAgcHJpdmF0ZSBhdHRhY2hDb21wb25lbnRUb0VsZW1lbnQoY29tcG9uZW50SWQ6IG51bWJlciwgZWxlbWVudDogTG9naWNhbEVsZW1lbnQpIHtcbiAgICB0aGlzLmNoaWxkQ29tcG9uZW50TG9jYXRpb25zW2NvbXBvbmVudElkXSA9IGVsZW1lbnQ7XG4gIH1cblxuICBwcml2YXRlIGRldGFjaEV2ZW50SGFuZGxlcnNGcm9tRWxlbWVudChlbGVtZW50OiBMb2dpY2FsRWxlbWVudCk6IHZvaWQge1xuICAgIGZvciAoY29uc3QgY2hpbGROb2RlIG9mIGRlcHRoRmlyc3ROb2RlVHJlZVRyYXZlcnNhbChlbGVtZW50KSkge1xuICAgICAgaWYgKGNoaWxkTm9kZSBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5ldmVudERlbGVnYXRvci5yZW1vdmVMaXN0ZW5lcnNGb3JFbGVtZW50KGNoaWxkTm9kZSBhcyBFbGVtZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFwcGx5RWRpdHMoYmF0Y2g6IFJlbmRlckJhdGNoLCBjb21wb25lbnRJZDogbnVtYmVyLCBwYXJlbnQ6IExvZ2ljYWxFbGVtZW50LCBjaGlsZEluZGV4OiBudW1iZXIsIGVkaXRzOiBBcnJheUJ1aWxkZXJTZWdtZW50PFJlbmRlclRyZWVFZGl0PiwgcmVmZXJlbmNlRnJhbWVzOiBBcnJheVZhbHVlczxSZW5kZXJUcmVlRnJhbWU+KSB7XG4gICAgbGV0IGN1cnJlbnREZXB0aCA9IDA7XG4gICAgbGV0IGNoaWxkSW5kZXhBdEN1cnJlbnREZXB0aCA9IGNoaWxkSW5kZXg7XG4gICAgbGV0IHBlcm11dGF0aW9uTGlzdDogUGVybXV0YXRpb25MaXN0RW50cnlbXSB8IHVuZGVmaW5lZDtcblxuICAgIGNvbnN0IGFycmF5QnVpbGRlclNlZ21lbnRSZWFkZXIgPSBiYXRjaC5hcnJheUJ1aWxkZXJTZWdtZW50UmVhZGVyO1xuICAgIGNvbnN0IGVkaXRSZWFkZXIgPSBiYXRjaC5lZGl0UmVhZGVyO1xuICAgIGNvbnN0IGZyYW1lUmVhZGVyID0gYmF0Y2guZnJhbWVSZWFkZXI7XG4gICAgY29uc3QgZWRpdHNWYWx1ZXMgPSBhcnJheUJ1aWxkZXJTZWdtZW50UmVhZGVyLnZhbHVlcyhlZGl0cyk7XG4gICAgY29uc3QgZWRpdHNPZmZzZXQgPSBhcnJheUJ1aWxkZXJTZWdtZW50UmVhZGVyLm9mZnNldChlZGl0cyk7XG4gICAgY29uc3QgZWRpdHNMZW5ndGggPSBhcnJheUJ1aWxkZXJTZWdtZW50UmVhZGVyLmNvdW50KGVkaXRzKTtcbiAgICBjb25zdCBtYXhFZGl0SW5kZXhFeGNsID0gZWRpdHNPZmZzZXQgKyBlZGl0c0xlbmd0aDtcblxuICAgIGZvciAobGV0IGVkaXRJbmRleCA9IGVkaXRzT2Zmc2V0OyBlZGl0SW5kZXggPCBtYXhFZGl0SW5kZXhFeGNsOyBlZGl0SW5kZXgrKykge1xuICAgICAgY29uc3QgZWRpdCA9IGJhdGNoLmRpZmZSZWFkZXIuZWRpdHNFbnRyeShlZGl0c1ZhbHVlcywgZWRpdEluZGV4KTtcbiAgICAgIGNvbnN0IGVkaXRUeXBlID0gZWRpdFJlYWRlci5lZGl0VHlwZShlZGl0KTtcbiAgICAgIHN3aXRjaCAoZWRpdFR5cGUpIHtcbiAgICAgICAgY2FzZSBFZGl0VHlwZS5wcmVwZW5kRnJhbWU6IHtcbiAgICAgICAgICBjb25zdCBmcmFtZUluZGV4ID0gZWRpdFJlYWRlci5uZXdUcmVlSW5kZXgoZWRpdCk7XG4gICAgICAgICAgY29uc3QgZnJhbWUgPSBiYXRjaC5yZWZlcmVuY2VGcmFtZXNFbnRyeShyZWZlcmVuY2VGcmFtZXMsIGZyYW1lSW5kZXgpO1xuICAgICAgICAgIGNvbnN0IHNpYmxpbmdJbmRleCA9IGVkaXRSZWFkZXIuc2libGluZ0luZGV4KGVkaXQpO1xuICAgICAgICAgIHRoaXMuaW5zZXJ0RnJhbWUoYmF0Y2gsIGNvbXBvbmVudElkLCBwYXJlbnQsIGNoaWxkSW5kZXhBdEN1cnJlbnREZXB0aCArIHNpYmxpbmdJbmRleCwgcmVmZXJlbmNlRnJhbWVzLCBmcmFtZSwgZnJhbWVJbmRleCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBFZGl0VHlwZS5yZW1vdmVGcmFtZToge1xuICAgICAgICAgIGNvbnN0IHNpYmxpbmdJbmRleCA9IGVkaXRSZWFkZXIuc2libGluZ0luZGV4KGVkaXQpO1xuICAgICAgICAgIHJlbW92ZUxvZ2ljYWxDaGlsZChwYXJlbnQsIGNoaWxkSW5kZXhBdEN1cnJlbnREZXB0aCArIHNpYmxpbmdJbmRleCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBFZGl0VHlwZS5zZXRBdHRyaWJ1dGU6IHtcbiAgICAgICAgICBjb25zdCBmcmFtZUluZGV4ID0gZWRpdFJlYWRlci5uZXdUcmVlSW5kZXgoZWRpdCk7XG4gICAgICAgICAgY29uc3QgZnJhbWUgPSBiYXRjaC5yZWZlcmVuY2VGcmFtZXNFbnRyeShyZWZlcmVuY2VGcmFtZXMsIGZyYW1lSW5kZXgpO1xuICAgICAgICAgIGNvbnN0IHNpYmxpbmdJbmRleCA9IGVkaXRSZWFkZXIuc2libGluZ0luZGV4KGVkaXQpO1xuICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBnZXRMb2dpY2FsQ2hpbGQocGFyZW50LCBjaGlsZEluZGV4QXRDdXJyZW50RGVwdGggKyBzaWJsaW5nSW5kZXgpO1xuICAgICAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5hcHBseUF0dHJpYnV0ZShiYXRjaCwgY29tcG9uZW50SWQsIGVsZW1lbnQsIGZyYW1lKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3Qgc2V0IGF0dHJpYnV0ZSBvbiBub24tZWxlbWVudCBjaGlsZCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEVkaXRUeXBlLnJlbW92ZUF0dHJpYnV0ZToge1xuICAgICAgICAgIC8vIE5vdGUgdGhhdCB3ZSBkb24ndCBoYXZlIHRvIGRpc3Bvc2UgdGhlIGluZm8gd2UgdHJhY2sgYWJvdXQgZXZlbnQgaGFuZGxlcnMgaGVyZSwgYmVjYXVzZSB0aGVcbiAgICAgICAgICAvLyBkaXNwb3NlZCBldmVudCBoYW5kbGVyIElEcyBhcmUgZGVsaXZlcmVkIHNlcGFyYXRlbHkgKGluIHRoZSAnZGlzcG9zZWRFdmVudEhhbmRsZXJJZHMnIGFycmF5KVxuICAgICAgICAgIGNvbnN0IHNpYmxpbmdJbmRleCA9IGVkaXRSZWFkZXIuc2libGluZ0luZGV4KGVkaXQpO1xuICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBnZXRMb2dpY2FsQ2hpbGQocGFyZW50LCBjaGlsZEluZGV4QXRDdXJyZW50RGVwdGggKyBzaWJsaW5nSW5kZXgpO1xuICAgICAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlTmFtZSA9IGVkaXRSZWFkZXIucmVtb3ZlZEF0dHJpYnV0ZU5hbWUoZWRpdCkhO1xuICAgICAgICAgICAgdGhpcy5zZXRPclJlbW92ZUF0dHJpYnV0ZU9yUHJvcGVydHkoZWxlbWVudCwgYXR0cmlidXRlTmFtZSwgbnVsbCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHJlbW92ZSBhdHRyaWJ1dGUgZnJvbSBub24tZWxlbWVudCBjaGlsZCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEVkaXRUeXBlLnVwZGF0ZVRleHQ6IHtcbiAgICAgICAgICBjb25zdCBmcmFtZUluZGV4ID0gZWRpdFJlYWRlci5uZXdUcmVlSW5kZXgoZWRpdCk7XG4gICAgICAgICAgY29uc3QgZnJhbWUgPSBiYXRjaC5yZWZlcmVuY2VGcmFtZXNFbnRyeShyZWZlcmVuY2VGcmFtZXMsIGZyYW1lSW5kZXgpO1xuICAgICAgICAgIGNvbnN0IHNpYmxpbmdJbmRleCA9IGVkaXRSZWFkZXIuc2libGluZ0luZGV4KGVkaXQpO1xuICAgICAgICAgIGNvbnN0IHRleHROb2RlID0gZ2V0TG9naWNhbENoaWxkKHBhcmVudCwgY2hpbGRJbmRleEF0Q3VycmVudERlcHRoICsgc2libGluZ0luZGV4KTtcbiAgICAgICAgICBpZiAodGV4dE5vZGUgaW5zdGFuY2VvZiBUZXh0KSB7XG4gICAgICAgICAgICB0ZXh0Tm9kZS50ZXh0Q29udGVudCA9IGZyYW1lUmVhZGVyLnRleHRDb250ZW50KGZyYW1lKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3Qgc2V0IHRleHQgY29udGVudCBvbiBub24tdGV4dCBjaGlsZCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEVkaXRUeXBlLnVwZGF0ZU1hcmt1cDoge1xuICAgICAgICAgIGNvbnN0IGZyYW1lSW5kZXggPSBlZGl0UmVhZGVyLm5ld1RyZWVJbmRleChlZGl0KTtcbiAgICAgICAgICBjb25zdCBmcmFtZSA9IGJhdGNoLnJlZmVyZW5jZUZyYW1lc0VudHJ5KHJlZmVyZW5jZUZyYW1lcywgZnJhbWVJbmRleCk7XG4gICAgICAgICAgY29uc3Qgc2libGluZ0luZGV4ID0gZWRpdFJlYWRlci5zaWJsaW5nSW5kZXgoZWRpdCk7XG4gICAgICAgICAgcmVtb3ZlTG9naWNhbENoaWxkKHBhcmVudCwgY2hpbGRJbmRleEF0Q3VycmVudERlcHRoICsgc2libGluZ0luZGV4KTtcbiAgICAgICAgICB0aGlzLmluc2VydE1hcmt1cChiYXRjaCwgcGFyZW50LCBjaGlsZEluZGV4QXRDdXJyZW50RGVwdGggKyBzaWJsaW5nSW5kZXgsIGZyYW1lKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEVkaXRUeXBlLnN0ZXBJbjoge1xuICAgICAgICAgIGNvbnN0IHNpYmxpbmdJbmRleCA9IGVkaXRSZWFkZXIuc2libGluZ0luZGV4KGVkaXQpO1xuICAgICAgICAgIHBhcmVudCA9IGdldExvZ2ljYWxDaGlsZChwYXJlbnQsIGNoaWxkSW5kZXhBdEN1cnJlbnREZXB0aCArIHNpYmxpbmdJbmRleCk7XG4gICAgICAgICAgY3VycmVudERlcHRoKys7XG4gICAgICAgICAgY2hpbGRJbmRleEF0Q3VycmVudERlcHRoID0gMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEVkaXRUeXBlLnN0ZXBPdXQ6IHtcbiAgICAgICAgICBwYXJlbnQgPSBnZXRMb2dpY2FsUGFyZW50KHBhcmVudCkhO1xuICAgICAgICAgIGN1cnJlbnREZXB0aC0tO1xuICAgICAgICAgIGNoaWxkSW5kZXhBdEN1cnJlbnREZXB0aCA9IGN1cnJlbnREZXB0aCA9PT0gMCA/IGNoaWxkSW5kZXggOiAwOyAvLyBUaGUgY2hpbGRJbmRleCBpcyBvbmx5IGV2ZXIgbm9uemVybyBhdCB6ZXJvIGRlcHRoXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBFZGl0VHlwZS5wZXJtdXRhdGlvbkxpc3RFbnRyeToge1xuICAgICAgICAgIHBlcm11dGF0aW9uTGlzdCA9IHBlcm11dGF0aW9uTGlzdCB8fCBbXTtcbiAgICAgICAgICBwZXJtdXRhdGlvbkxpc3QucHVzaCh7XG4gICAgICAgICAgICBmcm9tU2libGluZ0luZGV4OiBjaGlsZEluZGV4QXRDdXJyZW50RGVwdGggKyBlZGl0UmVhZGVyLnNpYmxpbmdJbmRleChlZGl0KSxcbiAgICAgICAgICAgIHRvU2libGluZ0luZGV4OiBjaGlsZEluZGV4QXRDdXJyZW50RGVwdGggKyBlZGl0UmVhZGVyLm1vdmVUb1NpYmxpbmdJbmRleChlZGl0KSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEVkaXRUeXBlLnBlcm11dGF0aW9uTGlzdEVuZDoge1xuICAgICAgICAgIHBlcm11dGVMb2dpY2FsQ2hpbGRyZW4ocGFyZW50LCBwZXJtdXRhdGlvbkxpc3QhKTtcbiAgICAgICAgICBwZXJtdXRhdGlvbkxpc3QgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgIGNvbnN0IHVua25vd25UeXBlOiBuZXZlciA9IGVkaXRUeXBlOyAvLyBDb21waWxlLXRpbWUgdmVyaWZpY2F0aW9uIHRoYXQgdGhlIHN3aXRjaCB3YXMgZXhoYXVzdGl2ZVxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBlZGl0IHR5cGU6ICR7dW5rbm93blR5cGV9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGluc2VydEZyYW1lKGJhdGNoOiBSZW5kZXJCYXRjaCwgY29tcG9uZW50SWQ6IG51bWJlciwgcGFyZW50OiBMb2dpY2FsRWxlbWVudCwgY2hpbGRJbmRleDogbnVtYmVyLCBmcmFtZXM6IEFycmF5VmFsdWVzPFJlbmRlclRyZWVGcmFtZT4sIGZyYW1lOiBSZW5kZXJUcmVlRnJhbWUsIGZyYW1lSW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgZnJhbWVSZWFkZXIgPSBiYXRjaC5mcmFtZVJlYWRlcjtcbiAgICBjb25zdCBmcmFtZVR5cGUgPSBmcmFtZVJlYWRlci5mcmFtZVR5cGUoZnJhbWUpO1xuICAgIHN3aXRjaCAoZnJhbWVUeXBlKSB7XG4gICAgICBjYXNlIEZyYW1lVHlwZS5lbGVtZW50OlxuICAgICAgICB0aGlzLmluc2VydEVsZW1lbnQoYmF0Y2gsIGNvbXBvbmVudElkLCBwYXJlbnQsIGNoaWxkSW5kZXgsIGZyYW1lcywgZnJhbWUsIGZyYW1lSW5kZXgpO1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIGNhc2UgRnJhbWVUeXBlLnRleHQ6XG4gICAgICAgIHRoaXMuaW5zZXJ0VGV4dChiYXRjaCwgcGFyZW50LCBjaGlsZEluZGV4LCBmcmFtZSk7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgY2FzZSBGcmFtZVR5cGUuYXR0cmlidXRlOlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0F0dHJpYnV0ZSBmcmFtZXMgc2hvdWxkIG9ubHkgYmUgcHJlc2VudCBhcyBsZWFkaW5nIGNoaWxkcmVuIG9mIGVsZW1lbnQgZnJhbWVzLicpO1xuICAgICAgY2FzZSBGcmFtZVR5cGUuY29tcG9uZW50OlxuICAgICAgICB0aGlzLmluc2VydENvbXBvbmVudChiYXRjaCwgcGFyZW50LCBjaGlsZEluZGV4LCBmcmFtZSk7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgY2FzZSBGcmFtZVR5cGUucmVnaW9uOlxuICAgICAgICByZXR1cm4gdGhpcy5pbnNlcnRGcmFtZVJhbmdlKGJhdGNoLCBjb21wb25lbnRJZCwgcGFyZW50LCBjaGlsZEluZGV4LCBmcmFtZXMsIGZyYW1lSW5kZXggKyAxLCBmcmFtZUluZGV4ICsgZnJhbWVSZWFkZXIuc3VidHJlZUxlbmd0aChmcmFtZSkpO1xuICAgICAgY2FzZSBGcmFtZVR5cGUuZWxlbWVudFJlZmVyZW5jZUNhcHR1cmU6XG4gICAgICAgIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICAgICAgYXBwbHlDYXB0dXJlSWRUb0VsZW1lbnQocGFyZW50LCBmcmFtZVJlYWRlci5lbGVtZW50UmVmZXJlbmNlQ2FwdHVyZUlkKGZyYW1lKSEpO1xuICAgICAgICAgIHJldHVybiAwOyAvLyBBIFwiY2FwdHVyZVwiIGlzIGEgY2hpbGQgaW4gdGhlIGRpZmYsIGJ1dCBoYXMgbm8gbm9kZSBpbiB0aGUgRE9NXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZWZlcmVuY2UgY2FwdHVyZSBmcmFtZXMgY2FuIG9ubHkgYmUgY2hpbGRyZW4gb2YgZWxlbWVudCBmcmFtZXMuJyk7XG4gICAgICAgIH1cbiAgICAgIGNhc2UgRnJhbWVUeXBlLm1hcmt1cDpcbiAgICAgICAgdGhpcy5pbnNlcnRNYXJrdXAoYmF0Y2gsIHBhcmVudCwgY2hpbGRJbmRleCwgZnJhbWUpO1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIGNhc2UgRnJhbWVUeXBlLm5hbWVkRXZlbnQ6IC8vIE5vdCB1c2VkIG9uIHRoZSBKUyBzaWRlXG4gICAgICAgIHJldHVybiAwO1xuICAgICAgZGVmYXVsdDoge1xuICAgICAgICBjb25zdCB1bmtub3duVHlwZTogbmV2ZXIgPSBmcmFtZVR5cGU7IC8vIENvbXBpbGUtdGltZSB2ZXJpZmljYXRpb24gdGhhdCB0aGUgc3dpdGNoIHdhcyBleGhhdXN0aXZlXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBmcmFtZSB0eXBlOiAke3Vua25vd25UeXBlfWApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaW5zZXJ0RWxlbWVudChiYXRjaDogUmVuZGVyQmF0Y2gsIGNvbXBvbmVudElkOiBudW1iZXIsIHBhcmVudDogTG9naWNhbEVsZW1lbnQsIGNoaWxkSW5kZXg6IG51bWJlciwgZnJhbWVzOiBBcnJheVZhbHVlczxSZW5kZXJUcmVlRnJhbWU+LCBmcmFtZTogUmVuZGVyVHJlZUZyYW1lLCBmcmFtZUluZGV4OiBudW1iZXIpIHtcbiAgICBjb25zdCBmcmFtZVJlYWRlciA9IGJhdGNoLmZyYW1lUmVhZGVyO1xuICAgIGNvbnN0IHRhZ05hbWUgPSBmcmFtZVJlYWRlci5lbGVtZW50TmFtZShmcmFtZSkhO1xuXG4gICAgY29uc3QgbmV3RG9tRWxlbWVudFJhdyA9ICh0YWdOYW1lID09PSAnc3ZnJyB8fCBpc1N2Z0VsZW1lbnQocGFyZW50KSkgP1xuICAgICAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsIHRhZ05hbWUpIDpcbiAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7XG4gICAgY29uc3QgbmV3RWxlbWVudCA9IHRvTG9naWNhbEVsZW1lbnQobmV3RG9tRWxlbWVudFJhdyk7XG5cbiAgICBsZXQgaW5zZXJ0ZWQgPSBmYWxzZTtcblxuICAgIC8vIEFwcGx5IGF0dHJpYnV0ZXNcbiAgICBjb25zdCBkZXNjZW5kYW50c0VuZEluZGV4RXhjbCA9IGZyYW1lSW5kZXggKyBmcmFtZVJlYWRlci5zdWJ0cmVlTGVuZ3RoKGZyYW1lKTtcbiAgICBmb3IgKGxldCBkZXNjZW5kYW50SW5kZXggPSBmcmFtZUluZGV4ICsgMTsgZGVzY2VuZGFudEluZGV4IDwgZGVzY2VuZGFudHNFbmRJbmRleEV4Y2w7IGRlc2NlbmRhbnRJbmRleCsrKSB7XG4gICAgICBjb25zdCBkZXNjZW5kYW50RnJhbWUgPSBiYXRjaC5yZWZlcmVuY2VGcmFtZXNFbnRyeShmcmFtZXMsIGRlc2NlbmRhbnRJbmRleCk7XG4gICAgICBpZiAoZnJhbWVSZWFkZXIuZnJhbWVUeXBlKGRlc2NlbmRhbnRGcmFtZSkgPT09IEZyYW1lVHlwZS5hdHRyaWJ1dGUpIHtcbiAgICAgICAgdGhpcy5hcHBseUF0dHJpYnV0ZShiYXRjaCwgY29tcG9uZW50SWQsIG5ld0RvbUVsZW1lbnRSYXcsIGRlc2NlbmRhbnRGcmFtZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnNlcnRMb2dpY2FsQ2hpbGQobmV3RG9tRWxlbWVudFJhdywgcGFyZW50LCBjaGlsZEluZGV4KTtcbiAgICAgICAgaW5zZXJ0ZWQgPSB0cnVlO1xuICAgICAgICAvLyBBcyBzb29uIGFzIHdlIHNlZSBhIG5vbi1hdHRyaWJ1dGUgY2hpbGQsIGFsbCB0aGUgc3Vic2VxdWVudCBjaGlsZCBmcmFtZXMgYXJlXG4gICAgICAgIC8vIG5vdCBhdHRyaWJ1dGVzLCBzbyBiYWlsIG91dCBhbmQgaW5zZXJ0IHRoZSByZW1uYW50cyByZWN1cnNpdmVseVxuICAgICAgICB0aGlzLmluc2VydEZyYW1lUmFuZ2UoYmF0Y2gsIGNvbXBvbmVudElkLCBuZXdFbGVtZW50LCAwLCBmcmFtZXMsIGRlc2NlbmRhbnRJbmRleCwgZGVzY2VuZGFudHNFbmRJbmRleEV4Y2wpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyB0aGlzIGVsZW1lbnQgZGlkIG5vdCBoYXZlIGFueSBjaGlsZHJlbiwgc28gaXQncyBub3QgaW5zZXJ0ZWQgeWV0LlxuICAgIGlmICghaW5zZXJ0ZWQpIHtcbiAgICAgIGluc2VydExvZ2ljYWxDaGlsZChuZXdEb21FbGVtZW50UmF3LCBwYXJlbnQsIGNoaWxkSW5kZXgpO1xuICAgIH1cblxuICAgIGFwcGx5QW55RGVmZXJyZWRWYWx1ZShuZXdEb21FbGVtZW50UmF3KTtcbiAgfVxuXG4gIHByaXZhdGUgaW5zZXJ0Q29tcG9uZW50KGJhdGNoOiBSZW5kZXJCYXRjaCwgcGFyZW50OiBMb2dpY2FsRWxlbWVudCwgY2hpbGRJbmRleDogbnVtYmVyLCBmcmFtZTogUmVuZGVyVHJlZUZyYW1lKSB7XG4gICAgY29uc3QgY29udGFpbmVyRWxlbWVudCA9IGNyZWF0ZUFuZEluc2VydExvZ2ljYWxDb250YWluZXIocGFyZW50LCBjaGlsZEluZGV4KTtcblxuICAgIC8vIEFsbCB3ZSBoYXZlIHRvIGRvIGlzIGFzc29jaWF0ZSB0aGUgY2hpbGQgY29tcG9uZW50IElEIHdpdGggaXRzIGxvY2F0aW9uLiBXZSBkb24ndCBhY3R1YWxseVxuICAgIC8vIGRvIGFueSByZW5kZXJpbmcgaGVyZSwgYmVjYXVzZSB0aGUgZGlmZiBmb3IgdGhlIGNoaWxkIHdpbGwgYXBwZWFyIGxhdGVyIGluIHRoZSByZW5kZXIgYmF0Y2guXG4gICAgY29uc3QgY2hpbGRDb21wb25lbnRJZCA9IGJhdGNoLmZyYW1lUmVhZGVyLmNvbXBvbmVudElkKGZyYW1lKTtcbiAgICB0aGlzLmF0dGFjaENvbXBvbmVudFRvRWxlbWVudChjaGlsZENvbXBvbmVudElkLCBjb250YWluZXJFbGVtZW50KTtcbiAgfVxuXG4gIHByaXZhdGUgaW5zZXJ0VGV4dChiYXRjaDogUmVuZGVyQmF0Y2gsIHBhcmVudDogTG9naWNhbEVsZW1lbnQsIGNoaWxkSW5kZXg6IG51bWJlciwgdGV4dEZyYW1lOiBSZW5kZXJUcmVlRnJhbWUpIHtcbiAgICBjb25zdCB0ZXh0Q29udGVudCA9IGJhdGNoLmZyYW1lUmVhZGVyLnRleHRDb250ZW50KHRleHRGcmFtZSkhO1xuICAgIGNvbnN0IG5ld1RleHROb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dENvbnRlbnQpO1xuICAgIGluc2VydExvZ2ljYWxDaGlsZChuZXdUZXh0Tm9kZSwgcGFyZW50LCBjaGlsZEluZGV4KTtcbiAgfVxuXG4gIHByaXZhdGUgaW5zZXJ0TWFya3VwKGJhdGNoOiBSZW5kZXJCYXRjaCwgcGFyZW50OiBMb2dpY2FsRWxlbWVudCwgY2hpbGRJbmRleDogbnVtYmVyLCBtYXJrdXBGcmFtZTogUmVuZGVyVHJlZUZyYW1lKSB7XG4gICAgY29uc3QgbWFya3VwQ29udGFpbmVyID0gY3JlYXRlQW5kSW5zZXJ0TG9naWNhbENvbnRhaW5lcihwYXJlbnQsIGNoaWxkSW5kZXgpO1xuXG4gICAgY29uc3QgbWFya3VwQ29udGVudCA9IGJhdGNoLmZyYW1lUmVhZGVyLm1hcmt1cENvbnRlbnQobWFya3VwRnJhbWUpO1xuICAgIGNvbnN0IHBhcnNlZE1hcmt1cCA9IHBhcnNlTWFya3VwKG1hcmt1cENvbnRlbnQsIGlzU3ZnRWxlbWVudChwYXJlbnQpKTtcbiAgICBsZXQgbG9naWNhbFNpYmxpbmdJbmRleCA9IDA7XG4gICAgd2hpbGUgKHBhcnNlZE1hcmt1cC5maXJzdENoaWxkKSB7XG4gICAgICBpbnNlcnRMb2dpY2FsQ2hpbGQocGFyc2VkTWFya3VwLmZpcnN0Q2hpbGQsIG1hcmt1cENvbnRhaW5lciwgbG9naWNhbFNpYmxpbmdJbmRleCsrKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFwcGx5QXR0cmlidXRlKGJhdGNoOiBSZW5kZXJCYXRjaCwgY29tcG9uZW50SWQ6IG51bWJlciwgdG9Eb21FbGVtZW50OiBFbGVtZW50LCBhdHRyaWJ1dGVGcmFtZTogUmVuZGVyVHJlZUZyYW1lKSB7XG4gICAgY29uc3QgZnJhbWVSZWFkZXIgPSBiYXRjaC5mcmFtZVJlYWRlcjtcbiAgICBjb25zdCBhdHRyaWJ1dGVOYW1lID0gZnJhbWVSZWFkZXIuYXR0cmlidXRlTmFtZShhdHRyaWJ1dGVGcmFtZSkhO1xuICAgIGNvbnN0IGV2ZW50SGFuZGxlcklkID0gZnJhbWVSZWFkZXIuYXR0cmlidXRlRXZlbnRIYW5kbGVySWQoYXR0cmlidXRlRnJhbWUpO1xuXG4gICAgaWYgKGV2ZW50SGFuZGxlcklkKSB7XG4gICAgICBjb25zdCBldmVudE5hbWUgPSBzdHJpcE9uUHJlZml4KGF0dHJpYnV0ZU5hbWUpO1xuICAgICAgdGhpcy5ldmVudERlbGVnYXRvci5zZXRMaXN0ZW5lcih0b0RvbUVsZW1lbnQsIGV2ZW50TmFtZSwgZXZlbnRIYW5kbGVySWQsIGNvbXBvbmVudElkKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB2YWx1ZSA9IGZyYW1lUmVhZGVyLmF0dHJpYnV0ZVZhbHVlKGF0dHJpYnV0ZUZyYW1lKTtcbiAgICB0aGlzLnNldE9yUmVtb3ZlQXR0cmlidXRlT3JQcm9wZXJ0eSh0b0RvbUVsZW1lbnQsIGF0dHJpYnV0ZU5hbWUsIHZhbHVlKTtcbiAgfVxuXG4gIHByaXZhdGUgaW5zZXJ0RnJhbWVSYW5nZShiYXRjaDogUmVuZGVyQmF0Y2gsIGNvbXBvbmVudElkOiBudW1iZXIsIHBhcmVudDogTG9naWNhbEVsZW1lbnQsIGNoaWxkSW5kZXg6IG51bWJlciwgZnJhbWVzOiBBcnJheVZhbHVlczxSZW5kZXJUcmVlRnJhbWU+LCBzdGFydEluZGV4OiBudW1iZXIsIGVuZEluZGV4RXhjbDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBjb25zdCBvcmlnQ2hpbGRJbmRleCA9IGNoaWxkSW5kZXg7XG4gICAgZm9yIChsZXQgaW5kZXggPSBzdGFydEluZGV4OyBpbmRleCA8IGVuZEluZGV4RXhjbDsgaW5kZXgrKykge1xuICAgICAgY29uc3QgZnJhbWUgPSBiYXRjaC5yZWZlcmVuY2VGcmFtZXNFbnRyeShmcmFtZXMsIGluZGV4KTtcbiAgICAgIGNvbnN0IG51bUNoaWxkcmVuSW5zZXJ0ZWQgPSB0aGlzLmluc2VydEZyYW1lKGJhdGNoLCBjb21wb25lbnRJZCwgcGFyZW50LCBjaGlsZEluZGV4LCBmcmFtZXMsIGZyYW1lLCBpbmRleCk7XG4gICAgICBjaGlsZEluZGV4ICs9IG51bUNoaWxkcmVuSW5zZXJ0ZWQ7XG5cbiAgICAgIC8vIFNraXAgb3ZlciBhbnkgZGVzY2VuZGFudHMsIHNpbmNlIHRoZXkgYXJlIGFscmVhZHkgZGVhbHQgd2l0aCByZWN1cnNpdmVseVxuICAgICAgaW5kZXggKz0gY291bnREZXNjZW5kYW50RnJhbWVzKGJhdGNoLCBmcmFtZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIChjaGlsZEluZGV4IC0gb3JpZ0NoaWxkSW5kZXgpOyAvLyBUb3RhbCBudW1iZXIgb2YgY2hpbGRyZW4gaW5zZXJ0ZWRcbiAgfVxuXG4gIHByaXZhdGUgc2V0T3JSZW1vdmVBdHRyaWJ1dGVPclByb3BlcnR5KGVsZW1lbnQ6IEVsZW1lbnQsIG5hbWU6IHN0cmluZywgdmFsdWVPck51bGxUb1JlbW92ZTogc3RyaW5nIHwgbnVsbCkge1xuICAgIC8vIEZpcnN0IHNlZSBpZiB3ZSBoYXZlIHNwZWNpYWwgaGFuZGxpbmcgZm9yIHRoaXMgYXR0cmlidXRlXG4gICAgaWYgKCF0cnlBcHBseVNwZWNpYWxQcm9wZXJ0eShlbGVtZW50LCBuYW1lLCB2YWx1ZU9yTnVsbFRvUmVtb3ZlKSkge1xuICAgICAgLy8gSWYgbm90LCBtYXliZSBpdCdzIG9uZSBvZiBvdXIgaW50ZXJuYWwgYXR0cmlidXRlc1xuICAgICAgaWYgKG5hbWUuc3RhcnRzV2l0aChpbnRlcm5hbEF0dHJpYnV0ZU5hbWVQcmVmaXgpKSB7XG4gICAgICAgIHRoaXMuYXBwbHlJbnRlcm5hbEF0dHJpYnV0ZShlbGVtZW50LCBuYW1lLnN1YnN0cmluZyhpbnRlcm5hbEF0dHJpYnV0ZU5hbWVQcmVmaXgubGVuZ3RoKSwgdmFsdWVPck51bGxUb1JlbW92ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBJZiBub3QsIHRyZWF0IGl0IGFzIGEgcmVndWxhciBET00gYXR0cmlidXRlXG4gICAgICAgIGlmICh2YWx1ZU9yTnVsbFRvUmVtb3ZlICE9PSBudWxsKSB7XG4gICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWVPck51bGxUb1JlbW92ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFwcGx5SW50ZXJuYWxBdHRyaWJ1dGUoZWxlbWVudDogRWxlbWVudCwgaW50ZXJuYWxBdHRyaWJ1dGVOYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcgfCBudWxsKSB7XG4gICAgaWYgKGludGVybmFsQXR0cmlidXRlTmFtZS5zdGFydHNXaXRoKGV2ZW50U3RvcFByb3BhZ2F0aW9uQXR0cmlidXRlTmFtZVByZWZpeCkpIHtcbiAgICAgIC8vIFN0b3AgcHJvcGFnYXRpb25cbiAgICAgIGNvbnN0IGV2ZW50TmFtZSA9IHN0cmlwT25QcmVmaXgoaW50ZXJuYWxBdHRyaWJ1dGVOYW1lLnN1YnN0cmluZyhldmVudFN0b3BQcm9wYWdhdGlvbkF0dHJpYnV0ZU5hbWVQcmVmaXgubGVuZ3RoKSk7XG4gICAgICB0aGlzLmV2ZW50RGVsZWdhdG9yLnNldFN0b3BQcm9wYWdhdGlvbihlbGVtZW50LCBldmVudE5hbWUsIHZhbHVlICE9PSBudWxsKTtcbiAgICB9IGVsc2UgaWYgKGludGVybmFsQXR0cmlidXRlTmFtZS5zdGFydHNXaXRoKGV2ZW50UHJldmVudERlZmF1bHRBdHRyaWJ1dGVOYW1lUHJlZml4KSkge1xuICAgICAgLy8gUHJldmVudCBkZWZhdWx0XG4gICAgICBjb25zdCBldmVudE5hbWUgPSBzdHJpcE9uUHJlZml4KGludGVybmFsQXR0cmlidXRlTmFtZS5zdWJzdHJpbmcoZXZlbnRQcmV2ZW50RGVmYXVsdEF0dHJpYnV0ZU5hbWVQcmVmaXgubGVuZ3RoKSk7XG4gICAgICB0aGlzLmV2ZW50RGVsZWdhdG9yLnNldFByZXZlbnREZWZhdWx0KGVsZW1lbnQsIGV2ZW50TmFtZSwgdmFsdWUgIT09IG51bGwpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUaGUgcHJlZml4IG1ha2VzIHRoaXMgYXR0cmlidXRlIG5hbWUgcmVzZXJ2ZWQsIHNvIGFueSBvdGhlciB1c2FnZSBpcyBkaXNhbGxvd2VkXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGludGVybmFsIGF0dHJpYnV0ZSAnJHtpbnRlcm5hbEF0dHJpYnV0ZU5hbWV9J2ApO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFya0FzSW50ZXJhY3RpdmVSb290Q29tcG9uZW50RWxlbWVudChlbGVtZW50OiBMb2dpY2FsRWxlbWVudCwgaXNJbnRlcmFjdGl2ZTogYm9vbGVhbikge1xuICBlbGVtZW50W2ludGVyYWN0aXZlUm9vdENvbXBvbmVudFByb3BuYW1lXSA9IGlzSW50ZXJhY3RpdmU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0ludGVyYWN0aXZlUm9vdENvbXBvbmVudEVsZW1lbnQoZWxlbWVudDogTG9naWNhbEVsZW1lbnQpOiBib29sZWFuIHwgdW5kZWZpbmVkIHtcbiAgcmV0dXJuIGVsZW1lbnRbaW50ZXJhY3RpdmVSb290Q29tcG9uZW50UHJvcG5hbWVdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0U2hvdWxkUHJlc2VydmVDb250ZW50T25JbnRlcmFjdGl2ZUNvbXBvbmVudERpc3Bvc2FsKGVsZW1lbnQ6IExvZ2ljYWxFbGVtZW50LCBzaG91bGRQcmVzZXJ2ZTogYm9vbGVhbikge1xuICBlbGVtZW50W3ByZXNlcnZlQ29udGVudE9uRGlzcG9zYWxQcm9wbmFtZV0gPSBzaG91bGRQcmVzZXJ2ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldENsZWFyQ29udGVudE9uUm9vdENvbXBvbmVudFJlcmVuZGVyKGVsZW1lbnQ6IExvZ2ljYWxFbGVtZW50KTogdm9pZCB7XG4gIGVsZW1lbnRzVG9DbGVhck9uUm9vdENvbXBvbmVudFJlbmRlci5hZGQoZWxlbWVudCk7XG59XG5cbmZ1bmN0aW9uIHNob3VsZFByZXNlcnZlQ29udGVudE9uSW50ZXJhY3RpdmVDb21wb25lbnREaXNwb3NhbChlbGVtZW50OiBMb2dpY2FsRWxlbWVudCk6IGJvb2xlYW4ge1xuICByZXR1cm4gZWxlbWVudFtwcmVzZXJ2ZUNvbnRlbnRPbkRpc3Bvc2FsUHJvcG5hbWVdID09PSB0cnVlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBvbmVudERlc2NyaXB0b3Ige1xuICBzdGFydDogTm9kZTtcbiAgZW5kOiBOb2RlO1xufVxuXG5mdW5jdGlvbiBwYXJzZU1hcmt1cChtYXJrdXA6IHN0cmluZywgaXNTdmc6IGJvb2xlYW4pIHtcbiAgaWYgKGlzU3ZnKSB7XG4gICAgc2hhcmVkU3ZnRWxlbUZvclBhcnNpbmcuaW5uZXJIVE1MID0gbWFya3VwIHx8ICcgJztcbiAgICByZXR1cm4gc2hhcmVkU3ZnRWxlbUZvclBhcnNpbmc7XG4gIH0gZWxzZSB7XG4gICAgc2hhcmVkVGVtcGxhdGVFbGVtRm9yUGFyc2luZy5pbm5lckhUTUwgPSBtYXJrdXAgfHwgJyAnO1xuXG4gICAgLy8gU2luY2UgdGhpcyBpcyBhIG1hcmt1cCBzdHJpbmcsIHdlIHdhbnQgdG8gaG9ub3IgdGhlIGRldmVsb3BlcidzIGludGVudCB0b1xuICAgIC8vIGV2YWx1YXRlIGFueSBzY3JpcHRzIGl0IG1heSBjb250YWluLiBTY3JpcHRzIHBhcnNlZCBmcm9tIGFuIGlubmVySFRNTCBhc3NpZ25tZW50XG4gICAgLy8gd29uJ3QgYmUgZXhlY3V0YWJsZSBieSBkZWZhdWx0IChodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMTk3NTc1L2Nhbi1zY3JpcHRzLWJlLWluc2VydGVkLXdpdGgtaW5uZXJodG1sKVxuICAgIC8vIGJ1dCB0aGF0J3MgaW5jb25zaXN0ZW50IHdpdGggYW55dGhpbmcgY29uc3RydWN0ZWQgZnJvbSBhIHNlcXVlbmNlIGxpa2U6XG4gICAgLy8gLSBPcGVuRWxlbWVudChcInNjcmlwdFwiKVxuICAgIC8vIC0gQWRkQ29udGVudChqcykgb3IgQWRkTWFya3VwQ29udGVudChqcylcbiAgICAvLyAtIENsb3NlRWxlbWVudCgpXG4gICAgLy8gSXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGhhdmUgc3VjaCBhbiBpbmNvbnNpc3RlbmN5IGluIEJsYXpvcidzIGludGVyYWN0aXZlXG4gICAgLy8gcmVuZGVyZXIsIGFuZCBmb3IgYmFjay1jb21wYXQgd2l0aCBwcmUtLk5FVCA4IGNvZGUgKHdoZW4gdGhlIFJhem9yIGNvbXBpbGVyIGFsd2F5c1xuICAgIC8vIHVzZWQgT3BlbkVsZW1lbnQgbGlrZSBhYm92ZSksIGFzIHdlbGwgYXMgY29uc2lzdGVuY3kgd2l0aCBzdGF0aWMgU1NSLCB3ZSBuZWVkIHRvIG1ha2UgaXQgd29yay5cbiAgICBzaGFyZWRUZW1wbGF0ZUVsZW1Gb3JQYXJzaW5nLmNvbnRlbnQucXVlcnlTZWxlY3RvckFsbCgnc2NyaXB0JykuZm9yRWFjaChvbGRTY3JpcHRFbGVtID0+IHtcbiAgICAgIGNvbnN0IG5ld1NjcmlwdEVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgIG5ld1NjcmlwdEVsZW0udGV4dENvbnRlbnQgPSBvbGRTY3JpcHRFbGVtLnRleHRDb250ZW50O1xuXG4gICAgICBvbGRTY3JpcHRFbGVtLmdldEF0dHJpYnV0ZU5hbWVzKCkuZm9yRWFjaChhdHRyaWJOYW1lID0+IHtcbiAgICAgICAgbmV3U2NyaXB0RWxlbS5zZXRBdHRyaWJ1dGUoYXR0cmliTmFtZSwgb2xkU2NyaXB0RWxlbS5nZXRBdHRyaWJ1dGUoYXR0cmliTmFtZSkhKTtcbiAgICAgIH0pO1xuXG4gICAgICBvbGRTY3JpcHRFbGVtLnBhcmVudE5vZGUhLnJlcGxhY2VDaGlsZChuZXdTY3JpcHRFbGVtLCBvbGRTY3JpcHRFbGVtKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBzaGFyZWRUZW1wbGF0ZUVsZW1Gb3JQYXJzaW5nLmNvbnRlbnQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gY291bnREZXNjZW5kYW50RnJhbWVzKGJhdGNoOiBSZW5kZXJCYXRjaCwgZnJhbWU6IFJlbmRlclRyZWVGcmFtZSk6IG51bWJlciB7XG4gIGNvbnN0IGZyYW1lUmVhZGVyID0gYmF0Y2guZnJhbWVSZWFkZXI7XG4gIHN3aXRjaCAoZnJhbWVSZWFkZXIuZnJhbWVUeXBlKGZyYW1lKSkge1xuICAgIC8vIFRoZSBmb2xsb3dpbmcgZnJhbWUgdHlwZXMgaGF2ZSBhIHN1YnRyZWUgbGVuZ3RoLiBPdGhlciBmcmFtZXMgbWF5IHVzZSB0aGF0IG1lbW9yeSBzbG90XG4gICAgLy8gdG8gbWVhbiBzb21ldGhpbmcgZWxzZSwgc28gd2UgbXVzdCBub3QgcmVhZCBpdC4gV2Ugc2hvdWxkIGNvbnNpZGVyIGhhdmluZyBub21pbmFsIHN1YnR5cGVzXG4gICAgLy8gb2YgUmVuZGVyVHJlZUZyYW1lUG9pbnRlciB0aGF0IHByZXZlbnQgYWNjZXNzIHRvIG5vbi1hcHBsaWNhYmxlIGZpZWxkcy5cbiAgICBjYXNlIEZyYW1lVHlwZS5jb21wb25lbnQ6XG4gICAgY2FzZSBGcmFtZVR5cGUuZWxlbWVudDpcbiAgICBjYXNlIEZyYW1lVHlwZS5yZWdpb246XG4gICAgICByZXR1cm4gZnJhbWVSZWFkZXIuc3VidHJlZUxlbmd0aChmcmFtZSkgLSAxO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gMDtcbiAgfVxufVxuXG5mdW5jdGlvbiBzdHJpcE9uUHJlZml4KGF0dHJpYnV0ZU5hbWU6IHN0cmluZykge1xuICBpZiAoYXR0cmlidXRlTmFtZS5zdGFydHNXaXRoKCdvbicpKSB7XG4gICAgcmV0dXJuIGF0dHJpYnV0ZU5hbWUuc3Vic3RyaW5nKDIpO1xuICB9XG5cbiAgdGhyb3cgbmV3IEVycm9yKGBBdHRyaWJ1dGUgc2hvdWxkIGJlIGFuIGV2ZW50IG5hbWUsIGJ1dCBkb2Vzbid0IHN0YXJ0IHdpdGggJ29uJy4gVmFsdWU6ICcke2F0dHJpYnV0ZU5hbWV9J2ApO1xufVxuIiwiLy8gTGljZW5zZWQgdG8gdGhlIC5ORVQgRm91bmRhdGlvbiB1bmRlciBvbmUgb3IgbW9yZSBhZ3JlZW1lbnRzLlxuLy8gVGhlIC5ORVQgRm91bmRhdGlvbiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxuaW1wb3J0ICdAbWljcm9zb2Z0L2RvdG5ldC1qcy1pbnRlcm9wJztcbmltcG9ydCB7IHJlc2V0U2Nyb2xsQWZ0ZXJOZXh0QmF0Y2ggfSBmcm9tICcuLi9SZW5kZXJpbmcvUmVuZGVyZXInO1xuaW1wb3J0IHsgRXZlbnREZWxlZ2F0b3IgfSBmcm9tICcuLi9SZW5kZXJpbmcvRXZlbnRzL0V2ZW50RGVsZWdhdG9yJztcbmltcG9ydCB7IGF0dGFjaEVuaGFuY2VkTmF2aWdhdGlvbkxpc3RlbmVyLCBnZXRJbnRlcmFjdGl2ZVJvdXRlclJlbmRlcmVySWQsIGhhbmRsZUNsaWNrRm9yTmF2aWdhdGlvbkludGVyY2VwdGlvbiwgaGFzSW50ZXJhY3RpdmVSb3V0ZXIsIGhhc1Byb2dyYW1tYXRpY0VuaGFuY2VkTmF2aWdhdGlvbkhhbmRsZXIsIGlzRm9yU2FtZVBhdGgsIGlzU2FtZVBhZ2VXaXRoSGFzaCwgaXNXaXRoaW5CYXNlVXJpU3BhY2UsIHBlcmZvcm1Qcm9ncmFtbWF0aWNFbmhhbmNlZE5hdmlnYXRpb24sIHBlcmZvcm1TY3JvbGxUb0VsZW1lbnRPblRoZVNhbWVQYWdlLCBzY3JvbGxUb0VsZW1lbnQsIHNldEhhc0ludGVyYWN0aXZlUm91dGVyLCB0b0Fic29sdXRlVXJpIH0gZnJvbSAnLi9OYXZpZ2F0aW9uVXRpbHMnO1xuaW1wb3J0IHsgV2ViUmVuZGVyZXJJZCB9IGZyb20gJy4uL1JlbmRlcmluZy9XZWJSZW5kZXJlcklkJztcbmltcG9ydCB7IGlzUmVuZGVyZXJBdHRhY2hlZCB9IGZyb20gJy4uL1JlbmRlcmluZy9XZWJSZW5kZXJlckludGVyb3BNZXRob2RzJztcblxubGV0IGhhc1JlZ2lzdGVyZWROYXZpZ2F0aW9uRXZlbnRMaXN0ZW5lcnMgPSBmYWxzZTtcbmxldCBjdXJyZW50SGlzdG9yeUluZGV4ID0gMDtcbmxldCBjdXJyZW50TG9jYXRpb25DaGFuZ2luZ0NhbGxJZCA9IDA7XG5cbnR5cGUgTmF2aWdhdGlvbkNhbGxiYWNrcyA9IHtcbiAgcmVuZGVyZXJJZDogV2ViUmVuZGVyZXJJZDtcbiAgaGFzTG9jYXRpb25DaGFuZ2luZ0V2ZW50TGlzdGVuZXJzOiBib29sZWFuO1xuICBsb2NhdGlvbkNoYW5nZWQodXJpOiBzdHJpbmcsIHN0YXRlOiBzdHJpbmcgfCB1bmRlZmluZWQsIGludGVyY2VwdGVkOiBib29sZWFuKTogUHJvbWlzZTx2b2lkPjtcbiAgbG9jYXRpb25DaGFuZ2luZyhjYWxsSWQ6IG51bWJlciwgdXJpOiBzdHJpbmcsIHN0YXRlOiBzdHJpbmcgfCB1bmRlZmluZWQsIGludGVyY2VwdGVkOiBib29sZWFuKTogUHJvbWlzZTx2b2lkPjtcbn07XG5cbmNvbnN0IG5hdmlnYXRpb25DYWxsYmFja3MgPSBuZXcgTWFwPFdlYlJlbmRlcmVySWQsIE5hdmlnYXRpb25DYWxsYmFja3M+KCk7XG5cbmxldCBwb3BTdGF0ZUNhbGxiYWNrOiAoKHN0YXRlOiBQb3BTdGF0ZUV2ZW50KSA9PiBQcm9taXNlPHZvaWQ+IHwgdm9pZCkgPSBvbkJyb3dzZXJJbml0aWF0ZWRQb3BTdGF0ZTtcbmxldCByZXNvbHZlQ3VycmVudE5hdmlnYXRpb246ICgoc2hvdWxkQ29udGludWVOYXZpZ2F0aW9uOiBib29sZWFuKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuXG4vLyBUaGVzZSBhcmUgdGhlIGZ1bmN0aW9ucyB3ZSdyZSBtYWtpbmcgYXZhaWxhYmxlIGZvciBpbnZvY2F0aW9uIGZyb20gLk5FVFxuZXhwb3J0IGNvbnN0IGludGVybmFsRnVuY3Rpb25zID0ge1xuICBsaXN0ZW5Gb3JOYXZpZ2F0aW9uRXZlbnRzLFxuICBlbmFibGVOYXZpZ2F0aW9uSW50ZXJjZXB0aW9uOiBzZXRIYXNJbnRlcmFjdGl2ZVJvdXRlcixcbiAgc2V0SGFzTG9jYXRpb25DaGFuZ2luZ0xpc3RlbmVycyxcbiAgZW5kTG9jYXRpb25DaGFuZ2luZyxcbiAgbmF2aWdhdGVUbzogbmF2aWdhdGVUb0Zyb21Eb3ROZXQsXG4gIHJlZnJlc2gsXG4gIGdldEJhc2VVUkk6ICgpOiBzdHJpbmcgPT4gZG9jdW1lbnQuYmFzZVVSSSxcbiAgZ2V0TG9jYXRpb25IcmVmOiAoKTogc3RyaW5nID0+IGxvY2F0aW9uLmhyZWYsXG4gIHNjcm9sbFRvRWxlbWVudCxcbn07XG5cbmZ1bmN0aW9uIGxpc3RlbkZvck5hdmlnYXRpb25FdmVudHMoXG4gIHJlbmRlcmVySWQ6IFdlYlJlbmRlcmVySWQsXG4gIGxvY2F0aW9uQ2hhbmdlZENhbGxiYWNrOiAodXJpOiBzdHJpbmcsIHN0YXRlOiBzdHJpbmcgfCB1bmRlZmluZWQsIGludGVyY2VwdGVkOiBib29sZWFuKSA9PiBQcm9taXNlPHZvaWQ+LFxuICBsb2NhdGlvbkNoYW5naW5nQ2FsbGJhY2s6IChjYWxsSWQ6IG51bWJlciwgdXJpOiBzdHJpbmcsIHN0YXRlOiBzdHJpbmcgfCB1bmRlZmluZWQsIGludGVyY2VwdGVkOiBib29sZWFuKSA9PiBQcm9taXNlPHZvaWQ+XG4pOiB2b2lkIHtcbiAgbmF2aWdhdGlvbkNhbGxiYWNrcy5zZXQocmVuZGVyZXJJZCwge1xuICAgIHJlbmRlcmVySWQsXG4gICAgaGFzTG9jYXRpb25DaGFuZ2luZ0V2ZW50TGlzdGVuZXJzOiBmYWxzZSxcbiAgICBsb2NhdGlvbkNoYW5nZWQ6IGxvY2F0aW9uQ2hhbmdlZENhbGxiYWNrLFxuICAgIGxvY2F0aW9uQ2hhbmdpbmc6IGxvY2F0aW9uQ2hhbmdpbmdDYWxsYmFjayxcbiAgfSk7XG5cbiAgaWYgKGhhc1JlZ2lzdGVyZWROYXZpZ2F0aW9uRXZlbnRMaXN0ZW5lcnMpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBoYXNSZWdpc3RlcmVkTmF2aWdhdGlvbkV2ZW50TGlzdGVuZXJzID0gdHJ1ZTtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgb25Qb3BTdGF0ZSk7XG4gIGN1cnJlbnRIaXN0b3J5SW5kZXggPSBoaXN0b3J5LnN0YXRlPy5faW5kZXggPz8gMDtcblxuICBhdHRhY2hFbmhhbmNlZE5hdmlnYXRpb25MaXN0ZW5lcigoaW50ZXJuYWxEZXN0aW5hdGlvbkhyZWYsIGludGVyY2VwdGVkTGluaykgPT4ge1xuICAgIG5vdGlmeUxvY2F0aW9uQ2hhbmdlZChpbnRlcmNlcHRlZExpbmssIGludGVybmFsRGVzdGluYXRpb25IcmVmKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHNldEhhc0xvY2F0aW9uQ2hhbmdpbmdMaXN0ZW5lcnMocmVuZGVyZXJJZDogV2ViUmVuZGVyZXJJZCwgaGFzTGlzdGVuZXJzOiBib29sZWFuKSB7XG4gIGNvbnN0IGNhbGxiYWNrcyA9IG5hdmlnYXRpb25DYWxsYmFja3MuZ2V0KHJlbmRlcmVySWQpO1xuICBpZiAoIWNhbGxiYWNrcykge1xuICAgIHRocm93IG5ldyBFcnJvcihgUmVuZGVyZXIgd2l0aCBJRCAnJHtyZW5kZXJlcklkfScgaXMgbm90IGxpc3RlbmluZyBmb3IgbmF2aWdhdGlvbiBldmVudHNgKTtcbiAgfVxuICBjYWxsYmFja3MuaGFzTG9jYXRpb25DaGFuZ2luZ0V2ZW50TGlzdGVuZXJzID0gaGFzTGlzdGVuZXJzO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBhdHRhY2hUb0V2ZW50RGVsZWdhdG9yKGV2ZW50RGVsZWdhdG9yOiBFdmVudERlbGVnYXRvcik6IHZvaWQge1xuICAvLyBXZSBuZWVkIHRvIHJlc3BvbmQgdG8gY2xpY2tzIG9uIDxhPiBlbGVtZW50cyAqYWZ0ZXIqIHRoZSBFdmVudERlbGVnYXRvciBoYXMgZmluaXNoZWRcbiAgLy8gcnVubmluZyBpdHMgc2ltdWxhdGVkIGJ1YmJsaW5nIHByb2Nlc3Mgc28gdGhhdCB3ZSBjYW4gcmVzcGVjdCBhbnkgcHJldmVudERlZmF1bHQgcmVxdWVzdHMuXG4gIC8vIFNvIGluc3RlYWQgb2YgcmVnaXN0ZXJpbmcgb3VyIG93biBuYXRpdmUgZXZlbnQsIHJlZ2lzdGVyIHVzaW5nIHRoZSBFdmVudERlbGVnYXRvci5cbiAgZXZlbnREZWxlZ2F0b3Iubm90aWZ5QWZ0ZXJDbGljayhldmVudCA9PiB7XG4gICAgaWYgKCFoYXNJbnRlcmFjdGl2ZVJvdXRlcigpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaGFuZGxlQ2xpY2tGb3JOYXZpZ2F0aW9uSW50ZXJjZXB0aW9uKGV2ZW50LCBhYnNvbHV0ZUludGVybmFsSHJlZiA9PiB7XG4gICAgICBwZXJmb3JtSW50ZXJuYWxOYXZpZ2F0aW9uKGFic29sdXRlSW50ZXJuYWxIcmVmLCAvKiBpbnRlcmNlcHRlZExpbmsgKi8gdHJ1ZSwgLyogcmVwbGFjZSAqLyBmYWxzZSk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5cbmZ1bmN0aW9uIHJlZnJlc2goZm9yY2VSZWxvYWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgaWYgKCFmb3JjZVJlbG9hZCAmJiBoYXNQcm9ncmFtbWF0aWNFbmhhbmNlZE5hdmlnYXRpb25IYW5kbGVyKCkpIHtcbiAgICBwZXJmb3JtUHJvZ3JhbW1hdGljRW5oYW5jZWROYXZpZ2F0aW9uKGxvY2F0aW9uLmhyZWYsIC8qIHJlcGxhY2UgKi8gdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gIH1cbn1cblxuLy8gRm9yIGJhY2stY29tcGF0LCB3ZSBuZWVkIHRvIGFjY2VwdCBtdWx0aXBsZSBvdmVybG9hZHNcbmV4cG9ydCBmdW5jdGlvbiBuYXZpZ2F0ZVRvKHVyaTogc3RyaW5nLCBvcHRpb25zOiBOYXZpZ2F0aW9uT3B0aW9ucyk6IHZvaWQ7XG5leHBvcnQgZnVuY3Rpb24gbmF2aWdhdGVUbyh1cmk6IHN0cmluZywgZm9yY2VMb2FkOiBib29sZWFuKTogdm9pZDtcbmV4cG9ydCBmdW5jdGlvbiBuYXZpZ2F0ZVRvKHVyaTogc3RyaW5nLCBmb3JjZUxvYWQ6IGJvb2xlYW4sIHJlcGxhY2U6IGJvb2xlYW4pOiB2b2lkO1xuZXhwb3J0IGZ1bmN0aW9uIG5hdmlnYXRlVG8odXJpOiBzdHJpbmcsIGZvcmNlTG9hZE9yT3B0aW9uczogTmF2aWdhdGlvbk9wdGlvbnMgfCBib29sZWFuLCByZXBsYWNlSWZVc2luZ09sZE92ZXJsb2FkID0gZmFsc2UpOiB2b2lkIHtcbiAgLy8gTm9ybWFsaXplIHRoZSBwYXJhbWV0ZXJzIHRvIHRoZSBuZXdlciBvdmVybG9hZCAoaS5lLiwgdXNpbmcgTmF2aWdhdGlvbk9wdGlvbnMpXG4gIGNvbnN0IG9wdGlvbnM6IE5hdmlnYXRpb25PcHRpb25zID0gZm9yY2VMb2FkT3JPcHRpb25zIGluc3RhbmNlb2YgT2JqZWN0XG4gICAgPyBmb3JjZUxvYWRPck9wdGlvbnNcbiAgICA6IHsgZm9yY2VMb2FkOiBmb3JjZUxvYWRPck9wdGlvbnMsIHJlcGxhY2VIaXN0b3J5RW50cnk6IHJlcGxhY2VJZlVzaW5nT2xkT3ZlcmxvYWQgfTtcblxuICBuYXZpZ2F0ZVRvQ29yZSh1cmksIG9wdGlvbnMpO1xufVxuXG5mdW5jdGlvbiBuYXZpZ2F0ZVRvRnJvbURvdE5ldCh1cmk6IHN0cmluZywgb3B0aW9uczogTmF2aWdhdGlvbk9wdGlvbnMpOiB2b2lkIHtcbiAgLy8gVGhlIGxvY2F0aW9uIGNoYW5naW5nIGNhbGxiYWNrIGlzIGNhbGxlZCBmcm9tIC5ORVQgZm9yIHByb2dyYW1tYXRpYyBuYXZpZ2F0aW9ucyBvcmlnaW5hdGluZyBmcm9tIC5ORVQuXG4gIC8vIEluIHRoaXMgY2FzZSwgd2Ugc2hvdWxkbid0IGludm9rZSB0aGUgY2FsbGJhY2sgYWdhaW4gZnJvbSB0aGUgSlMgc2lkZS5cbiAgbmF2aWdhdGVUb0NvcmUodXJpLCBvcHRpb25zLCAvKiBza2lwTG9jYXRpb25DaGFuZ2luZ0NhbGxiYWNrICovIHRydWUpO1xufVxuXG5mdW5jdGlvbiBuYXZpZ2F0ZVRvQ29yZSh1cmk6IHN0cmluZywgb3B0aW9uczogTmF2aWdhdGlvbk9wdGlvbnMsIHNraXBMb2NhdGlvbkNoYW5naW5nQ2FsbGJhY2sgPSBmYWxzZSk6IHZvaWQge1xuICBjb25zdCBhYnNvbHV0ZVVyaSA9IHRvQWJzb2x1dGVVcmkodXJpKTtcblxuICBpZiAoIW9wdGlvbnMuZm9yY2VMb2FkICYmIGlzV2l0aGluQmFzZVVyaVNwYWNlKGFic29sdXRlVXJpKSkge1xuICAgIGlmIChzaG91bGRVc2VDbGllbnRTaWRlUm91dGluZygpKSB7XG4gICAgICBwZXJmb3JtSW50ZXJuYWxOYXZpZ2F0aW9uKGFic29sdXRlVXJpLCBmYWxzZSwgb3B0aW9ucy5yZXBsYWNlSGlzdG9yeUVudHJ5LCBvcHRpb25zLmhpc3RvcnlFbnRyeVN0YXRlLCBza2lwTG9jYXRpb25DaGFuZ2luZ0NhbGxiYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGVyZm9ybVByb2dyYW1tYXRpY0VuaGFuY2VkTmF2aWdhdGlvbihhYnNvbHV0ZVVyaSwgb3B0aW9ucy5yZXBsYWNlSGlzdG9yeUVudHJ5KTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gRm9yIGV4dGVybmFsIG5hdmlnYXRpb24sIHdlIHdvcmsgaW4gdGVybXMgb2YgdGhlIG9yaWdpbmFsbHktc3VwcGxpZWQgdXJpIHN0cmluZyxcbiAgICAvLyBub3QgdGhlIGNvbXB1dGVkIGFic29sdXRlVXJpLiBUaGlzIGlzIGluIGNhc2UgdGhlcmUgYXJlIHNvbWUgc3BlY2lhbCBVUkkgZm9ybWF0c1xuICAgIC8vIHdlJ3JlIHVuYWJsZSB0byB0cmFuc2xhdGUgaW50byBhYnNvbHV0ZSBVUklzLlxuICAgIHBlcmZvcm1FeHRlcm5hbE5hdmlnYXRpb24odXJpLCBvcHRpb25zLnJlcGxhY2VIaXN0b3J5RW50cnkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBlcmZvcm1FeHRlcm5hbE5hdmlnYXRpb24odXJpOiBzdHJpbmcsIHJlcGxhY2U6IGJvb2xlYW4pIHtcbiAgaWYgKGxvY2F0aW9uLmhyZWYgPT09IHVyaSkge1xuICAgIC8vIElmIHlvdSdyZSBhbHJlYWR5IG9uIHRoaXMgVVJMLCB5b3UgY2FuJ3QgYXBwZW5kIGFub3RoZXIgY29weSBvZiBpdCB0byB0aGUgaGlzdG9yeSBzdGFjayxcbiAgICAvLyBzbyB3ZSBjYW4gaWdub3JlIHRoZSAncmVwbGFjZScgZmxhZy4gSG93ZXZlciwgcmVsb2FkaW5nIHRoZSBzYW1lIFVSTCB5b3UncmUgYWxyZWFkeSBvblxuICAgIC8vIHJlcXVpcmVzIHNwZWNpYWwgaGFuZGxpbmcgdG8gYXZvaWQgdHJpZ2dlcmluZyBicm93c2VyLXNwZWNpZmljIGJlaGF2aW9yIGlzc3Vlcy5cbiAgICAvLyBGb3IgZGV0YWlscyBhYm91dCB3aGF0IHRoaXMgZml4ZXMgYW5kIHdoeSwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9kb3RuZXQvYXNwbmV0Y29yZS9wdWxsLzEwODM5XG4gICAgY29uc3QgdGVtcG9yYXJ5VXJpID0gdXJpICsgJz8nO1xuICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsICcnLCB0ZW1wb3JhcnlVcmkpO1xuICAgIGxvY2F0aW9uLnJlcGxhY2UodXJpKTtcbiAgfSBlbHNlIGlmIChyZXBsYWNlKSB7XG4gICAgbG9jYXRpb24ucmVwbGFjZSh1cmkpO1xuICB9IGVsc2Uge1xuICAgIGxvY2F0aW9uLmhyZWYgPSB1cmk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gcGVyZm9ybUludGVybmFsTmF2aWdhdGlvbihhYnNvbHV0ZUludGVybmFsSHJlZjogc3RyaW5nLCBpbnRlcmNlcHRlZExpbms6IGJvb2xlYW4sIHJlcGxhY2U6IGJvb2xlYW4sIHN0YXRlOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQsIHNraXBMb2NhdGlvbkNoYW5naW5nQ2FsbGJhY2sgPSBmYWxzZSkge1xuICBpZ25vcmVQZW5kaW5nTmF2aWdhdGlvbigpO1xuXG4gIGlmIChpc1NhbWVQYWdlV2l0aEhhc2gobG9jYXRpb24uaHJlZiwgYWJzb2x1dGVJbnRlcm5hbEhyZWYpKSB7XG4gICAgc2F2ZVRvQnJvd3Nlckhpc3RvcnkoYWJzb2x1dGVJbnRlcm5hbEhyZWYsIHJlcGxhY2UsIHN0YXRlKTtcbiAgICBwZXJmb3JtU2Nyb2xsVG9FbGVtZW50T25UaGVTYW1lUGFnZShhYnNvbHV0ZUludGVybmFsSHJlZik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgY2FsbGJhY2tzID0gZ2V0SW50ZXJhY3RpdmVSb3V0ZXJOYXZpZ2F0aW9uQ2FsbGJhY2tzKCk7XG4gIGlmICghc2tpcExvY2F0aW9uQ2hhbmdpbmdDYWxsYmFjayAmJiBjYWxsYmFja3M/Lmhhc0xvY2F0aW9uQ2hhbmdpbmdFdmVudExpc3RlbmVycykge1xuICAgIGNvbnN0IHNob3VsZENvbnRpbnVlTmF2aWdhdGlvbiA9IGF3YWl0IG5vdGlmeUxvY2F0aW9uQ2hhbmdpbmcoYWJzb2x1dGVJbnRlcm5hbEhyZWYsIHN0YXRlLCBpbnRlcmNlcHRlZExpbmssIGNhbGxiYWNrcyk7XG4gICAgaWYgKCFzaG91bGRDb250aW51ZU5hdmlnYXRpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICAvLyBTaW5jZSB0aGlzIHdhcyAqbm90KiB0cmlnZ2VyZWQgYnkgYSBiYWNrL2ZvcndhcmQgZ2VzdHVyZSAodGhhdCBnb2VzIHRocm91Z2ggYSBkaWZmZXJlbnRcbiAgLy8gY29kZSBwYXRoIHN0YXJ0aW5nIHdpdGggYSBwb3BzdGF0ZSBldmVudCksIHdlIGRvbid0IHdhbnQgdG8gcHJlc2VydmUgdGhlIGN1cnJlbnQgc2Nyb2xsXG4gIC8vIHBvc2l0aW9uLCBzbyByZXNldCBpdC5cbiAgLy8gVG8gYXZvaWQgdWdseSBmbGlja2VyaW5nIGVmZmVjdHMsIHdlIGRvbid0IHdhbnQgdG8gY2hhbmdlIHRoZSBzY3JvbGwgcG9zaXRpb24gdW50aWxcbiAgLy8gd2UgcmVuZGVyIHRoZSBuZXcgcGFnZS4gQXMgYSBiZXN0IGFwcHJveGltYXRpb24sIHdhaXQgdW50aWwgdGhlIG5leHQgYmF0Y2guXG4gIGlmICghaXNGb3JTYW1lUGF0aChhYnNvbHV0ZUludGVybmFsSHJlZiwgbG9jYXRpb24uaHJlZikpIHtcbiAgICByZXNldFNjcm9sbEFmdGVyTmV4dEJhdGNoKCk7XG4gIH1cblxuICBzYXZlVG9Ccm93c2VySGlzdG9yeShhYnNvbHV0ZUludGVybmFsSHJlZiwgcmVwbGFjZSwgc3RhdGUpO1xuXG4gIGF3YWl0IG5vdGlmeUxvY2F0aW9uQ2hhbmdlZChpbnRlcmNlcHRlZExpbmspO1xufVxuXG5mdW5jdGlvbiBzYXZlVG9Ccm93c2VySGlzdG9yeShhYnNvbHV0ZUludGVybmFsSHJlZjogc3RyaW5nLCByZXBsYWNlOiBib29sZWFuLCBzdGF0ZTogc3RyaW5nIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkKTogdm9pZCB7XG4gIGlmICghcmVwbGFjZSkge1xuICAgIGN1cnJlbnRIaXN0b3J5SW5kZXgrKztcbiAgICBoaXN0b3J5LnB1c2hTdGF0ZSh7XG4gICAgICB1c2VyU3RhdGU6IHN0YXRlLFxuICAgICAgX2luZGV4OiBjdXJyZW50SGlzdG9yeUluZGV4LFxuICAgIH0sIC8qIGlnbm9yZWQgdGl0bGUgKi8gJycsIGFic29sdXRlSW50ZXJuYWxIcmVmKTtcbiAgfSBlbHNlIHtcbiAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZSh7XG4gICAgICB1c2VyU3RhdGU6IHN0YXRlLFxuICAgICAgX2luZGV4OiBjdXJyZW50SGlzdG9yeUluZGV4LFxuICAgIH0sIC8qIGlnbm9yZWQgdGl0bGUgKi8gJycsIGFic29sdXRlSW50ZXJuYWxIcmVmKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBuYXZpZ2F0ZUhpc3RvcnlXaXRob3V0UG9wU3RhdGVDYWxsYmFjayhkZWx0YTogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICBjb25zdCBvbGRQb3BTdGF0ZUNhbGxiYWNrID0gcG9wU3RhdGVDYWxsYmFjaztcblxuICAgIHBvcFN0YXRlQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICBwb3BTdGF0ZUNhbGxiYWNrID0gb2xkUG9wU3RhdGVDYWxsYmFjaztcbiAgICAgIHJlc29sdmUoKTtcbiAgICB9O1xuXG4gICAgaGlzdG9yeS5nbyhkZWx0YSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpZ25vcmVQZW5kaW5nTmF2aWdhdGlvbigpIHtcbiAgaWYgKHJlc29sdmVDdXJyZW50TmF2aWdhdGlvbikge1xuICAgIHJlc29sdmVDdXJyZW50TmF2aWdhdGlvbihmYWxzZSk7XG4gICAgcmVzb2x2ZUN1cnJlbnROYXZpZ2F0aW9uID0gbnVsbDtcbiAgfVxufVxuXG5mdW5jdGlvbiBub3RpZnlMb2NhdGlvbkNoYW5naW5nKHVyaTogc3RyaW5nLCBzdGF0ZTogc3RyaW5nIHwgdW5kZWZpbmVkLCBpbnRlcmNlcHRlZDogYm9vbGVhbiwgY2FsbGJhY2tzOiBOYXZpZ2F0aW9uQ2FsbGJhY2tzKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZTxib29sZWFuPihyZXNvbHZlID0+IHtcbiAgICBpZ25vcmVQZW5kaW5nTmF2aWdhdGlvbigpO1xuICAgIGN1cnJlbnRMb2NhdGlvbkNoYW5naW5nQ2FsbElkKys7XG4gICAgcmVzb2x2ZUN1cnJlbnROYXZpZ2F0aW9uID0gcmVzb2x2ZTtcbiAgICBjYWxsYmFja3MubG9jYXRpb25DaGFuZ2luZyhjdXJyZW50TG9jYXRpb25DaGFuZ2luZ0NhbGxJZCwgdXJpLCBzdGF0ZSwgaW50ZXJjZXB0ZWQpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZW5kTG9jYXRpb25DaGFuZ2luZyhjYWxsSWQ6IG51bWJlciwgc2hvdWxkQ29udGludWVOYXZpZ2F0aW9uOiBib29sZWFuKSB7XG4gIGlmIChyZXNvbHZlQ3VycmVudE5hdmlnYXRpb24gJiYgY2FsbElkID09PSBjdXJyZW50TG9jYXRpb25DaGFuZ2luZ0NhbGxJZCkge1xuICAgIHJlc29sdmVDdXJyZW50TmF2aWdhdGlvbihzaG91bGRDb250aW51ZU5hdmlnYXRpb24pO1xuICAgIHJlc29sdmVDdXJyZW50TmF2aWdhdGlvbiA9IG51bGw7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gb25Ccm93c2VySW5pdGlhdGVkUG9wU3RhdGUoc3RhdGU6IFBvcFN0YXRlRXZlbnQpIHtcbiAgaWdub3JlUGVuZGluZ05hdmlnYXRpb24oKTtcblxuICBjb25zdCBjYWxsYmFja3MgPSBnZXRJbnRlcmFjdGl2ZVJvdXRlck5hdmlnYXRpb25DYWxsYmFja3MoKTtcbiAgaWYgKGNhbGxiYWNrcz8uaGFzTG9jYXRpb25DaGFuZ2luZ0V2ZW50TGlzdGVuZXJzKSB7XG4gICAgY29uc3QgaW5kZXggPSBzdGF0ZS5zdGF0ZT8uX2luZGV4ID8/IDA7XG4gICAgY29uc3QgdXNlclN0YXRlID0gc3RhdGUuc3RhdGU/LnVzZXJTdGF0ZTtcbiAgICBjb25zdCBkZWx0YSA9IGluZGV4IC0gY3VycmVudEhpc3RvcnlJbmRleDtcbiAgICBjb25zdCB1cmkgPSBsb2NhdGlvbi5ocmVmO1xuXG4gICAgLy8gVGVtcG9yYXJpbHkgcmV2ZXJ0IHRoZSBuYXZpZ2F0aW9uIHVudGlsIHdlIGNvbmZpcm0gaWYgdGhlIG5hdmlnYXRpb24gc2hvdWxkIGNvbnRpbnVlLlxuICAgIGF3YWl0IG5hdmlnYXRlSGlzdG9yeVdpdGhvdXRQb3BTdGF0ZUNhbGxiYWNrKC1kZWx0YSk7XG5cbiAgICBjb25zdCBzaG91bGRDb250aW51ZU5hdmlnYXRpb24gPSBhd2FpdCBub3RpZnlMb2NhdGlvbkNoYW5naW5nKHVyaSwgdXNlclN0YXRlLCBmYWxzZSwgY2FsbGJhY2tzKTtcbiAgICBpZiAoIXNob3VsZENvbnRpbnVlTmF2aWdhdGlvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGF3YWl0IG5hdmlnYXRlSGlzdG9yeVdpdGhvdXRQb3BTdGF0ZUNhbGxiYWNrKGRlbHRhKTtcbiAgfVxuXG4gIC8vIFdlIGRvbid0IGtub3cgaWYgcG9wc3RhdGUgd2FzIHRyaWdnZXJlZCBmb3IgYSBuYXZpZ2F0aW9uIHRoYXQgY2FuIGJlIGhhbmRsZWQgYnkgdGhlIGNsaWVudC1zaWRlIHJvdXRlcixcbiAgLy8gc28gd2UgdHJlYXQgaXQgYXMgYSBpbnRlcmNlcHRlZCBsaW5rIHRvIGJlIHNhZmUuXG4gIGF3YWl0IG5vdGlmeUxvY2F0aW9uQ2hhbmdlZCgvKiBpbnRlcmNlcHRlZExpbmsgKi8gdHJ1ZSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIG5vdGlmeUxvY2F0aW9uQ2hhbmdlZChpbnRlcmNlcHRlZExpbms6IGJvb2xlYW4sIGludGVybmFsRGVzdGluYXRpb25IcmVmPzogc3RyaW5nKSB7XG4gIGNvbnN0IHVyaSA9IGludGVybmFsRGVzdGluYXRpb25IcmVmID8/IGxvY2F0aW9uLmhyZWY7XG5cbiAgYXdhaXQgUHJvbWlzZS5hbGwoQXJyYXkuZnJvbShuYXZpZ2F0aW9uQ2FsbGJhY2tzLCBhc3luYyAoW3JlbmRlcmVySWQsIGNhbGxiYWNrc10pID0+IHtcbiAgICBpZiAoaXNSZW5kZXJlckF0dGFjaGVkKHJlbmRlcmVySWQpKSB7XG4gICAgICBhd2FpdCBjYWxsYmFja3MubG9jYXRpb25DaGFuZ2VkKHVyaSwgaGlzdG9yeS5zdGF0ZT8udXNlclN0YXRlLCBpbnRlcmNlcHRlZExpbmspO1xuICAgIH1cbiAgfSkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBvblBvcFN0YXRlKHN0YXRlOiBQb3BTdGF0ZUV2ZW50KSB7XG4gIGlmIChwb3BTdGF0ZUNhbGxiYWNrICYmIHNob3VsZFVzZUNsaWVudFNpZGVSb3V0aW5nKCkpIHtcbiAgICBhd2FpdCBwb3BTdGF0ZUNhbGxiYWNrKHN0YXRlKTtcbiAgfVxuXG4gIGN1cnJlbnRIaXN0b3J5SW5kZXggPSBoaXN0b3J5LnN0YXRlPy5faW5kZXggPz8gMDtcbn1cblxuZnVuY3Rpb24gZ2V0SW50ZXJhY3RpdmVSb3V0ZXJOYXZpZ2F0aW9uQ2FsbGJhY2tzKCk6IE5hdmlnYXRpb25DYWxsYmFja3MgfCB1bmRlZmluZWQge1xuICBjb25zdCBpbnRlcmFjdGl2ZVJvdXRlclJlbmRlcmVySWQgPSBnZXRJbnRlcmFjdGl2ZVJvdXRlclJlbmRlcmVySWQoKTtcbiAgaWYgKGludGVyYWN0aXZlUm91dGVyUmVuZGVyZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIHJldHVybiBuYXZpZ2F0aW9uQ2FsbGJhY2tzLmdldChpbnRlcmFjdGl2ZVJvdXRlclJlbmRlcmVySWQpO1xufVxuXG5mdW5jdGlvbiBzaG91bGRVc2VDbGllbnRTaWRlUm91dGluZygpIHtcbiAgcmV0dXJuIGhhc0ludGVyYWN0aXZlUm91dGVyKCkgfHwgIWhhc1Byb2dyYW1tYXRpY0VuaGFuY2VkTmF2aWdhdGlvbkhhbmRsZXIoKTtcbn1cblxuLy8gS2VlcCBpbiBzeW5jIHdpdGggQ29tcG9uZW50cy9zcmMvTmF2aWdhdGlvbk9wdGlvbnMuY3NcbmV4cG9ydCBpbnRlcmZhY2UgTmF2aWdhdGlvbk9wdGlvbnMge1xuICBmb3JjZUxvYWQ6IGJvb2xlYW47XG4gIHJlcGxhY2VIaXN0b3J5RW50cnk6IGJvb2xlYW47XG4gIGhpc3RvcnlFbnRyeVN0YXRlPzogc3RyaW5nO1xufVxuIiwiLy8gTGljZW5zZWQgdG8gdGhlIC5ORVQgRm91bmRhdGlvbiB1bmRlciBvbmUgb3IgbW9yZSBhZ3JlZW1lbnRzLlxuLy8gVGhlIC5ORVQgRm91bmRhdGlvbiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxuaW1wb3J0IHsgV2ViUmVuZGVyZXJJZCB9IGZyb20gJy4uL1JlbmRlcmluZy9XZWJSZW5kZXJlcklkJztcblxubGV0IGludGVyYWN0aXZlUm91dGVyUmVuZGVyZXJJZDogV2ViUmVuZGVyZXJJZCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbmxldCBwcm9ncmFtbWF0aWNFbmhhbmNlZE5hdmlnYXRpb25IYW5kbGVyOiB0eXBlb2YgcGVyZm9ybVByb2dyYW1tYXRpY0VuaGFuY2VkTmF2aWdhdGlvbiB8IHVuZGVmaW5lZDtcbmxldCBlbmhhbmNlZE5hdmlnYXRpb25MaXN0ZW5lcjogdHlwZW9mIG5vdGlmeUVuaGFuY2VkTmF2aWdhdGlvbkxpc3RlbmVycyB8IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBDaGVja3MgaWYgYSBjbGljayBldmVudCBjb3JyZXNwb25kcyB0byBhbiA8YT4gdGFnIHJlZmVyZW5jaW5nIGEgVVJMIHdpdGhpbiB0aGUgYmFzZSBocmVmLCBhbmQgdGhhdCBpbnRlcmNlcHRpb25cbiAqIGlzbid0IGJ5cGFzc2VkIChlLmcuLCBieSBhICdkb3dubG9hZCcgYXR0cmlidXRlIG9yIHRoZSB1c2VyIGhvbGRpbmcgYSBtZXRhIGtleSB3aGlsZSBjbGlja2luZykuXG4gKiBAcGFyYW0gZXZlbnQgVGhlIGV2ZW50IHRoYXQgb2NjdXJyZWRcbiAqIEBwYXJhbSBjYWxsYmFja0lmSW50ZXJjZXB0ZWQgQSBjYWxsYmFjayB0aGF0IHdpbGwgYmUgaW52b2tlZCBpZiB0aGUgZXZlbnQgY29ycmVzcG9uZHMgdG8gYSBjbGljayBvbiBhbiA8YT4gdGhhdCBjYW4gYmUgaW50ZXJjZXB0ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVDbGlja0Zvck5hdmlnYXRpb25JbnRlcmNlcHRpb24oZXZlbnQ6IE1vdXNlRXZlbnQsIGNhbGxiYWNrSWZJbnRlcmNlcHRlZDogKGFic29sdXRlSW50ZXJuYWxIcmVmOiBzdHJpbmcpID0+IHZvaWQpOiB2b2lkIHtcbiAgaWYgKGV2ZW50LmJ1dHRvbiAhPT0gMCB8fCBldmVudEhhc1NwZWNpYWxLZXkoZXZlbnQpKSB7XG4gICAgLy8gRG9uJ3Qgc3RvcCBjdHJsL21ldGEtY2xpY2sgKGV0YykgZnJvbSBvcGVuaW5nIGxpbmtzIGluIG5ldyB0YWJzL3dpbmRvd3NcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEludGVyY2VwdCBjbGlja3Mgb24gYWxsIDxhPiBlbGVtZW50cyB3aGVyZSB0aGUgaHJlZiBpcyB3aXRoaW4gdGhlIDxiYXNlIGhyZWY+IFVSSSBzcGFjZVxuICAvLyBXZSBtdXN0IGV4cGxpY2l0bHkgY2hlY2sgaWYgaXQgaGFzIGFuICdocmVmJyBhdHRyaWJ1dGUsIGJlY2F1c2UgaWYgaXQgZG9lc24ndCwgdGhlIHJlc3VsdCBtaWdodCBiZSBudWxsIG9yIGFuIGVtcHR5IHN0cmluZyBkZXBlbmRpbmcgb24gdGhlIGJyb3dzZXJcbiAgY29uc3QgYW5jaG9yVGFyZ2V0ID0gZmluZEFuY2hvclRhcmdldChldmVudCk7XG5cbiAgaWYgKGFuY2hvclRhcmdldCAmJiBjYW5Qcm9jZXNzQW5jaG9yKGFuY2hvclRhcmdldCkpIHtcbiAgICBjb25zdCBhbmNob3JIcmVmID0gYW5jaG9yVGFyZ2V0LmdldEF0dHJpYnV0ZSgnaHJlZicpITtcblxuICAgIGNvbnN0IGFic29sdXRlSHJlZiA9IHRvQWJzb2x1dGVVcmkoYW5jaG9ySHJlZik7XG5cbiAgICBpZiAoaXNXaXRoaW5CYXNlVXJpU3BhY2UoYWJzb2x1dGVIcmVmKSkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNhbGxiYWNrSWZJbnRlcmNlcHRlZChhYnNvbHV0ZUhyZWYpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNXaXRoaW5CYXNlVXJpU3BhY2UoaHJlZjogc3RyaW5nKSB7XG4gIGNvbnN0IGJhc2VVcmlXaXRob3V0VHJhaWxpbmdTbGFzaCA9IHRvQmFzZVVyaVdpdGhvdXRUcmFpbGluZ1NsYXNoKGRvY3VtZW50LmJhc2VVUkkhKTtcbiAgY29uc3QgbmV4dENoYXIgPSBocmVmLmNoYXJBdChiYXNlVXJpV2l0aG91dFRyYWlsaW5nU2xhc2gubGVuZ3RoKTtcblxuICByZXR1cm4gaHJlZi5zdGFydHNXaXRoKGJhc2VVcmlXaXRob3V0VHJhaWxpbmdTbGFzaClcbiAgJiYgKG5leHRDaGFyID09PSAnJyB8fCBuZXh0Q2hhciA9PT0gJy8nIHx8IG5leHRDaGFyID09PSAnPycgfHwgbmV4dENoYXIgPT09ICcjJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1NhbWVQYWdlV2l0aEhhc2gob2xkVXJsOiBzdHJpbmcsIG5ld1VybDogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IGEgPSBuZXcgVVJMKG9sZFVybCk7XG4gIGNvbnN0IGIgPSBuZXcgVVJMKG5ld1VybCk7XG4gIHJldHVybiBhLm9yaWdpbiA9PT0gYi5vcmlnaW4gJiYgYS5wYXRobmFtZSA9PT0gYi5wYXRobmFtZVxuICAgICYmIGEuc2VhcmNoID09PSBiLnNlYXJjaCAmJiBiLmhhc2ggIT09ICcnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNGb3JTYW1lUGF0aCh1cmwxOiBzdHJpbmcsIHVybDI6IHN0cmluZykge1xuICAvLyBXZSBhcmUgZ29pbmcgdG8gdXNlIHRoZSBzY2hlbWUsIGhvc3QsIHBvcnQgYW5kIHBhdGggdG8gZGV0ZXJtaW5lIGlmIHRoZSB0d28gVVJMcyBhcmUgY29tcGF0aWJsZS5cbiAgLy8gV2UgZG8gbm90IGFjY291bnQgZm9yIHRoZSBxdWVyeSBzdHJpbmcgYXMgd2Ugd2FudCB0byBhbGxvdyBmb3IgdGhlIHF1ZXJ5IHN0cmluZyB0byBjaGFuZ2UuXG4gIC8vIChCbGF6b3IgZG9lc24ndCB1c2UgdGhlIHF1ZXJ5IHN0cmluZyBmb3Igcm91dGluZyBwdXJwb3NlcykuXG4gIGNvbnN0IHBhcnNlZFVybDEgPSBuZXcgVVJMKHVybDEpO1xuICBjb25zdCBwYXJzZWRVcmwyID0gbmV3IFVSTCh1cmwyKTtcbiAgcmV0dXJuIHBhcnNlZFVybDEucHJvdG9jb2wgPT09IHBhcnNlZFVybDIucHJvdG9jb2xcbiAgICAmJiBwYXJzZWRVcmwxLmhvc3QgPT09IHBhcnNlZFVybDIuaG9zdFxuICAgICYmIHBhcnNlZFVybDEucG9ydCA9PT0gcGFyc2VkVXJsMi5wb3J0XG4gICAgJiYgcGFyc2VkVXJsMS5wYXRobmFtZSA9PT0gcGFyc2VkVXJsMi5wYXRobmFtZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBlcmZvcm1TY3JvbGxUb0VsZW1lbnRPblRoZVNhbWVQYWdlKGFic29sdXRlSHJlZiA6IHN0cmluZyk6IHZvaWQge1xuICBjb25zdCBoYXNoSW5kZXggPSBhYnNvbHV0ZUhyZWYuaW5kZXhPZignIycpO1xuICBpZiAoaGFzaEluZGV4ID09PSBhYnNvbHV0ZUhyZWYubGVuZ3RoIC0gMSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGlkZW50aWZpZXIgPSBhYnNvbHV0ZUhyZWYuc3Vic3RyaW5nKGhhc2hJbmRleCArIDEpO1xuICBzY3JvbGxUb0VsZW1lbnQoaWRlbnRpZmllcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzY3JvbGxUb0VsZW1lbnQoaWRlbnRpZmllcjogc3RyaW5nKTogdm9pZCB7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkZW50aWZpZXIpPy5zY3JvbGxJbnRvVmlldygpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXR0YWNoRW5oYW5jZWROYXZpZ2F0aW9uTGlzdGVuZXIobGlzdGVuZXI6IHR5cGVvZiBlbmhhbmNlZE5hdmlnYXRpb25MaXN0ZW5lcikge1xuICBlbmhhbmNlZE5hdmlnYXRpb25MaXN0ZW5lciA9IGxpc3RlbmVyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbm90aWZ5RW5oYW5jZWROYXZpZ2F0aW9uTGlzdGVuZXJzKGludGVybmFsRGVzdGluYXRpb25IcmVmOiBzdHJpbmcsIGludGVyY2VwdGVkTGluazogYm9vbGVhbikge1xuICBlbmhhbmNlZE5hdmlnYXRpb25MaXN0ZW5lcj8uKGludGVybmFsRGVzdGluYXRpb25IcmVmLCBpbnRlcmNlcHRlZExpbmspO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzUHJvZ3JhbW1hdGljRW5oYW5jZWROYXZpZ2F0aW9uSGFuZGxlcigpOiBib29sZWFuIHtcbiAgcmV0dXJuIHByb2dyYW1tYXRpY0VuaGFuY2VkTmF2aWdhdGlvbkhhbmRsZXIgIT09IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGF0dGFjaFByb2dyYW1tYXRpY0VuaGFuY2VkTmF2aWdhdGlvbkhhbmRsZXIoaGFuZGxlcjogdHlwZW9mIHByb2dyYW1tYXRpY0VuaGFuY2VkTmF2aWdhdGlvbkhhbmRsZXIpIHtcbiAgcHJvZ3JhbW1hdGljRW5oYW5jZWROYXZpZ2F0aW9uSGFuZGxlciA9IGhhbmRsZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwZXJmb3JtUHJvZ3JhbW1hdGljRW5oYW5jZWROYXZpZ2F0aW9uKGFic29sdXRlSW50ZXJuYWxIcmVmOiBzdHJpbmcsIHJlcGxhY2U6IGJvb2xlYW4pOiB2b2lkIHtcbiAgaWYgKCFwcm9ncmFtbWF0aWNFbmhhbmNlZE5hdmlnYXRpb25IYW5kbGVyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdObyBlbmhhbmNlZCBwcm9ncmFtbWF0aWMgbmF2aWdhdGlvbiBoYW5kbGVyIGhhcyBiZWVuIGF0dGFjaGVkJyk7XG4gIH1cblxuICBwcm9ncmFtbWF0aWNFbmhhbmNlZE5hdmlnYXRpb25IYW5kbGVyKGFic29sdXRlSW50ZXJuYWxIcmVmLCByZXBsYWNlKTtcbn1cblxuZnVuY3Rpb24gdG9CYXNlVXJpV2l0aG91dFRyYWlsaW5nU2xhc2goYmFzZVVyaTogc3RyaW5nKSB7XG4gIHJldHVybiBiYXNlVXJpLnN1YnN0cmluZygwLCBiYXNlVXJpLmxhc3RJbmRleE9mKCcvJykpO1xufVxuXG5sZXQgdGVzdEFuY2hvcjogSFRNTEFuY2hvckVsZW1lbnQ7XG5leHBvcnQgZnVuY3Rpb24gdG9BYnNvbHV0ZVVyaShyZWxhdGl2ZVVyaTogc3RyaW5nKTogc3RyaW5nIHtcbiAgdGVzdEFuY2hvciA9IHRlc3RBbmNob3IgfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICB0ZXN0QW5jaG9yLmhyZWYgPSByZWxhdGl2ZVVyaTtcbiAgcmV0dXJuIHRlc3RBbmNob3IuaHJlZjtcbn1cblxuZnVuY3Rpb24gZXZlbnRIYXNTcGVjaWFsS2V5KGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gIHJldHVybiBldmVudC5jdHJsS2V5IHx8IGV2ZW50LnNoaWZ0S2V5IHx8IGV2ZW50LmFsdEtleSB8fCBldmVudC5tZXRhS2V5O1xufVxuXG5mdW5jdGlvbiBjYW5Qcm9jZXNzQW5jaG9yKGFuY2hvclRhcmdldDogSFRNTEFuY2hvckVsZW1lbnQgfCBTVkdBRWxlbWVudCkge1xuICBjb25zdCB0YXJnZXRBdHRyaWJ1dGVWYWx1ZSA9IGFuY2hvclRhcmdldC5nZXRBdHRyaWJ1dGUoJ3RhcmdldCcpO1xuICBjb25zdCBvcGVuc0luU2FtZUZyYW1lID0gIXRhcmdldEF0dHJpYnV0ZVZhbHVlIHx8IHRhcmdldEF0dHJpYnV0ZVZhbHVlID09PSAnX3NlbGYnO1xuICByZXR1cm4gb3BlbnNJblNhbWVGcmFtZSAmJiBhbmNob3JUYXJnZXQuaGFzQXR0cmlidXRlKCdocmVmJykgJiYgIWFuY2hvclRhcmdldC5oYXNBdHRyaWJ1dGUoJ2Rvd25sb2FkJyk7XG59XG5cbmZ1bmN0aW9uIGZpbmRBbmNob3JUYXJnZXQoZXZlbnQ6IE1vdXNlRXZlbnQpOiBIVE1MQW5jaG9yRWxlbWVudCB8IFNWR0FFbGVtZW50IHwgbnVsbCB7XG4gIGNvbnN0IHBhdGggPSBldmVudC5jb21wb3NlZFBhdGggJiYgZXZlbnQuY29tcG9zZWRQYXRoKCk7XG4gIGlmIChwYXRoKSB7XG4gICAgLy8gVGhpcyBsb2dpYyB3b3JrcyB3aXRoIGV2ZW50cyB0aGF0IHRhcmdldCBlbGVtZW50cyB3aXRoaW4gYSBzaGFkb3cgcm9vdCxcbiAgICAvLyBhcyBsb25nIGFzIHRoZSBzaGFkb3cgbW9kZSBpcyAnb3BlbicuIEZvciBjbG9zZWQgc2hhZG93cywgd2UgY2FuJ3QgcG9zc2libHlcbiAgICAvLyBrbm93IHdoYXQgaW50ZXJuYWwgZWxlbWVudCB3YXMgY2xpY2tlZC5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGgubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNhbmRpZGF0ZSA9IHBhdGhbaV07XG4gICAgICBpZiAoY2FuZGlkYXRlIGluc3RhbmNlb2YgSFRNTEFuY2hvckVsZW1lbnQgfHwgY2FuZGlkYXRlIGluc3RhbmNlb2YgU1ZHQUVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNJbnRlcmFjdGl2ZVJvdXRlcigpOiBib29sZWFuIHtcbiAgcmV0dXJuIGludGVyYWN0aXZlUm91dGVyUmVuZGVyZXJJZCAhPT0gdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW50ZXJhY3RpdmVSb3V0ZXJSZW5kZXJlcklkKCkgOiBXZWJSZW5kZXJlcklkIHwgdW5kZWZpbmVkIHtcbiAgcmV0dXJuIGludGVyYWN0aXZlUm91dGVyUmVuZGVyZXJJZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEhhc0ludGVyYWN0aXZlUm91dGVyKHJlbmRlcmVySWQ6IFdlYlJlbmRlcmVySWQpIHtcbiAgaWYgKGludGVyYWN0aXZlUm91dGVyUmVuZGVyZXJJZCAhPT0gdW5kZWZpbmVkICYmIGludGVyYWN0aXZlUm91dGVyUmVuZGVyZXJJZCAhPT0gcmVuZGVyZXJJZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignT25seSBvbmUgaW50ZXJhY3RpdmUgcnVudGltZSBtYXkgZW5hYmxlIG5hdmlnYXRpb24gaW50ZXJjZXB0aW9uIGF0IGEgdGltZS4nKTtcbiAgfVxuXG4gIGludGVyYWN0aXZlUm91dGVyUmVuZGVyZXJJZCA9IHJlbmRlcmVySWQ7XG59XG4iLCIvLyBMaWNlbnNlZCB0byB0aGUgLk5FVCBGb3VuZGF0aW9uIHVuZGVyIG9uZSBvciBtb3JlIGFncmVlbWVudHMuXG4vLyBUaGUgLk5FVCBGb3VuZGF0aW9uIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG5pbXBvcnQgJy4uL1BsYXRmb3JtL1BsYXRmb3JtJztcbmltcG9ydCAnLi4vRW52aXJvbm1lbnQnO1xuaW1wb3J0IHsgUmVuZGVyQmF0Y2ggfSBmcm9tICcuL1JlbmRlckJhdGNoL1JlbmRlckJhdGNoJztcbmltcG9ydCB7IEJyb3dzZXJSZW5kZXJlciB9IGZyb20gJy4vQnJvd3NlclJlbmRlcmVyJztcbmltcG9ydCB7IHRvTG9naWNhbEVsZW1lbnQsIExvZ2ljYWxFbGVtZW50IH0gZnJvbSAnLi9Mb2dpY2FsRWxlbWVudHMnO1xuaW1wb3J0IHsgZ2V0QW5kUmVtb3ZlUGVuZGluZ1Jvb3RDb21wb25lbnRDb250YWluZXIgfSBmcm9tICcuL0pTUm9vdENvbXBvbmVudHMnO1xuXG5pbnRlcmZhY2UgQnJvd3NlclJlbmRlcmVyUmVnaXN0cnkge1xuICBbYnJvd3NlclJlbmRlcmVySWQ6IG51bWJlcl06IEJyb3dzZXJSZW5kZXJlcjtcbn1cbmNvbnN0IGJyb3dzZXJSZW5kZXJlcnM6IEJyb3dzZXJSZW5kZXJlclJlZ2lzdHJ5ID0ge307XG5sZXQgc2hvdWxkUmVzZXRTY3JvbGxBZnRlck5leHRCYXRjaCA9IGZhbHNlO1xuXG5leHBvcnQgZnVuY3Rpb24gYXR0YWNoUm9vdENvbXBvbmVudFRvTG9naWNhbEVsZW1lbnQoYnJvd3NlclJlbmRlcmVySWQ6IG51bWJlciwgbG9naWNhbEVsZW1lbnQ6IExvZ2ljYWxFbGVtZW50LCBjb21wb25lbnRJZDogbnVtYmVyLCBhcHBlbmRDb250ZW50OiBib29sZWFuKTogdm9pZCB7XG4gIGxldCBicm93c2VyUmVuZGVyZXIgPSBicm93c2VyUmVuZGVyZXJzW2Jyb3dzZXJSZW5kZXJlcklkXTtcbiAgaWYgKCFicm93c2VyUmVuZGVyZXIpIHtcbiAgICBicm93c2VyUmVuZGVyZXIgPSBuZXcgQnJvd3NlclJlbmRlcmVyKGJyb3dzZXJSZW5kZXJlcklkKTtcbiAgICBicm93c2VyUmVuZGVyZXJzW2Jyb3dzZXJSZW5kZXJlcklkXSA9IGJyb3dzZXJSZW5kZXJlcjtcbiAgfVxuXG4gIGJyb3dzZXJSZW5kZXJlci5hdHRhY2hSb290Q29tcG9uZW50VG9Mb2dpY2FsRWxlbWVudChjb21wb25lbnRJZCwgbG9naWNhbEVsZW1lbnQsIGFwcGVuZENvbnRlbnQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXR0YWNoUm9vdENvbXBvbmVudFRvRWxlbWVudChlbGVtZW50U2VsZWN0b3I6IHN0cmluZywgY29tcG9uZW50SWQ6IG51bWJlciwgYnJvd3NlclJlbmRlcmVySWQ6IG51bWJlcik6IHZvaWQge1xuICBjb25zdCBhZnRlckVsZW1lbnRTZWxlY3RvciA9ICc6OmFmdGVyJztcbiAgY29uc3QgYmVmb3JlRWxlbWVudFNlbGVjdG9yID0gJzo6YmVmb3JlJztcbiAgbGV0IGFwcGVuZENvbnRlbnQgPSBmYWxzZTtcblxuICBpZiAoZWxlbWVudFNlbGVjdG9yLmVuZHNXaXRoKGFmdGVyRWxlbWVudFNlbGVjdG9yKSkge1xuICAgIGVsZW1lbnRTZWxlY3RvciA9IGVsZW1lbnRTZWxlY3Rvci5zbGljZSgwLCAtYWZ0ZXJFbGVtZW50U2VsZWN0b3IubGVuZ3RoKTtcbiAgICBhcHBlbmRDb250ZW50ID0gdHJ1ZTtcbiAgfSBlbHNlIGlmIChlbGVtZW50U2VsZWN0b3IuZW5kc1dpdGgoYmVmb3JlRWxlbWVudFNlbGVjdG9yKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgVGhlICcke2JlZm9yZUVsZW1lbnRTZWxlY3Rvcn0nIHNlbGVjdG9yIGlzIG5vdCBzdXBwb3J0ZWQuYCk7XG4gIH1cblxuICBjb25zdCBlbGVtZW50ID0gZ2V0QW5kUmVtb3ZlUGVuZGluZ1Jvb3RDb21wb25lbnRDb250YWluZXIoZWxlbWVudFNlbGVjdG9yKVxuICAgIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudFNlbGVjdG9yKTtcbiAgaWYgKCFlbGVtZW50KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCBhbnkgZWxlbWVudCBtYXRjaGluZyBzZWxlY3RvciAnJHtlbGVtZW50U2VsZWN0b3J9Jy5gKTtcbiAgfVxuXG4gIC8vICdhbGxvd0V4aXN0aW5nQ29udGVudHMnIHRvIGtlZXAgYW55IHByZXJlbmRlcmVkIGNvbnRlbnQgdW50aWwgd2UgZG8gdGhlIGZpcnN0IGNsaWVudC1zaWRlIHJlbmRlclxuICAvLyBPbmx5IGNsaWVudC1zaWRlIEJsYXpvciBzdXBwbGllcyBhIGJyb3dzZXIgcmVuZGVyZXIgSURcbiAgYXR0YWNoUm9vdENvbXBvbmVudFRvTG9naWNhbEVsZW1lbnQoYnJvd3NlclJlbmRlcmVySWQsIHRvTG9naWNhbEVsZW1lbnQoZWxlbWVudCwgLyogYWxsb3cgZXhpc3RpbmcgY29udGVudHMgKi8gdHJ1ZSksIGNvbXBvbmVudElkLCBhcHBlbmRDb250ZW50KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlbmRlcmVyZXIoYnJvd3NlclJlbmRlcmVySWQ6IG51bWJlcik6IEJyb3dzZXJSZW5kZXJlciB8IHVuZGVmaW5lZCB7XG4gIHJldHVybiBicm93c2VyUmVuZGVyZXJzW2Jyb3dzZXJSZW5kZXJlcklkXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckJhdGNoKGJyb3dzZXJSZW5kZXJlcklkOiBudW1iZXIsIGJhdGNoOiBSZW5kZXJCYXRjaCk6IHZvaWQge1xuICBjb25zdCBicm93c2VyUmVuZGVyZXIgPSBicm93c2VyUmVuZGVyZXJzW2Jyb3dzZXJSZW5kZXJlcklkXTtcbiAgaWYgKCFicm93c2VyUmVuZGVyZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZXJlIGlzIG5vIGJyb3dzZXIgcmVuZGVyZXIgd2l0aCBJRCAke2Jyb3dzZXJSZW5kZXJlcklkfS5gKTtcbiAgfVxuXG4gIGNvbnN0IGFycmF5UmFuZ2VSZWFkZXIgPSBiYXRjaC5hcnJheVJhbmdlUmVhZGVyO1xuICBjb25zdCB1cGRhdGVkQ29tcG9uZW50c1JhbmdlID0gYmF0Y2gudXBkYXRlZENvbXBvbmVudHMoKTtcbiAgY29uc3QgdXBkYXRlZENvbXBvbmVudHNWYWx1ZXMgPSBhcnJheVJhbmdlUmVhZGVyLnZhbHVlcyh1cGRhdGVkQ29tcG9uZW50c1JhbmdlKTtcbiAgY29uc3QgdXBkYXRlZENvbXBvbmVudHNMZW5ndGggPSBhcnJheVJhbmdlUmVhZGVyLmNvdW50KHVwZGF0ZWRDb21wb25lbnRzUmFuZ2UpO1xuICBjb25zdCByZWZlcmVuY2VGcmFtZXMgPSBiYXRjaC5yZWZlcmVuY2VGcmFtZXMoKTtcbiAgY29uc3QgcmVmZXJlbmNlRnJhbWVzVmFsdWVzID0gYXJyYXlSYW5nZVJlYWRlci52YWx1ZXMocmVmZXJlbmNlRnJhbWVzKTtcbiAgY29uc3QgZGlmZlJlYWRlciA9IGJhdGNoLmRpZmZSZWFkZXI7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB1cGRhdGVkQ29tcG9uZW50c0xlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgZGlmZiA9IGJhdGNoLnVwZGF0ZWRDb21wb25lbnRzRW50cnkodXBkYXRlZENvbXBvbmVudHNWYWx1ZXMsIGkpO1xuICAgIGNvbnN0IGNvbXBvbmVudElkID0gZGlmZlJlYWRlci5jb21wb25lbnRJZChkaWZmKTtcbiAgICBjb25zdCBlZGl0cyA9IGRpZmZSZWFkZXIuZWRpdHMoZGlmZik7XG4gICAgYnJvd3NlclJlbmRlcmVyLnVwZGF0ZUNvbXBvbmVudChiYXRjaCwgY29tcG9uZW50SWQsIGVkaXRzLCByZWZlcmVuY2VGcmFtZXNWYWx1ZXMpO1xuICB9XG5cbiAgY29uc3QgZGlzcG9zZWRDb21wb25lbnRJZHNSYW5nZSA9IGJhdGNoLmRpc3Bvc2VkQ29tcG9uZW50SWRzKCk7XG4gIGNvbnN0IGRpc3Bvc2VkQ29tcG9uZW50SWRzVmFsdWVzID0gYXJyYXlSYW5nZVJlYWRlci52YWx1ZXMoZGlzcG9zZWRDb21wb25lbnRJZHNSYW5nZSk7XG4gIGNvbnN0IGRpc3Bvc2VkQ29tcG9uZW50SWRzTGVuZ3RoID0gYXJyYXlSYW5nZVJlYWRlci5jb3VudChkaXNwb3NlZENvbXBvbmVudElkc1JhbmdlKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBkaXNwb3NlZENvbXBvbmVudElkc0xlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgY29tcG9uZW50SWQgPSBiYXRjaC5kaXNwb3NlZENvbXBvbmVudElkc0VudHJ5KGRpc3Bvc2VkQ29tcG9uZW50SWRzVmFsdWVzLCBpKTtcbiAgICBicm93c2VyUmVuZGVyZXIuZGlzcG9zZUNvbXBvbmVudChjb21wb25lbnRJZCk7XG4gIH1cblxuICBjb25zdCBkaXNwb3NlZEV2ZW50SGFuZGxlcklkc1JhbmdlID0gYmF0Y2guZGlzcG9zZWRFdmVudEhhbmRsZXJJZHMoKTtcbiAgY29uc3QgZGlzcG9zZWRFdmVudEhhbmRsZXJJZHNWYWx1ZXMgPSBhcnJheVJhbmdlUmVhZGVyLnZhbHVlcyhkaXNwb3NlZEV2ZW50SGFuZGxlcklkc1JhbmdlKTtcbiAgY29uc3QgZGlzcG9zZWRFdmVudEhhbmRsZXJJZHNMZW5ndGggPSBhcnJheVJhbmdlUmVhZGVyLmNvdW50KGRpc3Bvc2VkRXZlbnRIYW5kbGVySWRzUmFuZ2UpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGRpc3Bvc2VkRXZlbnRIYW5kbGVySWRzTGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBldmVudEhhbmRsZXJJZCA9IGJhdGNoLmRpc3Bvc2VkRXZlbnRIYW5kbGVySWRzRW50cnkoZGlzcG9zZWRFdmVudEhhbmRsZXJJZHNWYWx1ZXMsIGkpO1xuICAgIGJyb3dzZXJSZW5kZXJlci5kaXNwb3NlRXZlbnRIYW5kbGVyKGV2ZW50SGFuZGxlcklkKTtcbiAgfVxuXG4gIHJlc2V0U2Nyb2xsSWZOZWVkZWQoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0U2Nyb2xsQWZ0ZXJOZXh0QmF0Y2goKTogdm9pZCB7XG4gIHNob3VsZFJlc2V0U2Nyb2xsQWZ0ZXJOZXh0QmF0Y2ggPSB0cnVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRTY3JvbGxJZk5lZWRlZCgpIHtcbiAgaWYgKHNob3VsZFJlc2V0U2Nyb2xsQWZ0ZXJOZXh0QmF0Y2gpIHtcbiAgICBzaG91bGRSZXNldFNjcm9sbEFmdGVyTmV4dEJhdGNoID0gZmFsc2U7XG5cbiAgICAvLyBUaGlzIGFzc3VtZXMgdGhlIHNjcm9sbGVyIGlzIG9uIHRoZSB3aW5kb3cgaXRzZWxmLiBUaGVyZSBpc24ndCBhIGdlbmVyYWwgd2F5IHRvIGtub3dcbiAgICAvLyBpZiBzb21lIG90aGVyIGVsZW1lbnQgaXMgcGxheWluZyB0aGUgcm9sZSBvZiB0aGUgcHJpbWFyeSBzY3JvbGwgcmVnaW9uLlxuICAgIHdpbmRvdy5zY3JvbGxUbyAmJiB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gIH1cbn1cbiIsIi8vIExpY2Vuc2VkIHRvIHRoZSAuTkVUIEZvdW5kYXRpb24gdW5kZXIgb25lIG9yIG1vcmUgYWdyZWVtZW50cy5cbi8vIFRoZSAuTkVUIEZvdW5kYXRpb24gbGljZW5zZXMgdGhpcyBmaWxlIHRvIHlvdSB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cbmltcG9ydCAnQG1pY3Jvc29mdC9kb3RuZXQtanMtaW50ZXJvcCc7XG5cbmV4cG9ydCBjb25zdCBkb21GdW5jdGlvbnMgPSB7XG4gIGZvY3VzLFxuICBmb2N1c0J5U2VsZWN0b3IsXG59O1xuXG5mdW5jdGlvbiBmb2N1cyhlbGVtZW50OiBIVE1MT3JTVkdFbGVtZW50LCBwcmV2ZW50U2Nyb2xsOiBib29sZWFuKTogdm9pZCB7XG4gIGlmIChlbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICBlbGVtZW50LmZvY3VzKHsgcHJldmVudFNjcm9sbCB9KTtcbiAgfSBlbHNlIGlmIChlbGVtZW50IGluc3RhbmNlb2YgU1ZHRWxlbWVudCkge1xuICAgIGlmIChlbGVtZW50Lmhhc0F0dHJpYnV0ZSgndGFiaW5kZXgnKSkge1xuICAgICAgZWxlbWVudC5mb2N1cyh7IHByZXZlbnRTY3JvbGwgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGZvY3VzIGFuIFNWRyBlbGVtZW50IHRoYXQgZG9lcyBub3QgaGF2ZSBhIHRhYmluZGV4LicpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBmb2N1cyBhbiBpbnZhbGlkIGVsZW1lbnQuJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZm9jdXNCeVNlbGVjdG9yKHNlbGVjdG9yOiBzdHJpbmcpIHtcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpIGFzIEhUTUxFbGVtZW50O1xuICBpZiAoZWxlbWVudCkge1xuICAgIC8vIElmIG5vIGV4cGxpY2l0IHRhYmluZGV4IGlzIGRlZmluZWQsIG1hcmsgaXQgYXMgcHJvZ3JhbW1hdGljYWxseS1mb2N1c2FibGUuXG4gICAgLy8gVGhpcyBkb2VzIGFjdHVhbGx5IGFkZCBhIG5ldyBIVE1MIGF0dHJpYnV0ZSwgYnV0IGl0IHNob3VsZG4ndCBpbnRlcmZlcmUgd2l0aFxuICAgIC8vIGRpZmZpbmcgYmVjYXVzZSBkaWZmaW5nIG9ubHkgZGVhbHMgd2l0aCB0aGUgYXR0cmlidXRlcyB5b3UgaGF2ZSBpbiB5b3VyIGNvZGUuXG4gICAgaWYgKCFlbGVtZW50Lmhhc0F0dHJpYnV0ZSgndGFiaW5kZXgnKSkge1xuICAgICAgZWxlbWVudC50YWJJbmRleCA9IC0xO1xuICAgIH1cblxuICAgIGVsZW1lbnQuZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xuICB9XG59XG4iLCIvLyBMaWNlbnNlZCB0byB0aGUgLk5FVCBGb3VuZGF0aW9uIHVuZGVyIG9uZSBvciBtb3JlIGFncmVlbWVudHMuXG4vLyBUaGUgLk5FVCBGb3VuZGF0aW9uIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG5pbXBvcnQgeyBEb3ROZXQgfSBmcm9tICdAbWljcm9zb2Z0L2RvdG5ldC1qcy1pbnRlcm9wJztcblxuZXhwb3J0IGNvbnN0IFZpcnR1YWxpemUgPSB7XG4gIGluaXQsXG4gIGRpc3Bvc2UsXG59O1xuXG5jb25zdCBkaXNwYXRjaGVyT2JzZXJ2ZXJzQnlEb3ROZXRJZFByb3BuYW1lID0gU3ltYm9sKCk7XG5cbmZ1bmN0aW9uIGZpbmRDbG9zZXN0U2Nyb2xsQ29udGFpbmVyKGVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgbnVsbCk6IEhUTUxFbGVtZW50IHwgbnVsbCB7XG4gIC8vIElmIHdlIHJlY3Vyc2UgdXAgYXMgZmFyIGFzIGJvZHkgb3IgdGhlIGRvY3VtZW50IHJvb3QsIHJldHVybiBudWxsIHNvIHRoYXQgdGhlXG4gIC8vIEludGVyc2VjdGlvbk9ic2VydmVyIG9ic2VydmVzIGludGVyc2VjdGlvbiB3aXRoIHRoZSB0b3AtbGV2ZWwgc2Nyb2xsIHZpZXdwb3J0XG4gIC8vIGluc3RlYWQgb2YgdGhlIHdpdGggYm9keS9kb2N1bWVudEVsZW1lbnQgd2hpY2ggY2FuIGJlIGFyYml0cmFyaWx5IHRhbGwuXG4gIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZG90bmV0L2FzcG5ldGNvcmUvaXNzdWVzLzM3NjU5IGZvciBtb3JlIGFib3V0IHdoYXQgdGhpcyBmaXhlcy5cbiAgaWYgKCFlbGVtZW50IHx8IGVsZW1lbnQgPT09IGRvY3VtZW50LmJvZHkgfHwgZWxlbWVudCA9PT0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG5cbiAgaWYgKHN0eWxlLm92ZXJmbG93WSAhPT0gJ3Zpc2libGUnKSB7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cblxuICByZXR1cm4gZmluZENsb3Nlc3RTY3JvbGxDb250YWluZXIoZWxlbWVudC5wYXJlbnRFbGVtZW50KTtcbn1cblxuZnVuY3Rpb24gaW5pdChkb3ROZXRIZWxwZXI6IERvdE5ldC5Eb3ROZXRPYmplY3QsIHNwYWNlckJlZm9yZTogSFRNTEVsZW1lbnQsIHNwYWNlckFmdGVyOiBIVE1MRWxlbWVudCwgcm9vdE1hcmdpbiA9IDUwKTogdm9pZCB7XG4gIC8vIE92ZXJmbG93IGFuY2hvcmluZyBjYW4gY2F1c2UgYW4gb25nb2luZyBzY3JvbGwgbG9vcCwgYmVjYXVzZSB3aGVuIHdlIHJlc2l6ZSB0aGUgc3BhY2VycywgdGhlIGJyb3dzZXJcbiAgLy8gd291bGQgdXBkYXRlIHRoZSBzY3JvbGwgcG9zaXRpb24gdG8gY29tcGVuc2F0ZS4gVGhlbiB0aGUgc3BhY2VyIHdvdWxkIHJlbWFpbiB2aXNpYmxlIGFuZCB3ZSdkIGtlZXAgb25cbiAgLy8gdHJ5aW5nIHRvIHJlc2l6ZSBpdC5cbiAgY29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gZmluZENsb3Nlc3RTY3JvbGxDb250YWluZXIoc3BhY2VyQmVmb3JlKTtcbiAgKHNjcm9sbENvbnRhaW5lciB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLnN0eWxlLm92ZXJmbG93QW5jaG9yID0gJ25vbmUnO1xuXG4gIGNvbnN0IHJhbmdlQmV0d2VlblNwYWNlcnMgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuXG4gIGlmIChpc1ZhbGlkVGFibGVFbGVtZW50KHNwYWNlckFmdGVyLnBhcmVudEVsZW1lbnQpKSB7XG4gICAgc3BhY2VyQmVmb3JlLnN0eWxlLmRpc3BsYXkgPSAndGFibGUtcm93JztcbiAgICBzcGFjZXJBZnRlci5zdHlsZS5kaXNwbGF5ID0gJ3RhYmxlLXJvdyc7XG4gIH1cblxuICBjb25zdCBpbnRlcnNlY3Rpb25PYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihpbnRlcnNlY3Rpb25DYWxsYmFjaywge1xuICAgIHJvb3Q6IHNjcm9sbENvbnRhaW5lcixcbiAgICByb290TWFyZ2luOiBgJHtyb290TWFyZ2lufXB4YCxcbiAgfSk7XG5cbiAgaW50ZXJzZWN0aW9uT2JzZXJ2ZXIub2JzZXJ2ZShzcGFjZXJCZWZvcmUpO1xuICBpbnRlcnNlY3Rpb25PYnNlcnZlci5vYnNlcnZlKHNwYWNlckFmdGVyKTtcblxuICBjb25zdCBtdXRhdGlvbk9ic2VydmVyQmVmb3JlID0gY3JlYXRlU3BhY2VyTXV0YXRpb25PYnNlcnZlcihzcGFjZXJCZWZvcmUpO1xuICBjb25zdCBtdXRhdGlvbk9ic2VydmVyQWZ0ZXIgPSBjcmVhdGVTcGFjZXJNdXRhdGlvbk9ic2VydmVyKHNwYWNlckFmdGVyKTtcblxuICBjb25zdCB7IG9ic2VydmVyc0J5RG90TmV0T2JqZWN0SWQsIGlkIH0gPSBnZXRPYnNlcnZlcnNNYXBFbnRyeShkb3ROZXRIZWxwZXIpO1xuICBvYnNlcnZlcnNCeURvdE5ldE9iamVjdElkW2lkXSA9IHtcbiAgICBpbnRlcnNlY3Rpb25PYnNlcnZlcixcbiAgICBtdXRhdGlvbk9ic2VydmVyQmVmb3JlLFxuICAgIG11dGF0aW9uT2JzZXJ2ZXJBZnRlcixcbiAgfTtcblxuICBmdW5jdGlvbiBjcmVhdGVTcGFjZXJNdXRhdGlvbk9ic2VydmVyKHNwYWNlcjogSFRNTEVsZW1lbnQpOiBNdXRhdGlvbk9ic2VydmVyIHtcbiAgICAvLyBXaXRob3V0IHRoZSB1c2Ugb2YgdGhyZXNob2xkcywgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgb25seSBkZXRlY3RzIGJpbmFyeSBjaGFuZ2VzIGluIHZpc2liaWxpdHksXG4gICAgLy8gc28gaWYgYSBzcGFjZXIgZ2V0cyByZXNpemVkIGJ1dCByZW1haW5zIHZpc2libGUsIG5vIGFkZGl0aW9uYWwgY2FsbGJhY2tzIHdpbGwgb2NjdXIuIEJ5IHVub2JzZXJ2aW5nXG4gICAgLy8gYW5kIHJlb2JzZXJ2aW5nIHNwYWNlcnMgd2hlbiB0aGV5IGdldCByZXNpemVkLCB0aGUgaW50ZXJzZWN0aW9uIGNhbGxiYWNrIHdpbGwgcmUtcnVuIGlmIHRoZXkgcmVtYWluIHZpc2libGUuXG4gICAgY29uc3Qgb2JzZXJ2ZXJPcHRpb25zID0geyBhdHRyaWJ1dGVzOiB0cnVlIH07XG4gICAgY29uc3QgbXV0YXRpb25PYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnM6IE11dGF0aW9uUmVjb3JkW10sIG9ic2VydmVyOiBNdXRhdGlvbk9ic2VydmVyKTogdm9pZCA9PiB7XG4gICAgICBpZiAoaXNWYWxpZFRhYmxlRWxlbWVudChzcGFjZXIucGFyZW50RWxlbWVudCkpIHtcbiAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICBzcGFjZXIuc3R5bGUuZGlzcGxheSA9ICd0YWJsZS1yb3cnO1xuICAgICAgICBvYnNlcnZlci5vYnNlcnZlKHNwYWNlciwgb2JzZXJ2ZXJPcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgaW50ZXJzZWN0aW9uT2JzZXJ2ZXIudW5vYnNlcnZlKHNwYWNlcik7XG4gICAgICBpbnRlcnNlY3Rpb25PYnNlcnZlci5vYnNlcnZlKHNwYWNlcik7XG4gICAgfSk7XG5cbiAgICBtdXRhdGlvbk9ic2VydmVyLm9ic2VydmUoc3BhY2VyLCBvYnNlcnZlck9wdGlvbnMpO1xuXG4gICAgcmV0dXJuIG11dGF0aW9uT2JzZXJ2ZXI7XG4gIH1cblxuICBmdW5jdGlvbiBpbnRlcnNlY3Rpb25DYWxsYmFjayhlbnRyaWVzOiBJbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5W10pOiB2b2lkIHtcbiAgICBlbnRyaWVzLmZvckVhY2goKGVudHJ5KTogdm9pZCA9PiB7XG4gICAgICBpZiAoIWVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gVG8gY29tcHV0ZSB0aGUgSXRlbVNpemUsIHdvcmsgb3V0IHRoZSBzZXBhcmF0aW9uIGJldHdlZW4gdGhlIHR3byBzcGFjZXJzLiBXZSBjYW4ndCBqdXN0IG1lYXN1cmUgYW4gaW5kaXZpZHVhbCBlbGVtZW50XG4gICAgICAvLyBiZWNhdXNlIGVhY2ggY29uY2VwdHVhbCBpdGVtIGNvdWxkIGJlIG1hZGUgZnJvbSBtdWx0aXBsZSBlbGVtZW50cy4gVXNpbmcgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGFsbG93cyBmb3IgdGhlIHNpemUgdG8gYmVcbiAgICAgIC8vIGEgZnJhY3Rpb25hbCB2YWx1ZS4gSXQncyBpbXBvcnRhbnQgbm90IHRvIGFkZCBvciBzdWJ0cmFjdCBhbnkgc3VjaCBmcmFjdGlvbmFsIHZhbHVlcyAoZS5nLiwgdG8gc3VidHJhY3QgdGhlICd0b3AnIG9mXG4gICAgICAvLyBvbmUgaXRlbSBmcm9tIHRoZSAnYm90dG9tJyBvZiBhbm90aGVyIHRvIGdldCB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGVtKSBiZWNhdXNlIGZsb2F0aW5nIHBvaW50IGVycm9ycyB3b3VsZCBjYXVzZVxuICAgICAgLy8gc2Nyb2xsaW5nIGdsaXRjaGVzLlxuICAgICAgcmFuZ2VCZXR3ZWVuU3BhY2Vycy5zZXRTdGFydEFmdGVyKHNwYWNlckJlZm9yZSk7XG4gICAgICByYW5nZUJldHdlZW5TcGFjZXJzLnNldEVuZEJlZm9yZShzcGFjZXJBZnRlcik7XG4gICAgICBjb25zdCBzcGFjZXJTZXBhcmF0aW9uID0gcmFuZ2VCZXR3ZWVuU3BhY2Vycy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG4gICAgICBjb25zdCBjb250YWluZXJTaXplID0gZW50cnkucm9vdEJvdW5kcz8uaGVpZ2h0O1xuXG4gICAgICBpZiAoZW50cnkudGFyZ2V0ID09PSBzcGFjZXJCZWZvcmUpIHtcbiAgICAgICAgZG90TmV0SGVscGVyLmludm9rZU1ldGhvZEFzeW5jKCdPblNwYWNlckJlZm9yZVZpc2libGUnLCBlbnRyeS5pbnRlcnNlY3Rpb25SZWN0LnRvcCAtIGVudHJ5LmJvdW5kaW5nQ2xpZW50UmVjdC50b3AsIHNwYWNlclNlcGFyYXRpb24sIGNvbnRhaW5lclNpemUpO1xuICAgICAgfSBlbHNlIGlmIChlbnRyeS50YXJnZXQgPT09IHNwYWNlckFmdGVyICYmIHNwYWNlckFmdGVyLm9mZnNldEhlaWdodCA+IDApIHtcbiAgICAgICAgLy8gV2hlbiB3ZSBmaXJzdCBzdGFydCB1cCwgYm90aCB0aGUgXCJiZWZvcmVcIiBhbmQgXCJhZnRlclwiIHNwYWNlcnMgd2lsbCBiZSB2aXNpYmxlLCBidXQgaXQncyBvbmx5IHJlbGV2YW50IHRvIHJhaXNlIGFcbiAgICAgICAgLy8gc2luZ2xlIGV2ZW50IHRvIGxvYWQgdGhlIGluaXRpYWwgZGF0YS4gVG8gYXZvaWQgcmFpc2luZyB0d28gZXZlbnRzLCBza2lwIHRoZSBvbmUgZm9yIHRoZSBcImFmdGVyXCIgc3BhY2VyIGlmIHdlIGtub3dcbiAgICAgICAgLy8gaXQncyBtZWFuaW5nbGVzcyB0byB0YWxrIGFib3V0IGFueSBvdmVybGFwIGludG8gaXQuXG4gICAgICAgIGRvdE5ldEhlbHBlci5pbnZva2VNZXRob2RBc3luYygnT25TcGFjZXJBZnRlclZpc2libGUnLCBlbnRyeS5ib3VuZGluZ0NsaWVudFJlY3QuYm90dG9tIC0gZW50cnkuaW50ZXJzZWN0aW9uUmVjdC5ib3R0b20sIHNwYWNlclNlcGFyYXRpb24sIGNvbnRhaW5lclNpemUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNWYWxpZFRhYmxlRWxlbWVudChlbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGwpOiBib29sZWFuIHtcbiAgICBpZiAoZWxlbWVudCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiAoKGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MVGFibGVFbGVtZW50ICYmIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9PT0gJycpIHx8IGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9PT0gJ3RhYmxlJylcbiAgICAgIHx8ICgoZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxUYWJsZVNlY3Rpb25FbGVtZW50ICYmIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9PT0gJycpIHx8IGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9PT0gJ3RhYmxlLXJvdy1ncm91cCcpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldE9ic2VydmVyc01hcEVudHJ5KGRvdE5ldEhlbHBlcjogRG90TmV0LkRvdE5ldE9iamVjdCk6IHsgb2JzZXJ2ZXJzQnlEb3ROZXRPYmplY3RJZDoge1tpZDogbnVtYmVyXTogYW55IH0sIGlkOiBudW1iZXIgfSB7XG4gIGNvbnN0IGRvdE5ldEhlbHBlckRpc3BhdGNoZXIgPSBkb3ROZXRIZWxwZXJbJ19jYWxsRGlzcGF0Y2hlciddO1xuICBjb25zdCBkb3ROZXRIZWxwZXJJZCA9IGRvdE5ldEhlbHBlclsnX2lkJ107XG4gIGRvdE5ldEhlbHBlckRpc3BhdGNoZXJbZGlzcGF0Y2hlck9ic2VydmVyc0J5RG90TmV0SWRQcm9wbmFtZV0gPz89IHsgfTtcblxuICByZXR1cm4ge1xuICAgIG9ic2VydmVyc0J5RG90TmV0T2JqZWN0SWQ6IGRvdE5ldEhlbHBlckRpc3BhdGNoZXJbZGlzcGF0Y2hlck9ic2VydmVyc0J5RG90TmV0SWRQcm9wbmFtZV0sXG4gICAgaWQ6IGRvdE5ldEhlbHBlcklkLFxuICB9O1xufVxuXG5mdW5jdGlvbiBkaXNwb3NlKGRvdE5ldEhlbHBlcjogRG90TmV0LkRvdE5ldE9iamVjdCk6IHZvaWQge1xuICBjb25zdCB7IG9ic2VydmVyc0J5RG90TmV0T2JqZWN0SWQsIGlkIH0gPSBnZXRPYnNlcnZlcnNNYXBFbnRyeShkb3ROZXRIZWxwZXIpO1xuICBjb25zdCBvYnNlcnZlcnMgPSBvYnNlcnZlcnNCeURvdE5ldE9iamVjdElkW2lkXTtcblxuICBpZiAob2JzZXJ2ZXJzKSB7XG4gICAgb2JzZXJ2ZXJzLmludGVyc2VjdGlvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICBvYnNlcnZlcnMubXV0YXRpb25PYnNlcnZlckJlZm9yZS5kaXNjb25uZWN0KCk7XG4gICAgb2JzZXJ2ZXJzLm11dGF0aW9uT2JzZXJ2ZXJBZnRlci5kaXNjb25uZWN0KCk7XG5cbiAgICBkb3ROZXRIZWxwZXIuZGlzcG9zZSgpO1xuXG4gICAgZGVsZXRlIG9ic2VydmVyc0J5RG90TmV0T2JqZWN0SWRbaWRdO1xuICB9XG59XG4iLCIvLyBMaWNlbnNlZCB0byB0aGUgLk5FVCBGb3VuZGF0aW9uIHVuZGVyIG9uZSBvciBtb3JlIGFncmVlbWVudHMuXG4vLyBUaGUgLk5FVCBGb3VuZGF0aW9uIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG5pbXBvcnQgeyBnZXRMb2dpY2FsUGFyZW50LCBMb2dpY2FsRWxlbWVudCB9IGZyb20gJy4vUmVuZGVyaW5nL0xvZ2ljYWxFbGVtZW50cyc7XG5cbmV4cG9ydCBjb25zdCBQYWdlVGl0bGUgPSB7XG4gIGdldEFuZFJlbW92ZUV4aXN0aW5nVGl0bGUsXG59O1xuXG5mdW5jdGlvbiBnZXRBbmRSZW1vdmVFeGlzdGluZ1RpdGxlKCk6IHN0cmluZyB8IG51bGwge1xuICAvLyBPdGhlciA8dGl0bGU+IGVsZW1lbnRzIG1heSBleGlzdCBvdXRzaWRlIDxoZWFkPiAoZS5nLiwgaW5zaWRlIDxzdmc+IGVsZW1lbnRzKSBidXQgdGhleSBhcmVuJ3QgcGFnZSB0aXRsZXNcbiAgY29uc3QgdGl0bGVFbGVtZW50cyA9IGRvY3VtZW50LmhlYWQgPyBkb2N1bWVudC5oZWFkLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0aXRsZScpIDogW107XG5cbiAgaWYgKHRpdGxlRWxlbWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBsZXQgZXhpc3RpbmdUaXRsZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgZm9yIChsZXQgaW5kZXggPSB0aXRsZUVsZW1lbnRzLmxlbmd0aCAtIDE7IGluZGV4ID49IDA7IGluZGV4LS0pIHtcbiAgICBjb25zdCBjdXJyZW50VGl0bGVFbGVtZW50ID0gdGl0bGVFbGVtZW50c1tpbmRleF07XG4gICAgY29uc3QgcHJldmlvdXNTaWJsaW5nID0gY3VycmVudFRpdGxlRWxlbWVudC5wcmV2aW91c1NpYmxpbmc7XG4gICAgY29uc3QgaXNCbGF6b3JUaXRsZSA9IHByZXZpb3VzU2libGluZyBpbnN0YW5jZW9mIENvbW1lbnQgJiYgZ2V0TG9naWNhbFBhcmVudChwcmV2aW91c1NpYmxpbmcgYXMgdW5rbm93biBhcyBMb2dpY2FsRWxlbWVudCkgIT09IG51bGw7XG5cbiAgICBpZiAoaXNCbGF6b3JUaXRsZSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKGV4aXN0aW5nVGl0bGUgPT09IG51bGwpIHtcbiAgICAgIGV4aXN0aW5nVGl0bGUgPSBjdXJyZW50VGl0bGVFbGVtZW50LnRleHRDb250ZW50O1xuICAgIH1cblxuICAgIGN1cnJlbnRUaXRsZUVsZW1lbnQucGFyZW50Tm9kZT8ucmVtb3ZlQ2hpbGQoY3VycmVudFRpdGxlRWxlbWVudCk7XG4gIH1cblxuICByZXR1cm4gZXhpc3RpbmdUaXRsZTtcbn1cbiIsIi8vIExpY2Vuc2VkIHRvIHRoZSAuTkVUIEZvdW5kYXRpb24gdW5kZXIgb25lIG9yIG1vcmUgYWdyZWVtZW50cy5cbi8vIFRoZSAuTkVUIEZvdW5kYXRpb24gbGljZW5zZXMgdGhpcyBmaWxlIHRvIHlvdSB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cbmV4cG9ydCBjb25zdCBJbnB1dEZpbGUgPSB7XG4gIGluaXQsXG4gIHRvSW1hZ2VGaWxlLFxuICByZWFkRmlsZURhdGEsXG59O1xuXG5pbnRlcmZhY2UgQnJvd3NlckZpbGUge1xuICBpZDogbnVtYmVyO1xuICBsYXN0TW9kaWZpZWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBzaXplOiBudW1iZXI7XG4gIGNvbnRlbnRUeXBlOiBzdHJpbmc7XG4gIGJsb2I6IEJsb2I7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5wdXRFbGVtZW50IGV4dGVuZHMgSFRNTElucHV0RWxlbWVudCB7XG4gIF9ibGF6b3JJbnB1dEZpbGVOZXh0RmlsZUlkOiBudW1iZXI7XG4gIF9ibGF6b3JGaWxlc0J5SWQ6IHsgW2lkOiBudW1iZXJdOiBCcm93c2VyRmlsZSB9O1xufVxuXG5mdW5jdGlvbiBpbml0KGNhbGxiYWNrV3JhcHBlcjogYW55LCBlbGVtOiBJbnB1dEVsZW1lbnQpOiB2b2lkIHtcbiAgZWxlbS5fYmxhem9ySW5wdXRGaWxlTmV4dEZpbGVJZCA9IDA7XG5cbiAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCk6IHZvaWQge1xuICAgIC8vIFBlcm1pdHMgcmVwbGFjaW5nIGFuIGV4aXN0aW5nIGZpbGUgd2l0aCBhIG5ldyBvbmUgb2YgdGhlIHNhbWUgZmlsZSBuYW1lLlxuICAgIGVsZW0udmFsdWUgPSAnJztcbiAgfSk7XG5cbiAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbigpOiB2b2lkIHtcbiAgICAvLyBSZWR1Y2UgdG8gcHVyZWx5IHNlcmlhbGl6YWJsZSBkYXRhLCBwbHVzIGFuIGluZGV4IGJ5IElELlxuICAgIGVsZW0uX2JsYXpvckZpbGVzQnlJZCA9IHt9O1xuXG4gICAgY29uc3QgZmlsZUxpc3QgPSBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoZWxlbS5maWxlcywgZnVuY3Rpb24oZmlsZTogRmlsZSk6IEJyb3dzZXJGaWxlIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgaWQ6ICsrZWxlbS5fYmxhem9ySW5wdXRGaWxlTmV4dEZpbGVJZCxcbiAgICAgICAgbGFzdE1vZGlmaWVkOiBuZXcgRGF0ZShmaWxlLmxhc3RNb2RpZmllZCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgbmFtZTogZmlsZS5uYW1lLFxuICAgICAgICBzaXplOiBmaWxlLnNpemUsXG4gICAgICAgIGNvbnRlbnRUeXBlOiBmaWxlLnR5cGUsXG4gICAgICAgIHJlYWRQcm9taXNlOiB1bmRlZmluZWQsXG4gICAgICAgIGFycmF5QnVmZmVyOiB1bmRlZmluZWQsXG4gICAgICAgIGJsb2I6IGZpbGUsXG4gICAgICB9O1xuXG4gICAgICBlbGVtLl9ibGF6b3JGaWxlc0J5SWRbcmVzdWx0LmlkXSA9IHJlc3VsdDtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIGNhbGxiYWNrV3JhcHBlci5pbnZva2VNZXRob2RBc3luYygnTm90aWZ5Q2hhbmdlJywgZmlsZUxpc3QpO1xuICB9KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gdG9JbWFnZUZpbGUoZWxlbTogSW5wdXRFbGVtZW50LCBmaWxlSWQ6IG51bWJlciwgZm9ybWF0OiBzdHJpbmcsIG1heFdpZHRoOiBudW1iZXIsIG1heEhlaWdodDogbnVtYmVyKTogUHJvbWlzZTxCcm93c2VyRmlsZT4ge1xuICBjb25zdCBvcmlnaW5hbEZpbGUgPSBnZXRGaWxlQnlJZChlbGVtLCBmaWxlSWQpO1xuXG4gIGNvbnN0IGxvYWRlZEltYWdlID0gYXdhaXQgbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZTogKGxvYWRlZEltYWdlOiBIVE1MSW1hZ2VFbGVtZW50KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgY29uc3Qgb3JpZ2luYWxGaWxlSW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICBvcmlnaW5hbEZpbGVJbWFnZS5vbmxvYWQgPSBmdW5jdGlvbigpOiB2b2lkIHtcbiAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwob3JpZ2luYWxGaWxlSW1hZ2Uuc3JjKTtcbiAgICAgIHJlc29sdmUob3JpZ2luYWxGaWxlSW1hZ2UpO1xuICAgIH07XG4gICAgb3JpZ2luYWxGaWxlSW1hZ2Uub25lcnJvciA9IGZ1bmN0aW9uKCk6IHZvaWQge1xuICAgICAgb3JpZ2luYWxGaWxlSW1hZ2Uub25lcnJvciA9IG51bGw7XG4gICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKG9yaWdpbmFsRmlsZUltYWdlLnNyYyk7XG4gICAgfTtcbiAgICBvcmlnaW5hbEZpbGVJbWFnZS5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG9yaWdpbmFsRmlsZVsnYmxvYiddKTtcbiAgfSk7XG5cbiAgY29uc3QgcmVzaXplZEltYWdlQmxvYiA9IGF3YWl0IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmU6IEJsb2JDYWxsYmFjayk6IHZvaWQge1xuICAgIGNvbnN0IGRlc2lyZWRXaWR0aFJhdGlvID0gTWF0aC5taW4oMSwgbWF4V2lkdGggLyBsb2FkZWRJbWFnZS53aWR0aCk7XG4gICAgY29uc3QgZGVzaXJlZEhlaWdodFJhdGlvID0gTWF0aC5taW4oMSwgbWF4SGVpZ2h0IC8gbG9hZGVkSW1hZ2UuaGVpZ2h0KTtcbiAgICBjb25zdCBjaG9zZW5TaXplUmF0aW8gPSBNYXRoLm1pbihkZXNpcmVkV2lkdGhSYXRpbywgZGVzaXJlZEhlaWdodFJhdGlvKTtcblxuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIGNhbnZhcy53aWR0aCA9IE1hdGgucm91bmQobG9hZGVkSW1hZ2Uud2lkdGggKiBjaG9zZW5TaXplUmF0aW8pO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBNYXRoLnJvdW5kKGxvYWRlZEltYWdlLmhlaWdodCAqIGNob3NlblNpemVSYXRpbyk7XG4gICAgY2FudmFzLmdldENvbnRleHQoJzJkJyk/LmRyYXdJbWFnZShsb2FkZWRJbWFnZSwgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICBjYW52YXMudG9CbG9iKHJlc29sdmUsIGZvcm1hdCk7XG4gIH0pO1xuXG4gIGNvbnN0IHJlc3VsdDogQnJvd3NlckZpbGUgPSB7XG4gICAgaWQ6ICsrZWxlbS5fYmxhem9ySW5wdXRGaWxlTmV4dEZpbGVJZCxcbiAgICBsYXN0TW9kaWZpZWQ6IG9yaWdpbmFsRmlsZS5sYXN0TW9kaWZpZWQsXG4gICAgbmFtZTogb3JpZ2luYWxGaWxlLm5hbWUsXG4gICAgc2l6ZTogcmVzaXplZEltYWdlQmxvYj8uc2l6ZSB8fCAwLFxuICAgIGNvbnRlbnRUeXBlOiBmb3JtYXQsXG4gICAgYmxvYjogcmVzaXplZEltYWdlQmxvYiA/IHJlc2l6ZWRJbWFnZUJsb2IgOiBvcmlnaW5hbEZpbGUuYmxvYixcbiAgfTtcblxuICBlbGVtLl9ibGF6b3JGaWxlc0J5SWRbcmVzdWx0LmlkXSA9IHJlc3VsdDtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5hc3luYyBmdW5jdGlvbiByZWFkRmlsZURhdGEoZWxlbTogSW5wdXRFbGVtZW50LCBmaWxlSWQ6IG51bWJlcik6IFByb21pc2U8QmxvYj4ge1xuICBjb25zdCBmaWxlID0gZ2V0RmlsZUJ5SWQoZWxlbSwgZmlsZUlkKTtcbiAgcmV0dXJuIGZpbGUuYmxvYjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbGVCeUlkKGVsZW06IElucHV0RWxlbWVudCwgZmlsZUlkOiBudW1iZXIpOiBCcm93c2VyRmlsZSB7XG4gIGNvbnN0IGZpbGUgPSBlbGVtLl9ibGF6b3JGaWxlc0J5SWRbZmlsZUlkXTtcblxuICBpZiAoIWZpbGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZXJlIGlzIG5vIGZpbGUgd2l0aCBJRCAke2ZpbGVJZH0uIFRoZSBmaWxlIGxpc3QgbWF5IGhhdmUgY2hhbmdlZC4gU2VlIGh0dHBzOi8vYWthLm1zL2FzcG5ldC9ibGF6b3ItaW5wdXQtZmlsZS1tdWx0aXBsZS1zZWxlY3Rpb25zLmApO1xuICB9XG5cbiAgcmV0dXJuIGZpbGU7XG59XG4iLCIvLyBMaWNlbnNlZCB0byB0aGUgLk5FVCBGb3VuZGF0aW9uIHVuZGVyIG9uZSBvciBtb3JlIGFncmVlbWVudHMuXG4vLyBUaGUgLk5FVCBGb3VuZGF0aW9uIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG5jb25zdCByZWdpc3RlcmVkTG9ja3MgPSBuZXcgU2V0PHN0cmluZz4oKTtcblxuZXhwb3J0IGNvbnN0IE5hdmlnYXRpb25Mb2NrID0ge1xuICBlbmFibGVOYXZpZ2F0aW9uUHJvbXB0LFxuICBkaXNhYmxlTmF2aWdhdGlvblByb21wdCxcbn07XG5cbmZ1bmN0aW9uIG9uQmVmb3JlVW5sb2FkKGV2ZW50OiBCZWZvcmVVbmxvYWRFdmVudCkge1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAvLyBNb2Rlcm4gYnJvd3NlcnMgZGlzcGxheSBhIGNvbmZpcm1hdGlvbiBwcm9tcHQgd2hlbiByZXR1cm5WYWx1ZSBpcyBzb21lIHZhbHVlIG90aGVyIHRoYW5cbiAgLy8gbnVsbCBvciB1bmRlZmluZWQuXG4gIC8vIFNlZTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dpbmRvdy9iZWZvcmV1bmxvYWRfZXZlbnQjY29tcGF0aWJpbGl0eV9ub3Rlc1xuICBldmVudC5yZXR1cm5WYWx1ZSA9IHRydWU7XG59XG5cbmZ1bmN0aW9uIGVuYWJsZU5hdmlnYXRpb25Qcm9tcHQoaWQ6IHN0cmluZykge1xuICBpZiAocmVnaXN0ZXJlZExvY2tzLnNpemUgPT09IDApIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgb25CZWZvcmVVbmxvYWQpO1xuICB9XG5cbiAgcmVnaXN0ZXJlZExvY2tzLmFkZChpZCk7XG59XG5cbmZ1bmN0aW9uIGRpc2FibGVOYXZpZ2F0aW9uUHJvbXB0KGlkOiBzdHJpbmcpIHtcbiAgcmVnaXN0ZXJlZExvY2tzLmRlbGV0ZShpZCk7XG5cbiAgaWYgKHJlZ2lzdGVyZWRMb2Nrcy5zaXplID09PSAwKSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIG9uQmVmb3JlVW5sb2FkKTtcbiAgfVxufVxuIiwiLy8gTGljZW5zZWQgdG8gdGhlIC5ORVQgRm91bmRhdGlvbiB1bmRlciBvbmUgb3IgbW9yZSBhZ3JlZW1lbnRzLlxuLy8gVGhlIC5ORVQgRm91bmRhdGlvbiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxuaW1wb3J0IHsgRG90TmV0IH0gZnJvbSAnQG1pY3Jvc29mdC9kb3RuZXQtanMtaW50ZXJvcCc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXROZXh0Q2h1bmsoZGF0YTogQXJyYXlCdWZmZXJWaWV3IHwgQmxvYiwgcG9zaXRpb246IG51bWJlciwgbmV4dENodW5rU2l6ZTogbnVtYmVyKTogUHJvbWlzZTxVaW50OEFycmF5PiB7XG4gIGlmIChkYXRhIGluc3RhbmNlb2YgQmxvYikge1xuICAgIHJldHVybiBhd2FpdCBnZXRDaHVua0Zyb21CbG9iKGRhdGEsIHBvc2l0aW9uLCBuZXh0Q2h1bmtTaXplKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZ2V0Q2h1bmtGcm9tQXJyYXlCdWZmZXJWaWV3KGRhdGEsIHBvc2l0aW9uLCBuZXh0Q2h1bmtTaXplKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRDaHVua0Zyb21CbG9iKGRhdGE6IEJsb2IsIHBvc2l0aW9uOiBudW1iZXIsIG5leHRDaHVua1NpemU6IG51bWJlcik6IFByb21pc2U8VWludDhBcnJheT4ge1xuICBjb25zdCBjaHVua0Jsb2IgPSBkYXRhLnNsaWNlKHBvc2l0aW9uLCBwb3NpdGlvbiArIG5leHRDaHVua1NpemUpO1xuICBjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IGNodW5rQmxvYi5hcnJheUJ1ZmZlcigpO1xuICBjb25zdCBuZXh0Q2h1bmtEYXRhID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIpO1xuICByZXR1cm4gbmV4dENodW5rRGF0YTtcbn1cblxuZnVuY3Rpb24gZ2V0Q2h1bmtGcm9tQXJyYXlCdWZmZXJWaWV3KGRhdGE6IEFycmF5QnVmZmVyVmlldywgcG9zaXRpb246IG51bWJlciwgbmV4dENodW5rU2l6ZTogbnVtYmVyKTogVWludDhBcnJheSB7XG4gIGNvbnN0IG5leHRDaHVua0RhdGEgPSBuZXcgVWludDhBcnJheShkYXRhLmJ1ZmZlciwgZGF0YS5ieXRlT2Zmc2V0ICsgcG9zaXRpb24sIG5leHRDaHVua1NpemUpO1xuICByZXR1cm4gbmV4dENodW5rRGF0YTtcbn1cblxuY29uc3QgdHJhbnNtaXR0aW5nRG90TmV0VG9KU1N0cmVhbXMgPSBuZXcgTWFwPG51bWJlciwgUmVhZGFibGVTdHJlYW1Db250cm9sbGVyPGFueT4+KCk7XG5leHBvcnQgZnVuY3Rpb24gcmVjZWl2ZURvdE5ldERhdGFTdHJlYW0oZGlzcGF0Y2hlcjogRG90TmV0LklDYWxsRGlzcGF0Y2hlciwgc3RyZWFtSWQ6IG51bWJlciwgZGF0YTogVWludDhBcnJheSwgYnl0ZXNSZWFkOiBudW1iZXIsIGVycm9yTWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gIGxldCBzdHJlYW1Db250cm9sbGVyID0gdHJhbnNtaXR0aW5nRG90TmV0VG9KU1N0cmVhbXMuZ2V0KHN0cmVhbUlkKTtcbiAgaWYgKCFzdHJlYW1Db250cm9sbGVyKSB7XG4gICAgY29uc3QgcmVhZGFibGVTdHJlYW0gPSBuZXcgUmVhZGFibGVTdHJlYW0oe1xuICAgICAgc3RhcnQoY29udHJvbGxlcikge1xuICAgICAgICB0cmFuc21pdHRpbmdEb3ROZXRUb0pTU3RyZWFtcy5zZXQoc3RyZWFtSWQsIGNvbnRyb2xsZXIpO1xuICAgICAgICBzdHJlYW1Db250cm9sbGVyID0gY29udHJvbGxlcjtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBkaXNwYXRjaGVyLnN1cHBseURvdE5ldFN0cmVhbShzdHJlYW1JZCwgcmVhZGFibGVTdHJlYW0pO1xuICB9XG5cbiAgaWYgKGVycm9yTWVzc2FnZSkge1xuICAgIHN0cmVhbUNvbnRyb2xsZXIhLmVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgdHJhbnNtaXR0aW5nRG90TmV0VG9KU1N0cmVhbXMuZGVsZXRlKHN0cmVhbUlkKTtcbiAgfSBlbHNlIGlmIChieXRlc1JlYWQgPT09IDApIHtcbiAgICBzdHJlYW1Db250cm9sbGVyIS5jbG9zZSgpO1xuICAgIHRyYW5zbWl0dGluZ0RvdE5ldFRvSlNTdHJlYW1zLmRlbGV0ZShzdHJlYW1JZCk7XG4gIH0gZWxzZSB7XG4gICAgc3RyZWFtQ29udHJvbGxlciEuZW5xdWV1ZShkYXRhLmxlbmd0aCA9PT0gYnl0ZXNSZWFkID8gZGF0YSA6IGRhdGEuc3ViYXJyYXkoMCwgYnl0ZXNSZWFkKSk7XG4gIH1cbn1cbiIsIi8vIExpY2Vuc2VkIHRvIHRoZSAuTkVUIEZvdW5kYXRpb24gdW5kZXIgb25lIG9yIG1vcmUgYWdyZWVtZW50cy5cbi8vIFRoZSAuTkVUIEZvdW5kYXRpb24gbGljZW5zZXMgdGhpcyBmaWxlIHRvIHlvdSB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cbmltcG9ydCB7IG5hdmlnYXRlVG8sIGludGVybmFsRnVuY3Rpb25zIGFzIG5hdmlnYXRpb25NYW5hZ2VySW50ZXJuYWxGdW5jdGlvbnMsIE5hdmlnYXRpb25PcHRpb25zIH0gZnJvbSAnLi9TZXJ2aWNlcy9OYXZpZ2F0aW9uTWFuYWdlcic7XG5pbXBvcnQgeyBkb21GdW5jdGlvbnMgfSBmcm9tICcuL0RvbVdyYXBwZXInO1xuaW1wb3J0IHsgVmlydHVhbGl6ZSB9IGZyb20gJy4vVmlydHVhbGl6ZSc7XG5pbXBvcnQgeyBQYWdlVGl0bGUgfSBmcm9tICcuL1BhZ2VUaXRsZSc7XG5pbXBvcnQgeyByZWdpc3RlckN1c3RvbUV2ZW50VHlwZSwgRXZlbnRUeXBlT3B0aW9ucyB9IGZyb20gJy4vUmVuZGVyaW5nL0V2ZW50cy9FdmVudFR5cGVzJztcbmltcG9ydCB7IEh1YkNvbm5lY3Rpb24gfSBmcm9tICdAbWljcm9zb2Z0L3NpZ25hbHInO1xuaW1wb3J0IHsgSW5wdXRGaWxlIH0gZnJvbSAnLi9JbnB1dEZpbGUnO1xuaW1wb3J0IHsgTmF2aWdhdGlvbkxvY2sgfSBmcm9tICcuL05hdmlnYXRpb25Mb2NrJztcbmltcG9ydCB7IERlZmF1bHRSZWNvbm5lY3Rpb25IYW5kbGVyIH0gZnJvbSAnLi9QbGF0Zm9ybS9DaXJjdWl0cy9EZWZhdWx0UmVjb25uZWN0aW9uSGFuZGxlcic7XG5pbXBvcnQgeyBDaXJjdWl0U3RhcnRPcHRpb25zIH0gZnJvbSAnLi9QbGF0Zm9ybS9DaXJjdWl0cy9DaXJjdWl0U3RhcnRPcHRpb25zJztcbmltcG9ydCB7IFdlYkFzc2VtYmx5U3RhcnRPcHRpb25zIH0gZnJvbSAnLi9QbGF0Zm9ybS9XZWJBc3NlbWJseVN0YXJ0T3B0aW9ucyc7XG5pbXBvcnQgeyBQbGF0Zm9ybSwgUG9pbnRlciB9IGZyb20gJy4vUGxhdGZvcm0vUGxhdGZvcm0nO1xuaW1wb3J0IHsgZ2V0TmV4dENodW5rIH0gZnJvbSAnLi9TdHJlYW1pbmdJbnRlcm9wJztcbmltcG9ydCB7IFJvb3RDb21wb25lbnRzRnVuY3Rpb25zIH0gZnJvbSAnLi9SZW5kZXJpbmcvSlNSb290Q29tcG9uZW50cyc7XG5pbXBvcnQgeyBhdHRhY2hXZWJSZW5kZXJlckludGVyb3AgfSBmcm9tICcuL1JlbmRlcmluZy9XZWJSZW5kZXJlckludGVyb3BNZXRob2RzJztcbmltcG9ydCB7IFdlYlN0YXJ0T3B0aW9ucyB9IGZyb20gJy4vUGxhdGZvcm0vV2ViU3RhcnRPcHRpb25zJztcbmltcG9ydCB7IFJ1bnRpbWVBUEkgfSBmcm9tICdAbWljcm9zb2Z0L2RvdG5ldC1ydW50aW1lJztcbmltcG9ydCB7IEpTRXZlbnRSZWdpc3RyeSB9IGZyb20gJy4vU2VydmljZXMvSlNFdmVudFJlZ2lzdHJ5JztcblxuLy8gVE9ETzogSXQncyBraW5kIG9mIGhhcmQgdG8gdGVsbCB3aGljaCAuTkVUIHBsYXRmb3JtKHMpIHNvbWUgb2YgdGhlc2UgQVBJcyBhcmUgcmVsZXZhbnQgdG8uXG4vLyBJdCdzIGltcG9ydGFudCB0byBrbm93IHRoaXMgaW5mb3JtYXRpb24gd2hlbiBkZWFsaW5nIHdpdGggdGhlIHBvc3NpYmlsaXR5IG9mIG11bGl0cGxlIC5ORVQgcGxhdGZvcm1zIGJlaW5nIGF2YWlsYWJsZS5cbi8vIGUuZy4sIHdoaWNoIG9mIHRoZXNlIEFQSXMgbmVlZCB0byBhY2NvdW50IGZvciB0aGVyZSBiZWluZyBtdWx0aXBsZSAuTkVUIHJ1bnRpbWVzLCBhbmQgd2hpY2ggZG9uJ3Q/XG5cbi8vIFdlIHNob3VsZCBjb25zaWRlciBzZXBhcmF0aW5nIGl0IGFsbCBvdXQgc28gdGhhdCB3ZSBjYW4gZWFzaWx5IGlkZW50aWZ5IHRoZSBwbGF0Zm9ybSByZXF1aXJlbWVudHMgb2YgZWFjaCBBUEkuXG4vLyBGb3IgZXhhbXBsZTpcbi8vICogQmxhem9yLntmb299OiBwdWJsaWMgQmxhem9yIEFQSXNcbi8vICogQmxhem9yLl9pbnRlcm5hbC57Zm9vfTogaW50ZXJuYWwsIHBsYXRmb3JtLWFnbm9zdGljIEJsYXpvciBBUElzXG4vLyAqIEJsYXpvci5wbGF0Zm9ybS57c29tZVBsYXRmb3JtTmFtZX0ue2Zvb306IHB1YmxpYywgcGxhdGZvcm0tc3BlY2lmaWMgQmxhem9yIEFQSXMgKHdvdWxkIGJlIGVtcHR5IGF0IGZpcnN0LCBzbyBubyBpbml0aWFsIGJyZWFraW5nIGNoYW5nZXMpXG4vLyAqIEJsYXpvci5wbGF0Zm9ybS57c29tZVBsYXRmb3JtTmFtZX0ue19pbnRlcm5hbH0ue2Zvb306IGludGVybmFsLCBwbGF0Zm9ybS1zcGVjaWZpYyBCbGF6b3IgQVBJc1xuZXhwb3J0IGludGVyZmFjZSBJQmxhem9yIHtcbiAgbmF2aWdhdGVUbzogKHVyaTogc3RyaW5nLCBvcHRpb25zOiBOYXZpZ2F0aW9uT3B0aW9ucykgPT4gdm9pZDtcbiAgcmVnaXN0ZXJDdXN0b21FdmVudFR5cGU6IChldmVudE5hbWU6IHN0cmluZywgb3B0aW9uczogRXZlbnRUeXBlT3B0aW9ucykgPT4gdm9pZDtcblxuICBhZGRFdmVudExpc3RlbmVyPzogdHlwZW9mIEpTRXZlbnRSZWdpc3RyeS5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcjtcbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcj86IHR5cGVvZiBKU0V2ZW50UmVnaXN0cnkucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI7XG4gIGRpc2Nvbm5lY3Q/OiAoKSA9PiB2b2lkO1xuICByZWNvbm5lY3Q/OiAoZXhpc3RpbmdDb25uZWN0aW9uPzogSHViQ29ubmVjdGlvbikgPT4gUHJvbWlzZTxib29sZWFuPjtcbiAgcGF1c2VDaXJjdWl0PzogKCkgPT4gUHJvbWlzZTxib29sZWFuPjtcbiAgcmVzdW1lQ2lyY3VpdD86ICgpID0+IFByb21pc2U8Ym9vbGVhbj47XG4gIGRlZmF1bHRSZWNvbm5lY3Rpb25IYW5kbGVyPzogRGVmYXVsdFJlY29ubmVjdGlvbkhhbmRsZXI7XG4gIHN0YXJ0PzogKCh1c2VyT3B0aW9ucz86IFBhcnRpYWw8Q2lyY3VpdFN0YXJ0T3B0aW9ucz4pID0+IFByb21pc2U8dm9pZD4pIHwgKChvcHRpb25zPzogUGFydGlhbDxXZWJBc3NlbWJseVN0YXJ0T3B0aW9ucz4pID0+IFByb21pc2U8dm9pZD4pIHwgKChvcHRpb25zPzogUGFydGlhbDxXZWJTdGFydE9wdGlvbnM+KSA9PiBQcm9taXNlPHZvaWQ+KTtcbiAgcGxhdGZvcm0/OiBQbGF0Zm9ybTtcbiAgcm9vdENvbXBvbmVudHM6IHR5cGVvZiBSb290Q29tcG9uZW50c0Z1bmN0aW9ucztcbiAgcnVudGltZTogUnVudGltZUFQSSxcblxuICBfaW50ZXJuYWw6IHtcbiAgICBuYXZpZ2F0aW9uTWFuYWdlcjogdHlwZW9mIG5hdmlnYXRpb25NYW5hZ2VySW50ZXJuYWxGdW5jdGlvbnMgfCBhbnk7XG4gICAgZG9tV3JhcHBlcjogdHlwZW9mIGRvbUZ1bmN0aW9ucztcbiAgICBWaXJ0dWFsaXplOiB0eXBlb2YgVmlydHVhbGl6ZTtcbiAgICBQYWdlVGl0bGU6IHR5cGVvZiBQYWdlVGl0bGU7XG4gICAgZm9yY2VDbG9zZUNvbm5lY3Rpb24/OiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICAgIElucHV0RmlsZT86IHR5cGVvZiBJbnB1dEZpbGU7XG4gICAgTmF2aWdhdGlvbkxvY2s6IHR5cGVvZiBOYXZpZ2F0aW9uTG9jaztcbiAgICBpbnZva2VKU0pzb24/OiAoaWRlbnRpZmllcjogc3RyaW5nLCB0YXJnZXRJbnN0YW5jZUlkOiBudW1iZXIsIHJlc3VsdFR5cGU6IG51bWJlciwgYXJnc0pzb246IHN0cmluZywgYXN5bmNIYW5kbGU6IG51bWJlciwgY2FsbFR5cGU6IG51bWJlcikgPT4gc3RyaW5nIHwgbnVsbDtcbiAgICBlbmRJbnZva2VEb3ROZXRGcm9tSlM/OiAoY2FsbElkOiBzdHJpbmcsIHN1Y2Nlc3M6IGJvb2xlYW4sIHJlc3VsdEpzb25PckVycm9yTWVzc2FnZTogc3RyaW5nKSA9PiB2b2lkO1xuICAgIHJlY2VpdmVCeXRlQXJyYXk/OiAoaWQ6IG51bWJlciwgZGF0YTogVWludDhBcnJheSkgPT4gdm9pZDtcbiAgICBnZXRQZXJzaXN0ZWRTdGF0ZT86ICgpID0+IHN0cmluZztcbiAgICBnZXRJbml0aWFsQ29tcG9uZW50c1VwZGF0ZT86ICgpID0+IFByb21pc2U8c3RyaW5nPjtcbiAgICB1cGRhdGVSb290Q29tcG9uZW50cz86IChvcGVyYXRpb25zOiBzdHJpbmcsIHdlYkFzc2VtYmx5U3RhdGU6IHN0cmluZykgPT4gdm9pZDtcbiAgICBlbmRVcGRhdGVSb290Q29tcG9uZW50cz86IChiYXRjaElkOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgYXR0YWNoUm9vdENvbXBvbmVudFRvRWxlbWVudD86IChhcmcwOiBhbnksIGFyZzE6IGFueSwgYXJnMjogYW55LCBhcmczOiBhbnkpID0+IHZvaWQ7XG4gICAgcmVnaXN0ZXJlZENvbXBvbmVudHM/OiB7XG4gICAgICBnZXRSZWdpc3RlcmVkQ29tcG9uZW50c0NvdW50OiAoKSA9PiBudW1iZXI7XG4gICAgICBnZXRBc3NlbWJseTogKGlkKSA9PiBzdHJpbmc7XG4gICAgICBnZXRUeXBlTmFtZTogKGlkKSA9PiBzdHJpbmc7XG4gICAgICBnZXRQYXJhbWV0ZXJEZWZpbml0aW9uczogKGlkKSA9PiBzdHJpbmc7XG4gICAgICBnZXRQYXJhbWV0ZXJWYWx1ZXM6IChpZCkgPT4gYW55O1xuICAgIH07XG4gICAgcmVuZGVyQmF0Y2g/OiAoYnJvd3NlclJlbmRlcmVySWQ6IG51bWJlciwgYmF0Y2hBZGRyZXNzOiBQb2ludGVyKSA9PiB2b2lkO1xuICAgIGdldENvbmZpZz86IChmaWxlTmFtZTogc3RyaW5nKSA9PiBVaW50OEFycmF5IHwgdW5kZWZpbmVkO1xuICAgIGdldEFwcGxpY2F0aW9uRW52aXJvbm1lbnQ/OiAoKSA9PiBzdHJpbmc7XG4gICAgZG90TmV0Q3JpdGljYWxFcnJvcj86IGFueTtcbiAgICBsb2FkTGF6eUFzc2VtYmx5PzogYW55O1xuICAgIGxvYWRTYXRlbGxpdGVBc3NlbWJsaWVzPzogYW55O1xuICAgIHNlbmRKU0RhdGFTdHJlYW0/OiAoZGF0YTogYW55LCBzdHJlYW1JZDogbnVtYmVyLCBjaHVua1NpemU6IG51bWJlcikgPT4gdm9pZDtcbiAgICBnZXRKU0RhdGFTdHJlYW1DaHVuaz86IChkYXRhOiBhbnksIHBvc2l0aW9uOiBudW1iZXIsIGNodW5rU2l6ZTogbnVtYmVyKSA9PiBQcm9taXNlPFVpbnQ4QXJyYXk+O1xuICAgIHJlY2VpdmVXZWJBc3NlbWJseURvdE5ldERhdGFTdHJlYW0/OiAoc3RyZWFtSWQ6IG51bWJlciwgZGF0YTogYW55LCBieXRlc1JlYWQ6IG51bWJlciwgZXJyb3JNZXNzYWdlOiBzdHJpbmcpID0+IHZvaWQ7XG4gICAgcmVjZWl2ZVdlYlZpZXdEb3ROZXREYXRhU3RyZWFtPzogKHN0cmVhbUlkOiBudW1iZXIsIGRhdGE6IGFueSwgYnl0ZXNSZWFkOiBudW1iZXIsIGVycm9yTWVzc2FnZTogc3RyaW5nKSA9PiB2b2lkO1xuICAgIGF0dGFjaFdlYlJlbmRlcmVySW50ZXJvcD86IHR5cGVvZiBhdHRhY2hXZWJSZW5kZXJlckludGVyb3A7XG5cbiAgICAvLyBKU0V4cG9ydCBBUElzXG4gICAgZG90TmV0RXhwb3J0cz86IHtcbiAgICAgIEludm9rZURvdE5ldDogKGFzc2VtYmx5TmFtZTogc3RyaW5nIHwgbnVsbCwgbWV0aG9kSWRlbnRpZmllcjogc3RyaW5nLCBkb3ROZXRPYmplY3RJZDogbnVtYmVyLCBhcmdzSnNvbjogc3RyaW5nKSA9PiBzdHJpbmcgfCBudWxsO1xuICAgICAgRW5kSW52b2tlSlM6IChhcmdzSnNvbjogc3RyaW5nKSA9PiB2b2lkO1xuICAgICAgQmVnaW5JbnZva2VEb3ROZXQ6IChjYWxsSWQ6IHN0cmluZyB8IG51bGwsIGFzc2VtYmx5TmFtZU9yRG90TmV0T2JqZWN0SWQ6IHN0cmluZywgbWV0aG9kSWRlbnRpZmllcjogc3RyaW5nLCBhcmdzSnNvbjogc3RyaW5nKSA9PiB2b2lkO1xuICAgICAgUmVjZWl2ZUJ5dGVBcnJheUZyb21KUzogKGlkOiBudW1iZXIsIGRhdGE6IFVpbnQ4QXJyYXkpID0+IHZvaWQ7XG4gICAgICBVcGRhdGVSb290Q29tcG9uZW50c0NvcmU6IChvcGVyYXRpb25zSnNvbjogc3RyaW5nLCBhcHBTdGF0ZTogc3RyaW5nKSA9PiB2b2lkO1xuICAgIH1cblxuICAgIC8vIEFQSXMgaW52b2tlZCBieSBob3QgcmVsb2FkXG5cbiAgICBob3RSZWxvYWRBcHBsaWVkPzogKCkgPT4gdm9pZDtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgQmxhem9yOiBJQmxhem9yID0ge1xuICBuYXZpZ2F0ZVRvLFxuICByZWdpc3RlckN1c3RvbUV2ZW50VHlwZSxcbiAgcm9vdENvbXBvbmVudHM6IFJvb3RDb21wb25lbnRzRnVuY3Rpb25zLFxuICBydW50aW1lOiB7fSBhcyBSdW50aW1lQVBJLFxuXG4gIF9pbnRlcm5hbDoge1xuICAgIG5hdmlnYXRpb25NYW5hZ2VyOiBuYXZpZ2F0aW9uTWFuYWdlckludGVybmFsRnVuY3Rpb25zLFxuICAgIGRvbVdyYXBwZXI6IGRvbUZ1bmN0aW9ucyxcbiAgICBWaXJ0dWFsaXplLFxuICAgIFBhZ2VUaXRsZSxcbiAgICBJbnB1dEZpbGUsXG4gICAgTmF2aWdhdGlvbkxvY2ssXG4gICAgZ2V0SlNEYXRhU3RyZWFtQ2h1bms6IGdldE5leHRDaHVuayxcbiAgICBhdHRhY2hXZWJSZW5kZXJlckludGVyb3AsXG4gIH0sXG59O1xuXG4vLyBNYWtlIHRoZSBmb2xsb3dpbmcgQVBJcyBhdmFpbGFibGUgaW4gZ2xvYmFsIHNjb3BlIGZvciBpbnZvY2F0aW9uIGZyb20gSlNcbndpbmRvd1snQmxhem9yJ10gPSBCbGF6b3I7XG4iLCIvLyBMaWNlbnNlZCB0byB0aGUgLk5FVCBGb3VuZGF0aW9uIHVuZGVyIG9uZSBvciBtb3JlIGFncmVlbWVudHMuXG4vLyBUaGUgLk5FVCBGb3VuZGF0aW9uIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG5sZXQgaGFzRmFpbGVkID0gZmFsc2U7XG5cbmV4cG9ydCBmdW5jdGlvbiBzaG93RXJyb3JOb3RpZmljYXRpb24oKTogdm9pZCB7XG4gIGNvbnN0IGVycm9yVWkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYmxhem9yLWVycm9yLXVpJykgYXMgSFRNTEVsZW1lbnQ7XG4gIGlmIChlcnJvclVpKSB7XG4gICAgZXJyb3JVaS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgfVxuXG4gIGlmICghaGFzRmFpbGVkKSB7XG4gICAgaGFzRmFpbGVkID0gdHJ1ZTtcbiAgICBjb25zdCBlcnJvclVpUmVsb2FkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTEVsZW1lbnQ+KCcjYmxhem9yLWVycm9yLXVpIC5yZWxvYWQnKTtcbiAgICBlcnJvclVpUmVsb2Fkcy5mb3JFYWNoKHJlbG9hZCA9PiB7XG4gICAgICByZWxvYWQub25jbGljayA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICBjb25zdCBlcnJvclVpRGlzbWlzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTEVsZW1lbnQ+KCcjYmxhem9yLWVycm9yLXVpIC5kaXNtaXNzJyk7XG4gICAgZXJyb3JVaURpc21pc3MuZm9yRWFjaChkaXNtaXNzID0+IHtcbiAgICAgIGRpc21pc3Mub25jbGljayA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgY29uc3QgZXJyb3JVaSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTEVsZW1lbnQ+KCcjYmxhem9yLWVycm9yLXVpJyk7XG4gICAgICAgIGlmIChlcnJvclVpKSB7XG4gICAgICAgICAgZXJyb3JVaS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8vIExpY2Vuc2VkIHRvIHRoZSAuTkVUIEZvdW5kYXRpb24gdW5kZXIgb25lIG9yIG1vcmUgYWdyZWVtZW50cy5cbi8vIFRoZSAuTkVUIEZvdW5kYXRpb24gbGljZW5zZXMgdGhpcyBmaWxlIHRvIHlvdSB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cbmNvbnN0IG5hdGl2ZURlY29kZXIgPSB0eXBlb2YgVGV4dERlY29kZXIgPT09ICdmdW5jdGlvbidcbiAgPyBuZXcgVGV4dERlY29kZXIoJ3V0Zi04JylcbiAgOiBudWxsO1xuXG5leHBvcnQgY29uc3QgZGVjb2RlVXRmODogKGJ5dGVzOiBVaW50OEFycmF5KSA9PiBzdHJpbmdcbiAgPSBuYXRpdmVEZWNvZGVyID8gbmF0aXZlRGVjb2Rlci5kZWNvZGUuYmluZChuYXRpdmVEZWNvZGVyKSA6IGRlY29kZUltcGw7XG5cbi8qICFcbkxvZ2ljIGluIGRlY29kZUltcGwgaXMgZGVyaXZlZCBmcm9tIGZhc3QtdGV4dC1lbmNvZGluZ1xuaHR0cHM6Ly9naXRodWIuY29tL3NhbXRob3IvZmFzdC10ZXh0LWVuY29kaW5nXG5cbkxpY2Vuc2UgZm9yIGZhc3QtdGV4dC1lbmNvZGluZzogQXBhY2hlIDIuMFxuaHR0cHM6Ly9naXRodWIuY29tL3NhbXRob3IvZmFzdC10ZXh0LWVuY29kaW5nL2Jsb2IvbWFzdGVyL0xJQ0VOU0VcbiovXG5cbmZ1bmN0aW9uIGRlY29kZUltcGwoYnl0ZXM6IFVpbnQ4QXJyYXkpOiBzdHJpbmcge1xuICBsZXQgcG9zID0gMDtcbiAgY29uc3QgbGVuID0gYnl0ZXMubGVuZ3RoO1xuICBjb25zdCBvdXQ6IG51bWJlcltdID0gW107XG4gIGNvbnN0IHN1YnN0cmluZ3M6IHN0cmluZ1tdID0gW107XG5cbiAgd2hpbGUgKHBvcyA8IGxlbikge1xuICAgIGNvbnN0IGJ5dGUxID0gYnl0ZXNbcG9zKytdO1xuICAgIGlmIChieXRlMSA9PT0gMCkge1xuICAgICAgYnJlYWs7IC8vIE5VTExcbiAgICB9XG5cbiAgICBpZiAoKGJ5dGUxICYgMHg4MCkgPT09IDApIHsgLy8gMS1ieXRlXG4gICAgICBvdXQucHVzaChieXRlMSk7XG4gICAgfSBlbHNlIGlmICgoYnl0ZTEgJiAweGUwKSA9PT0gMHhjMCkgeyAvLyAyLWJ5dGVcbiAgICAgIGNvbnN0IGJ5dGUyID0gYnl0ZXNbcG9zKytdICYgMHgzZjtcbiAgICAgIG91dC5wdXNoKCgoYnl0ZTEgJiAweDFmKSA8PCA2KSB8IGJ5dGUyKTtcbiAgICB9IGVsc2UgaWYgKChieXRlMSAmIDB4ZjApID09PSAweGUwKSB7XG4gICAgICBjb25zdCBieXRlMiA9IGJ5dGVzW3BvcysrXSAmIDB4M2Y7XG4gICAgICBjb25zdCBieXRlMyA9IGJ5dGVzW3BvcysrXSAmIDB4M2Y7XG4gICAgICBvdXQucHVzaCgoKGJ5dGUxICYgMHgxZikgPDwgMTIpIHwgKGJ5dGUyIDw8IDYpIHwgYnl0ZTMpO1xuICAgIH0gZWxzZSBpZiAoKGJ5dGUxICYgMHhmOCkgPT09IDB4ZjApIHtcbiAgICAgIGNvbnN0IGJ5dGUyID0gYnl0ZXNbcG9zKytdICYgMHgzZjtcbiAgICAgIGNvbnN0IGJ5dGUzID0gYnl0ZXNbcG9zKytdICYgMHgzZjtcbiAgICAgIGNvbnN0IGJ5dGU0ID0gYnl0ZXNbcG9zKytdICYgMHgzZjtcblxuICAgICAgLy8gdGhpcyBjYW4gYmUgPiAweGZmZmYsIHNvIHBvc3NpYmx5IGdlbmVyYXRlIHN1cnJvZ2F0ZXNcbiAgICAgIGxldCBjb2RlcG9pbnQgPSAoKGJ5dGUxICYgMHgwNykgPDwgMHgxMikgfCAoYnl0ZTIgPDwgMHgwYykgfCAoYnl0ZTMgPDwgMHgwNikgfCBieXRlNDtcbiAgICAgIGlmIChjb2RlcG9pbnQgPiAweGZmZmYpIHtcbiAgICAgICAgLy8gY29kZXBvaW50ICY9IH4weDEwMDAwO1xuICAgICAgICBjb2RlcG9pbnQgLT0gMHgxMDAwMDtcbiAgICAgICAgb3V0LnB1c2goKGNvZGVwb2ludCA+Pj4gMTApICYgMHgzZmYgfCAweGQ4MDApO1xuICAgICAgICBjb2RlcG9pbnQgPSAweGRjMDAgfCBjb2RlcG9pbnQgJiAweDNmZjtcbiAgICAgIH1cbiAgICAgIG91dC5wdXNoKGNvZGVwb2ludCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZJWE1FOiB3ZSdyZSBpZ25vcmluZyB0aGlzXG4gICAgfVxuXG4gICAgLy8gQXMgYSB3b3JrYXJvdW5kIGZvciBodHRwczovL2dpdGh1Yi5jb20vc2FtdGhvci9mYXN0LXRleHQtZW5jb2RpbmcvaXNzdWVzLzEsXG4gICAgLy8gbWFrZSBzdXJlIHRoZSAnb3V0JyBhcnJheSBuZXZlciBnZXRzIHRvbyBsb25nLiBXaGVuIGl0IHJlYWNoZXMgYSBsaW1pdCwgd2VcbiAgICAvLyBzdHJpbmdpZnkgd2hhdCB3ZSBoYXZlIHNvIGZhciBhbmQgYXBwZW5kIHRvIGEgbGlzdCBvZiBvdXRwdXRzLlxuICAgIGlmIChvdXQubGVuZ3RoID4gMTAyNCkge1xuICAgICAgc3Vic3RyaW5ncy5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgb3V0KSk7XG4gICAgICBvdXQubGVuZ3RoID0gMDtcbiAgICB9XG4gIH1cblxuICBzdWJzdHJpbmdzLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBvdXQpKTtcbiAgcmV0dXJuIHN1YnN0cmluZ3Muam9pbignJyk7XG59XG4iLCIvLyBMaWNlbnNlZCB0byB0aGUgLk5FVCBGb3VuZGF0aW9uIHVuZGVyIG9uZSBvciBtb3JlIGFncmVlbWVudHMuXG4vLyBUaGUgLk5FVCBGb3VuZGF0aW9uIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG5jb25zdCB1aW50NjRIaWdoUGFydFNoaWZ0ID0gTWF0aC5wb3coMiwgMzIpO1xuY29uc3QgbWF4U2FmZU51bWJlckhpZ2hQYXJ0ID0gTWF0aC5wb3coMiwgMjEpIC0gMTsgLy8gVGhlIGhpZ2gtb3JkZXIgaW50MzIgZnJvbSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUlxuXG5leHBvcnQgZnVuY3Rpb24gcmVhZEludDMyTEUoYnVmZmVyOiBVaW50OEFycmF5LCBwb3NpdGlvbjogbnVtYmVyKTogYW55IHtcbiAgcmV0dXJuIChidWZmZXJbcG9zaXRpb25dKVxuICAgICAgICB8IChidWZmZXJbcG9zaXRpb24gKyAxXSA8PCA4KVxuICAgICAgICB8IChidWZmZXJbcG9zaXRpb24gKyAyXSA8PCAxNilcbiAgICAgICAgfCAoYnVmZmVyW3Bvc2l0aW9uICsgM10gPDwgMjQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVhZFVpbnQzMkxFKGJ1ZmZlcjogVWludDhBcnJheSwgcG9zaXRpb246IG51bWJlcik6IGFueSB7XG4gIHJldHVybiAoYnVmZmVyW3Bvc2l0aW9uXSlcbiAgICAgICAgKyAoYnVmZmVyW3Bvc2l0aW9uICsgMV0gPDwgOClcbiAgICAgICAgKyAoYnVmZmVyW3Bvc2l0aW9uICsgMl0gPDwgMTYpXG4gICAgICAgICsgKChidWZmZXJbcG9zaXRpb24gKyAzXSA8PCAyNCkgPj4+IDApOyAvLyBUaGUgPj4+IDAgY29lcmNlcyB0aGUgdmFsdWUgdG8gdW5zaWduZWRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRVaW50NjRMRShidWZmZXI6IFVpbnQ4QXJyYXksIHBvc2l0aW9uOiBudW1iZXIpOiBhbnkge1xuICAvLyBUaGlzIGNhbm5vdCBiZSBkb25lIHVzaW5nIGJpdC1zaGlmdCBvcGVyYXRvcnMgaW4gSmF2YVNjcmlwdCwgYmVjYXVzZVxuICAvLyB0aG9zZSBhbGwgaW1wbGljaXRseSBjb252ZXJ0IHRvIGludDMyXG4gIGNvbnN0IGhpZ2hQYXJ0ID0gcmVhZFVpbnQzMkxFKGJ1ZmZlciwgcG9zaXRpb24gKyA0KTtcbiAgaWYgKGhpZ2hQYXJ0ID4gbWF4U2FmZU51bWJlckhpZ2hQYXJ0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcmVhZCB1aW50NjQgd2l0aCBoaWdoIG9yZGVyIHBhcnQgJHtoaWdoUGFydH0sIGJlY2F1c2UgdGhlIHJlc3VsdCB3b3VsZCBleGNlZWQgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIuYCk7XG4gIH1cblxuICByZXR1cm4gKGhpZ2hQYXJ0ICogdWludDY0SGlnaFBhcnRTaGlmdCkgKyByZWFkVWludDMyTEUoYnVmZmVyLCBwb3NpdGlvbik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWFkTEVCMTI4KGJ1ZmZlcjogVWludDhBcnJheSwgcG9zaXRpb246IG51bWJlcik6IG51bWJlciB7XG4gIGxldCByZXN1bHQgPSAwO1xuICBsZXQgc2hpZnQgPSAwO1xuICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgNDsgaW5kZXgrKykge1xuICAgIGNvbnN0IGJ5dGUgPSBidWZmZXJbcG9zaXRpb24gKyBpbmRleF07XG4gICAgcmVzdWx0IHw9IChieXRlICYgMTI3KSA8PCBzaGlmdDtcbiAgICBpZiAoYnl0ZSA8IDEyOCkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHNoaWZ0ICs9IDc7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG51bUxFQjEyOEJ5dGVzKHZhbHVlOiBudW1iZXIpOiAxIHwgMiB8IDMgfCA0IHtcbiAgcmV0dXJuIHZhbHVlIDwgMTI4ID8gMVxuICAgIDogdmFsdWUgPCAxNjM4NCA/IDJcbiAgICAgIDogdmFsdWUgPCAyMDk3MTUyID8gMyA6IDQ7XG59XG4iLCIvLyBMaWNlbnNlZCB0byB0aGUgLk5FVCBGb3VuZGF0aW9uIHVuZGVyIG9uZSBvciBtb3JlIGFncmVlbWVudHMuXG4vLyBUaGUgLk5FVCBGb3VuZGF0aW9uIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG5pbXBvcnQgeyBSZW5kZXJCYXRjaCwgQXJyYXlSYW5nZSwgUmVuZGVyVHJlZURpZmYsIEFycmF5VmFsdWVzLCBSZW5kZXJUcmVlRWRpdCwgUmVuZGVyVHJlZUZyYW1lLCBSZW5kZXJUcmVlRGlmZlJlYWRlciwgUmVuZGVyVHJlZUZyYW1lUmVhZGVyLCBSZW5kZXJUcmVlRWRpdFJlYWRlciwgQXJyYXlSYW5nZVJlYWRlciwgQXJyYXlCdWlsZGVyU2VnbWVudFJlYWRlciwgQXJyYXlCdWlsZGVyU2VnbWVudCB9IGZyb20gJy4vUmVuZGVyQmF0Y2gnO1xuaW1wb3J0IHsgZGVjb2RlVXRmOCB9IGZyb20gJy4uLy4uL1V0ZjhEZWNvZGVyJztcbmltcG9ydCB7IHJlYWRJbnQzMkxFLCByZWFkVWludDY0TEUsIHJlYWRMRUIxMjgsIG51bUxFQjEyOEJ5dGVzIH0gZnJvbSAnLi4vLi4vQmluYXJ5RGVjb2Rlcic7XG5cbmNvbnN0IHVwZGF0ZWRDb21wb25lbnRzRW50cnlMZW5ndGggPSA0OyAvLyBFYWNoIGlzIGEgc2luZ2xlIGludDMyIGdpdmluZyB0aGUgbG9jYXRpb24gb2YgdGhlIGRhdGFcbmNvbnN0IHJlZmVyZW5jZUZyYW1lc0VudHJ5TGVuZ3RoID0gMjA7IC8vIDEgaW50IGZvciBmcmFtZSB0eXBlLCB0aGVuIDE2IGJ5dGVzIGZvciB0eXBlLXNwZWNpZmljIGRhdGFcbmNvbnN0IGRpc3Bvc2VkQ29tcG9uZW50SWRzRW50cnlMZW5ndGggPSA0OyAvLyBFYWNoIGlzIGFuIGludDMyIGdpdmluZyB0aGUgSURcbmNvbnN0IGRpc3Bvc2VkRXZlbnRIYW5kbGVySWRzRW50cnlMZW5ndGggPSA4OyAvLyBFYWNoIGlzIGFuIGludDY0IGdpdmluZyB0aGUgSURcbmNvbnN0IGVkaXRzRW50cnlMZW5ndGggPSAxNjsgLy8gNCBpbnRzXG5jb25zdCBzdHJpbmdUYWJsZUVudHJ5TGVuZ3RoID0gNDsgLy8gRWFjaCBpcyBhbiBpbnQzMiBnaXZpbmcgdGhlIHN0cmluZyBkYXRhIGxvY2F0aW9uLCBvciAtMSBmb3IgbnVsbFxuXG5leHBvcnQgY2xhc3MgT3V0T2ZQcm9jZXNzUmVuZGVyQmF0Y2ggaW1wbGVtZW50cyBSZW5kZXJCYXRjaCB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgYmF0Y2hEYXRhOiBVaW50OEFycmF5KSB7XG4gICAgY29uc3Qgc3RyaW5nUmVhZGVyID0gbmV3IE91dE9mUHJvY2Vzc1N0cmluZ1JlYWRlcihiYXRjaERhdGEpO1xuXG4gICAgdGhpcy5hcnJheVJhbmdlUmVhZGVyID0gbmV3IE91dE9mUHJvY2Vzc0FycmF5UmFuZ2VSZWFkZXIoYmF0Y2hEYXRhKTtcbiAgICB0aGlzLmFycmF5QnVpbGRlclNlZ21lbnRSZWFkZXIgPSBuZXcgT3V0T2ZQcm9jZXNzQXJyYXlCdWlsZGVyU2VnbWVudFJlYWRlcihiYXRjaERhdGEpO1xuICAgIHRoaXMuZGlmZlJlYWRlciA9IG5ldyBPdXRPZlByb2Nlc3NSZW5kZXJUcmVlRGlmZlJlYWRlcihiYXRjaERhdGEpO1xuICAgIHRoaXMuZWRpdFJlYWRlciA9IG5ldyBPdXRPZlByb2Nlc3NSZW5kZXJUcmVlRWRpdFJlYWRlcihiYXRjaERhdGEsIHN0cmluZ1JlYWRlcik7XG4gICAgdGhpcy5mcmFtZVJlYWRlciA9IG5ldyBPdXRPZlByb2Nlc3NSZW5kZXJUcmVlRnJhbWVSZWFkZXIoYmF0Y2hEYXRhLCBzdHJpbmdSZWFkZXIpO1xuICB9XG5cbiAgdXBkYXRlZENvbXBvbmVudHMoKTogQXJyYXlSYW5nZTxSZW5kZXJUcmVlRGlmZj4ge1xuICAgIHJldHVybiByZWFkSW50MzJMRSh0aGlzLmJhdGNoRGF0YSwgdGhpcy5iYXRjaERhdGEubGVuZ3RoIC0gMjApOyAvLyA1dGgtZnJvbS1sYXN0IGludDMyXG4gIH1cblxuICByZWZlcmVuY2VGcmFtZXMoKTogQXJyYXlSYW5nZTxSZW5kZXJUcmVlRnJhbWU+IHtcbiAgICByZXR1cm4gcmVhZEludDMyTEUodGhpcy5iYXRjaERhdGEsIHRoaXMuYmF0Y2hEYXRhLmxlbmd0aCAtIDE2KTsgLy8gNHRoLWZyb20tbGFzdCBpbnQzMlxuICB9XG5cbiAgZGlzcG9zZWRDb21wb25lbnRJZHMoKTogQXJyYXlSYW5nZTxudW1iZXI+IHtcbiAgICByZXR1cm4gcmVhZEludDMyTEUodGhpcy5iYXRjaERhdGEsIHRoaXMuYmF0Y2hEYXRhLmxlbmd0aCAtIDEyKTsgLy8gM3JkLWZyb20tbGFzdCBpbnQzMlxuICB9XG5cbiAgZGlzcG9zZWRFdmVudEhhbmRsZXJJZHMoKTogQXJyYXlSYW5nZTxudW1iZXI+IHtcbiAgICByZXR1cm4gcmVhZEludDMyTEUodGhpcy5iYXRjaERhdGEsIHRoaXMuYmF0Y2hEYXRhLmxlbmd0aCAtIDgpOyAvLyAydGgtZnJvbS1sYXN0IGludDMyXG4gIH1cblxuICB1cGRhdGVkQ29tcG9uZW50c0VudHJ5KHZhbHVlczogQXJyYXlWYWx1ZXM8UmVuZGVyVHJlZURpZmY+LCBpbmRleDogbnVtYmVyKTogUmVuZGVyVHJlZURpZmYge1xuICAgIGNvbnN0IHRhYmxlRW50cnlQb3MgPSAodmFsdWVzIGFzIGFueSkgKyBpbmRleCAqIHVwZGF0ZWRDb21wb25lbnRzRW50cnlMZW5ndGg7XG4gICAgcmV0dXJuIHJlYWRJbnQzMkxFKHRoaXMuYmF0Y2hEYXRhLCB0YWJsZUVudHJ5UG9zKTtcbiAgfVxuXG4gIHJlZmVyZW5jZUZyYW1lc0VudHJ5KHZhbHVlczogQXJyYXlWYWx1ZXM8UmVuZGVyVHJlZUZyYW1lPiwgaW5kZXg6IG51bWJlcik6IFJlbmRlclRyZWVGcmFtZSB7XG4gICAgcmV0dXJuICh2YWx1ZXMgYXMgYW55KSArIGluZGV4ICogcmVmZXJlbmNlRnJhbWVzRW50cnlMZW5ndGggYXMgYW55O1xuICB9XG5cbiAgZGlzcG9zZWRDb21wb25lbnRJZHNFbnRyeSh2YWx1ZXM6IEFycmF5VmFsdWVzPG51bWJlcj4sIGluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIGNvbnN0IGVudHJ5UG9zID0gKHZhbHVlcyBhcyBhbnkpICsgaW5kZXggKiBkaXNwb3NlZENvbXBvbmVudElkc0VudHJ5TGVuZ3RoO1xuICAgIHJldHVybiByZWFkSW50MzJMRSh0aGlzLmJhdGNoRGF0YSwgZW50cnlQb3MpO1xuICB9XG5cbiAgZGlzcG9zZWRFdmVudEhhbmRsZXJJZHNFbnRyeSh2YWx1ZXM6IEFycmF5VmFsdWVzPG51bWJlcj4sIGluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIGNvbnN0IGVudHJ5UG9zID0gKHZhbHVlcyBhcyBhbnkpICsgaW5kZXggKiBkaXNwb3NlZEV2ZW50SGFuZGxlcklkc0VudHJ5TGVuZ3RoO1xuICAgIHJldHVybiByZWFkVWludDY0TEUodGhpcy5iYXRjaERhdGEsIGVudHJ5UG9zKTtcbiAgfVxuXG4gIGRpZmZSZWFkZXI6IFJlbmRlclRyZWVEaWZmUmVhZGVyO1xuXG4gIGVkaXRSZWFkZXI6IFJlbmRlclRyZWVFZGl0UmVhZGVyO1xuXG4gIGZyYW1lUmVhZGVyOiBSZW5kZXJUcmVlRnJhbWVSZWFkZXI7XG5cbiAgYXJyYXlSYW5nZVJlYWRlcjogQXJyYXlSYW5nZVJlYWRlcjtcblxuICBhcnJheUJ1aWxkZXJTZWdtZW50UmVhZGVyOiBBcnJheUJ1aWxkZXJTZWdtZW50UmVhZGVyO1xufVxuXG5jbGFzcyBPdXRPZlByb2Nlc3NSZW5kZXJUcmVlRGlmZlJlYWRlciBpbXBsZW1lbnRzIFJlbmRlclRyZWVEaWZmUmVhZGVyIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBiYXRjaERhdGFVaW50ODogVWludDhBcnJheSkge1xuICB9XG5cbiAgY29tcG9uZW50SWQoZGlmZjogUmVuZGVyVHJlZURpZmYpIHtcbiAgICAvLyBGaXJzdCBpbnQzMiBpcyBjb21wb25lbnRJZFxuICAgIHJldHVybiByZWFkSW50MzJMRSh0aGlzLmJhdGNoRGF0YVVpbnQ4LCBkaWZmIGFzIGFueSk7XG4gIH1cblxuICBlZGl0cyhkaWZmOiBSZW5kZXJUcmVlRGlmZikge1xuICAgIC8vIEVudHJpZXMgZGF0YSBzdGFydHMgYWZ0ZXIgdGhlIGNvbXBvbmVudElkICh3aGljaCBpcyBhIDQtYnl0ZSBpbnQpXG4gICAgcmV0dXJuIChkaWZmIGFzIGFueSArIDQpO1xuICB9XG5cbiAgZWRpdHNFbnRyeSh2YWx1ZXM6IEFycmF5VmFsdWVzPFJlbmRlclRyZWVFZGl0PiwgaW5kZXg6IG51bWJlcikge1xuICAgIHJldHVybiAodmFsdWVzIGFzIGFueSkgKyBpbmRleCAqIGVkaXRzRW50cnlMZW5ndGg7XG4gIH1cbn1cblxuY2xhc3MgT3V0T2ZQcm9jZXNzUmVuZGVyVHJlZUVkaXRSZWFkZXIgaW1wbGVtZW50cyBSZW5kZXJUcmVlRWRpdFJlYWRlciB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgYmF0Y2hEYXRhVWludDg6IFVpbnQ4QXJyYXksIHByaXZhdGUgc3RyaW5nUmVhZGVyOiBPdXRPZlByb2Nlc3NTdHJpbmdSZWFkZXIpIHtcbiAgfVxuXG4gIGVkaXRUeXBlKGVkaXQ6IFJlbmRlclRyZWVFZGl0KSB7XG4gICAgcmV0dXJuIHJlYWRJbnQzMkxFKHRoaXMuYmF0Y2hEYXRhVWludDgsIGVkaXQgYXMgYW55KTsgLy8gMXN0IGludFxuICB9XG5cbiAgc2libGluZ0luZGV4KGVkaXQ6IFJlbmRlclRyZWVFZGl0KSB7XG4gICAgcmV0dXJuIHJlYWRJbnQzMkxFKHRoaXMuYmF0Y2hEYXRhVWludDgsIGVkaXQgYXMgYW55ICsgNCk7IC8vIDJuZCBpbnRcbiAgfVxuXG4gIG5ld1RyZWVJbmRleChlZGl0OiBSZW5kZXJUcmVlRWRpdCkge1xuICAgIHJldHVybiByZWFkSW50MzJMRSh0aGlzLmJhdGNoRGF0YVVpbnQ4LCBlZGl0IGFzIGFueSArIDgpOyAvLyAzcmQgaW50XG4gIH1cblxuICBtb3ZlVG9TaWJsaW5nSW5kZXgoZWRpdDogUmVuZGVyVHJlZUVkaXQpIHtcbiAgICByZXR1cm4gcmVhZEludDMyTEUodGhpcy5iYXRjaERhdGFVaW50OCwgZWRpdCBhcyBhbnkgKyA4KTsgLy8gM3JkIGludFxuICB9XG5cbiAgcmVtb3ZlZEF0dHJpYnV0ZU5hbWUoZWRpdDogUmVuZGVyVHJlZUVkaXQpIHtcbiAgICBjb25zdCBzdHJpbmdJbmRleCA9IHJlYWRJbnQzMkxFKHRoaXMuYmF0Y2hEYXRhVWludDgsIGVkaXQgYXMgYW55ICsgMTIpOyAvLyA0dGggaW50XG4gICAgcmV0dXJuIHRoaXMuc3RyaW5nUmVhZGVyLnJlYWRTdHJpbmcoc3RyaW5nSW5kZXgpO1xuICB9XG59XG5cbmNsYXNzIE91dE9mUHJvY2Vzc1JlbmRlclRyZWVGcmFtZVJlYWRlciBpbXBsZW1lbnRzIFJlbmRlclRyZWVGcmFtZVJlYWRlciB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgYmF0Y2hEYXRhVWludDg6IFVpbnQ4QXJyYXksIHByaXZhdGUgc3RyaW5nUmVhZGVyOiBPdXRPZlByb2Nlc3NTdHJpbmdSZWFkZXIpIHtcbiAgfVxuXG4gIC8vIEZvciByZW5kZXIgZnJhbWVzLCB0aGUgMm5kLTR0aCBpbnRzIGhhdmUgZGlmZmVyZW50IG1lYW5pbmdzIGRlcGVuZGluZyBvbiBmcmFtZVR5cGUuXG4gIC8vIEl0J3MgdGhlIGNhbGxlcidzIHJlc3BvbnNpYmlsaXR5IG5vdCB0byBldmFsdWF0ZSBwcm9wZXJ0aWVzIHRoYXQgYXJlbid0IGFwcGxpY2FibGUgdG8gdGhlIGZyYW1lVHlwZS5cblxuICBmcmFtZVR5cGUoZnJhbWU6IFJlbmRlclRyZWVGcmFtZSkge1xuICAgIHJldHVybiByZWFkSW50MzJMRSh0aGlzLmJhdGNoRGF0YVVpbnQ4LCBmcmFtZSBhcyBhbnkpOyAvLyAxc3QgaW50XG4gIH1cblxuICBzdWJ0cmVlTGVuZ3RoKGZyYW1lOiBSZW5kZXJUcmVlRnJhbWUpIHtcbiAgICByZXR1cm4gcmVhZEludDMyTEUodGhpcy5iYXRjaERhdGFVaW50OCwgZnJhbWUgYXMgYW55ICsgNCk7IC8vIDJuZCBpbnRcbiAgfVxuXG4gIGVsZW1lbnRSZWZlcmVuY2VDYXB0dXJlSWQoZnJhbWU6IFJlbmRlclRyZWVGcmFtZSkge1xuICAgIGNvbnN0IHN0cmluZ0luZGV4ID0gcmVhZEludDMyTEUodGhpcy5iYXRjaERhdGFVaW50OCwgZnJhbWUgYXMgYW55ICsgNCk7IC8vIDJuZCBpbnRcbiAgICByZXR1cm4gdGhpcy5zdHJpbmdSZWFkZXIucmVhZFN0cmluZyhzdHJpbmdJbmRleCk7XG4gIH1cblxuICBjb21wb25lbnRJZChmcmFtZTogUmVuZGVyVHJlZUZyYW1lKSB7XG4gICAgcmV0dXJuIHJlYWRJbnQzMkxFKHRoaXMuYmF0Y2hEYXRhVWludDgsIGZyYW1lIGFzIGFueSArIDgpOyAvLyAzcmQgaW50XG4gIH1cblxuICBlbGVtZW50TmFtZShmcmFtZTogUmVuZGVyVHJlZUZyYW1lKSB7XG4gICAgY29uc3Qgc3RyaW5nSW5kZXggPSByZWFkSW50MzJMRSh0aGlzLmJhdGNoRGF0YVVpbnQ4LCBmcmFtZSBhcyBhbnkgKyA4KTsgLy8gM3JkIGludFxuICAgIHJldHVybiB0aGlzLnN0cmluZ1JlYWRlci5yZWFkU3RyaW5nKHN0cmluZ0luZGV4KTtcbiAgfVxuXG4gIHRleHRDb250ZW50KGZyYW1lOiBSZW5kZXJUcmVlRnJhbWUpIHtcbiAgICBjb25zdCBzdHJpbmdJbmRleCA9IHJlYWRJbnQzMkxFKHRoaXMuYmF0Y2hEYXRhVWludDgsIGZyYW1lIGFzIGFueSArIDQpOyAvLyAybmQgaW50XG4gICAgcmV0dXJuIHRoaXMuc3RyaW5nUmVhZGVyLnJlYWRTdHJpbmcoc3RyaW5nSW5kZXgpO1xuICB9XG5cbiAgbWFya3VwQ29udGVudChmcmFtZTogUmVuZGVyVHJlZUZyYW1lKSB7XG4gICAgY29uc3Qgc3RyaW5nSW5kZXggPSByZWFkSW50MzJMRSh0aGlzLmJhdGNoRGF0YVVpbnQ4LCBmcmFtZSBhcyBhbnkgKyA0KTsgLy8gMm5kIGludFxuICAgIHJldHVybiB0aGlzLnN0cmluZ1JlYWRlci5yZWFkU3RyaW5nKHN0cmluZ0luZGV4KSE7XG4gIH1cblxuICBhdHRyaWJ1dGVOYW1lKGZyYW1lOiBSZW5kZXJUcmVlRnJhbWUpIHtcbiAgICBjb25zdCBzdHJpbmdJbmRleCA9IHJlYWRJbnQzMkxFKHRoaXMuYmF0Y2hEYXRhVWludDgsIGZyYW1lIGFzIGFueSArIDQpOyAvLyAybmQgaW50XG4gICAgcmV0dXJuIHRoaXMuc3RyaW5nUmVhZGVyLnJlYWRTdHJpbmcoc3RyaW5nSW5kZXgpO1xuICB9XG5cbiAgYXR0cmlidXRlVmFsdWUoZnJhbWU6IFJlbmRlclRyZWVGcmFtZSkge1xuICAgIGNvbnN0IHN0cmluZ0luZGV4ID0gcmVhZEludDMyTEUodGhpcy5iYXRjaERhdGFVaW50OCwgZnJhbWUgYXMgYW55ICsgOCk7IC8vIDNyZCBpbnRcbiAgICByZXR1cm4gdGhpcy5zdHJpbmdSZWFkZXIucmVhZFN0cmluZyhzdHJpbmdJbmRleCk7XG4gIH1cblxuICBhdHRyaWJ1dGVFdmVudEhhbmRsZXJJZChmcmFtZTogUmVuZGVyVHJlZUZyYW1lKSB7XG4gICAgcmV0dXJuIHJlYWRVaW50NjRMRSh0aGlzLmJhdGNoRGF0YVVpbnQ4LCBmcmFtZSBhcyBhbnkgKyAxMik7IC8vIEJ5dGVzIDEyLTE5XG4gIH1cbn1cblxuY2xhc3MgT3V0T2ZQcm9jZXNzU3RyaW5nUmVhZGVyIHtcbiAgcHJpdmF0ZSBzdHJpbmdUYWJsZVN0YXJ0SW5kZXg6IG51bWJlcjtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGJhdGNoRGF0YVVpbnQ4OiBVaW50OEFycmF5KSB7XG4gICAgLy8gRmluYWwgaW50IGdpdmVzIHN0YXJ0IHBvc2l0aW9uIG9mIHRoZSBzdHJpbmcgdGFibGVcbiAgICB0aGlzLnN0cmluZ1RhYmxlU3RhcnRJbmRleCA9IHJlYWRJbnQzMkxFKGJhdGNoRGF0YVVpbnQ4LCBiYXRjaERhdGFVaW50OC5sZW5ndGggLSA0KTtcbiAgfVxuXG4gIHJlYWRTdHJpbmcoaW5kZXg6IG51bWJlcik6IHN0cmluZyB8IG51bGwge1xuICAgIGlmIChpbmRleCA9PT0gLTEpIHsgLy8gU3BlY2lhbCB2YWx1ZSBlbmNvZGVzICdudWxsJ1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHN0cmluZ1RhYmxlRW50cnlQb3MgPSByZWFkSW50MzJMRSh0aGlzLmJhdGNoRGF0YVVpbnQ4LCB0aGlzLnN0cmluZ1RhYmxlU3RhcnRJbmRleCArIGluZGV4ICogc3RyaW5nVGFibGVFbnRyeUxlbmd0aCk7XG5cbiAgICAgIC8vIEJ5IGRlZmF1bHQsIC5ORVQncyBCaW5hcnlXcml0ZXIgZ2l2ZXMgTEVCMTI4LWxlbmd0aC1wcmVmaXhlZCBVVEYtOCBkYXRhLlxuICAgICAgLy8gVGhpcyBpcyBjb252ZW5pZW50IGVub3VnaCB0byBkZWNvZGUgaW4gSmF2YVNjcmlwdC5cbiAgICAgIGNvbnN0IG51bVV0ZjhCeXRlcyA9IHJlYWRMRUIxMjgodGhpcy5iYXRjaERhdGFVaW50OCwgc3RyaW5nVGFibGVFbnRyeVBvcyk7XG4gICAgICBjb25zdCBjaGFyc1N0YXJ0ID0gc3RyaW5nVGFibGVFbnRyeVBvcyArIG51bUxFQjEyOEJ5dGVzKG51bVV0ZjhCeXRlcyk7XG4gICAgICBjb25zdCB1dGY4RGF0YSA9IG5ldyBVaW50OEFycmF5KFxuICAgICAgICB0aGlzLmJhdGNoRGF0YVVpbnQ4LmJ1ZmZlcixcbiAgICAgICAgdGhpcy5iYXRjaERhdGFVaW50OC5ieXRlT2Zmc2V0ICsgY2hhcnNTdGFydCxcbiAgICAgICAgbnVtVXRmOEJ5dGVzXG4gICAgICApO1xuICAgICAgcmV0dXJuIGRlY29kZVV0ZjgodXRmOERhdGEpO1xuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBPdXRPZlByb2Nlc3NBcnJheVJhbmdlUmVhZGVyIGltcGxlbWVudHMgQXJyYXlSYW5nZVJlYWRlciB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgYmF0Y2hEYXRhVWludDg6IFVpbnQ4QXJyYXkpIHtcbiAgfVxuXG4gIGNvdW50PFQ+KGFycmF5UmFuZ2U6IEFycmF5UmFuZ2U8VD4pIHtcbiAgICAvLyBGaXJzdCBpbnQgaXMgY291bnRcbiAgICByZXR1cm4gcmVhZEludDMyTEUodGhpcy5iYXRjaERhdGFVaW50OCwgYXJyYXlSYW5nZSBhcyBhbnkpO1xuICB9XG5cbiAgdmFsdWVzPFQ+KGFycmF5UmFuZ2U6IEFycmF5UmFuZ2U8VD4pIHtcbiAgICAvLyBFbnRyaWVzIGRhdGEgc3RhcnRzIGFmdGVyIHRoZSAnY291bnQnIGludCAoaS5lLiwgYWZ0ZXIgNCBieXRlcylcbiAgICByZXR1cm4gYXJyYXlSYW5nZSBhcyBhbnkgKyA0O1xuICB9XG59XG5cbmNsYXNzIE91dE9mUHJvY2Vzc0FycmF5QnVpbGRlclNlZ21lbnRSZWFkZXIgaW1wbGVtZW50cyBBcnJheUJ1aWxkZXJTZWdtZW50UmVhZGVyIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBiYXRjaERhdGFVaW50ODogVWludDhBcnJheSkge1xuICB9XG5cbiAgb2Zmc2V0PFQ+KF9hcnJheUJ1aWxkZXJTZWdtZW50OiBBcnJheUJ1aWxkZXJTZWdtZW50PFQ+KTogbnVtYmVyIHtcbiAgICAvLyBOb3QgdXNlZCBieSB0aGUgb3V0LW9mLXByb2Nlc3MgcmVwcmVzZW50YXRpb24gb2YgUmVuZGVyQmF0Y2ggZGF0YS5cbiAgICAvLyBUaGlzIG9ubHkgZXhpc3RzIG9uIHRoZSBBcnJheUJ1aWxkZXJTZWdtZW50UmVhZGVyIGZvciB0aGUgc2hhcmVkLW1lbW9yeSByZXByZXNlbnRhdGlvbi5cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGNvdW50PFQ+KGFycmF5QnVpbGRlclNlZ21lbnQ6IEFycmF5QnVpbGRlclNlZ21lbnQ8VD4pIHtcbiAgICAvLyBGaXJzdCBpbnQgaXMgY291bnRcbiAgICByZXR1cm4gcmVhZEludDMyTEUodGhpcy5iYXRjaERhdGFVaW50OCwgYXJyYXlCdWlsZGVyU2VnbWVudCBhcyBhbnkpO1xuICB9XG5cbiAgdmFsdWVzPFQ+KGFycmF5QnVpbGRlclNlZ21lbnQ6IEFycmF5QnVpbGRlclNlZ21lbnQ8VD4pOiBBcnJheVZhbHVlczxUPiB7XG4gICAgLy8gRW50cmllcyBkYXRhIHN0YXJ0cyBhZnRlciB0aGUgJ2NvdW50JyBpbnQgKGkuZS4sIGFmdGVyIDQgYnl0ZXMpXG4gICAgcmV0dXJuIGFycmF5QnVpbGRlclNlZ21lbnQgYXMgYW55ICsgNDtcbiAgfVxufVxuXG5cbiIsIi8vIExpY2Vuc2VkIHRvIHRoZSAuTkVUIEZvdW5kYXRpb24gdW5kZXIgb25lIG9yIG1vcmUgYWdyZWVtZW50cy5cbi8vIFRoZSAuTkVUIEZvdW5kYXRpb24gbGljZW5zZXMgdGhpcyBmaWxlIHRvIHlvdSB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cbmNvbnN0IGlwY01lc3NhZ2VQcmVmaXggPSAnX19id3Y6JztcbmxldCBhcHBsaWNhdGlvbklzVGVybWluYXRlZCA9IGZhbHNlO1xuXG5leHBvcnQgZnVuY3Rpb24gdHJ5U2VyaWFsaXplTWVzc2FnZShtZXNzYWdlVHlwZTogc3RyaW5nLCBhcmdzOiBhbnlbXSk6IHN0cmluZyB8IG51bGwge1xuICByZXR1cm4gYXBwbGljYXRpb25Jc1Rlcm1pbmF0ZWRcbiAgICA/IG51bGxcbiAgICA6IGAke2lwY01lc3NhZ2VQcmVmaXh9JHtKU09OLnN0cmluZ2lmeShbbWVzc2FnZVR5cGUsIC4uLmFyZ3NdKX1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdHJ5RGVzZXJpYWxpemVNZXNzYWdlKG1lc3NhZ2U6IHN0cmluZyk6IElwY01lc3NhZ2UgfCBudWxsIHtcbiAgaWYgKGFwcGxpY2F0aW9uSXNUZXJtaW5hdGVkIHx8ICFtZXNzYWdlIHx8ICFtZXNzYWdlLnN0YXJ0c1dpdGgoaXBjTWVzc2FnZVByZWZpeCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IG1lc3NhZ2VBZnRlclByZWZpeCA9IG1lc3NhZ2Uuc3Vic3RyaW5nKGlwY01lc3NhZ2VQcmVmaXgubGVuZ3RoKTtcbiAgY29uc3QgW21lc3NhZ2VUeXBlLCAuLi5hcmdzXSA9IEpTT04ucGFyc2UobWVzc2FnZUFmdGVyUHJlZml4KTtcbiAgcmV0dXJuIHsgbWVzc2FnZVR5cGUsIGFyZ3MgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEFwcGxpY2F0aW9uSXNUZXJtaW5hdGVkKCk6IHZvaWQge1xuICAvLyBJZiB0aGVyZSdzIGFuIHVuaGFuZGxlZCBleGNlcHRpb24sIHdlJ2xsIHByZXZlbnQgdGhlIHdlYnZpZXcgZnJvbSBkb2luZyBhbnl0aGluZyBlbHNlIHVudGlsXG4gIC8vIGl0IHJlbG9hZHMgdGhlIHBhZ2UuIFRoaXMgaXMgZXF1aXZhbGVudCB0byB3aGF0IGhhcHBlbnMgaW4gQmxhem9yIFNlcnZlciwgYW5kIGF2b2lkcyBhbnlvbmVcbiAgLy8gdGFraW5nIGEgZGVwZW5kZW5jeSBvbiBiZWluZyBhYmxlIHRvIGNvbnRpbnVlIGludGVyYWN0aW5nIGFmdGVyIGEgZmF0YWwgZXJyb3IuXG4gIGFwcGxpY2F0aW9uSXNUZXJtaW5hdGVkID0gdHJ1ZTtcbn1cblxuaW50ZXJmYWNlIElwY01lc3NhZ2Uge1xuICBtZXNzYWdlVHlwZTogc3RyaW5nO1xuICBhcmdzOiB1bmtub3duW107XG59XG4iLCIvLyBMaWNlbnNlZCB0byB0aGUgLk5FVCBGb3VuZGF0aW9uIHVuZGVyIG9uZSBvciBtb3JlIGFncmVlbWVudHMuXG4vLyBUaGUgLk5FVCBGb3VuZGF0aW9uIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG5pbXBvcnQgeyB0cnlTZXJpYWxpemVNZXNzYWdlIH0gZnJvbSAnLi9XZWJWaWV3SXBjQ29tbW9uJztcblxuZXhwb3J0IGZ1bmN0aW9uIHNlbmRBdHRhY2hQYWdlKGJhc2VVcmw6IHN0cmluZywgc3RhcnRVcmw6IHN0cmluZyk6IHZvaWQge1xuICBzZW5kKCdBdHRhY2hQYWdlJywgYmFzZVVybCwgc3RhcnRVcmwpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2VuZFJlbmRlckNvbXBsZXRlZChiYXRjaElkOiBudW1iZXIsIGVycm9yT3JOdWxsOiBzdHJpbmcgfCBudWxsKTogdm9pZCB7XG4gIHNlbmQoJ09uUmVuZGVyQ29tcGxldGVkJywgYmF0Y2hJZCwgZXJyb3JPck51bGwpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2VuZEJlZ2luSW52b2tlRG90TmV0RnJvbUpTKGNhbGxJZDogbnVtYmVyLCBhc3NlbWJseU5hbWU6IHN0cmluZyB8IG51bGwsIG1ldGhvZElkZW50aWZpZXI6IHN0cmluZywgZG90TmV0T2JqZWN0SWQ6IG51bWJlciB8IG51bGwsIGFyZ3NKc29uOiBzdHJpbmcpOiB2b2lkIHtcbiAgc2VuZCgnQmVnaW5JbnZva2VEb3ROZXQnLCBjYWxsSWQgPyBjYWxsSWQudG9TdHJpbmcoKSA6IG51bGwsIGFzc2VtYmx5TmFtZSwgbWV0aG9kSWRlbnRpZmllciwgZG90TmV0T2JqZWN0SWQgfHwgMCwgYXJnc0pzb24pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2VuZEVuZEludm9rZUpTRnJvbURvdE5ldChhc3luY0hhbmRsZTogbnVtYmVyLCBzdWNjZWVkZWQ6IGJvb2xlYW4sIGFyZ3NKc29uOiBhbnkpOiB2b2lkIHtcbiAgc2VuZCgnRW5kSW52b2tlSlMnLCBhc3luY0hhbmRsZSwgc3VjY2VlZGVkLCBhcmdzSnNvbik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZW5kQnl0ZUFycmF5KGlkOiBudW1iZXIsIGRhdGE6IFVpbnQ4QXJyYXkpOiB2b2lkIHtcbiAgY29uc3QgZGF0YUJhc2U2NEVuY29kZWQgPSBiYXNlNjRFbmNvZGVCeXRlQXJyYXkoZGF0YSk7XG4gIHNlbmQoJ1JlY2VpdmVCeXRlQXJyYXlGcm9tSlMnLCBpZCwgZGF0YUJhc2U2NEVuY29kZWQpO1xufVxuXG5mdW5jdGlvbiBiYXNlNjRFbmNvZGVCeXRlQXJyYXkoZGF0YTogVWludDhBcnJheSkge1xuICAvLyBCYXNlNjQgZW5jb2RlIGEgKGxhcmdlKSBieXRlIGFycmF5XG4gIC8vIE5vdGUgYGJ0b2EoU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBkYXRhIGFzIHVua25vd24gYXMgbnVtYmVyW10pKTtgXG4gIC8vIGlzbid0IHN1ZmZpY2llbnQgYXMgdGhlIGBhcHBseWAgb3ZlciBhIGxhcmdlIGFycmF5IG92ZXJmbG93cyB0aGUgc3RhY2suXG4gIGNvbnN0IGNoYXJCeXRlcyA9IG5ldyBBcnJheShkYXRhLmxlbmd0aCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgIGNoYXJCeXRlc1tpXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoZGF0YVtpXSk7XG4gIH1cbiAgY29uc3QgZGF0YUJhc2U2NEVuY29kZWQgPSBidG9hKGNoYXJCeXRlcy5qb2luKCcnKSk7XG4gIHJldHVybiBkYXRhQmFzZTY0RW5jb2RlZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNlbmRMb2NhdGlvbkNoYW5nZWQodXJpOiBzdHJpbmcsIHN0YXRlOiBzdHJpbmcgfCB1bmRlZmluZWQsIGludGVyY2VwdGVkOiBib29sZWFuKTogUHJvbWlzZTx2b2lkPiB7XG4gIHNlbmQoJ09uTG9jYXRpb25DaGFuZ2VkJywgdXJpLCBzdGF0ZSwgaW50ZXJjZXB0ZWQpO1xuICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7IC8vIExpa2UgaW4gQmxhem9yIFNlcnZlciwgd2Ugb25seSBpc3N1ZSB0aGUgbm90aWZpY2F0aW9uIGhlcmUgLSB0aGVyZSdzIG5vIG5lZWQgdG8gd2FpdCBmb3IgYSByZXNwb25zZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2VuZExvY2F0aW9uQ2hhbmdpbmcoY2FsbElkOiBudW1iZXIsIHVyaTogc3RyaW5nLCBzdGF0ZTogc3RyaW5nIHwgdW5kZWZpbmVkLCBpbnRlcmNlcHRlZDogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xuICBzZW5kKCdPbkxvY2F0aW9uQ2hhbmdpbmcnLCBjYWxsSWQsIHVyaSwgc3RhdGUsIGludGVyY2VwdGVkKTtcbiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOyAvLyBMaWtlIGluIEJsYXpvciBTZXJ2ZXIsIHdlIG9ubHkgaXNzdWUgdGhlIG5vdGlmaWNhdGlvbiBoZXJlIC0gdGhlcmUncyBubyBuZWVkIHRvIHdhaXQgZm9yIGEgcmVzcG9uc2Vcbn1cblxuZnVuY3Rpb24gc2VuZChtZXNzYWdlVHlwZTogc3RyaW5nLCAuLi5hcmdzOiB1bmtub3duW10pIHtcbiAgY29uc3Qgc2VyaWFsaXplZE1lc3NhZ2UgPSB0cnlTZXJpYWxpemVNZXNzYWdlKG1lc3NhZ2VUeXBlLCBhcmdzKTtcbiAgaWYgKHNlcmlhbGl6ZWRNZXNzYWdlKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAod2luZG93LmV4dGVybmFsIGFzIGFueSkuc2VuZE1lc3NhZ2Uoc2VyaWFsaXplZE1lc3NhZ2UpO1xuICB9XG59XG4iLCIvLyBMaWNlbnNlZCB0byB0aGUgLk5FVCBGb3VuZGF0aW9uIHVuZGVyIG9uZSBvciBtb3JlIGFncmVlbWVudHMuXG4vLyBUaGUgLk5FVCBGb3VuZGF0aW9uIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG4vLyBUaGVzZSBJRHMgbmVlZCB0byBiZSBrZXB0IGluIHN5bmMgd2l0aCBSZW5kZXJlcklkLmNzXG5leHBvcnQgZW51bSBXZWJSZW5kZXJlcklkIHtcbiAgRGVmYXVsdCA9IDAsXG4gIFNlcnZlciA9IDEsXG4gIFdlYkFzc2VtYmx5ID0gMixcbiAgV2ViVmlldyA9IDMsXG59XG4iLCIvLyBMaWNlbnNlZCB0byB0aGUgLk5FVCBGb3VuZGF0aW9uIHVuZGVyIG9uZSBvciBtb3JlIGFncmVlbWVudHMuXG4vLyBUaGUgLk5FVCBGb3VuZGF0aW9uIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG4vLyBUaGVzZSB2YWx1ZXMgYXJlIGRlc2lnbmVkIHRvIG1hdGNoIHRoZSBBU1AuTkVUIExvZyBMZXZlbHMgc2luY2UgdGhhdCdzIHRoZSBwYXR0ZXJuIHdlJ3JlIGVtdWxhdGluZyBoZXJlLlxuLyoqIEluZGljYXRlcyB0aGUgc2V2ZXJpdHkgb2YgYSBsb2cgbWVzc2FnZS5cbiAqXG4gKiBMb2cgTGV2ZWxzIGFyZSBvcmRlcmVkIGluIGluY3JlYXNpbmcgc2V2ZXJpdHkuIFNvIGBEZWJ1Z2AgaXMgbW9yZSBzZXZlcmUgdGhhbiBgVHJhY2VgLCBldGMuXG4gKi9cbmV4cG9ydCBlbnVtIExvZ0xldmVsIHtcbiAgLyoqIExvZyBsZXZlbCBmb3IgdmVyeSBsb3cgc2V2ZXJpdHkgZGlhZ25vc3RpYyBtZXNzYWdlcy4gKi9cbiAgVHJhY2UgPSAwLFxuICAvKiogTG9nIGxldmVsIGZvciBsb3cgc2V2ZXJpdHkgZGlhZ25vc3RpYyBtZXNzYWdlcy4gKi9cbiAgRGVidWcgPSAxLFxuICAvKiogTG9nIGxldmVsIGZvciBpbmZvcm1hdGlvbmFsIGRpYWdub3N0aWMgbWVzc2FnZXMuICovXG4gIEluZm9ybWF0aW9uID0gMixcbiAgLyoqIExvZyBsZXZlbCBmb3IgZGlhZ25vc3RpYyBtZXNzYWdlcyB0aGF0IGluZGljYXRlIGEgbm9uLWZhdGFsIHByb2JsZW0uICovXG4gIFdhcm5pbmcgPSAzLFxuICAvKiogTG9nIGxldmVsIGZvciBkaWFnbm9zdGljIG1lc3NhZ2VzIHRoYXQgaW5kaWNhdGUgYSBmYWlsdXJlIGluIHRoZSBjdXJyZW50IG9wZXJhdGlvbi4gKi9cbiAgRXJyb3IgPSA0LFxuICAvKiogTG9nIGxldmVsIGZvciBkaWFnbm9zdGljIG1lc3NhZ2VzIHRoYXQgaW5kaWNhdGUgYSBmYWlsdXJlIHRoYXQgd2lsbCB0ZXJtaW5hdGUgdGhlIGVudGlyZSBhcHBsaWNhdGlvbi4gKi9cbiAgQ3JpdGljYWwgPSA1LFxuICAvKiogVGhlIGhpZ2hlc3QgcG9zc2libGUgbG9nIGxldmVsLiBVc2VkIHdoZW4gY29uZmlndXJpbmcgbG9nZ2luZyB0byBpbmRpY2F0ZSB0aGF0IG5vIGxvZyBtZXNzYWdlcyBzaG91bGQgYmUgZW1pdHRlZC4gKi9cbiAgTm9uZSA9IDYsXG59XG5cbi8qKiBBbiBhYnN0cmFjdGlvbiB0aGF0IHByb3ZpZGVzIGEgc2luayBmb3IgZGlhZ25vc3RpYyBtZXNzYWdlcy4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTG9nZ2VyIHtcbiAgLyoqIENhbGxlZCBieSB0aGUgZnJhbWV3b3JrIHRvIGVtaXQgYSBkaWFnbm9zdGljIG1lc3NhZ2UuXG4gICAqXG4gICAqIEBwYXJhbSB7TG9nTGV2ZWx9IGxvZ0xldmVsIFRoZSBzZXZlcml0eSBsZXZlbCBvZiB0aGUgbWVzc2FnZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgVGhlIG1lc3NhZ2UuXG4gICAqL1xuICBsb2cobG9nTGV2ZWw6IExvZ0xldmVsLCBtZXNzYWdlOiBzdHJpbmcgfCBFcnJvcik6IHZvaWQ7XG59XG4iLCIvLyBMaWNlbnNlZCB0byB0aGUgLk5FVCBGb3VuZGF0aW9uIHVuZGVyIG9uZSBvciBtb3JlIGFncmVlbWVudHMuXG4vLyBUaGUgLk5FVCBGb3VuZGF0aW9uIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG5pbXBvcnQgeyBzaG93RXJyb3JOb3RpZmljYXRpb24gfSBmcm9tICcuLi8uLi9Cb290RXJyb3JzJztcbmltcG9ydCB7IE91dE9mUHJvY2Vzc1JlbmRlckJhdGNoIH0gZnJvbSAnLi4vLi4vUmVuZGVyaW5nL1JlbmRlckJhdGNoL091dE9mUHJvY2Vzc1JlbmRlckJhdGNoJztcbmltcG9ydCB7IGF0dGFjaFJvb3RDb21wb25lbnRUb0VsZW1lbnQsIHJlbmRlckJhdGNoIH0gZnJvbSAnLi4vLi4vUmVuZGVyaW5nL1JlbmRlcmVyJztcbmltcG9ydCB7IHNldEFwcGxpY2F0aW9uSXNUZXJtaW5hdGVkLCB0cnlEZXNlcmlhbGl6ZU1lc3NhZ2UgfSBmcm9tICcuL1dlYlZpZXdJcGNDb21tb24nO1xuaW1wb3J0IHsgc2VuZFJlbmRlckNvbXBsZXRlZCB9IGZyb20gJy4vV2ViVmlld0lwY1NlbmRlcic7XG5pbXBvcnQgeyBpbnRlcm5hbEZ1bmN0aW9ucyBhcyBuYXZpZ2F0aW9uTWFuYWdlckZ1bmN0aW9ucyB9IGZyb20gJy4uLy4uL1NlcnZpY2VzL05hdmlnYXRpb25NYW5hZ2VyJztcbmltcG9ydCB7IGRpc3BhdGNoZXIgfSBmcm9tICcuLi8uLi9Cb290LldlYlZpZXcnO1xuaW1wb3J0IHsgV2ViUmVuZGVyZXJJZCB9IGZyb20gJy4uLy4uL1JlbmRlcmluZy9XZWJSZW5kZXJlcklkJztcblxuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0SXBjUmVjZWl2ZXIoKTogdm9pZCB7XG4gIGNvbnN0IG1lc3NhZ2VIYW5kbGVycyA9IHtcblxuICAgICdBdHRhY2hUb0RvY3VtZW50JzogKGNvbXBvbmVudElkOiBudW1iZXIsIGVsZW1lbnRTZWxlY3Rvcjogc3RyaW5nKSA9PiB7XG4gICAgICBhdHRhY2hSb290Q29tcG9uZW50VG9FbGVtZW50KGVsZW1lbnRTZWxlY3RvciwgY29tcG9uZW50SWQsIFdlYlJlbmRlcmVySWQuV2ViVmlldyk7XG4gICAgfSxcblxuICAgICdSZW5kZXJCYXRjaCc6IChiYXRjaElkOiBudW1iZXIsIGJhdGNoRGF0YUJhc2U2NDogc3RyaW5nKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBiYXRjaERhdGEgPSBiYXNlNjRUb0FycmF5QnVmZmVyKGJhdGNoRGF0YUJhc2U2NCk7XG4gICAgICAgIHJlbmRlckJhdGNoKFdlYlJlbmRlcmVySWQuV2ViVmlldywgbmV3IE91dE9mUHJvY2Vzc1JlbmRlckJhdGNoKGJhdGNoRGF0YSkpO1xuICAgICAgICBzZW5kUmVuZGVyQ29tcGxldGVkKGJhdGNoSWQsIG51bGwpO1xuICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgc2VuZFJlbmRlckNvbXBsZXRlZChiYXRjaElkLCAoZXggYXMgRXJyb3IpLnRvU3RyaW5nKCkpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAnTm90aWZ5VW5oYW5kbGVkRXhjZXB0aW9uJzogKG1lc3NhZ2U6IHN0cmluZywgc3RhY2tUcmFjZTogc3RyaW5nKSA9PiB7XG4gICAgICBzZXRBcHBsaWNhdGlvbklzVGVybWluYXRlZCgpO1xuICAgICAgY29uc29sZS5lcnJvcihgJHttZXNzYWdlfVxcbiR7c3RhY2tUcmFjZX1gKTtcbiAgICAgIHNob3dFcnJvck5vdGlmaWNhdGlvbigpO1xuICAgIH0sXG5cbiAgICAnQmVnaW5JbnZva2VKUyc6IGRpc3BhdGNoZXIuYmVnaW5JbnZva2VKU0Zyb21Eb3ROZXQuYmluZChkaXNwYXRjaGVyKSxcblxuICAgICdFbmRJbnZva2VEb3ROZXQnOiBkaXNwYXRjaGVyLmVuZEludm9rZURvdE5ldEZyb21KUy5iaW5kKGRpc3BhdGNoZXIpLFxuXG4gICAgJ1NlbmRCeXRlQXJyYXlUb0pTJzogcmVjZWl2ZUJhc2U2NEJ5dGVBcnJheSxcblxuICAgICdOYXZpZ2F0ZSc6IG5hdmlnYXRpb25NYW5hZ2VyRnVuY3Rpb25zLm5hdmlnYXRlVG8sXG5cbiAgICAnUmVmcmVzaCc6IG5hdmlnYXRpb25NYW5hZ2VyRnVuY3Rpb25zLnJlZnJlc2gsXG5cbiAgICAnU2V0SGFzTG9jYXRpb25DaGFuZ2luZ0xpc3RlbmVycyc6IChoYXNMaXN0ZW5lcnM6IGJvb2xlYW4pID0+IHtcbiAgICAgIG5hdmlnYXRpb25NYW5hZ2VyRnVuY3Rpb25zLnNldEhhc0xvY2F0aW9uQ2hhbmdpbmdMaXN0ZW5lcnMoV2ViUmVuZGVyZXJJZC5XZWJWaWV3LCBoYXNMaXN0ZW5lcnMpO1xuICAgIH0sXG5cbiAgICAnRW5kTG9jYXRpb25DaGFuZ2luZyc6IG5hdmlnYXRpb25NYW5hZ2VyRnVuY3Rpb25zLmVuZExvY2F0aW9uQ2hhbmdpbmcsXG4gIH07XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgKHdpbmRvdy5leHRlcm5hbCBhcyBhbnkpLnJlY2VpdmVNZXNzYWdlKChtZXNzYWdlOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBwYXJzZWRNZXNzYWdlID0gdHJ5RGVzZXJpYWxpemVNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIGlmIChwYXJzZWRNZXNzYWdlKSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2VIYW5kbGVycywgcGFyc2VkTWVzc2FnZS5tZXNzYWdlVHlwZSkpIHtcbiAgICAgICAgbWVzc2FnZUhhbmRsZXJzW3BhcnNlZE1lc3NhZ2UubWVzc2FnZVR5cGVdLmFwcGx5KG51bGwsIHBhcnNlZE1lc3NhZ2UuYXJncyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIElQQyBtZXNzYWdlIHR5cGUgJyR7cGFyc2VkTWVzc2FnZS5tZXNzYWdlVHlwZX0nYCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVjZWl2ZUJhc2U2NEJ5dGVBcnJheShpZDogbnVtYmVyLCBiYXNlNjREYXRhOiBzdHJpbmcpIHtcbiAgY29uc3QgZGF0YSA9IGJhc2U2NFRvQXJyYXlCdWZmZXIoYmFzZTY0RGF0YSk7XG4gIGRpc3BhdGNoZXIucmVjZWl2ZUJ5dGVBcnJheShpZCwgZGF0YSk7XG59XG5cbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMTc5NzM4MVxuLy8gVE9ETzogSWYgdGhlIGRhdGEgaXMgbGFyZ2UsIGNvbnNpZGVyIHN3aXRjaGluZyBvdmVyIHRvIHRoZSBuYXRpdmUgZGVjb2RlciBhcyBpbiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNTQxMjMyNzVcbi8vIEJ1dCBkb24ndCBmb3JjZSBpdCB0byBiZSBhc3luYyBhbGwgdGhlIHRpbWUuIFlpZWxkaW5nIGV4ZWN1dGlvbiBsZWFkcyB0byBwZXJjZXB0aWJsZSBsYWcuXG5mdW5jdGlvbiBiYXNlNjRUb0FycmF5QnVmZmVyKGJhc2U2NDogc3RyaW5nKTogVWludDhBcnJheSB7XG4gIGNvbnN0IGJpbmFyeVN0cmluZyA9IGF0b2IoYmFzZTY0KTtcbiAgY29uc3QgbGVuZ3RoID0gYmluYXJ5U3RyaW5nLmxlbmd0aDtcbiAgY29uc3QgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHJlc3VsdFtpXSA9IGJpbmFyeVN0cmluZy5jaGFyQ29kZUF0KGkpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG4iLCIvLyBMaWNlbnNlZCB0byB0aGUgLk5FVCBGb3VuZGF0aW9uIHVuZGVyIG9uZSBvciBtb3JlIGFncmVlbWVudHMuXG4vLyBUaGUgLk5FVCBGb3VuZGF0aW9uIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG5pbXBvcnQgeyBCbGF6b3IsIElCbGF6b3IgfSBmcm9tICcuLi9HbG9iYWxFeHBvcnRzJztcbmltcG9ydCB7IEFmdGVyQmxhem9yU2VydmVyU3RhcnRlZENhbGxiYWNrLCBCZWZvcmVCbGF6b3JTZXJ2ZXJTdGFydGVkQ2FsbGJhY2ssIENpcmN1aXRTdGFydE9wdGlvbnMsIFNlcnZlckluaXRpYWxpemVycyB9IGZyb20gJy4uL1BsYXRmb3JtL0NpcmN1aXRzL0NpcmN1aXRTdGFydE9wdGlvbnMnO1xuaW1wb3J0IHsgTG9nTGV2ZWwsIExvZ2dlciB9IGZyb20gJy4uL1BsYXRmb3JtL0xvZ2dpbmcvTG9nZ2VyJztcbmltcG9ydCB7IEFmdGVyQmxhem9yV2ViQXNzZW1ibHlTdGFydGVkQ2FsbGJhY2ssIEJlZm9yZUJsYXpvcldlYkFzc2VtYmx5U3RhcnRlZENhbGxiYWNrLCBXZWJBc3NlbWJseUluaXRpYWxpemVycywgV2ViQXNzZW1ibHlTdGFydE9wdGlvbnMgfSBmcm9tICcuLi9QbGF0Zm9ybS9XZWJBc3NlbWJseVN0YXJ0T3B0aW9ucyc7XG5pbXBvcnQgeyBXZWJTdGFydE9wdGlvbnMgfSBmcm9tICcuLi9QbGF0Zm9ybS9XZWJTdGFydE9wdGlvbnMnO1xuaW1wb3J0IHsgV2ViUmVuZGVyZXJJZCB9IGZyb20gJy4uL1JlbmRlcmluZy9XZWJSZW5kZXJlcklkJztcbmltcG9ydCB7IGdldFJlbmRlcmVyQXR0YWNoZWRQcm9taXNlIH0gZnJvbSAnLi4vUmVuZGVyaW5nL1dlYlJlbmRlcmVySW50ZXJvcE1ldGhvZHMnO1xuXG50eXBlIEJlZm9yZUJsYXpvclN0YXJ0ZWRDYWxsYmFjayA9ICguLi5hcmdzOiB1bmtub3duW10pID0+IFByb21pc2U8dm9pZD47XG5leHBvcnQgdHlwZSBBZnRlckJsYXpvclN0YXJ0ZWRDYWxsYmFjayA9IChibGF6b3I6IHR5cGVvZiBCbGF6b3IpID0+IFByb21pc2U8dm9pZD47XG50eXBlIEJlZm9yZUJsYXpvcldlYlN0YXJ0ZWRDYWxsYmFjayA9IChvcHRpb25zOiBXZWJTdGFydE9wdGlvbnMpID0+IFByb21pc2U8dm9pZD47XG50eXBlIEFmdGVyQmxhem9yV2ViU3RhcnRlZENhbGxiYWNrID0gKGJsYXpvcjogSUJsYXpvcikgPT4gUHJvbWlzZTx2b2lkPjtcbmV4cG9ydCB0eXBlIEJsYXpvckluaXRpYWxpemVyID0ge1xuICBiZWZvcmVTdGFydDogQmVmb3JlQmxhem9yU3RhcnRlZENhbGxiYWNrLFxuICBhZnRlclN0YXJ0ZWQ6IEFmdGVyQmxhem9yU3RhcnRlZENhbGxiYWNrLFxuICBiZWZvcmVXZWJTdGFydDogQmVmb3JlQmxhem9yV2ViU3RhcnRlZENhbGxiYWNrLFxuICBhZnRlcldlYlN0YXJ0ZWQ6IEFmdGVyQmxhem9yV2ViU3RhcnRlZENhbGxiYWNrLFxuICBiZWZvcmVXZWJBc3NlbWJseVN0YXJ0OiBCZWZvcmVCbGF6b3JXZWJBc3NlbWJseVN0YXJ0ZWRDYWxsYmFjayxcbiAgYWZ0ZXJXZWJBc3NlbWJseVN0YXJ0ZWQ6IEFmdGVyQmxhem9yV2ViQXNzZW1ibHlTdGFydGVkQ2FsbGJhY2ssXG4gIGJlZm9yZVNlcnZlclN0YXJ0OiBCZWZvcmVCbGF6b3JTZXJ2ZXJTdGFydGVkQ2FsbGJhY2ssXG4gIGFmdGVyU2VydmVyU3RhcnRlZDogQWZ0ZXJCbGF6b3JTZXJ2ZXJTdGFydGVkQ2FsbGJhY2ssXG59O1xuXG5leHBvcnQgdHlwZSBKU0Fzc2V0ID0ge1xuICAgIG1vZHVsZUV4cG9ydHM/OiBhbnkgfCBQcm9taXNlPGFueT4sXG4gICAgbmFtZT86IHN0cmluZzsgLy8gYWN0dWFsbHkgVVJMXG59XG5cbmV4cG9ydCBjbGFzcyBKU0luaXRpYWxpemVyIHtcbiAgcHJpdmF0ZSBhZnRlclN0YXJ0ZWRDYWxsYmFja3M6IEFmdGVyQmxhem9yU3RhcnRlZENhbGxiYWNrW10gPSBbXTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHNpbmdsZVJ1bnRpbWUgPSB0cnVlLFxuICAgIHByaXZhdGUgbG9nZ2VyPzogTG9nZ2VyLFxuICAgIGFmdGVyc3RhcnRlZENhbGxiYWNrcz86IEFmdGVyQmxhem9yU3RhcnRlZENhbGxiYWNrW10sXG4gICAgcHJpdmF0ZSB3ZWJSZW5kZXJlcklkOiBudW1iZXIgPSAwXG4gICkge1xuICAgIGlmIChhZnRlcnN0YXJ0ZWRDYWxsYmFja3MpIHtcbiAgICAgIHRoaXMuYWZ0ZXJTdGFydGVkQ2FsbGJhY2tzLnB1c2goLi4uYWZ0ZXJzdGFydGVkQ2FsbGJhY2tzKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBpbXBvcnRJbml0aWFsaXplcnNBc3luYyhpbml0aWFsaXplckZpbGVzOiBKU0Fzc2V0W10sIGluaXRpYWxpemVyQXJndW1lbnRzOiB1bmtub3duW10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBUaGlzIGNvZGUgaXMgbm90IGNhbGxlZCBvbiBXQVNNLCBiZWNhdXNlIGxpYnJhcnkgaW50aWFsaXplcnMgYXJlIGltcG9ydGVkIGJ5IHJ1bnRpbWUuXG5cbiAgICBhd2FpdCBQcm9taXNlLmFsbChpbml0aWFsaXplckZpbGVzLm1hcChmID0+IGltcG9ydEFuZEludm9rZUluaXRpYWxpemVyKHRoaXMsIGYpKSk7XG5cbiAgICBmdW5jdGlvbiBhZGp1c3RQYXRoKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAvLyBVc2UgVVJMIGNvbnN0cnVjdG9yIHRvIHByb3Blcmx5IHJlc29sdmUgcmVsYXRpdmUgcGF0aHMsIGF2b2lkaW5nIGlzc3VlcyB3aXRoIHF1ZXJ5IHBhcmFtZXRlcnNcbiAgICAgIC8vIFRoaXMgaXMgdGhlIHNhbWUgbWVjaGFuaXNtIGFzIGZvciBpbXBvcnQgZG90bmV0LmpzIGluIE1vbm9QbGF0Zm9ybS50c1xuICAgICAgcmV0dXJuIG5ldyBVUkwocGF0aCwgZG9jdW1lbnQuYmFzZVVSSSkudG9TdHJpbmcoKTtcbiAgICB9XG5cbiAgICBhc3luYyBmdW5jdGlvbiBpbXBvcnRBbmRJbnZva2VJbml0aWFsaXplcihqc0luaXRpYWxpemVyOiBKU0luaXRpYWxpemVyLCBhc3NldDogSlNBc3NldCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgbGV0IGFkanVzdGVkUGF0aDtcbiAgICAgIGlmICghYXNzZXQubW9kdWxlRXhwb3J0cykge1xuICAgICAgICBhZGp1c3RlZFBhdGggPSBhZGp1c3RQYXRoKGFzc2V0Lm5hbWUhKTtcbiAgICAgICAgYXNzZXQubW9kdWxlRXhwb3J0cyA9IGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrSWdub3JlOiB0cnVlICovIGFkanVzdGVkUGF0aCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGluaXRpYWxpemVyID0gYXNzZXQubW9kdWxlRXhwb3J0cyBhcyBQYXJ0aWFsPEJsYXpvckluaXRpYWxpemVyPjtcbiAgICAgIGlmIChpbml0aWFsaXplciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFqc0luaXRpYWxpemVyLnNpbmdsZVJ1bnRpbWUpIHtcbiAgICAgICAgcmV0dXJuIHJ1bk11bHRpUnVudGltZUluaXRpYWxpemVycyhqc0luaXRpYWxpemVyLCBpbml0aWFsaXplciwgaW5pdGlhbGl6ZXJBcmd1bWVudHMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgeyBiZWZvcmVTdGFydCwgYWZ0ZXJTdGFydGVkLCBiZWZvcmVXZWJBc3NlbWJseVN0YXJ0LCBhZnRlcldlYkFzc2VtYmx5U3RhcnRlZCwgYmVmb3JlU2VydmVyU3RhcnQsIGFmdGVyU2VydmVyU3RhcnRlZCB9ID0gaW5pdGlhbGl6ZXI7XG4gICAgICAgIGxldCBmaW5hbEJlZm9yZVN0YXJ0ID0gYmVmb3JlU3RhcnQ7XG4gICAgICAgIGlmIChqc0luaXRpYWxpemVyLndlYlJlbmRlcmVySWQgPT09IFdlYlJlbmRlcmVySWQuU2VydmVyICYmIGJlZm9yZVNlcnZlclN0YXJ0KSB7XG4gICAgICAgICAgZmluYWxCZWZvcmVTdGFydCA9IGJlZm9yZVNlcnZlclN0YXJ0IGFzIHVua25vd24gYXMgQmVmb3JlQmxhem9yU3RhcnRlZENhbGxiYWNrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChqc0luaXRpYWxpemVyLndlYlJlbmRlcmVySWQgPT09IFdlYlJlbmRlcmVySWQuV2ViQXNzZW1ibHkgJiYgYmVmb3JlV2ViQXNzZW1ibHlTdGFydCkge1xuICAgICAgICAgIGZpbmFsQmVmb3JlU3RhcnQgPSBiZWZvcmVXZWJBc3NlbWJseVN0YXJ0IGFzIHVua25vd24gYXMgQmVmb3JlQmxhem9yU3RhcnRlZENhbGxiYWNrO1xuICAgICAgICB9XG4gICAgICAgIGxldCBmaW5hbEFmdGVyU3RhcnRlZCA9IGFmdGVyU3RhcnRlZDtcbiAgICAgICAgaWYgKGpzSW5pdGlhbGl6ZXIud2ViUmVuZGVyZXJJZCA9PT0gV2ViUmVuZGVyZXJJZC5TZXJ2ZXIgJiYgYWZ0ZXJTZXJ2ZXJTdGFydGVkKSB7XG4gICAgICAgICAgZmluYWxBZnRlclN0YXJ0ZWQgPSBhZnRlclNlcnZlclN0YXJ0ZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGpzSW5pdGlhbGl6ZXIud2ViUmVuZGVyZXJJZCA9PT0gV2ViUmVuZGVyZXJJZC5XZWJBc3NlbWJseSAmJiBhZnRlcldlYkFzc2VtYmx5U3RhcnRlZCkge1xuICAgICAgICAgIGZpbmFsQWZ0ZXJTdGFydGVkID0gYWZ0ZXJXZWJBc3NlbWJseVN0YXJ0ZWQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcnVuQ2xhc3NpY0luaXRpYWxpemVycyhqc0luaXRpYWxpemVyLCBmaW5hbEJlZm9yZVN0YXJ0LCBmaW5hbEFmdGVyU3RhcnRlZCwgaW5pdGlhbGl6ZXJBcmd1bWVudHMpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBydW5NdWx0aVJ1bnRpbWVJbml0aWFsaXplcnMoXG4gICAgICAgIGpzSW5pdGlhbGl6ZXI6IEpTSW5pdGlhbGl6ZXIsXG4gICAgICAgIGluaXRpYWxpemVyTW9kdWxlOiBQYXJ0aWFsPEJsYXpvckluaXRpYWxpemVyPiwgaW5pdGlhbGl6ZXJBcmd1bWVudHM6IHVua25vd25bXSk6IHZvaWQgfCBQcm9taXNlTGlrZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSBpbml0aWFsaXplckFyZ3VtZW50c1swXSBhcyBXZWJTdGFydE9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHsgYmVmb3JlU3RhcnQsIGFmdGVyU3RhcnRlZCwgYmVmb3JlV2ViU3RhcnQsIGFmdGVyV2ViU3RhcnRlZCwgYmVmb3JlV2ViQXNzZW1ibHlTdGFydCwgYWZ0ZXJXZWJBc3NlbWJseVN0YXJ0ZWQsIGJlZm9yZVNlcnZlclN0YXJ0LCBhZnRlclNlcnZlclN0YXJ0ZWQgfSA9IGluaXRpYWxpemVyTW9kdWxlO1xuICAgICAgICBjb25zdCBydW50aW1lU3BlY2lmaWNFeHBvcnRzID0gISEoYmVmb3JlV2ViU3RhcnQgfHwgYWZ0ZXJXZWJTdGFydGVkIHx8IGJlZm9yZVdlYkFzc2VtYmx5U3RhcnQgfHwgYWZ0ZXJXZWJBc3NlbWJseVN0YXJ0ZWQgfHwgYmVmb3JlU2VydmVyU3RhcnQgfHwgYWZ0ZXJTZXJ2ZXJTdGFydGVkKTtcbiAgICAgICAgY29uc3QgaGFzT25seUNsYXNzaWNJbml0aWFsaXplcnMgPSAhISghcnVudGltZVNwZWNpZmljRXhwb3J0cyAmJiAoYmVmb3JlU3RhcnQgfHwgYWZ0ZXJTdGFydGVkKSk7XG4gICAgICAgIGNvbnN0IHJ1bkxlZ2FjeUluaXRpYWxpemVycyA9IGhhc09ubHlDbGFzc2ljSW5pdGlhbGl6ZXJzICYmIG9wdGlvbnMuZW5hYmxlQ2xhc3NpY0luaXRpYWxpemVycztcbiAgICAgICAgaWYgKGhhc09ubHlDbGFzc2ljSW5pdGlhbGl6ZXJzICYmICFvcHRpb25zLmVuYWJsZUNsYXNzaWNJbml0aWFsaXplcnMpIHtcbiAgICAgICAgICAvLyBsb2cgd2FybmluZyBcImNsYXNzaWMgaW5pdGlhbGl6ZXJzIHdpbGwgYmUgaWdub3JlZCB3aGVuIG11bHRpcGxlIHJ1bnRpbWVzIGFyZSB1c2VkXCIuXG4gICAgICAgICAgLy8gU2tpcHBpbmcgXCJhZGp1c3RlZFBhdGhcIiBpbml0aWFsaXplci5cbiAgICAgICAgICBqc0luaXRpYWxpemVyLmxvZ2dlcj8ubG9nKFxuICAgICAgICAgICAgTG9nTGV2ZWwuV2FybmluZyxcbiAgICAgICAgICAgIGBJbml0aWFsaXplciAnJHthZGp1c3RlZFBhdGh9JyB3aWxsIGJlIGlnbm9yZWQgYmVjYXVzZSBtdWx0aXBsZSBydW50aW1lcyBhcmUgYXZhaWxhYmxlLiBVc2UgJ2JlZm9yZShXZWJ8V2ViQXNzZW1ibHl8U2VydmVyKVN0YXJ0JyBhbmQgJ2FmdGVyKFdlYnxXZWJBc3NlbWJseXxTZXJ2ZXIpU3RhcnRlZCcgaW5zdGVhZC5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChydW5MZWdhY3lJbml0aWFsaXplcnMpIHtcbiAgICAgICAgICByZXR1cm4gcnVuQ2xhc3NpY0luaXRpYWxpemVycyhqc0luaXRpYWxpemVyLCBiZWZvcmVTdGFydCwgYWZ0ZXJTdGFydGVkLCBpbml0aWFsaXplckFyZ3VtZW50cyk7XG4gICAgICAgIH1cblxuICAgICAgICBlbnN1cmVJbml0aWFsaXplcnMob3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKGJlZm9yZVdlYkFzc2VtYmx5U3RhcnQpIHtcbiAgICAgICAgICBvcHRpb25zLndlYkFzc2VtYmx5LmluaXRpYWxpemVycy5iZWZvcmVTdGFydC5wdXNoKGJlZm9yZVdlYkFzc2VtYmx5U3RhcnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFmdGVyV2ViQXNzZW1ibHlTdGFydGVkKSB7XG4gICAgICAgICAgb3B0aW9ucy53ZWJBc3NlbWJseS5pbml0aWFsaXplcnMuYWZ0ZXJTdGFydGVkLnB1c2goYWZ0ZXJXZWJBc3NlbWJseVN0YXJ0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGJlZm9yZVNlcnZlclN0YXJ0KSB7XG4gICAgICAgICAgb3B0aW9ucy5jaXJjdWl0LmluaXRpYWxpemVycy5iZWZvcmVTdGFydC5wdXNoKGJlZm9yZVNlcnZlclN0YXJ0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhZnRlclNlcnZlclN0YXJ0ZWQpIHtcbiAgICAgICAgICBvcHRpb25zLmNpcmN1aXQuaW5pdGlhbGl6ZXJzLmFmdGVyU3RhcnRlZC5wdXNoKGFmdGVyU2VydmVyU3RhcnRlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYWZ0ZXJXZWJTdGFydGVkKSB7XG4gICAgICAgICAganNJbml0aWFsaXplci5hZnRlclN0YXJ0ZWRDYWxsYmFja3MucHVzaChhZnRlcldlYlN0YXJ0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGJlZm9yZVdlYlN0YXJ0KSB7XG4gICAgICAgICAgcmV0dXJuIGJlZm9yZVdlYlN0YXJ0KG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHJ1bkNsYXNzaWNJbml0aWFsaXplcnMoanNJbml0aWFsaXplcjogSlNJbml0aWFsaXplciwgYmVmb3JlU3RhcnQ6IEJlZm9yZUJsYXpvclN0YXJ0ZWRDYWxsYmFjayB8IHVuZGVmaW5lZCwgYWZ0ZXJTdGFydGVkOiBBZnRlckJsYXpvclN0YXJ0ZWRDYWxsYmFjayB8IHVuZGVmaW5lZCwgaW5pdGlhbGl6ZXJBcmd1bWVudHM6IHVua25vd25bXSk6IHZvaWQgfCBQcm9taXNlTGlrZTx2b2lkPiB7XG4gICAgICAgIGlmIChhZnRlclN0YXJ0ZWQpIHtcbiAgICAgICAgICBqc0luaXRpYWxpemVyLmFmdGVyU3RhcnRlZENhbGxiYWNrcy5wdXNoKGFmdGVyU3RhcnRlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYmVmb3JlU3RhcnQpIHtcbiAgICAgICAgICByZXR1cm4gYmVmb3JlU3RhcnQoLi4uaW5pdGlhbGl6ZXJBcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGVuc3VyZUluaXRpYWxpemVycyhvcHRpb25zOiBQYXJ0aWFsPFdlYlN0YXJ0T3B0aW9ucz4pOlxuICAgICAgICBhc3NlcnRzIG9wdGlvbnMgaXMgT3B0aW9uc1dpdGhJbml0aWFsaXplcnMge1xuICAgICAgICBpZiAoIW9wdGlvbnNbJ3dlYkFzc2VtYmx5J10pIHtcbiAgICAgICAgICBvcHRpb25zWyd3ZWJBc3NlbWJseSddID0gKHsgaW5pdGlhbGl6ZXJzOiB7IGJlZm9yZVN0YXJ0OiBbXSwgYWZ0ZXJTdGFydGVkOiBbXSB9IH0pIGFzIHVua25vd24gYXMgV2ViQXNzZW1ibHlTdGFydE9wdGlvbnM7XG4gICAgICAgIH0gZWxzZSBpZiAoIW9wdGlvbnNbJ3dlYkFzc2VtYmx5J10uaW5pdGlhbGl6ZXJzKSB7XG4gICAgICAgICAgb3B0aW9uc1snd2ViQXNzZW1ibHknXS5pbml0aWFsaXplcnMgPSB7IGJlZm9yZVN0YXJ0OiBbXSwgYWZ0ZXJTdGFydGVkOiBbXSB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFvcHRpb25zWydjaXJjdWl0J10pIHtcbiAgICAgICAgICBvcHRpb25zWydjaXJjdWl0J10gPSAoeyBpbml0aWFsaXplcnM6IHsgYmVmb3JlU3RhcnQ6IFtdLCBhZnRlclN0YXJ0ZWQ6IFtdIH0gfSkgYXMgdW5rbm93biBhcyBDaXJjdWl0U3RhcnRPcHRpb25zO1xuICAgICAgICB9IGVsc2UgaWYgKCFvcHRpb25zWydjaXJjdWl0J10uaW5pdGlhbGl6ZXJzKSB7XG4gICAgICAgICAgb3B0aW9uc1snY2lyY3VpdCddLmluaXRpYWxpemVycyA9IHsgYmVmb3JlU3RhcnQ6IFtdLCBhZnRlclN0YXJ0ZWQ6IFtdIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBpbnZva2VBZnRlclN0YXJ0ZWRDYWxsYmFja3MoYmxhem9yOiB0eXBlb2YgQmxhem9yKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgYXR0YWNoZWQgPSBnZXRSZW5kZXJlckF0dGFjaGVkUHJvbWlzZSh0aGlzLndlYlJlbmRlcmVySWQpO1xuICAgIGlmIChhdHRhY2hlZCkge1xuICAgICAgYXdhaXQgYXR0YWNoZWQ7XG4gICAgfVxuICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuYWZ0ZXJTdGFydGVkQ2FsbGJhY2tzLm1hcChjYWxsYmFjayA9PiBjYWxsYmFjayhibGF6b3IpKSk7XG4gIH1cbn1cblxudHlwZSBPcHRpb25zV2l0aEluaXRpYWxpemVycyA9IHtcbiAgd2ViQXNzZW1ibHk6IFdlYkFzc2VtYmx5U3RhcnRPcHRpb25zICYgeyBpbml0aWFsaXplcnM6IFdlYkFzc2VtYmx5SW5pdGlhbGl6ZXJzIH0sXG4gIGNpcmN1aXQ6IENpcmN1aXRTdGFydE9wdGlvbnMgJiB7IGluaXRpYWxpemVyczogU2VydmVySW5pdGlhbGl6ZXJzIH1cbn1cbiIsIi8vIExpY2Vuc2VkIHRvIHRoZSAuTkVUIEZvdW5kYXRpb24gdW5kZXIgb25lIG9yIG1vcmUgYWdyZWVtZW50cy5cbi8vIFRoZSAuTkVUIEZvdW5kYXRpb24gbGljZW5zZXMgdGhpcyBmaWxlIHRvIHlvdSB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cbmltcG9ydCB7IERvdE5ldCB9IGZyb20gJ0BtaWNyb3NvZnQvZG90bmV0LWpzLWludGVyb3AnO1xuaW1wb3J0IHsgQmxhem9yIH0gZnJvbSAnLi9HbG9iYWxFeHBvcnRzJztcbmltcG9ydCB7IHNob3VsZEF1dG9TdGFydCB9IGZyb20gJy4vQm9vdENvbW1vbic7XG5pbXBvcnQgeyBpbnRlcm5hbEZ1bmN0aW9ucyBhcyBuYXZpZ2F0aW9uTWFuYWdlckZ1bmN0aW9ucyB9IGZyb20gJy4vU2VydmljZXMvTmF2aWdhdGlvbk1hbmFnZXInO1xuaW1wb3J0IHsgc3RhcnRJcGNSZWNlaXZlciB9IGZyb20gJy4vUGxhdGZvcm0vV2ViVmlldy9XZWJWaWV3SXBjUmVjZWl2ZXInO1xuaW1wb3J0IHsgc2VuZEF0dGFjaFBhZ2UsIHNlbmRCZWdpbkludm9rZURvdE5ldEZyb21KUywgc2VuZEVuZEludm9rZUpTRnJvbURvdE5ldCwgc2VuZEJ5dGVBcnJheSwgc2VuZExvY2F0aW9uQ2hhbmdlZCwgc2VuZExvY2F0aW9uQ2hhbmdpbmcgfSBmcm9tICcuL1BsYXRmb3JtL1dlYlZpZXcvV2ViVmlld0lwY1NlbmRlcic7XG5pbXBvcnQgeyBmZXRjaEFuZEludm9rZUluaXRpYWxpemVycyB9IGZyb20gJy4vSlNJbml0aWFsaXplcnMvSlNJbml0aWFsaXplcnMuV2ViVmlldyc7XG5pbXBvcnQgeyByZWNlaXZlRG90TmV0RGF0YVN0cmVhbSB9IGZyb20gJy4vU3RyZWFtaW5nSW50ZXJvcCc7XG5pbXBvcnQgeyBXZWJSZW5kZXJlcklkIH0gZnJvbSAnLi9SZW5kZXJpbmcvV2ViUmVuZGVyZXJJZCc7XG5cbmxldCBzdGFydGVkID0gZmFsc2U7XG5cbmV4cG9ydCBsZXQgZGlzcGF0Y2hlcjogRG90TmV0LklDYWxsRGlzcGF0Y2hlcjtcblxuYXN5bmMgZnVuY3Rpb24gYm9vdCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgaWYgKHN0YXJ0ZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0JsYXpvciBoYXMgYWxyZWFkeSBzdGFydGVkLicpO1xuICB9XG4gIHN0YXJ0ZWQgPSB0cnVlO1xuXG4gIGRpc3BhdGNoZXIgPSBEb3ROZXQuYXR0YWNoRGlzcGF0Y2hlcih7XG4gICAgYmVnaW5JbnZva2VEb3ROZXRGcm9tSlM6IHNlbmRCZWdpbkludm9rZURvdE5ldEZyb21KUyxcbiAgICBlbmRJbnZva2VKU0Zyb21Eb3ROZXQ6IHNlbmRFbmRJbnZva2VKU0Zyb21Eb3ROZXQsXG4gICAgc2VuZEJ5dGVBcnJheTogc2VuZEJ5dGVBcnJheSxcbiAgfSk7XG5cbiAgY29uc3QganNJbml0aWFsaXplciA9IGF3YWl0IGZldGNoQW5kSW52b2tlSW5pdGlhbGl6ZXJzKCk7XG5cbiAgc3RhcnRJcGNSZWNlaXZlcigpO1xuXG4gIEJsYXpvci5faW50ZXJuYWwucmVjZWl2ZVdlYlZpZXdEb3ROZXREYXRhU3RyZWFtID0gcmVjZWl2ZVdlYlZpZXdEb3ROZXREYXRhU3RyZWFtO1xuXG4gIG5hdmlnYXRpb25NYW5hZ2VyRnVuY3Rpb25zLmVuYWJsZU5hdmlnYXRpb25JbnRlcmNlcHRpb24oV2ViUmVuZGVyZXJJZC5XZWJWaWV3KTtcbiAgbmF2aWdhdGlvbk1hbmFnZXJGdW5jdGlvbnMubGlzdGVuRm9yTmF2aWdhdGlvbkV2ZW50cyhXZWJSZW5kZXJlcklkLldlYlZpZXcsIHNlbmRMb2NhdGlvbkNoYW5nZWQsIHNlbmRMb2NhdGlvbkNoYW5naW5nKTtcblxuICBzZW5kQXR0YWNoUGFnZShuYXZpZ2F0aW9uTWFuYWdlckZ1bmN0aW9ucy5nZXRCYXNlVVJJKCksIG5hdmlnYXRpb25NYW5hZ2VyRnVuY3Rpb25zLmdldExvY2F0aW9uSHJlZigpKTtcbiAgYXdhaXQganNJbml0aWFsaXplci5pbnZva2VBZnRlclN0YXJ0ZWRDYWxsYmFja3MoQmxhem9yKTtcbn1cblxuZnVuY3Rpb24gcmVjZWl2ZVdlYlZpZXdEb3ROZXREYXRhU3RyZWFtKHN0cmVhbUlkOiBudW1iZXIsIGRhdGE6IGFueSwgYnl0ZXNSZWFkOiBudW1iZXIsIGVycm9yTWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gIHJlY2VpdmVEb3ROZXREYXRhU3RyZWFtKGRpc3BhdGNoZXIsIHN0cmVhbUlkLCBkYXRhLCBieXRlc1JlYWQsIGVycm9yTWVzc2FnZSk7XG59XG5cbkJsYXpvci5zdGFydCA9IGJvb3Q7XG53aW5kb3dbJ0RvdE5ldCddID0gRG90TmV0O1xuXG5pZiAoc2hvdWxkQXV0b1N0YXJ0KCkpIHtcbiAgYm9vdCgpO1xufVxuIiwiLy8gTGljZW5zZWQgdG8gdGhlIC5ORVQgRm91bmRhdGlvbiB1bmRlciBvbmUgb3IgbW9yZSBhZ3JlZW1lbnRzLlxuLy8gVGhlIC5ORVQgRm91bmRhdGlvbiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxuaW1wb3J0IHsgSlNBc3NldCwgSlNJbml0aWFsaXplciB9IGZyb20gJy4vSlNJbml0aWFsaXplcnMnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hBbmRJbnZva2VJbml0aWFsaXplcnMoKSA6IFByb21pc2U8SlNJbml0aWFsaXplcj4ge1xuICBjb25zdCBqc0luaXRpYWxpemVyc1Jlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ19mcmFtZXdvcmsvYmxhem9yLm1vZHVsZXMuanNvbicsIHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgY2FjaGU6ICduby1jYWNoZScsXG4gIH0pO1xuXG4gIGNvbnN0IGluaXRpYWxpemVycyA9IChhd2FpdCBqc0luaXRpYWxpemVyc1Jlc3BvbnNlLmpzb24oKSkubWFwKG5hbWUgPT4gKHtcbiAgICBuYW1lLFxuICB9KSkgYXMgSlNBc3NldFtdO1xuICBjb25zdCBqc0luaXRpYWxpemVyID0gbmV3IEpTSW5pdGlhbGl6ZXIoKTtcbiAgYXdhaXQganNJbml0aWFsaXplci5pbXBvcnRJbml0aWFsaXplcnNBc3luYyhpbml0aWFsaXplcnMsIFtdKTtcbiAgcmV0dXJuIGpzSW5pdGlhbGl6ZXI7XG59XG4iLCIvLyBMaWNlbnNlZCB0byB0aGUgLk5FVCBGb3VuZGF0aW9uIHVuZGVyIG9uZSBvciBtb3JlIGFncmVlbWVudHMuXG4vLyBUaGUgLk5FVCBGb3VuZGF0aW9uIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG4vLyBUZWxscyB5b3UgaWYgdGhlIHNjcmlwdCB3YXMgYWRkZWQgd2l0aG91dCA8c2NyaXB0IHNyYz1cIi4uLlwiIGF1dG9zdGFydD1cImZhbHNlXCI+PC9zY3JpcHQ+XG5leHBvcnQgZnVuY3Rpb24gc2hvdWxkQXV0b1N0YXJ0KCk6IGJvb2xlYW4ge1xuICByZXR1cm4gISEoZG9jdW1lbnQgJiZcbiAgICBkb2N1bWVudC5jdXJyZW50U2NyaXB0ICYmXG4gICAgZG9jdW1lbnQuY3VycmVudFNjcmlwdC5nZXRBdHRyaWJ1dGUoJ2F1dG9zdGFydCcpICE9PSAnZmFsc2UnKTtcbn1cbiJdLCJuYW1lcyI6WyJEb3ROZXQiLCJFZGl0VHlwZSIsIkZyYW1lVHlwZSIsImpzb25SZXZpdmVycyIsImpzT2JqZWN0SWRLZXkiLCJkb3ROZXRPYmplY3RSZWZLZXkiLCJieXRlQXJyYXlSZWZLZXkiLCJkb3ROZXRTdHJlYW1SZWZLZXkiLCJqc1N0cmVhbVJlZmVyZW5jZUxlbmd0aEtleSIsImRlZmF1bHRDYWxsRGlzcGF0Y2hlciIsImN1cnJlbnRDYWxsRGlzcGF0Y2hlciIsIkpTQ2FsbFR5cGUiLCJKU09iamVjdCIsImNvbnN0cnVjdG9yIiwiX2pzT2JqZWN0IiwidGhpcyIsIl9jYWNoZWRIYW5kbGVycyIsIk1hcCIsInJlc29sdmVJbnZvY2F0aW9uSGFuZGxlciIsImlkZW50aWZpZXIiLCJjYWxsVHlwZSIsIl9hIiwiY2FjaGVkRnVuY3Rpb24iLCJnZXQiLCJwYXJlbnQiLCJtZW1iZXJOYW1lIiwiZmluZE9iamVjdE1lbWJlciIsImZ1bmMiLCJGdW5jdGlvbkNhbGwiLCJGdW5jdGlvbiIsImJpbmQiLCJFcnJvciIsIkNvbnN0cnVjdG9yQ2FsbCIsImN0b3IiLCJib3VuZCIsImFyZ3MiLCJHZXRWYWx1ZSIsIm9iaiIsInByb3BOYW1lIiwidW5kZWZpbmVkIiwiZGVzY3JpcHRvciIsIk9iamVjdCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImhhc093blByb3BlcnR5IiwiZ2V0UHJvdG90eXBlT2YiLCJpc1JlYWRhYmxlUHJvcGVydHkiLCJTZXRWYWx1ZSIsImlzRXh0ZW5zaWJsZSIsIndyaXRhYmxlIiwic2V0IiwiaXNXcml0YWJsZVByb3BlcnR5Iiwid3JhcEpTQ2FsbEFzRnVuY3Rpb24iLCJhZGRIYW5kbGVyVG9DYWNoZSIsImdldFdyYXBwZWRPYmplY3QiLCJjYWNoZWRJZGVudGlmaWVyIiwid2luZG93SlNPYmplY3RJZCIsImNhY2hlZEpTT2JqZWN0c0J5SWQiLCJ3aW5kb3ciLCJ1cmwiLCJzdGFydHNXaXRoIiwiVVJMIiwic3Vic3RyaW5nIiwiZG9jdW1lbnQiLCJiYXNlVVJJIiwidG9TdHJpbmciLCJpbXBvcnQiLCJKU0NhbGxSZXN1bHRUeXBlIiwibmV4dEpzT2JqZWN0SWQiLCJhdHRhY2hSZXZpdmVyIiwicmV2aXZlciIsInB1c2giLCJjcmVhdGVKU09iamVjdFJlZmVyZW5jZSIsImpzT2JqZWN0IiwicmVzdWx0IiwiY3JlYXRlSlNTdHJlYW1SZWZlcmVuY2UiLCJzdHJlYW1SZWZlcmVuY2UiLCJsZW5ndGgiLCJBcnJheUJ1ZmZlciIsIlVpbnQ4QXJyYXkiLCJCbG9iIiwic2l6ZSIsImJ1ZmZlciIsImJ5dGVMZW5ndGgiLCJqc09iamVjdFJlZmVyZW5jZSIsImVycm9yIiwicGFyc2VKc29uV2l0aFJldml2ZXJzIiwiY2FsbERpc3BhdGNoZXIiLCJqc29uIiwiSlNPTiIsInBhcnNlIiwia2V5IiwiaW5pdGlhbFZhbHVlIiwicmVkdWNlIiwibGF0ZXN0VmFsdWUiLCJnZXREZWZhdWx0Q2FsbERpc3BhdGNoZXIiLCJhdHRhY2hEaXNwYXRjaGVyIiwiZG90TmV0Q2FsbERpc3BhdGNoZXIiLCJDYWxsRGlzcGF0Y2hlciIsImludm9rZU1ldGhvZCIsImFzc2VtYmx5TmFtZSIsIm1ldGhvZElkZW50aWZpZXIiLCJpbnZva2VEb3ROZXRTdGF0aWNNZXRob2QiLCJpbnZva2VNZXRob2RBc3luYyIsImludm9rZURvdE5ldFN0YXRpY01ldGhvZEFzeW5jIiwiZGlzcG9zZUpTT2JqZWN0UmVmZXJlbmNlIiwiaWQiLCJkaXNwb3NlSlNPYmplY3RSZWZlcmVuY2VCeUlkIiwiX2RvdE5ldENhbGxEaXNwYXRjaGVyIiwiX2J5dGVBcnJheXNUb0JlUmV2aXZlZCIsIl9wZW5kaW5nRG90TmV0VG9KU1N0cmVhbXMiLCJfcGVuZGluZ0FzeW5jQ2FsbHMiLCJfbmV4dEFzeW5jQ2FsbElkIiwiZ2V0RG90TmV0Q2FsbERpc3BhdGNoZXIiLCJpbnZva2VKU0Zyb21Eb3ROZXQiLCJhcmdzSnNvbiIsInJlc3VsdFR5cGUiLCJ0YXJnZXRJbnN0YW5jZUlkIiwiY3JlYXRlSlNDYWxsUmVzdWx0IiwicHJvY2Vzc0pTQ2FsbCIsInN0cmluZ2lmeUFyZ3MiLCJiZWdpbkludm9rZUpTRnJvbURvdE5ldCIsImFzeW5jSGFuZGxlIiwidmFsdWVPclByb21pc2UiLCJzZXJpYWxpemVkUmVzdWx0IiwiZW5kSW52b2tlSlNGcm9tRG90TmV0Iiwic2VyaWFsaXplZEVycm9yIiwic3RyaW5naWZ5IiwiZm9ybWF0RXJyb3IiLCJmaW5kSlNGdW5jdGlvbiIsImVuZEludm9rZURvdE5ldEZyb21KUyIsImFzeW5jQ2FsbElkIiwic3VjY2VzcyIsInJlc3VsdEpzb25PckV4Y2VwdGlvbk1lc3NhZ2UiLCJyZXN1bHRPckVycm9yIiwiY29tcGxldGVQZW5kaW5nQ2FsbCIsInBhcnNlSW50IiwiaW52b2tlRG90TmV0TWV0aG9kIiwiaW52b2tlRG90TmV0TWV0aG9kQXN5bmMiLCJkb3ROZXRPYmplY3RJZCIsImludm9rZURvdE5ldEZyb21KUyIsInJlc3VsdEpzb24iLCJyZXN1bHRQcm9taXNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJiZWdpbkludm9rZURvdE5ldEZyb21KUyIsImV4IiwicmVjZWl2ZUJ5dGVBcnJheSIsImRhdGEiLCJwcm9jZXNzQnl0ZUFycmF5IiwiZGVsZXRlIiwic3VwcGx5RG90TmV0U3RyZWFtIiwic3RyZWFtSWQiLCJzdHJlYW0iLCJoYXMiLCJwZW5kaW5nU3RyZWFtIiwiUGVuZGluZ1N0cmVhbSIsImdldERvdE5ldFN0cmVhbVByb21pc2UiLCJzdHJlYW1Qcm9taXNlIiwiYXN5bmNDYWxsIiwibWVzc2FnZSIsInN0YWNrIiwidGFyZ2V0SW5zdGFuY2UiLCJrZXlzIiwic3BsaXQiLCJjdXJyZW50IiwiaSIsIkRvdE5ldE9iamVjdCIsIl9pZCIsIl9jYWxsRGlzcGF0Y2hlciIsImRpc3Bvc2UiLCJjYXRjaCIsImNvbnNvbGUiLCJzZXJpYWxpemVBc0FyZyIsInZhbHVlIiwiaW5kZXgiLCJieXRlQXJyYXkiLCJEb3ROZXRTdHJlYW0iLCJfc3RyZWFtUHJvbWlzZSIsImFycmF5QnVmZmVyIiwiUmVzcG9uc2UiLCJyZXR1cm5WYWx1ZSIsIkRlZmF1bHQiLCJKU09iamVjdFJlZmVyZW5jZSIsIkpTU3RyZWFtUmVmZXJlbmNlIiwiSlNWb2lkUmVzdWx0IiwibmV4dEJ5dGVBcnJheUluZGV4IiwiYXJnUmVwbGFjZXIiLCJzZW5kQnl0ZUFycmF5IiwianNvblZhbHVlIiwiRXZlbnRGaWVsZEluZm8iLCJjb21wb25lbnRJZCIsImZpZWxkVmFsdWUiLCJmcm9tRXZlbnQiLCJldmVudCIsImVsZW0iLCJ0YXJnZXQiLCJFbGVtZW50IiwiZmllbGREYXRhIiwiSFRNTElucHV0RWxlbWVudCIsInR5cGUiLCJ0b0xvd2VyQ2FzZSIsImNoZWNrZWQiLCJIVE1MU2VsZWN0RWxlbWVudCIsIkhUTUxUZXh0QXJlYUVsZW1lbnQiLCJnZXRGb3JtRmllbGREYXRhIiwiZXZlbnRUeXBlUmVnaXN0cnkiLCJicm93c2VyRXZlbnROYW1lc1RvQWxpYXNlcyIsImV2ZW50TmFtZUFsaWFzUmVnaXN0ZXJlZENhbGxiYWNrcyIsImdldEV2ZW50VHlwZU9wdGlvbnMiLCJldmVudE5hbWUiLCJnZXRCcm93c2VyRXZlbnROYW1lIiwicG9zc2libGVBbGlhc0V2ZW50TmFtZSIsImV2ZW50T3B0aW9ucyIsImJyb3dzZXJFdmVudE5hbWUiLCJyZWdpc3RlckJ1aWx0SW5FdmVudFR5cGUiLCJldmVudE5hbWVzIiwib3B0aW9ucyIsImZvckVhY2giLCJwYXJzZVRvdWNoIiwidG91Y2hMaXN0IiwidG91Y2hlcyIsInRvdWNoIiwiY2xpZW50WCIsImNsaWVudFkiLCJzY3JlZW5YIiwic2NyZWVuWSIsInBhZ2VYIiwicGFnZVkiLCJwYXJzZU1vdXNlRXZlbnQiLCJkZXRhaWwiLCJvZmZzZXRYIiwib2Zmc2V0WSIsIm1vdmVtZW50WCIsIm1vdmVtZW50WSIsImJ1dHRvbiIsImJ1dHRvbnMiLCJjdHJsS2V5Iiwic2hpZnRLZXkiLCJhbHRLZXkiLCJtZXRhS2V5IiwiY3JlYXRlRXZlbnRBcmdzIiwiZWxlbWVudCIsInRpbWVCYXNlZElucHV0cyIsImluZGV4T2YiLCJnZXRBdHRyaWJ1dGUiLCJpc1RpbWVCYXNlZElucHV0Iiwibm9ybWFsaXplZFZhbHVlIiwibm9ybWFsaXplVGltZUJhc2VkVmFsdWUiLCJpc011bHRpcGxlU2VsZWN0SW5wdXQiLCJzZWxlY3RFbGVtZW50IiwiQXJyYXkiLCJmcm9tIiwiZmlsdGVyIiwib3B0aW9uIiwic2VsZWN0ZWQiLCJtYXAiLCJ0YXJnZXRJc0NoZWNrYm94IiwidGFnTmFtZSIsImlzQ2hlY2tib3giLCJlIiwicGFyc2VEcmFnRXZlbnQiLCJkYXRhVHJhbnNmZXIiLCJkcm9wRWZmZWN0IiwiZWZmZWN0QWxsb3dlZCIsImZpbGVzIiwiZiIsIm5hbWUiLCJpdGVtcyIsImtpbmQiLCJ0eXBlcyIsInBhcnNlS2V5Ym9hcmRFdmVudCIsImNvZGUiLCJsb2NhdGlvbiIsInJlcGVhdCIsImlzQ29tcG9zaW5nIiwicGFyc2VFcnJvckV2ZW50IiwiZmlsZW5hbWUiLCJsaW5lbm8iLCJjb2xubyIsInBhcnNlUHJvZ3Jlc3NFdmVudCIsImxlbmd0aENvbXB1dGFibGUiLCJsb2FkZWQiLCJ0b3RhbCIsInBhcnNlVG91Y2hFdmVudCIsInRhcmdldFRvdWNoZXMiLCJjaGFuZ2VkVG91Y2hlcyIsInBhcnNlUG9pbnRlckV2ZW50IiwicG9pbnRlcklkIiwid2lkdGgiLCJoZWlnaHQiLCJwcmVzc3VyZSIsInRpbHRYIiwidGlsdFkiLCJwb2ludGVyVHlwZSIsImlzUHJpbWFyeSIsInBhcnNlV2hlZWxFdmVudCIsImRlbHRhWCIsImRlbHRhWSIsImRlbHRhWiIsImRlbHRhTW9kZSIsInBlbmRpbmdSb290Q29tcG9uZW50Q29udGFpbmVycyIsIm1hbmFnZXIiLCJqc0NvbXBvbmVudFBhcmFtZXRlcnNCeUlkZW50aWZpZXIiLCJuZXh0UGVuZGluZ0R5bmFtaWNSb290Q29tcG9uZW50SWRlbnRpZmllciIsIlJvb3RDb21wb25lbnRzRnVuY3Rpb25zIiwiYWRkIiwidG9FbGVtZW50IiwiY29tcG9uZW50SWRlbnRpZmllciIsImluaXRpYWxQYXJhbWV0ZXJzIiwiY29udGFpbmVySWRlbnRpZmllciIsImdldFJlcXVpcmVkTWFuYWdlciIsImNvbXBvbmVudCIsIkR5bmFtaWNSb290Q29tcG9uZW50Iiwic2V0UGFyYW1ldGVycyIsIkV2ZW50Q2FsbGJhY2tXcmFwcGVyIiwiaW52b2tlIiwiYXJnIiwiX2NhbGxiYWNrIiwic2V0Q2FsbGJhY2siLCJjYWxsYmFjayIsIl9zZWxmSlNPYmplY3RSZWZlcmVuY2UiLCJnZXRKU09iamVjdFJlZmVyZW5jZSIsInBhcmFtZXRlcnMiLCJfanNFdmVudENhbGxiYWNrV3JhcHBlcnMiLCJfY29tcG9uZW50SWQiLCJwYXJhbWV0ZXIiLCJtYXBwZWRQYXJhbWV0ZXJzIiwiZW50cmllcyIsInBhcmFtZXRlckNvdW50IiwiY2FsbGJhY2tXcmFwcGVyIiwianNFdmVudENhbGxiYWNrV3JhcHBlciIsInZhbHVlcyIsImludGVyb3BNZXRob2RzQnlSZW5kZXJlciIsInJlbmRlcmVyQXR0YWNoZWRMaXN0ZW5lcnMiLCJyZW5kZXJlckJ5SWRSZXNvbHZlck1hcCIsImlzUmVuZGVyZXJBdHRhY2hlZCIsImJyb3dzZXJSZW5kZXJlcklkIiwiZGlzcGF0Y2hFdmVudCIsImV2ZW50RGVzY3JpcHRvciIsImV2ZW50QXJncyIsImRpc3BhdGNoRXZlbnRNaWRkbGV3YXJlIiwiZXZlbnRIYW5kbGVySWQiLCJnZXRJbnRlcm9wTWV0aG9kcyIsInJlbmRlcmVySWQiLCJpbnRlcm9wTWV0aG9kcyIsImNvbnRpbnVhdGlvbiIsIm5vbkJ1YmJsaW5nRXZlbnRzIiwidG9Mb29rdXAiLCJhbHdheXNQcmV2ZW50RGVmYXVsdEV2ZW50cyIsInN1Ym1pdCIsImRpc2FibGVhYmxlRXZlbnROYW1lcyIsIkV2ZW50RGVsZWdhdG9yIiwiYWZ0ZXJDbGlja0NhbGxiYWNrcyIsImV2ZW50RGVsZWdhdG9ySWQiLCJuZXh0RXZlbnREZWxlZ2F0b3JJZCIsImV2ZW50c0NvbGxlY3Rpb25LZXkiLCJldmVudEluZm9TdG9yZSIsIkV2ZW50SW5mb1N0b3JlIiwib25HbG9iYWxFdmVudCIsInNldExpc3RlbmVyIiwicmVuZGVyaW5nQ29tcG9uZW50SWQiLCJpbmZvRm9yRWxlbWVudCIsImdldEV2ZW50SGFuZGxlckluZm9zRm9yRWxlbWVudCIsImV4aXN0aW5nSGFuZGxlciIsImdldEhhbmRsZXIiLCJ1cGRhdGUiLCJuZXdJbmZvIiwic2V0SGFuZGxlciIsInJlbW92ZUxpc3RlbmVyIiwiaW5mbyIsInJlbW92ZSIsImVsZW1lbnRFdmVudEluZm9zIiwicmVtb3ZlSGFuZGxlciIsInJlbW92ZUxpc3RlbmVyc0ZvckVsZW1lbnQiLCJpbmZvc0ZvckVsZW1lbnQiLCJoYW5kbGVySW5mbyIsImVudW1lcmF0ZUhhbmRsZXJzIiwibm90aWZ5QWZ0ZXJDbGljayIsImFkZEdsb2JhbExpc3RlbmVyIiwic2V0U3RvcFByb3BhZ2F0aW9uIiwiY3VycmVudFZhbHVlIiwic3RvcFByb3BhZ2F0aW9uIiwiZGVjcmVtZW50Q291bnRCeUV2ZW50TmFtZSIsInNldFByZXZlbnREZWZhdWx0IiwicHJldmVudERlZmF1bHQiLCJhZGRBY3RpdmVHbG9iYWxMaXN0ZW5lciIsImV2dCIsImRpc3BhdGNoR2xvYmFsRXZlbnRUb0FsbEVsZW1lbnRzIiwiZXZlbnROYW1lQWxpYXNlcyIsImFsaWFzIiwiYnJvd3NlckV2ZW50IiwicGF0aCIsImNvbXBvc2VkUGF0aCIsImNhbmRpZGF0ZUV2ZW50VGFyZ2V0Iiwic2hpZnQiLCJldmVudEFyZ3NJc1BvcHVsYXRlZCIsImV2ZW50SXNOb25CdWJibGluZyIsInByb3RvdHlwZSIsImNhbGwiLCJzdG9wUHJvcGFnYXRpb25XYXNSZXF1ZXN0ZWQiLCJjYW5kaWRhdGVFbGVtZW50IiwiaGFuZGxlckluZm9zIiwicmF3QnJvd3NlckV2ZW50TmFtZSIsIkhUTUxCdXR0b25FbGVtZW50IiwiZGlzYWJsZWQiLCJldmVudE9wdGlvbnNJZlJlZ2lzdGVyZWQiLCJldmVudEZpZWxkSW5mbyIsImNyZWF0ZUlmTmVlZGVkIiwiRXZlbnRIYW5kbGVySW5mb3NGb3JFbGVtZW50IiwiZ2xvYmFsTGlzdGVuZXIiLCJpbmZvc0J5RXZlbnRIYW5kbGVySWQiLCJjb3VudEJ5RXZlbnROYW1lIiwiaGFuZGxlRXZlbnROYW1lQWxpYXNBZGRlZCIsInVzZUNhcHR1cmUiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNhcHR1cmUiLCJwYXNzaXZlIiwib2xkRXZlbnRIYW5kbGVySWQiLCJuZXdFdmVudEhhbmRsZXJJZCIsImFsaWFzRXZlbnROYW1lIiwiY291bnRCeUFsaWFzRXZlbnROYW1lIiwiaGFuZGxlcnMiLCJwcmV2ZW50RGVmYXVsdEZsYWdzIiwic3RvcFByb3BhZ2F0aW9uRmxhZ3MiLCJoYW5kbGVyIiwic2V0VmFsdWUiLCJsb2dpY2FsQ2hpbGRyZW5Qcm9wbmFtZSIsIlN5bWJvbCIsImxvZ2ljYWxQYXJlbnRQcm9wbmFtZSIsInRvTG9naWNhbEVsZW1lbnQiLCJhbGxvd0V4aXN0aW5nQ29udGVudHMiLCJjaGlsZHJlbkFycmF5IiwiY2hpbGROb2RlcyIsImNoaWxkIiwiY2hpbGRMb2dpY2FsRWxlbWVudCIsImVtcHR5TG9naWNhbEVsZW1lbnQiLCJnZXRMb2dpY2FsQ2hpbGRyZW5BcnJheSIsInJlbW92ZUxvZ2ljYWxDaGlsZCIsImNyZWF0ZUFuZEluc2VydExvZ2ljYWxDb250YWluZXIiLCJjaGlsZEluZGV4IiwiY29udGFpbmVyRWxlbWVudCIsImNyZWF0ZUNvbW1lbnQiLCJpbnNlcnRMb2dpY2FsQ2hpbGQiLCJjaGlsZEFzTG9naWNhbEVsZW1lbnQiLCJub2RlVG9JbnNlcnQiLCJDb21tZW50IiwiZXhpc3RpbmdHcmFuY2hpbGRyZW4iLCJsYXN0Tm9kZVRvSW5zZXJ0IiwiZmluZExhc3REb21Ob2RlSW5SYW5nZSIsInJhbmdlIiwiUmFuZ2UiLCJzZXRTdGFydEJlZm9yZSIsInNldEVuZEFmdGVyIiwiZXh0cmFjdENvbnRlbnRzIiwiZXhpc3RpbmdMb2dpY2FsUGFyZW50IiwiZ2V0TG9naWNhbFBhcmVudCIsImV4aXN0aW5nU2libGluZ0FycmF5IiwiZXhpc3RpbmdDaGlsZEluZGV4Iiwic3BsaWNlIiwibmV3U2libGluZ3MiLCJuZXh0U2libGluZyIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiLCJhcHBlbmREb21Ob2RlIiwiY2hpbGRUb1JlbW92ZSIsImdyYW5kY2hpbGRyZW5BcnJheSIsImRvbU5vZGVUb1JlbW92ZSIsInJlbW92ZUNoaWxkIiwiZ2V0TG9naWNhbENoaWxkIiwiaXNTdmdFbGVtZW50IiwiY2xvc2VzdEVsZW1lbnQiLCJnZXRDbG9zZXN0RG9tRWxlbWVudCIsIm5hbWVzcGFjZVVSSSIsImdldExvZ2ljYWxOZXh0U2libGluZyIsInNpYmxpbmdzIiwiZGVwdGhGaXJzdE5vZGVUcmVlVHJhdmVyc2FsIiwiY2hpbGRyZW4iLCJwZXJtdXRlTG9naWNhbENoaWxkcmVuIiwicGVybXV0YXRpb25MaXN0IiwibGlzdEVudHJ5IiwibW92ZVJhbmdlU3RhcnQiLCJmcm9tU2libGluZ0luZGV4IiwibW92ZVJhbmdlRW5kIiwibWFya2VyIiwibW92ZVRvQmVmb3JlTWFya2VyIiwiaW5zZXJ0QmVmb3JlTm9kZSIsInRvU2libGluZ0luZGV4IiwicGFyZW50RG9tTm9kZSIsImVsZW1lbnRUb01vdmUiLCJtb3ZlRW5kTm9kZSIsIm5leHRUb01vdmUiLCJuZXh0TmV4dCIsImxvZ2ljYWxFbGVtZW50IiwiRG9jdW1lbnRGcmFnbWVudCIsImFwcGVuZENoaWxkIiwicGFyZW50TG9naWNhbE5leHRTaWJsaW5nIiwicHJldmlvdXNTaWJsaW5nIiwibG9naWNhbFBhcmVudCIsImxhc3RDaGlsZCIsImdldENhcHR1cmVJZEF0dHJpYnV0ZU5hbWUiLCJyZWZlcmVuY2VDYXB0dXJlSWQiLCJlbGVtZW50UmVmS2V5Iiwic2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yIiwiZ2V0RWxlbWVudEJ5Q2FwdHVyZUlkIiwiZGVmZXJyZWRWYWx1ZVByb3BuYW1lIiwiaXNNdWx0aXBsZVNlbGVjdEVsZW1lbnQiLCJzZXRTaW5nbGVTZWxlY3RFbGVtZW50VmFsdWUiLCJzZXREZWZlcnJlZEVsZW1lbnRWYWx1ZSIsInNldE11bHRpcGxlU2VsZWN0RWxlbWVudFZhbHVlIiwidHJ5U2V0U2VsZWN0VmFsdWVGcm9tT3B0aW9uRWxlbWVudCIsIm9wdGlvbkVsZW1lbnQiLCJzZWxlY3RFbGVtIiwicGFyZW50RWxlbWVudCIsImZpbmRDbG9zZXN0QW5jZXN0b3JTZWxlY3RFbGVtZW50IiwiaXNCbGF6b3JTZWxlY3RFbGVtZW50IiwiX2JsYXpvckRlZmVycmVkVmFsdWUiLCJzaGFyZWRUZW1wbGF0ZUVsZW1Gb3JQYXJzaW5nIiwiY3JlYXRlRWxlbWVudCIsInNoYXJlZFN2Z0VsZW1Gb3JQYXJzaW5nIiwiY3JlYXRlRWxlbWVudE5TIiwiZWxlbWVudHNUb0NsZWFyT25Sb290Q29tcG9uZW50UmVuZGVyIiwiU2V0IiwiaW50ZXJhY3RpdmVSb290Q29tcG9uZW50UHJvcG5hbWUiLCJwcmVzZXJ2ZUNvbnRlbnRPbkRpc3Bvc2FsUHJvcG5hbWUiLCJCcm93c2VyUmVuZGVyZXIiLCJyb290Q29tcG9uZW50SWRzIiwiY2hpbGRDb21wb25lbnRMb2NhdGlvbnMiLCJldmVudERlbGVnYXRvciIsImhhc0ludGVyYWN0aXZlUm91dGVyIiwiZXZlbnRIYXNTcGVjaWFsS2V5IiwiZGVmYXVsdFByZXZlbnRlZCIsImFuY2hvclRhcmdldCIsImNhbmRpZGF0ZSIsIkhUTUxBbmNob3JFbGVtZW50IiwiU1ZHQUVsZW1lbnQiLCJmaW5kQW5jaG9yVGFyZ2V0IiwidGFyZ2V0QXR0cmlidXRlVmFsdWUiLCJoYXNBdHRyaWJ1dGUiLCJjYW5Qcm9jZXNzQW5jaG9yIiwiYWJzb2x1dGVIcmVmIiwidG9BYnNvbHV0ZVVyaSIsImlzV2l0aGluQmFzZVVyaVNwYWNlIiwicGVyZm9ybUludGVybmFsTmF2aWdhdGlvbiIsImhhbmRsZUNsaWNrRm9yTmF2aWdhdGlvbkludGVyY2VwdGlvbiIsImdldFJvb3RDb21wb25lbnRDb3VudCIsImF0dGFjaFJvb3RDb21wb25lbnRUb0xvZ2ljYWxFbGVtZW50IiwiYXBwZW5kQ29udGVudCIsImlzSW50ZXJhY3RpdmVSb290Q29tcG9uZW50RWxlbWVudCIsIm1hcmtBc0ludGVyYWN0aXZlUm9vdENvbXBvbmVudEVsZW1lbnQiLCJhdHRhY2hDb21wb25lbnRUb0VsZW1lbnQiLCJ1cGRhdGVDb21wb25lbnQiLCJiYXRjaCIsImVkaXRzIiwicmVmZXJlbmNlRnJhbWVzIiwiZGV0YWNoRXZlbnRIYW5kbGVyc0Zyb21FbGVtZW50IiwidGV4dENvbnRlbnQiLCJvd25lckRvY3VtZW50IiwiZ2V0Um9vdE5vZGUiLCJhY3RpdmVFbGVtZW50QmVmb3JlIiwiYWN0aXZlRWxlbWVudCIsImFwcGx5RWRpdHMiLCJIVE1MRWxlbWVudCIsImZvY3VzIiwiZGlzcG9zZUNvbXBvbmVudCIsImRpc3Bvc2VFdmVudEhhbmRsZXIiLCJjaGlsZE5vZGUiLCJjdXJyZW50RGVwdGgiLCJjaGlsZEluZGV4QXRDdXJyZW50RGVwdGgiLCJhcnJheUJ1aWxkZXJTZWdtZW50UmVhZGVyIiwiZWRpdFJlYWRlciIsImZyYW1lUmVhZGVyIiwiZWRpdHNWYWx1ZXMiLCJlZGl0c09mZnNldCIsIm9mZnNldCIsIm1heEVkaXRJbmRleEV4Y2wiLCJjb3VudCIsImVkaXRJbmRleCIsImVkaXQiLCJkaWZmUmVhZGVyIiwiZWRpdHNFbnRyeSIsImVkaXRUeXBlIiwicHJlcGVuZEZyYW1lIiwiZnJhbWVJbmRleCIsIm5ld1RyZWVJbmRleCIsImZyYW1lIiwicmVmZXJlbmNlRnJhbWVzRW50cnkiLCJzaWJsaW5nSW5kZXgiLCJpbnNlcnRGcmFtZSIsInJlbW92ZUZyYW1lIiwic2V0QXR0cmlidXRlIiwiYXBwbHlBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJhdHRyaWJ1dGVOYW1lIiwicmVtb3ZlZEF0dHJpYnV0ZU5hbWUiLCJzZXRPclJlbW92ZUF0dHJpYnV0ZU9yUHJvcGVydHkiLCJ1cGRhdGVUZXh0IiwidGV4dE5vZGUiLCJUZXh0IiwidXBkYXRlTWFya3VwIiwiaW5zZXJ0TWFya3VwIiwic3RlcEluIiwic3RlcE91dCIsInBlcm11dGF0aW9uTGlzdEVudHJ5IiwibW92ZVRvU2libGluZ0luZGV4IiwicGVybXV0YXRpb25MaXN0RW5kIiwiZnJhbWVzIiwiZnJhbWVUeXBlIiwiaW5zZXJ0RWxlbWVudCIsInRleHQiLCJpbnNlcnRUZXh0IiwiYXR0cmlidXRlIiwiaW5zZXJ0Q29tcG9uZW50IiwicmVnaW9uIiwiaW5zZXJ0RnJhbWVSYW5nZSIsInN1YnRyZWVMZW5ndGgiLCJlbGVtZW50UmVmZXJlbmNlQ2FwdHVyZSIsImVsZW1lbnRSZWZlcmVuY2VDYXB0dXJlSWQiLCJtYXJrdXAiLCJuYW1lZEV2ZW50IiwiZWxlbWVudE5hbWUiLCJuZXdEb21FbGVtZW50UmF3IiwibmV3RWxlbWVudCIsImluc2VydGVkIiwiZGVzY2VuZGFudHNFbmRJbmRleEV4Y2wiLCJkZXNjZW5kYW50SW5kZXgiLCJkZXNjZW5kYW50RnJhbWUiLCJIVE1MT3B0aW9uRWxlbWVudCIsImNoaWxkQ29tcG9uZW50SWQiLCJ0ZXh0RnJhbWUiLCJjcmVhdGVUZXh0Tm9kZSIsIm1hcmt1cEZyYW1lIiwibWFya3VwQ29udGFpbmVyIiwicGFyc2VkTWFya3VwIiwibWFya3VwQ29udGVudCIsImlubmVySFRNTCIsImNvbnRlbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwib2xkU2NyaXB0RWxlbSIsIm5ld1NjcmlwdEVsZW0iLCJnZXRBdHRyaWJ1dGVOYW1lcyIsImF0dHJpYk5hbWUiLCJyZXBsYWNlQ2hpbGQiLCJsb2dpY2FsU2libGluZ0luZGV4IiwiZmlyc3RDaGlsZCIsInRvRG9tRWxlbWVudCIsImF0dHJpYnV0ZUZyYW1lIiwiYXR0cmlidXRlRXZlbnRIYW5kbGVySWQiLCJzdHJpcE9uUHJlZml4IiwiYXR0cmlidXRlVmFsdWUiLCJzdGFydEluZGV4IiwiZW5kSW5kZXhFeGNsIiwib3JpZ0NoaWxkSW5kZXgiLCJjb3VudERlc2NlbmRhbnRGcmFtZXMiLCJ2YWx1ZU9yTnVsbFRvUmVtb3ZlIiwiZW5kc1dpdGgiLCJub3JtYWxpemVJbnB1dFZhbHVlIiwidHJ5QXBwbHlWYWx1ZVByb3BlcnR5IiwidHJ5QXBwbHlDaGVja2VkUHJvcGVydHkiLCJ0cnlBcHBseVNwZWNpYWxQcm9wZXJ0eSIsImFwcGx5SW50ZXJuYWxBdHRyaWJ1dGUiLCJpbnRlcm5hbEF0dHJpYnV0ZU5hbWVQcmVmaXgiLCJpbnRlcm5hbEF0dHJpYnV0ZU5hbWUiLCJldmVudFN0b3BQcm9wYWdhdGlvbkF0dHJpYnV0ZU5hbWVQcmVmaXgiLCJldmVudFByZXZlbnREZWZhdWx0QXR0cmlidXRlTmFtZVByZWZpeCIsImlzSW50ZXJhY3RpdmUiLCJicm93c2VyUmVuZGVyZXJzIiwiaW50ZXJhY3RpdmVSb3V0ZXJSZW5kZXJlcklkIiwidGVzdEFuY2hvciIsInNob3VsZFJlc2V0U2Nyb2xsQWZ0ZXJOZXh0QmF0Y2giLCJocmVmIiwiYmFzZVVyaVdpdGhvdXRUcmFpbGluZ1NsYXNoIiwiYmFzZVVyaSIsImxhc3RJbmRleE9mIiwibmV4dENoYXIiLCJjaGFyQXQiLCJzY3JvbGxUb0VsZW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInNjcm9sbEludG9WaWV3IiwicmVsYXRpdmVVcmkiLCJnZXRJbnRlcmFjdGl2ZVJvdXRlclJlbmRlcmVySWQiLCJoYXNSZWdpc3RlcmVkTmF2aWdhdGlvbkV2ZW50TGlzdGVuZXJzIiwiY3VycmVudEhpc3RvcnlJbmRleCIsImN1cnJlbnRMb2NhdGlvbkNoYW5naW5nQ2FsbElkIiwibmF2aWdhdGlvbkNhbGxiYWNrcyIsInBvcFN0YXRlQ2FsbGJhY2siLCJhc3luYyIsInN0YXRlIiwiaWdub3JlUGVuZGluZ05hdmlnYXRpb24iLCJjYWxsYmFja3MiLCJnZXRJbnRlcmFjdGl2ZVJvdXRlck5hdmlnYXRpb25DYWxsYmFja3MiLCJoYXNMb2NhdGlvbkNoYW5naW5nRXZlbnRMaXN0ZW5lcnMiLCJfYiIsIl9pbmRleCIsInVzZXJTdGF0ZSIsIl9jIiwiZGVsdGEiLCJ1cmkiLCJuYXZpZ2F0ZUhpc3RvcnlXaXRob3V0UG9wU3RhdGVDYWxsYmFjayIsIm5vdGlmeUxvY2F0aW9uQ2hhbmdpbmciLCJub3RpZnlMb2NhdGlvbkNoYW5nZWQiLCJyZXNvbHZlQ3VycmVudE5hdmlnYXRpb24iLCJpbnRlcm5hbEZ1bmN0aW9ucyIsImxpc3RlbkZvck5hdmlnYXRpb25FdmVudHMiLCJsb2NhdGlvbkNoYW5nZWRDYWxsYmFjayIsImxvY2F0aW9uQ2hhbmdpbmdDYWxsYmFjayIsImxvY2F0aW9uQ2hhbmdlZCIsImxvY2F0aW9uQ2hhbmdpbmciLCJvblBvcFN0YXRlIiwiaGlzdG9yeSIsImVuYWJsZU5hdmlnYXRpb25JbnRlcmNlcHRpb24iLCJzZXRIYXNMb2NhdGlvbkNoYW5naW5nTGlzdGVuZXJzIiwiaGFzTGlzdGVuZXJzIiwiZW5kTG9jYXRpb25DaGFuZ2luZyIsImNhbGxJZCIsInNob3VsZENvbnRpbnVlTmF2aWdhdGlvbiIsIm5hdmlnYXRlVG8iLCJuYXZpZ2F0ZVRvQ29yZSIsInJlZnJlc2giLCJmb3JjZVJlbG9hZCIsInJlbG9hZCIsImdldEJhc2VVUkkiLCJnZXRMb2NhdGlvbkhyZWYiLCJza2lwTG9jYXRpb25DaGFuZ2luZ0NhbGxiYWNrIiwiYWJzb2x1dGVVcmkiLCJmb3JjZUxvYWQiLCJyZXBsYWNlSGlzdG9yeUVudHJ5IiwiaGlzdG9yeUVudHJ5U3RhdGUiLCJyZXBsYWNlIiwidGVtcG9yYXJ5VXJpIiwicmVwbGFjZVN0YXRlIiwicGVyZm9ybUV4dGVybmFsTmF2aWdhdGlvbiIsImFic29sdXRlSW50ZXJuYWxIcmVmIiwiaW50ZXJjZXB0ZWRMaW5rIiwib2xkVXJsIiwibmV3VXJsIiwiYSIsImIiLCJvcmlnaW4iLCJwYXRobmFtZSIsInNlYXJjaCIsImhhc2giLCJpc1NhbWVQYWdlV2l0aEhhc2giLCJzYXZlVG9Ccm93c2VySGlzdG9yeSIsImhhc2hJbmRleCIsInBlcmZvcm1TY3JvbGxUb0VsZW1lbnRPblRoZVNhbWVQYWdlIiwidXJsMSIsInVybDIiLCJwYXJzZWRVcmwxIiwicGFyc2VkVXJsMiIsInByb3RvY29sIiwiaG9zdCIsInBvcnQiLCJpc0ZvclNhbWVQYXRoIiwicHVzaFN0YXRlIiwib2xkUG9wU3RhdGVDYWxsYmFjayIsImdvIiwiaW50ZXJjZXB0ZWQiLCJpbnRlcm5hbERlc3RpbmF0aW9uSHJlZiIsImFsbCIsImRvbUZ1bmN0aW9ucyIsInByZXZlbnRTY3JvbGwiLCJTVkdFbGVtZW50IiwiZm9jdXNCeVNlbGVjdG9yIiwidGFiSW5kZXgiLCJWaXJ0dWFsaXplIiwiZG90TmV0SGVscGVyIiwic3BhY2VyQmVmb3JlIiwic3BhY2VyQWZ0ZXIiLCJyb290TWFyZ2luIiwic2Nyb2xsQ29udGFpbmVyIiwiZmluZENsb3Nlc3RTY3JvbGxDb250YWluZXIiLCJkb2N1bWVudEVsZW1lbnQiLCJzdHlsZSIsIm92ZXJmbG93QW5jaG9yIiwicmFuZ2VCZXR3ZWVuU3BhY2VycyIsImNyZWF0ZVJhbmdlIiwiaXNWYWxpZFRhYmxlRWxlbWVudCIsImRpc3BsYXkiLCJpbnRlcnNlY3Rpb25PYnNlcnZlciIsIkludGVyc2VjdGlvbk9ic2VydmVyIiwiZW50cnkiLCJpc0ludGVyc2VjdGluZyIsInNldFN0YXJ0QWZ0ZXIiLCJzZXRFbmRCZWZvcmUiLCJzcGFjZXJTZXBhcmF0aW9uIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiY29udGFpbmVyU2l6ZSIsInJvb3RCb3VuZHMiLCJpbnRlcnNlY3Rpb25SZWN0IiwidG9wIiwiYm91bmRpbmdDbGllbnRSZWN0Iiwib2Zmc2V0SGVpZ2h0IiwiYm90dG9tIiwicm9vdCIsIm9ic2VydmUiLCJtdXRhdGlvbk9ic2VydmVyQmVmb3JlIiwiY3JlYXRlU3BhY2VyTXV0YXRpb25PYnNlcnZlciIsIm11dGF0aW9uT2JzZXJ2ZXJBZnRlciIsIm9ic2VydmVyc0J5RG90TmV0T2JqZWN0SWQiLCJnZXRPYnNlcnZlcnNNYXBFbnRyeSIsInNwYWNlciIsIm9ic2VydmVyT3B0aW9ucyIsImF0dHJpYnV0ZXMiLCJtdXRhdGlvbk9ic2VydmVyIiwiTXV0YXRpb25PYnNlcnZlciIsIm11dGF0aW9ucyIsIm9ic2VydmVyIiwiZGlzY29ubmVjdCIsInVub2JzZXJ2ZSIsIkhUTUxUYWJsZUVsZW1lbnQiLCJIVE1MVGFibGVTZWN0aW9uRWxlbWVudCIsIm9ic2VydmVycyIsImRpc3BhdGNoZXJPYnNlcnZlcnNCeURvdE5ldElkUHJvcG5hbWUiLCJib2R5IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsIm92ZXJmbG93WSIsImRvdE5ldEhlbHBlckRpc3BhdGNoZXIiLCJkb3ROZXRIZWxwZXJJZCIsIlBhZ2VUaXRsZSIsImdldEFuZFJlbW92ZUV4aXN0aW5nVGl0bGUiLCJ0aXRsZUVsZW1lbnRzIiwiaGVhZCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiZXhpc3RpbmdUaXRsZSIsImN1cnJlbnRUaXRsZUVsZW1lbnQiLCJJbnB1dEZpbGUiLCJpbml0IiwiX2JsYXpvcklucHV0RmlsZU5leHRGaWxlSWQiLCJfYmxhem9yRmlsZXNCeUlkIiwiZmlsZUxpc3QiLCJmaWxlIiwibGFzdE1vZGlmaWVkIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiY29udGVudFR5cGUiLCJyZWFkUHJvbWlzZSIsImJsb2IiLCJ0b0ltYWdlRmlsZSIsImZpbGVJZCIsImZvcm1hdCIsIm1heFdpZHRoIiwibWF4SGVpZ2h0Iiwib3JpZ2luYWxGaWxlIiwiZ2V0RmlsZUJ5SWQiLCJsb2FkZWRJbWFnZSIsIm9yaWdpbmFsRmlsZUltYWdlIiwiSW1hZ2UiLCJvbmxvYWQiLCJyZXZva2VPYmplY3RVUkwiLCJzcmMiLCJvbmVycm9yIiwiY3JlYXRlT2JqZWN0VVJMIiwicmVzaXplZEltYWdlQmxvYiIsImRlc2lyZWRXaWR0aFJhdGlvIiwiTWF0aCIsIm1pbiIsImRlc2lyZWRIZWlnaHRSYXRpbyIsImNob3NlblNpemVSYXRpbyIsImNhbnZhcyIsInJvdW5kIiwiZ2V0Q29udGV4dCIsImRyYXdJbWFnZSIsInRvQmxvYiIsInJlYWRGaWxlRGF0YSIsInJlZ2lzdGVyZWRMb2NrcyIsIk5hdmlnYXRpb25Mb2NrIiwiZW5hYmxlTmF2aWdhdGlvblByb21wdCIsIm9uQmVmb3JlVW5sb2FkIiwiZGlzYWJsZU5hdmlnYXRpb25Qcm9tcHQiLCJ0cmFuc21pdHRpbmdEb3ROZXRUb0pTU3RyZWFtcyIsIkJsYXpvciIsImZvcmNlTG9hZE9yT3B0aW9ucyIsInJlcGxhY2VJZlVzaW5nT2xkT3ZlcmxvYWQiLCJyZWdpc3RlckN1c3RvbUV2ZW50VHlwZSIsImFsaWFzR3JvdXAiLCJyb290Q29tcG9uZW50cyIsInJ1bnRpbWUiLCJfaW50ZXJuYWwiLCJuYXZpZ2F0aW9uTWFuYWdlciIsIm5hdmlnYXRpb25NYW5hZ2VySW50ZXJuYWxGdW5jdGlvbnMiLCJkb21XcmFwcGVyIiwiZ2V0SlNEYXRhU3RyZWFtQ2h1bmsiLCJwb3NpdGlvbiIsIm5leHRDaHVua1NpemUiLCJjaHVua0Jsb2IiLCJzbGljZSIsImdldENodW5rRnJvbUJsb2IiLCJieXRlT2Zmc2V0IiwiZ2V0Q2h1bmtGcm9tQXJyYXlCdWZmZXJWaWV3IiwiYXR0YWNoV2ViUmVuZGVyZXJJbnRlcm9wIiwianNDb21wb25lbnRQYXJhbWV0ZXJzIiwianNDb21wb25lbnRJbml0aWFsaXplcnMiLCJtYW5hZ2VySW5zdGFuY2UiLCJpbml0aWFsaXplcklkZW50aWZpZXIiLCJjb21wb25lbnRJZGVudGlmaWVycyIsImluaXRpYWxpemVyRnVuYyIsImVuYWJsZUpTUm9vdENvbXBvbmVudHMiLCJsaXN0ZW5lciIsImludm9rZVJlbmRlcmVyQXR0YWNoZWRMaXN0ZW5lcnMiLCJoYXNGYWlsZWQiLCJuYXRpdmVEZWNvZGVyIiwiVGV4dERlY29kZXIiLCJkZWNvZGVVdGY4IiwiZGVjb2RlIiwiYnl0ZXMiLCJwb3MiLCJsZW4iLCJvdXQiLCJzdWJzdHJpbmdzIiwiYnl0ZTEiLCJieXRlMiIsImJ5dGUzIiwiY29kZXBvaW50IiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiYXBwbHkiLCJqb2luIiwidWludDY0SGlnaFBhcnRTaGlmdCIsInBvdyIsIm1heFNhZmVOdW1iZXJIaWdoUGFydCIsInJlYWRJbnQzMkxFIiwicmVhZFVpbnQzMkxFIiwicmVhZFVpbnQ2NExFIiwiaGlnaFBhcnQiLCJPdXRPZlByb2Nlc3NSZW5kZXJCYXRjaCIsImJhdGNoRGF0YSIsInN0cmluZ1JlYWRlciIsIk91dE9mUHJvY2Vzc1N0cmluZ1JlYWRlciIsImFycmF5UmFuZ2VSZWFkZXIiLCJPdXRPZlByb2Nlc3NBcnJheVJhbmdlUmVhZGVyIiwiT3V0T2ZQcm9jZXNzQXJyYXlCdWlsZGVyU2VnbWVudFJlYWRlciIsIk91dE9mUHJvY2Vzc1JlbmRlclRyZWVEaWZmUmVhZGVyIiwiT3V0T2ZQcm9jZXNzUmVuZGVyVHJlZUVkaXRSZWFkZXIiLCJPdXRPZlByb2Nlc3NSZW5kZXJUcmVlRnJhbWVSZWFkZXIiLCJ1cGRhdGVkQ29tcG9uZW50cyIsImRpc3Bvc2VkQ29tcG9uZW50SWRzIiwiZGlzcG9zZWRFdmVudEhhbmRsZXJJZHMiLCJ1cGRhdGVkQ29tcG9uZW50c0VudHJ5IiwidGFibGVFbnRyeVBvcyIsImRpc3Bvc2VkQ29tcG9uZW50SWRzRW50cnkiLCJlbnRyeVBvcyIsImRpc3Bvc2VkRXZlbnRIYW5kbGVySWRzRW50cnkiLCJiYXRjaERhdGFVaW50OCIsImRpZmYiLCJzdHJpbmdJbmRleCIsInJlYWRTdHJpbmciLCJzdHJpbmdUYWJsZVN0YXJ0SW5kZXgiLCJzdHJpbmdUYWJsZUVudHJ5UG9zIiwibnVtVXRmOEJ5dGVzIiwiYnl0ZSIsInJlYWRMRUIxMjgiLCJjaGFyc1N0YXJ0IiwidXRmOERhdGEiLCJhcnJheVJhbmdlIiwiX2FycmF5QnVpbGRlclNlZ21lbnQiLCJhcnJheUJ1aWxkZXJTZWdtZW50IiwiaXBjTWVzc2FnZVByZWZpeCIsImFwcGxpY2F0aW9uSXNUZXJtaW5hdGVkIiwic2VuZFJlbmRlckNvbXBsZXRlZCIsImJhdGNoSWQiLCJlcnJvck9yTnVsbCIsInNlbmQiLCJzZW5kQmVnaW5JbnZva2VEb3ROZXRGcm9tSlMiLCJzZW5kRW5kSW52b2tlSlNGcm9tRG90TmV0Iiwic3VjY2VlZGVkIiwiZGF0YUJhc2U2NEVuY29kZWQiLCJjaGFyQnl0ZXMiLCJidG9hIiwiYmFzZTY0RW5jb2RlQnl0ZUFycmF5Iiwic2VuZExvY2F0aW9uQ2hhbmdlZCIsInNlbmRMb2NhdGlvbkNoYW5naW5nIiwibWVzc2FnZVR5cGUiLCJzZXJpYWxpemVkTWVzc2FnZSIsInRyeVNlcmlhbGl6ZU1lc3NhZ2UiLCJleHRlcm5hbCIsInNlbmRNZXNzYWdlIiwiV2ViUmVuZGVyZXJJZCIsIkxvZ0xldmVsIiwicmVjZWl2ZUJhc2U2NEJ5dGVBcnJheSIsImJhc2U2NERhdGEiLCJiYXNlNjRUb0FycmF5QnVmZmVyIiwiZGlzcGF0Y2hlciIsImJhc2U2NCIsImJpbmFyeVN0cmluZyIsImF0b2IiLCJjaGFyQ29kZUF0IiwiSlNJbml0aWFsaXplciIsInNpbmdsZVJ1bnRpbWUiLCJsb2dnZXIiLCJhZnRlcnN0YXJ0ZWRDYWxsYmFja3MiLCJ3ZWJSZW5kZXJlcklkIiwiYWZ0ZXJTdGFydGVkQ2FsbGJhY2tzIiwiaW1wb3J0SW5pdGlhbGl6ZXJzQXN5bmMiLCJpbml0aWFsaXplckZpbGVzIiwiaW5pdGlhbGl6ZXJBcmd1bWVudHMiLCJqc0luaXRpYWxpemVyIiwiYXNzZXQiLCJhZGp1c3RlZFBhdGgiLCJtb2R1bGVFeHBvcnRzIiwiaW5pdGlhbGl6ZXIiLCJiZWZvcmVTdGFydCIsImFmdGVyU3RhcnRlZCIsImJlZm9yZVdlYkFzc2VtYmx5U3RhcnQiLCJhZnRlcldlYkFzc2VtYmx5U3RhcnRlZCIsImJlZm9yZVNlcnZlclN0YXJ0IiwiYWZ0ZXJTZXJ2ZXJTdGFydGVkIiwiZmluYWxCZWZvcmVTdGFydCIsIlNlcnZlciIsIldlYkFzc2VtYmx5IiwiZmluYWxBZnRlclN0YXJ0ZWQiLCJydW5DbGFzc2ljSW5pdGlhbGl6ZXJzIiwiaW5pdGlhbGl6ZXJNb2R1bGUiLCJiZWZvcmVXZWJTdGFydCIsImFmdGVyV2ViU3RhcnRlZCIsImhhc09ubHlDbGFzc2ljSW5pdGlhbGl6ZXJzIiwicnVuTGVnYWN5SW5pdGlhbGl6ZXJzIiwiZW5hYmxlQ2xhc3NpY0luaXRpYWxpemVycyIsImxvZyIsIldhcm5pbmciLCJpbml0aWFsaXplcnMiLCJlbnN1cmVJbml0aWFsaXplcnMiLCJ3ZWJBc3NlbWJseSIsImNpcmN1aXQiLCJydW5NdWx0aVJ1bnRpbWVJbml0aWFsaXplcnMiLCJpbXBvcnRBbmRJbnZva2VJbml0aWFsaXplciIsImludm9rZUFmdGVyU3RhcnRlZENhbGxiYWNrcyIsImJsYXpvciIsImF0dGFjaGVkIiwic3RhcnRlZCIsImJvb3QiLCJqc0luaXRpYWxpemVyc1Jlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJjcmVkZW50aWFscyIsImNhY2hlIiwiZmV0Y2hBbmRJbnZva2VJbml0aWFsaXplcnMiLCJtZXNzYWdlSGFuZGxlcnMiLCJBdHRhY2hUb0RvY3VtZW50IiwiZWxlbWVudFNlbGVjdG9yIiwiYmVmb3JlRWxlbWVudFNlbGVjdG9yIiwiYWZ0ZXJFbGVtZW50U2VsZWN0b3IiLCJjb250YWluZXIiLCJnZXRBbmRSZW1vdmVQZW5kaW5nUm9vdENvbXBvbmVudENvbnRhaW5lciIsImJyb3dzZXJSZW5kZXJlciIsImF0dGFjaFJvb3RDb21wb25lbnRUb0VsZW1lbnQiLCJXZWJWaWV3IiwiUmVuZGVyQmF0Y2giLCJiYXRjaERhdGFCYXNlNjQiLCJ1cGRhdGVkQ29tcG9uZW50c1JhbmdlIiwidXBkYXRlZENvbXBvbmVudHNWYWx1ZXMiLCJ1cGRhdGVkQ29tcG9uZW50c0xlbmd0aCIsInJlZmVyZW5jZUZyYW1lc1ZhbHVlcyIsImRpc3Bvc2VkQ29tcG9uZW50SWRzUmFuZ2UiLCJkaXNwb3NlZENvbXBvbmVudElkc1ZhbHVlcyIsImRpc3Bvc2VkQ29tcG9uZW50SWRzTGVuZ3RoIiwiZGlzcG9zZWRFdmVudEhhbmRsZXJJZHNSYW5nZSIsImRpc3Bvc2VkRXZlbnRIYW5kbGVySWRzVmFsdWVzIiwiZGlzcG9zZWRFdmVudEhhbmRsZXJJZHNMZW5ndGgiLCJzY3JvbGxUbyIsInJlbmRlckJhdGNoIiwiTm90aWZ5VW5oYW5kbGVkRXhjZXB0aW9uIiwic3RhY2tUcmFjZSIsImVycm9yVWkiLCJvbmNsaWNrIiwiZGlzbWlzcyIsInNob3dFcnJvck5vdGlmaWNhdGlvbiIsIkJlZ2luSW52b2tlSlMiLCJFbmRJbnZva2VEb3ROZXQiLCJTZW5kQnl0ZUFycmF5VG9KUyIsIk5hdmlnYXRlIiwibmF2aWdhdGlvbk1hbmFnZXJGdW5jdGlvbnMiLCJSZWZyZXNoIiwiU2V0SGFzTG9jYXRpb25DaGFuZ2luZ0xpc3RlbmVycyIsIkVuZExvY2F0aW9uQ2hhbmdpbmciLCJyZWNlaXZlTWVzc2FnZSIsInBhcnNlZE1lc3NhZ2UiLCJtZXNzYWdlQWZ0ZXJQcmVmaXgiLCJ0cnlEZXNlcmlhbGl6ZU1lc3NhZ2UiLCJzdGFydElwY1JlY2VpdmVyIiwicmVjZWl2ZVdlYlZpZXdEb3ROZXREYXRhU3RyZWFtIiwiYnl0ZXNSZWFkIiwiZXJyb3JNZXNzYWdlIiwic3RyZWFtQ29udHJvbGxlciIsInJlYWRhYmxlU3RyZWFtIiwiUmVhZGFibGVTdHJlYW0iLCJzdGFydCIsImNvbnRyb2xsZXIiLCJjbG9zZSIsImVucXVldWUiLCJzdWJhcnJheSIsInJlY2VpdmVEb3ROZXREYXRhU3RyZWFtIiwiY3VycmVudFNjcmlwdCJdLCJtYXBwaW5ncyI6IjBCQUdPLElBQUlBLEVDZ0VDQyxFQWNBQyxHRDdFWixTQUFXRixHQUNQLE1BQU1HLEVBQWUsR0FDZkMsRUFBZ0IsZUFDaEJDLEVBQXFCLGlCQUNyQkMsRUFBa0IsV0FDbEJDLEVBQXFCLGlCQUNyQkMsRUFBNkIsNEJBSW5DLElBQUlDLEVBRUFDLEVBbUNBQyxFQWxDSixNQUFNQyxFQUdGLFdBQUFDLENBQVlDLEdBQ1JDLEtBQUtELFVBQVlBLEVBQ2pCQyxLQUFLQyxnQkFBa0IsSUFBSUMsR0FDdkMsQ0FDUSx3QkFBQUMsQ0FBeUJDLEVBQVlDLEdBQ2pDLElBQUlDLEVBQ0osTUFBTUMsRUFBaUUsUUFBL0NELEVBQUtOLEtBQUtDLGdCQUFnQk8sSUFBSUosVUFBZ0MsSUFBUEUsT0FBZ0IsRUFBU0EsRUFBR0QsR0FDM0csR0FBSUUsRUFDQSxPQUFPQSxFQUVYLE1BQU9FLEVBQVFDLEdBQWNDLEVBQWlCWCxLQUFLRCxVQUFXSyxHQUN4RFEsRUFrWmQsU0FBOEJILEVBQVFDLEVBQVlMLEVBQVVELEdBQ3hELE9BQVFDLEdBQ0osS0FBS1Qs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
